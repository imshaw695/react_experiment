(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function or(e,t){const s=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return t?i=>!!s[i.toLowerCase()]:i=>!!s[i]}function ar(e){if(Q(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=xe(n)?Jd(n):ar(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(xe(e))return e;if(Ee(e))return e}}const Gd=/;(?![^(]*\))/g,Xd=/:([^]+)/,Qd=/\/\*.*?\*\//gs;function Jd(e){const t={};return e.replace(Qd,"").split(Gd).forEach(s=>{if(s){const n=s.split(Xd);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ht(e){let t="";if(xe(e))t=e;else if(Q(e))for(let s=0;s<e.length;s++){const n=Ht(e[s]);n&&(t+=n+" ")}else if(Ee(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Zd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eh=or(Zd);function Na(e){return!!e||e===""}function th(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=bn(e[n],t[n]);return s}function bn(e,t){if(e===t)return!0;let s=To(e),n=To(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=un(e),n=un(t),s||n)return e===t;if(s=Q(e),n=Q(t),s||n)return s&&n?th(e,t):!1;if(s=Ee(e),n=Ee(t),s||n){if(!s||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!bn(e[a],t[a]))return!1}}return String(e)===String(t)}function lr(e,t){return e.findIndex(s=>bn(s,t))}const sn=e=>xe(e)?e:e==null?"":Q(e)||Ee(e)&&(e.toString===Ra||!ie(e.toString))?JSON.stringify(e,xa,2):String(e),xa=(e,t)=>t&&t.__v_isRef?xa(e,t.value):xs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:Us(t)?{[`Set(${t.size})`]:[...t.values()]}:Ee(t)&&!Q(t)&&!La(t)?String(t):t,ye={},Ns=[],ft=()=>{},sh=()=>!1,nh=/^on[^a-z]/,ni=e=>nh.test(e),cr=e=>e.startsWith("onUpdate:"),Pe=Object.assign,ur=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ih=Object.prototype.hasOwnProperty,fe=(e,t)=>ih.call(e,t),Q=Array.isArray,xs=e=>En(e)==="[object Map]",Us=e=>En(e)==="[object Set]",To=e=>En(e)==="[object Date]",ie=e=>typeof e=="function",xe=e=>typeof e=="string",un=e=>typeof e=="symbol",Ee=e=>e!==null&&typeof e=="object",$a=e=>Ee(e)&&ie(e.then)&&ie(e.catch),Ra=Object.prototype.toString,En=e=>Ra.call(e),rh=e=>En(e).slice(8,-1),La=e=>En(e)==="[object Object]",fr=e=>xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bn=or(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},oh=/-(\w)/g,Et=ii(e=>e.replace(oh,(t,s)=>s?s.toUpperCase():"")),ah=/\B([A-Z])/g,hs=ii(e=>e.replace(ah,"-$1").toLowerCase()),ri=ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ri=ii(e=>e?`on${ri(e)}`:""),fn=(e,t)=>!Object.is(e,t),Kn=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},Xn=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},Qn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Co;const lh=()=>Co||(Co=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let lt;class ch{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=lt,!t&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=lt;try{return lt=this,t()}finally{lt=s}}}on(){lt=this}off(){lt=this.parent}stop(t){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function uh(e,t=lt){t&&t.active&&t.effects.push(e)}function fh(){return lt}const dr=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Da=e=>(e.w&Kt)>0,Ia=e=>(e.n&Kt)>0,dh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Kt},hh=e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n];Da(i)&&!Ia(i)?i.delete(e):t[s++]=i,i.w&=~Kt,i.n&=~Kt}t.length=s}},Hi=new WeakMap;let tn=0,Kt=1;const Fi=30;let ct;const ls=Symbol(""),Bi=Symbol("");class hr{constructor(t,s=null,n){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,uh(this,n)}run(){if(!this.active)return this.fn();let t=ct,s=Ft;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ct,ct=this,Ft=!0,Kt=1<<++tn,tn<=Fi?dh(this):Oo(this),this.fn()}finally{tn<=Fi&&hh(this),Kt=1<<--tn,ct=this.parent,Ft=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ct===this?this.deferStop=!0:this.active&&(Oo(this),this.onStop&&this.onStop(),this.active=!1)}}function Oo(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let Ft=!0;const Pa=[];function Ws(){Pa.push(Ft),Ft=!1}function qs(){const e=Pa.pop();Ft=e===void 0?!0:e}function Ke(e,t,s){if(Ft&&ct){let n=Hi.get(e);n||Hi.set(e,n=new Map);let i=n.get(s);i||n.set(s,i=dr()),ka(i)}}function ka(e,t){let s=!1;tn<=Fi?Ia(e)||(e.n|=Kt,s=!Da(e)):s=!e.has(ct),s&&(e.add(ct),ct.deps.push(e))}function Nt(e,t,s,n,i,o){const a=Hi.get(e);if(!a)return;let l=[];if(t==="clear")l=[...a.values()];else if(s==="length"&&Q(e)){const u=Number(n);a.forEach((d,f)=>{(f==="length"||f>=u)&&l.push(d)})}else switch(s!==void 0&&l.push(a.get(s)),t){case"add":Q(e)?fr(s)&&l.push(a.get("length")):(l.push(a.get(ls)),xs(e)&&l.push(a.get(Bi)));break;case"delete":Q(e)||(l.push(a.get(ls)),xs(e)&&l.push(a.get(Bi)));break;case"set":xs(e)&&l.push(a.get(ls));break}if(l.length===1)l[0]&&Ki(l[0]);else{const u=[];for(const d of l)d&&u.push(...d);Ki(dr(u))}}function Ki(e,t){const s=Q(e)?e:[...e];for(const n of s)n.computed&&So(n);for(const n of s)n.computed||So(n)}function So(e,t){(e!==ct||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const ph=or("__proto__,__v_isRef,__isVue"),Ma=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(un)),_h=pr(),mh=pr(!1,!0),gh=pr(!0),No=vh();function vh(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const n=de(this);for(let o=0,a=this.length;o<a;o++)Ke(n,"get",o+"");const i=n[t](...s);return i===-1||i===!1?n[t](...s.map(de)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){Ws();const n=de(this)[t].apply(this,s);return qs(),n}}),e}function bh(e){const t=de(this);return Ke(t,"has",e),t.hasOwnProperty(e)}function pr(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Ph:Ba:t?Fa:Ha).get(n))return n;const a=Q(n);if(!e){if(a&&fe(No,i))return Reflect.get(No,i,o);if(i==="hasOwnProperty")return bh}const l=Reflect.get(n,i,o);return(un(i)?Ma.has(i):ph(i))||(e||Ke(n,"get",i),t)?l:Ie(l)?a&&fr(i)?l:l.value:Ee(l)?e?Ka(l):Ot(l):l}}const Eh=Va(),yh=Va(!0);function Va(e=!1){return function(s,n,i,o){let a=s[n];if(Is(a)&&Ie(a)&&!Ie(i))return!1;if(!e&&(!Jn(i)&&!Is(i)&&(a=de(a),i=de(i)),!Q(s)&&Ie(a)&&!Ie(i)))return a.value=i,!0;const l=Q(s)&&fr(n)?Number(n)<s.length:fe(s,n),u=Reflect.set(s,n,i,o);return s===de(o)&&(l?fn(i,a)&&Nt(s,"set",n,i):Nt(s,"add",n,i)),u}}function wh(e,t){const s=fe(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&Nt(e,"delete",t,void 0),n}function Ah(e,t){const s=Reflect.has(e,t);return(!un(t)||!Ma.has(t))&&Ke(e,"has",t),s}function Th(e){return Ke(e,"iterate",Q(e)?"length":ls),Reflect.ownKeys(e)}const ja={get:_h,set:Eh,deleteProperty:wh,has:Ah,ownKeys:Th},Ch={get:gh,set(e,t){return!0},deleteProperty(e,t){return!0}},Oh=Pe({},ja,{get:mh,set:yh}),_r=e=>e,oi=e=>Reflect.getPrototypeOf(e);function Pn(e,t,s=!1,n=!1){e=e.__v_raw;const i=de(e),o=de(t);s||(t!==o&&Ke(i,"get",t),Ke(i,"get",o));const{has:a}=oi(i),l=n?_r:s?vr:dn;if(a.call(i,t))return l(e.get(t));if(a.call(i,o))return l(e.get(o));e!==i&&e.get(t)}function kn(e,t=!1){const s=this.__v_raw,n=de(s),i=de(e);return t||(e!==i&&Ke(n,"has",e),Ke(n,"has",i)),e===i?s.has(e):s.has(e)||s.has(i)}function Mn(e,t=!1){return e=e.__v_raw,!t&&Ke(de(e),"iterate",ls),Reflect.get(e,"size",e)}function xo(e){e=de(e);const t=de(this);return oi(t).has.call(t,e)||(t.add(e),Nt(t,"add",e,e)),this}function $o(e,t){t=de(t);const s=de(this),{has:n,get:i}=oi(s);let o=n.call(s,e);o||(e=de(e),o=n.call(s,e));const a=i.call(s,e);return s.set(e,t),o?fn(t,a)&&Nt(s,"set",e,t):Nt(s,"add",e,t),this}function Ro(e){const t=de(this),{has:s,get:n}=oi(t);let i=s.call(t,e);i||(e=de(e),i=s.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&Nt(t,"delete",e,void 0),o}function Lo(){const e=de(this),t=e.size!==0,s=e.clear();return t&&Nt(e,"clear",void 0,void 0),s}function Vn(e,t){return function(n,i){const o=this,a=o.__v_raw,l=de(a),u=t?_r:e?vr:dn;return!e&&Ke(l,"iterate",ls),a.forEach((d,f)=>n.call(i,u(d),u(f),o))}}function jn(e,t,s){return function(...n){const i=this.__v_raw,o=de(i),a=xs(o),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,d=i[e](...n),f=s?_r:t?vr:dn;return!t&&Ke(o,"iterate",u?Bi:ls),{next(){const{value:g,done:v}=d.next();return v?{value:g,done:v}:{value:l?[f(g[0]),f(g[1])]:f(g),done:v}},[Symbol.iterator](){return this}}}}function It(e){return function(...t){return e==="delete"?!1:this}}function Sh(){const e={get(o){return Pn(this,o)},get size(){return Mn(this)},has:kn,add:xo,set:$o,delete:Ro,clear:Lo,forEach:Vn(!1,!1)},t={get(o){return Pn(this,o,!1,!0)},get size(){return Mn(this)},has:kn,add:xo,set:$o,delete:Ro,clear:Lo,forEach:Vn(!1,!0)},s={get(o){return Pn(this,o,!0)},get size(){return Mn(this,!0)},has(o){return kn.call(this,o,!0)},add:It("add"),set:It("set"),delete:It("delete"),clear:It("clear"),forEach:Vn(!0,!1)},n={get(o){return Pn(this,o,!0,!0)},get size(){return Mn(this,!0)},has(o){return kn.call(this,o,!0)},add:It("add"),set:It("set"),delete:It("delete"),clear:It("clear"),forEach:Vn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=jn(o,!1,!1),s[o]=jn(o,!0,!1),t[o]=jn(o,!1,!0),n[o]=jn(o,!0,!0)}),[e,s,t,n]}const[Nh,xh,$h,Rh]=Sh();function mr(e,t){const s=t?e?Rh:$h:e?xh:Nh;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(fe(s,i)&&i in n?s:n,i,o)}const Lh={get:mr(!1,!1)},Dh={get:mr(!1,!0)},Ih={get:mr(!0,!1)},Ha=new WeakMap,Fa=new WeakMap,Ba=new WeakMap,Ph=new WeakMap;function kh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mh(e){return e.__v_skip||!Object.isExtensible(e)?0:kh(rh(e))}function Ot(e){return Is(e)?e:gr(e,!1,ja,Lh,Ha)}function Vh(e){return gr(e,!1,Oh,Dh,Fa)}function Ka(e){return gr(e,!0,Ch,Ih,Ba)}function gr(e,t,s,n,i){if(!Ee(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=Mh(e);if(a===0)return e;const l=new Proxy(e,a===2?n:s);return i.set(e,l),l}function $s(e){return Is(e)?$s(e.__v_raw):!!(e&&e.__v_isReactive)}function Is(e){return!!(e&&e.__v_isReadonly)}function Jn(e){return!!(e&&e.__v_isShallow)}function Ua(e){return $s(e)||Is(e)}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function Wa(e){return Xn(e,"__v_skip",!0),e}const dn=e=>Ee(e)?Ot(e):e,vr=e=>Ee(e)?Ka(e):e;function qa(e){Ft&&ct&&(e=de(e),ka(e.dep||(e.dep=dr())))}function Ya(e,t){e=de(e);const s=e.dep;s&&Ki(s)}function Ie(e){return!!(e&&e.__v_isRef===!0)}function jh(e){return za(e,!1)}function Hh(e){return za(e,!0)}function za(e,t){return Ie(e)?e:new Fh(e,t)}class Fh{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:de(t),this._value=s?t:dn(t)}get value(){return qa(this),this._value}set value(t){const s=this.__v_isShallow||Jn(t)||Is(t);t=s?t:de(t),fn(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:dn(t),Ya(this))}}function Rs(e){return Ie(e)?e.value:e}const Bh={get:(e,t,s)=>Rs(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return Ie(i)&&!Ie(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Ga(e){return $s(e)?e:new Proxy(e,Bh)}var Xa;class Kh{constructor(t,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this[Xa]=!1,this._dirty=!0,this.effect=new hr(t,()=>{this._dirty||(this._dirty=!0,Ya(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=de(this);return qa(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Xa="__v_isReadonly";function Uh(e,t,s=!1){let n,i;const o=ie(e);return o?(n=e,i=ft):(n=e.get,i=e.set),new Kh(n,i,o||!i,s)}function Bt(e,t,s,n){let i;try{i=n?e(...n):e()}catch(o){ai(o,t,s)}return i}function st(e,t,s,n){if(ie(e)){const o=Bt(e,t,s,n);return o&&$a(o)&&o.catch(a=>{ai(a,t,s)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(st(e[o],t,s,n));return i}function ai(e,t,s,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,l=s;for(;o;){const d=o.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,a,l)===!1)return}o=o.parent}const u=t.appContext.config.errorHandler;if(u){Bt(u,null,10,[e,a,l]);return}}Wh(e,s,i,n)}function Wh(e,t,s,n=!0){console.error(e)}let hn=!1,Ui=!1;const De=[];let gt=0;const Ls=[];let Ct=null,is=0;const Qa=Promise.resolve();let br=null;function Ja(e){const t=br||Qa;return e?t.then(this?e.bind(this):e):t}function qh(e){let t=gt+1,s=De.length;for(;t<s;){const n=t+s>>>1;pn(De[n])<e?t=n+1:s=n}return t}function Er(e){(!De.length||!De.includes(e,hn&&e.allowRecurse?gt+1:gt))&&(e.id==null?De.push(e):De.splice(qh(e.id),0,e),Za())}function Za(){!hn&&!Ui&&(Ui=!0,br=Qa.then(tl))}function Yh(e){const t=De.indexOf(e);t>gt&&De.splice(t,1)}function zh(e){Q(e)?Ls.push(...e):(!Ct||!Ct.includes(e,e.allowRecurse?is+1:is))&&Ls.push(e),Za()}function Do(e,t=hn?gt+1:0){for(;t<De.length;t++){const s=De[t];s&&s.pre&&(De.splice(t,1),t--,s())}}function el(e){if(Ls.length){const t=[...new Set(Ls)];if(Ls.length=0,Ct){Ct.push(...t);return}for(Ct=t,Ct.sort((s,n)=>pn(s)-pn(n)),is=0;is<Ct.length;is++)Ct[is]();Ct=null,is=0}}const pn=e=>e.id==null?1/0:e.id,Gh=(e,t)=>{const s=pn(e)-pn(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function tl(e){Ui=!1,hn=!0,De.sort(Gh);const t=ft;try{for(gt=0;gt<De.length;gt++){const s=De[gt];s&&s.active!==!1&&Bt(s,null,14)}}finally{gt=0,De.length=0,el(),hn=!1,br=null,(De.length||Ls.length)&&tl()}}function Xh(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ye;let i=s;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:g,trim:v}=n[f]||ye;v&&(i=s.map(y=>xe(y)?y.trim():y)),g&&(i=s.map(Qn))}let l,u=n[l=Ri(t)]||n[l=Ri(Et(t))];!u&&o&&(u=n[l=Ri(hs(t))]),u&&st(u,e,6,i);const d=n[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,st(d,e,6,i)}}function sl(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},l=!1;if(!ie(e)){const u=d=>{const f=sl(d,t,!0);f&&(l=!0,Pe(a,f))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!l?(Ee(e)&&n.set(e,null),null):(Q(o)?o.forEach(u=>a[u]=null):Pe(a,o),Ee(e)&&n.set(e,a),a)}function li(e,t){return!e||!ni(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,hs(t))||fe(e,t))}let Ge=null,nl=null;function Zn(e){const t=Ge;return Ge=e,nl=e&&e.type.__scopeId||null,t}function Ss(e,t=Ge,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Ko(-1);const o=Zn(t);let a;try{a=e(...i)}finally{Zn(o),n._d&&Ko(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Li(e){const{type:t,vnode:s,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:l,attrs:u,emit:d,render:f,renderCache:g,data:v,setupState:y,ctx:R,inheritAttrs:O}=e;let I,L;const H=Zn(e);try{if(s.shapeFlag&4){const F=i||n;I=mt(f.call(F,F,g,o,y,v,R)),L=u}else{const F=t;I=mt(F.length>1?F(o,{attrs:u,slots:l,emit:d}):F(o,null)),L=t.props?u:Qh(u)}}catch(F){rn.length=0,ai(F,e,1),I=Oe(dt)}let V=I;if(L&&O!==!1){const F=Object.keys(L),{shapeFlag:q}=V;F.length&&q&7&&(a&&F.some(cr)&&(L=Jh(L,a)),V=Ut(V,L))}return s.dirs&&(V=Ut(V),V.dirs=V.dirs?V.dirs.concat(s.dirs):s.dirs),s.transition&&(V.transition=s.transition),I=V,Zn(H),I}const Qh=e=>{let t;for(const s in e)(s==="class"||s==="style"||ni(s))&&((t||(t={}))[s]=e[s]);return t},Jh=(e,t)=>{const s={};for(const n in e)(!cr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Zh(e,t,s){const{props:n,children:i,component:o}=e,{props:a,children:l,patchFlag:u}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?Io(n,a,d):!!a;if(u&8){const f=t.dynamicProps;for(let g=0;g<f.length;g++){const v=f[g];if(a[v]!==n[v]&&!li(d,v))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?Io(n,a,d):!0:!!a;return!1}function Io(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!li(s,o))return!0}return!1}function ep({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const tp=e=>e.__isSuspense;function sp(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):zh(e)}function Un(e,t){if(Ce){let s=Ce.provides;const n=Ce.parent&&Ce.parent.provides;n===s&&(s=Ce.provides=Object.create(n)),s[e]=t}}function St(e,t,s=!1){const n=Ce||Ge;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ie(t)?t.call(n.proxy):t}}const Hn={};function Wn(e,t,s){return il(e,t,s)}function il(e,t,{immediate:s,deep:n,flush:i,onTrack:o,onTrigger:a}=ye){const l=fh()===(Ce==null?void 0:Ce.scope)?Ce:null;let u,d=!1,f=!1;if(Ie(e)?(u=()=>e.value,d=Jn(e)):$s(e)?(u=()=>e,n=!0):Q(e)?(f=!0,d=e.some(V=>$s(V)||Jn(V)),u=()=>e.map(V=>{if(Ie(V))return V.value;if($s(V))return as(V);if(ie(V))return Bt(V,l,2)})):ie(e)?t?u=()=>Bt(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return g&&g(),st(e,l,3,[v])}:u=ft,t&&n){const V=u;u=()=>as(V())}let g,v=V=>{g=L.onStop=()=>{Bt(V,l,4)}},y;if(mn)if(v=ft,t?s&&st(t,l,3,[u(),f?[]:void 0,v]):u(),i==="sync"){const V=Qp();y=V.__watcherHandles||(V.__watcherHandles=[])}else return ft;let R=f?new Array(e.length).fill(Hn):Hn;const O=()=>{if(L.active)if(t){const V=L.run();(n||d||(f?V.some((F,q)=>fn(F,R[q])):fn(V,R)))&&(g&&g(),st(t,l,3,[V,R===Hn?void 0:f&&R[0]===Hn?[]:R,v]),R=V)}else L.run()};O.allowRecurse=!!t;let I;i==="sync"?I=O:i==="post"?I=()=>Be(O,l&&l.suspense):(O.pre=!0,l&&(O.id=l.uid),I=()=>Er(O));const L=new hr(u,I);t?s?O():R=L.run():i==="post"?Be(L.run.bind(L),l&&l.suspense):L.run();const H=()=>{L.stop(),l&&l.scope&&ur(l.scope.effects,L)};return y&&y.push(H),H}function np(e,t,s){const n=this.proxy,i=xe(e)?e.includes(".")?rl(n,e):()=>n[e]:e.bind(n,n);let o;ie(t)?o=t:(o=t.handler,s=t);const a=Ce;Ps(this);const l=il(i,o.bind(n),s);return a?Ps(a):cs(),l}function rl(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function as(e,t){if(!Ee(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ie(e))as(e.value,t);else if(Q(e))for(let s=0;s<e.length;s++)as(e[s],t);else if(Us(e)||xs(e))e.forEach(s=>{as(s,t)});else if(La(e))for(const s in e)as(e[s],t);return e}function ip(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ul(()=>{e.isMounted=!0}),fl(()=>{e.isUnmounting=!0}),e}const Ze=[Function,Array],rp={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ze,onEnter:Ze,onAfterEnter:Ze,onEnterCancelled:Ze,onBeforeLeave:Ze,onLeave:Ze,onAfterLeave:Ze,onLeaveCancelled:Ze,onBeforeAppear:Ze,onAppear:Ze,onAfterAppear:Ze,onAppearCancelled:Ze},setup(e,{slots:t}){const s=Kp(),n=ip();let i;return()=>{const o=t.default&&al(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const O of o)if(O.type!==dt){a=O;break}}const l=de(e),{mode:u}=l;if(n.isLeaving)return Di(a);const d=Po(a);if(!d)return Di(a);const f=Wi(d,l,n,s);qi(d,f);const g=s.subTree,v=g&&Po(g);let y=!1;const{getTransitionKey:R}=d.type;if(R){const O=R();i===void 0?i=O:O!==i&&(i=O,y=!0)}if(v&&v.type!==dt&&(!rs(d,v)||y)){const O=Wi(v,l,n,s);if(qi(v,O),u==="out-in")return n.isLeaving=!0,O.afterLeave=()=>{n.isLeaving=!1,s.update.active!==!1&&s.update()},Di(a);u==="in-out"&&d.type!==dt&&(O.delayLeave=(I,L,H)=>{const V=ol(n,v);V[String(v.key)]=v,I._leaveCb=()=>{L(),I._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=H})}return a}}},op=rp;function ol(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Wi(e,t,s,n){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:g,onLeave:v,onAfterLeave:y,onLeaveCancelled:R,onBeforeAppear:O,onAppear:I,onAfterAppear:L,onAppearCancelled:H}=t,V=String(e.key),F=ol(s,e),q=(Y,X)=>{Y&&st(Y,n,9,X)},Z=(Y,X)=>{const z=X[1];q(Y,X),Q(Y)?Y.every(ee=>ee.length<=1)&&z():Y.length<=1&&z()},se={mode:o,persisted:a,beforeEnter(Y){let X=l;if(!s.isMounted)if(i)X=O||l;else return;Y._leaveCb&&Y._leaveCb(!0);const z=F[V];z&&rs(e,z)&&z.el._leaveCb&&z.el._leaveCb(),q(X,[Y])},enter(Y){let X=u,z=d,ee=f;if(!s.isMounted)if(i)X=I||u,z=L||d,ee=H||f;else return;let he=!1;const pe=Y._enterCb=Ne=>{he||(he=!0,Ne?q(ee,[Y]):q(z,[Y]),se.delayedLeave&&se.delayedLeave(),Y._enterCb=void 0)};X?Z(X,[Y,pe]):pe()},leave(Y,X){const z=String(e.key);if(Y._enterCb&&Y._enterCb(!0),s.isUnmounting)return X();q(g,[Y]);let ee=!1;const he=Y._leaveCb=pe=>{ee||(ee=!0,X(),pe?q(R,[Y]):q(y,[Y]),Y._leaveCb=void 0,F[z]===e&&delete F[z])};F[z]=e,v?Z(v,[Y,he]):he()},clone(Y){return Wi(Y,t,s,n)}};return se}function Di(e){if(ci(e))return e=Ut(e),e.children=null,e}function Po(e){return ci(e)?e.children?e.children[0]:void 0:e}function qi(e,t){e.shapeFlag&6&&e.component?qi(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function al(e,t=!1,s){let n=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const l=s==null?a.key:String(s)+String(a.key!=null?a.key:o);a.type===ze?(a.patchFlag&128&&i++,n=n.concat(al(a.children,t,l))):(t||a.type!==dt)&&n.push(l!=null?Ut(a,{key:l}):a)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function ll(e){return ie(e)?{setup:e,name:e.name}:e}const qn=e=>!!e.type.__asyncLoader,ci=e=>e.type.__isKeepAlive;function ap(e,t){cl(e,"a",t)}function lp(e,t){cl(e,"da",t)}function cl(e,t,s=Ce){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ui(t,n,s),s){let i=s.parent;for(;i&&i.parent;)ci(i.parent.vnode)&&cp(n,t,s,i),i=i.parent}}function cp(e,t,s,n){const i=ui(t,e,n,!0);dl(()=>{ur(n[t],i)},s)}function ui(e,t,s=Ce,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(s.isUnmounted)return;Ws(),Ps(s);const l=st(t,s,e,a);return cs(),qs(),l});return n?i.unshift(o):i.push(o),o}}const $t=e=>(t,s=Ce)=>(!mn||e==="sp")&&ui(e,(...n)=>t(...n),s),up=$t("bm"),ul=$t("m"),fp=$t("bu"),dp=$t("u"),fl=$t("bum"),dl=$t("um"),hp=$t("sp"),pp=$t("rtg"),_p=$t("rtc");function mp(e,t=Ce){ui("ec",e,t)}function vt(e,t){const s=Ge;if(s===null)return e;const n=hi(s)||s.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,u,d=ye]=t[o];a&&(ie(a)&&(a={mounted:a,updated:a}),a.deep&&as(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:u,modifiers:d}))}return e}function ts(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const l=i[a];o&&(l.oldValue=o[a].value);let u=l.dir[n];u&&(Ws(),st(u,s,8,[e.el,l,e,t]),qs())}}const hl="components";function Ds(e,t){return vp(hl,e,!0,t)||e}const gp=Symbol();function vp(e,t,s=!0,n=!1){const i=Ge||Ce;if(i){const o=i.type;if(e===hl){const l=zp(o,!1);if(l&&(l===t||l===Et(t)||l===ri(Et(t))))return o}const a=ko(i[e]||o[e],t)||ko(i.appContext[e],t);return!a&&n?o:a}}function ko(e,t){return e&&(e[t]||e[Et(t)]||e[ri(Et(t))])}function pl(e,t,s,n){let i;const o=s&&s[n];if(Q(e)||xe(e)){i=new Array(e.length);for(let a=0,l=e.length;a<l;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Ee(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,o&&o[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const d=a[l];i[l]=t(e[d],d,l,o&&o[l])}}else i=[];return s&&(s[n]=i),i}const Yi=e=>e?Sl(e)?hi(e)||e.proxy:Yi(e.parent):null,nn=Pe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Yi(e.parent),$root:e=>Yi(e.root),$emit:e=>e.emit,$options:e=>yr(e),$forceUpdate:e=>e.f||(e.f=()=>Er(e.update)),$nextTick:e=>e.n||(e.n=Ja.bind(e.proxy)),$watch:e=>np.bind(e)}),Ii=(e,t)=>e!==ye&&!e.__isScriptSetup&&fe(e,t),bp={get({_:e},t){const{ctx:s,setupState:n,data:i,props:o,accessCache:a,type:l,appContext:u}=e;let d;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(Ii(n,t))return a[t]=1,n[t];if(i!==ye&&fe(i,t))return a[t]=2,i[t];if((d=e.propsOptions[0])&&fe(d,t))return a[t]=3,o[t];if(s!==ye&&fe(s,t))return a[t]=4,s[t];zi&&(a[t]=0)}}const f=nn[t];let g,v;if(f)return t==="$attrs"&&Ke(e,"get",t),f(e);if((g=l.__cssModules)&&(g=g[t]))return g;if(s!==ye&&fe(s,t))return a[t]=4,s[t];if(v=u.config.globalProperties,fe(v,t))return v[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return Ii(i,t)?(i[t]=s,!0):n!==ye&&fe(n,t)?(n[t]=s,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o}},a){let l;return!!s[a]||e!==ye&&fe(e,a)||Ii(t,a)||(l=o[0])&&fe(l,a)||fe(n,a)||fe(nn,a)||fe(i.config.globalProperties,a)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:fe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};let zi=!0;function Ep(e){const t=yr(e),s=e.proxy,n=e.ctx;zi=!1,t.beforeCreate&&Mo(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:l,provide:u,inject:d,created:f,beforeMount:g,mounted:v,beforeUpdate:y,updated:R,activated:O,deactivated:I,beforeDestroy:L,beforeUnmount:H,destroyed:V,unmounted:F,render:q,renderTracked:Z,renderTriggered:se,errorCaptured:Y,serverPrefetch:X,expose:z,inheritAttrs:ee,components:he,directives:pe,filters:Ne}=t;if(d&&yp(d,n,null,e.appContext.config.unwrapInjectedRef),a)for(const te in a){const ce=a[te];ie(ce)&&(n[te]=ce.bind(s))}if(i){const te=i.call(s,s);Ee(te)&&(e.data=Ot(te))}if(zi=!0,o)for(const te in o){const ce=o[te],Te=ie(ce)?ce.bind(s,s):ie(ce.get)?ce.get.bind(s,s):ft,He=!ie(ce)&&ie(ce.set)?ce.set.bind(s):ft,$e=tt({get:Te,set:He});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>$e.value,set:Ae=>$e.value=Ae})}if(l)for(const te in l)_l(l[te],n,s,te);if(u){const te=ie(u)?u.call(s):u;Reflect.ownKeys(te).forEach(ce=>{Un(ce,te[ce])})}f&&Mo(f,e,"c");function le(te,ce){Q(ce)?ce.forEach(Te=>te(Te.bind(s))):ce&&te(ce.bind(s))}if(le(up,g),le(ul,v),le(fp,y),le(dp,R),le(ap,O),le(lp,I),le(mp,Y),le(_p,Z),le(pp,se),le(fl,H),le(dl,F),le(hp,X),Q(z))if(z.length){const te=e.exposed||(e.exposed={});z.forEach(ce=>{Object.defineProperty(te,ce,{get:()=>s[ce],set:Te=>s[ce]=Te})})}else e.exposed||(e.exposed={});q&&e.render===ft&&(e.render=q),ee!=null&&(e.inheritAttrs=ee),he&&(e.components=he),pe&&(e.directives=pe)}function yp(e,t,s=ft,n=!1){Q(e)&&(e=Gi(e));for(const i in e){const o=e[i];let a;Ee(o)?"default"in o?a=St(o.from||i,o.default,!0):a=St(o.from||i):a=St(o),Ie(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function Mo(e,t,s){st(Q(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function _l(e,t,s,n){const i=n.includes(".")?rl(s,n):()=>s[n];if(xe(e)){const o=t[e];ie(o)&&Wn(i,o)}else if(ie(e))Wn(i,e.bind(s));else if(Ee(e))if(Q(e))e.forEach(o=>_l(o,t,s,n));else{const o=ie(e.handler)?e.handler.bind(s):t[e.handler];ie(o)&&Wn(i,o,e)}}function yr(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,l=o.get(t);let u;return l?u=l:!i.length&&!s&&!n?u=t:(u={},i.length&&i.forEach(d=>ei(u,d,a,!0)),ei(u,t,a)),Ee(t)&&o.set(t,u),u}function ei(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&ei(e,o,s,!0),i&&i.forEach(a=>ei(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const l=wp[a]||s&&s[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const wp={data:Vo,props:ns,emits:ns,methods:ns,computed:ns,beforeCreate:Me,created:Me,beforeMount:Me,mounted:Me,beforeUpdate:Me,updated:Me,beforeDestroy:Me,beforeUnmount:Me,destroyed:Me,unmounted:Me,activated:Me,deactivated:Me,errorCaptured:Me,serverPrefetch:Me,components:ns,directives:ns,watch:Tp,provide:Vo,inject:Ap};function Vo(e,t){return t?e?function(){return Pe(ie(e)?e.call(this,this):e,ie(t)?t.call(this,this):t)}:t:e}function Ap(e,t){return ns(Gi(e),Gi(t))}function Gi(e){if(Q(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Me(e,t){return e?[...new Set([].concat(e,t))]:t}function ns(e,t){return e?Pe(Pe(Object.create(null),e),t):t}function Tp(e,t){if(!e)return t;if(!t)return e;const s=Pe(Object.create(null),e);for(const n in t)s[n]=Me(e[n],t[n]);return s}function Cp(e,t,s,n=!1){const i={},o={};Xn(o,di,1),e.propsDefaults=Object.create(null),ml(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);s?e.props=n?i:Vh(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Op(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,l=de(i),[u]=e.propsOptions;let d=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let g=0;g<f.length;g++){let v=f[g];if(li(e.emitsOptions,v))continue;const y=t[v];if(u)if(fe(o,v))y!==o[v]&&(o[v]=y,d=!0);else{const R=Et(v);i[R]=Xi(u,l,R,y,e,!1)}else y!==o[v]&&(o[v]=y,d=!0)}}}else{ml(e,t,i,o)&&(d=!0);let f;for(const g in l)(!t||!fe(t,g)&&((f=hs(g))===g||!fe(t,f)))&&(u?s&&(s[g]!==void 0||s[f]!==void 0)&&(i[g]=Xi(u,l,g,void 0,e,!0)):delete i[g]);if(o!==l)for(const g in o)(!t||!fe(t,g))&&(delete o[g],d=!0)}d&&Nt(e,"set","$attrs")}function ml(e,t,s,n){const[i,o]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(Bn(u))continue;const d=t[u];let f;i&&fe(i,f=Et(u))?!o||!o.includes(f)?s[f]=d:(l||(l={}))[f]=d:li(e.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,a=!0)}if(o){const u=de(s),d=l||ye;for(let f=0;f<o.length;f++){const g=o[f];s[g]=Xi(i,u,g,d[g],e,!fe(d,g))}}return a}function Xi(e,t,s,n,i,o){const a=e[s];if(a!=null){const l=fe(a,"default");if(l&&n===void 0){const u=a.default;if(a.type!==Function&&ie(u)){const{propsDefaults:d}=i;s in d?n=d[s]:(Ps(i),n=d[s]=u.call(null,t),cs())}else n=u}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===hs(s))&&(n=!0))}return n}function gl(e,t,s=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},l=[];let u=!1;if(!ie(e)){const f=g=>{u=!0;const[v,y]=gl(g,t,!0);Pe(a,v),y&&l.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!u)return Ee(e)&&n.set(e,Ns),Ns;if(Q(o))for(let f=0;f<o.length;f++){const g=Et(o[f]);jo(g)&&(a[g]=ye)}else if(o)for(const f in o){const g=Et(f);if(jo(g)){const v=o[f],y=a[g]=Q(v)||ie(v)?{type:v}:Object.assign({},v);if(y){const R=Bo(Boolean,y.type),O=Bo(String,y.type);y[0]=R>-1,y[1]=O<0||R<O,(R>-1||fe(y,"default"))&&l.push(g)}}}const d=[a,l];return Ee(e)&&n.set(e,d),d}function jo(e){return e[0]!=="$"}function Ho(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Fo(e,t){return Ho(e)===Ho(t)}function Bo(e,t){return Q(t)?t.findIndex(s=>Fo(s,e)):ie(t)&&Fo(t,e)?0:-1}const vl=e=>e[0]==="_"||e==="$stable",wr=e=>Q(e)?e.map(mt):[mt(e)],Sp=(e,t,s)=>{if(t._n)return t;const n=Ss((...i)=>wr(t(...i)),s);return n._c=!1,n},bl=(e,t,s)=>{const n=e._ctx;for(const i in e){if(vl(i))continue;const o=e[i];if(ie(o))t[i]=Sp(i,o,n);else if(o!=null){const a=wr(o);t[i]=()=>a}}},El=(e,t)=>{const s=wr(t);e.slots.default=()=>s},Np=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=de(t),Xn(t,"_",s)):bl(t,e.slots={})}else e.slots={},t&&El(e,t);Xn(e.slots,di,1)},xp=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,a=ye;if(n.shapeFlag&32){const l=t._;l?s&&l===1?o=!1:(Pe(i,t),!s&&l===1&&delete i._):(o=!t.$stable,bl(t,i)),a=t}else t&&(El(e,t),a={default:1});if(o)for(const l in i)!vl(l)&&!(l in a)&&delete i[l]};function yl(){return{app:null,config:{isNativeTag:sh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $p=0;function Rp(e,t){return function(n,i=null){ie(n)||(n=Object.assign({},n)),i!=null&&!Ee(i)&&(i=null);const o=yl(),a=new Set;let l=!1;const u=o.app={_uid:$p++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Jp,get config(){return o.config},set config(d){},use(d,...f){return a.has(d)||(d&&ie(d.install)?(a.add(d),d.install(u,...f)):ie(d)&&(a.add(d),d(u,...f))),u},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),u},component(d,f){return f?(o.components[d]=f,u):o.components[d]},directive(d,f){return f?(o.directives[d]=f,u):o.directives[d]},mount(d,f,g){if(!l){const v=Oe(n,i);return v.appContext=o,f&&t?t(v,d):e(v,d,g),l=!0,u._container=d,d.__vue_app__=u,hi(v.component)||v.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return o.provides[d]=f,u}};return u}}function Qi(e,t,s,n,i=!1){if(Q(e)){e.forEach((v,y)=>Qi(v,t&&(Q(t)?t[y]:t),s,n,i));return}if(qn(n)&&!i)return;const o=n.shapeFlag&4?hi(n.component)||n.component.proxy:n.el,a=i?null:o,{i:l,r:u}=e,d=t&&t.r,f=l.refs===ye?l.refs={}:l.refs,g=l.setupState;if(d!=null&&d!==u&&(xe(d)?(f[d]=null,fe(g,d)&&(g[d]=null)):Ie(d)&&(d.value=null)),ie(u))Bt(u,l,12,[a,f]);else{const v=xe(u),y=Ie(u);if(v||y){const R=()=>{if(e.f){const O=v?fe(g,u)?g[u]:f[u]:u.value;i?Q(O)&&ur(O,o):Q(O)?O.includes(o)||O.push(o):v?(f[u]=[o],fe(g,u)&&(g[u]=f[u])):(u.value=[o],e.k&&(f[e.k]=u.value))}else v?(f[u]=a,fe(g,u)&&(g[u]=a)):y&&(u.value=a,e.k&&(f[e.k]=a))};a?(R.id=-1,Be(R,s)):R()}}}const Be=sp;function Lp(e){return Dp(e)}function Dp(e,t){const s=lh();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:l,createComment:u,setText:d,setElementText:f,parentNode:g,nextSibling:v,setScopeId:y=ft,insertStaticContent:R}=e,O=(h,m,w,A=null,S=null,$=null,j=!1,D=null,x=!!m.dynamicChildren)=>{if(h===m)return;h&&!rs(h,m)&&(A=M(h),Ae(h,S,$,!0),h=null),m.patchFlag===-2&&(x=!1,m.dynamicChildren=null);const{type:N,ref:G,shapeFlag:U}=m;switch(N){case fi:I(h,m,w,A);break;case dt:L(h,m,w,A);break;case Yn:h==null&&H(m,w,A,j);break;case ze:he(h,m,w,A,S,$,j,D,x);break;default:U&1?q(h,m,w,A,S,$,j,D,x):U&6?pe(h,m,w,A,S,$,j,D,x):(U&64||U&128)&&N.process(h,m,w,A,S,$,j,D,x,oe)}G!=null&&S&&Qi(G,h&&h.ref,$,m||h,!m)},I=(h,m,w,A)=>{if(h==null)n(m.el=l(m.children),w,A);else{const S=m.el=h.el;m.children!==h.children&&d(S,m.children)}},L=(h,m,w,A)=>{h==null?n(m.el=u(m.children||""),w,A):m.el=h.el},H=(h,m,w,A)=>{[h.el,h.anchor]=R(h.children,m,w,A,h.el,h.anchor)},V=({el:h,anchor:m},w,A)=>{let S;for(;h&&h!==m;)S=v(h),n(h,w,A),h=S;n(m,w,A)},F=({el:h,anchor:m})=>{let w;for(;h&&h!==m;)w=v(h),i(h),h=w;i(m)},q=(h,m,w,A,S,$,j,D,x)=>{j=j||m.type==="svg",h==null?Z(m,w,A,S,$,j,D,x):X(h,m,S,$,j,D,x)},Z=(h,m,w,A,S,$,j,D)=>{let x,N;const{type:G,props:U,shapeFlag:W,transition:J,dirs:ne}=h;if(x=h.el=a(h.type,$,U&&U.is,U),W&8?f(x,h.children):W&16&&Y(h.children,x,null,A,S,$&&G!=="foreignObject",j,D),ne&&ts(h,null,A,"created"),se(x,h,h.scopeId,j,A),U){for(const ue in U)ue!=="value"&&!Bn(ue)&&o(x,ue,null,U[ue],$,h.children,A,S,B);"value"in U&&o(x,"value",null,U.value),(N=U.onVnodeBeforeMount)&&_t(N,A,h)}ne&&ts(h,null,A,"beforeMount");const _e=(!S||S&&!S.pendingBranch)&&J&&!J.persisted;_e&&J.beforeEnter(x),n(x,m,w),((N=U&&U.onVnodeMounted)||_e||ne)&&Be(()=>{N&&_t(N,A,h),_e&&J.enter(x),ne&&ts(h,null,A,"mounted")},S)},se=(h,m,w,A,S)=>{if(w&&y(h,w),A)for(let $=0;$<A.length;$++)y(h,A[$]);if(S){let $=S.subTree;if(m===$){const j=S.vnode;se(h,j,j.scopeId,j.slotScopeIds,S.parent)}}},Y=(h,m,w,A,S,$,j,D,x=0)=>{for(let N=x;N<h.length;N++){const G=h[N]=D?kt(h[N]):mt(h[N]);O(null,G,m,w,A,S,$,j,D)}},X=(h,m,w,A,S,$,j)=>{const D=m.el=h.el;let{patchFlag:x,dynamicChildren:N,dirs:G}=m;x|=h.patchFlag&16;const U=h.props||ye,W=m.props||ye;let J;w&&ss(w,!1),(J=W.onVnodeBeforeUpdate)&&_t(J,w,m,h),G&&ts(m,h,w,"beforeUpdate"),w&&ss(w,!0);const ne=S&&m.type!=="foreignObject";if(N?z(h.dynamicChildren,N,D,w,A,ne,$):j||ce(h,m,D,null,w,A,ne,$,!1),x>0){if(x&16)ee(D,m,U,W,w,A,S);else if(x&2&&U.class!==W.class&&o(D,"class",null,W.class,S),x&4&&o(D,"style",U.style,W.style,S),x&8){const _e=m.dynamicProps;for(let ue=0;ue<_e.length;ue++){const ve=_e[ue],qe=U[ve],qt=W[ve];(qt!==qe||ve==="value")&&o(D,ve,qe,qt,S,h.children,w,A,B)}}x&1&&h.children!==m.children&&f(D,m.children)}else!j&&N==null&&ee(D,m,U,W,w,A,S);((J=W.onVnodeUpdated)||G)&&Be(()=>{J&&_t(J,w,m,h),G&&ts(m,h,w,"updated")},A)},z=(h,m,w,A,S,$,j)=>{for(let D=0;D<m.length;D++){const x=h[D],N=m[D],G=x.el&&(x.type===ze||!rs(x,N)||x.shapeFlag&70)?g(x.el):w;O(x,N,G,null,A,S,$,j,!0)}},ee=(h,m,w,A,S,$,j)=>{if(w!==A){if(w!==ye)for(const D in w)!Bn(D)&&!(D in A)&&o(h,D,w[D],null,j,m.children,S,$,B);for(const D in A){if(Bn(D))continue;const x=A[D],N=w[D];x!==N&&D!=="value"&&o(h,D,N,x,j,m.children,S,$,B)}"value"in A&&o(h,"value",w.value,A.value)}},he=(h,m,w,A,S,$,j,D,x)=>{const N=m.el=h?h.el:l(""),G=m.anchor=h?h.anchor:l("");let{patchFlag:U,dynamicChildren:W,slotScopeIds:J}=m;J&&(D=D?D.concat(J):J),h==null?(n(N,w,A),n(G,w,A),Y(m.children,w,G,S,$,j,D,x)):U>0&&U&64&&W&&h.dynamicChildren?(z(h.dynamicChildren,W,w,S,$,j,D),(m.key!=null||S&&m===S.subTree)&&wl(h,m,!0)):ce(h,m,w,G,S,$,j,D,x)},pe=(h,m,w,A,S,$,j,D,x)=>{m.slotScopeIds=D,h==null?m.shapeFlag&512?S.ctx.activate(m,w,A,j,x):Ne(m,w,A,S,$,j,x):ke(h,m,x)},Ne=(h,m,w,A,S,$,j)=>{const D=h.component=Bp(h,A,S);if(ci(h)&&(D.ctx.renderer=oe),Up(D),D.asyncDep){if(S&&S.registerDep(D,le),!h.el){const x=D.subTree=Oe(dt);L(null,x,m,w)}return}le(D,h,m,w,S,$,j)},ke=(h,m,w)=>{const A=m.component=h.component;if(Zh(h,m,w))if(A.asyncDep&&!A.asyncResolved){te(A,m,w);return}else A.next=m,Yh(A.update),A.update();else m.el=h.el,A.vnode=m},le=(h,m,w,A,S,$,j)=>{const D=()=>{if(h.isMounted){let{next:G,bu:U,u:W,parent:J,vnode:ne}=h,_e=G,ue;ss(h,!1),G?(G.el=ne.el,te(h,G,j)):G=ne,U&&Kn(U),(ue=G.props&&G.props.onVnodeBeforeUpdate)&&_t(ue,J,G,ne),ss(h,!0);const ve=Li(h),qe=h.subTree;h.subTree=ve,O(qe,ve,g(qe.el),M(qe),h,S,$),G.el=ve.el,_e===null&&ep(h,ve.el),W&&Be(W,S),(ue=G.props&&G.props.onVnodeUpdated)&&Be(()=>_t(ue,J,G,ne),S)}else{let G;const{el:U,props:W}=m,{bm:J,m:ne,parent:_e}=h,ue=qn(m);if(ss(h,!1),J&&Kn(J),!ue&&(G=W&&W.onVnodeBeforeMount)&&_t(G,_e,m),ss(h,!0),U&&E){const ve=()=>{h.subTree=Li(h),E(U,h.subTree,h,S,null)};ue?m.type.__asyncLoader().then(()=>!h.isUnmounted&&ve()):ve()}else{const ve=h.subTree=Li(h);O(null,ve,w,A,h,S,$),m.el=ve.el}if(ne&&Be(ne,S),!ue&&(G=W&&W.onVnodeMounted)){const ve=m;Be(()=>_t(G,_e,ve),S)}(m.shapeFlag&256||_e&&qn(_e.vnode)&&_e.vnode.shapeFlag&256)&&h.a&&Be(h.a,S),h.isMounted=!0,m=w=A=null}},x=h.effect=new hr(D,()=>Er(N),h.scope),N=h.update=()=>x.run();N.id=h.uid,ss(h,!0),N()},te=(h,m,w)=>{m.component=h;const A=h.vnode.props;h.vnode=m,h.next=null,Op(h,m.props,A,w),xp(h,m.children,w),Ws(),Do(),qs()},ce=(h,m,w,A,S,$,j,D,x=!1)=>{const N=h&&h.children,G=h?h.shapeFlag:0,U=m.children,{patchFlag:W,shapeFlag:J}=m;if(W>0){if(W&128){He(N,U,w,A,S,$,j,D,x);return}else if(W&256){Te(N,U,w,A,S,$,j,D,x);return}}J&8?(G&16&&B(N,S,$),U!==N&&f(w,U)):G&16?J&16?He(N,U,w,A,S,$,j,D,x):B(N,S,$,!0):(G&8&&f(w,""),J&16&&Y(U,w,A,S,$,j,D,x))},Te=(h,m,w,A,S,$,j,D,x)=>{h=h||Ns,m=m||Ns;const N=h.length,G=m.length,U=Math.min(N,G);let W;for(W=0;W<U;W++){const J=m[W]=x?kt(m[W]):mt(m[W]);O(h[W],J,w,null,S,$,j,D,x)}N>G?B(h,S,$,!0,!1,U):Y(m,w,A,S,$,j,D,x,U)},He=(h,m,w,A,S,$,j,D,x)=>{let N=0;const G=m.length;let U=h.length-1,W=G-1;for(;N<=U&&N<=W;){const J=h[N],ne=m[N]=x?kt(m[N]):mt(m[N]);if(rs(J,ne))O(J,ne,w,null,S,$,j,D,x);else break;N++}for(;N<=U&&N<=W;){const J=h[U],ne=m[W]=x?kt(m[W]):mt(m[W]);if(rs(J,ne))O(J,ne,w,null,S,$,j,D,x);else break;U--,W--}if(N>U){if(N<=W){const J=W+1,ne=J<G?m[J].el:A;for(;N<=W;)O(null,m[N]=x?kt(m[N]):mt(m[N]),w,ne,S,$,j,D,x),N++}}else if(N>W)for(;N<=U;)Ae(h[N],S,$,!0),N++;else{const J=N,ne=N,_e=new Map;for(N=ne;N<=W;N++){const Le=m[N]=x?kt(m[N]):mt(m[N]);Le.key!=null&&_e.set(Le.key,N)}let ue,ve=0;const qe=W-ne+1;let qt=!1,wn=0;const Yt=new Array(qe);for(N=0;N<qe;N++)Yt[N]=0;for(N=J;N<=U;N++){const Le=h[N];if(ve>=qe){Ae(Le,S,$,!0);continue}let Je;if(Le.key!=null)Je=_e.get(Le.key);else for(ue=ne;ue<=W;ue++)if(Yt[ue-ne]===0&&rs(Le,m[ue])){Je=ue;break}Je===void 0?Ae(Le,S,$,!0):(Yt[Je-ne]=N+1,Je>=wn?wn=Je:qt=!0,O(Le,m[Je],w,null,S,$,j,D,x),ve++)}const An=qt?Ip(Yt):Ns;for(ue=An.length-1,N=qe-1;N>=0;N--){const Le=ne+N,Je=m[Le],Rt=Le+1<G?m[Le+1].el:A;Yt[N]===0?O(null,Je,w,Rt,S,$,j,D,x):qt&&(ue<0||N!==An[ue]?$e(Je,w,Rt,2):ue--)}}},$e=(h,m,w,A,S=null)=>{const{el:$,type:j,transition:D,children:x,shapeFlag:N}=h;if(N&6){$e(h.component.subTree,m,w,A);return}if(N&128){h.suspense.move(m,w,A);return}if(N&64){j.move(h,m,w,oe);return}if(j===ze){n($,m,w);for(let U=0;U<x.length;U++)$e(x[U],m,w,A);n(h.anchor,m,w);return}if(j===Yn){V(h,m,w);return}if(A!==2&&N&1&&D)if(A===0)D.beforeEnter($),n($,m,w),Be(()=>D.enter($),S);else{const{leave:U,delayLeave:W,afterLeave:J}=D,ne=()=>n($,m,w),_e=()=>{U($,()=>{ne(),J&&J()})};W?W($,ne,_e):_e()}else n($,m,w)},Ae=(h,m,w,A=!1,S=!1)=>{const{type:$,props:j,ref:D,children:x,dynamicChildren:N,shapeFlag:G,patchFlag:U,dirs:W}=h;if(D!=null&&Qi(D,null,w,h,!0),G&256){m.ctx.deactivate(h);return}const J=G&1&&W,ne=!qn(h);let _e;if(ne&&(_e=j&&j.onVnodeBeforeUnmount)&&_t(_e,m,h),G&6)C(h.component,w,A);else{if(G&128){h.suspense.unmount(w,A);return}J&&ts(h,null,m,"beforeUnmount"),G&64?h.type.remove(h,m,w,S,oe,A):N&&($!==ze||U>0&&U&64)?B(N,m,w,!1,!0):($===ze&&U&384||!S&&G&16)&&B(x,m,w),A&&Ue(h)}(ne&&(_e=j&&j.onVnodeUnmounted)||J)&&Be(()=>{_e&&_t(_e,m,h),J&&ts(h,null,m,"unmounted")},w)},Ue=h=>{const{type:m,el:w,anchor:A,transition:S}=h;if(m===ze){We(w,A);return}if(m===Yn){F(h);return}const $=()=>{i(w),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(h.shapeFlag&1&&S&&!S.persisted){const{leave:j,delayLeave:D}=S,x=()=>j(w,$);D?D(h.el,$,x):x()}else $()},We=(h,m)=>{let w;for(;h!==m;)w=v(h),i(h),h=w;i(m)},C=(h,m,w)=>{const{bum:A,scope:S,update:$,subTree:j,um:D}=h;A&&Kn(A),S.stop(),$&&($.active=!1,Ae(j,h,m,w)),D&&Be(D,m),Be(()=>{h.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},B=(h,m,w,A=!1,S=!1,$=0)=>{for(let j=$;j<h.length;j++)Ae(h[j],m,w,A,S)},M=h=>h.shapeFlag&6?M(h.component.subTree):h.shapeFlag&128?h.suspense.next():v(h.anchor||h.el),K=(h,m,w)=>{h==null?m._vnode&&Ae(m._vnode,null,null,!0):O(m._vnode||null,h,m,null,null,null,w),Do(),el(),m._vnode=h},oe={p:O,um:Ae,m:$e,r:Ue,mt:Ne,mc:Y,pc:ce,pbc:z,n:M,o:e};let ge,E;return t&&([ge,E]=t(oe)),{render:K,hydrate:ge,createApp:Rp(K,ge)}}function ss({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function wl(e,t,s=!1){const n=e.children,i=t.children;if(Q(n)&&Q(i))for(let o=0;o<n.length;o++){const a=n[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=kt(i[o]),l.el=a.el),s||wl(a,l)),l.type===fi&&(l.el=a.el)}}function Ip(e){const t=e.slice(),s=[0];let n,i,o,a,l;const u=e.length;for(n=0;n<u;n++){const d=e[n];if(d!==0){if(i=s[s.length-1],e[i]<d){t[n]=i,s.push(n);continue}for(o=0,a=s.length-1;o<a;)l=o+a>>1,e[s[l]]<d?o=l+1:a=l;d<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,a=s[o-1];o-- >0;)s[o]=a,a=t[a];return s}const Pp=e=>e.__isTeleport,ze=Symbol(void 0),fi=Symbol(void 0),dt=Symbol(void 0),Yn=Symbol(void 0),rn=[];let ut=null;function be(e=!1){rn.push(ut=e?null:[])}function kp(){rn.pop(),ut=rn[rn.length-1]||null}let _n=1;function Ko(e){_n+=e}function Al(e){return e.dynamicChildren=_n>0?ut||Ns:null,kp(),_n>0&&ut&&ut.push(e),e}function we(e,t,s,n,i,o){return Al(b(e,t,s,n,i,o,!0))}function Tl(e,t,s,n,i){return Al(Oe(e,t,s,n,i,!0))}function Ji(e){return e?e.__v_isVNode===!0:!1}function rs(e,t){return e.type===t.type&&e.key===t.key}const di="__vInternal",Cl=({key:e})=>e??null,zn=({ref:e,ref_key:t,ref_for:s})=>e!=null?xe(e)||Ie(e)||ie(e)?{i:Ge,r:e,k:t,f:!!s}:e:null;function b(e,t=null,s=null,n=0,i=null,o=e===ze?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cl(t),ref:t&&zn(t),scopeId:nl,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ge};return l?(Ar(u,s),o&128&&e.normalize(u)):s&&(u.shapeFlag|=xe(s)?8:16),_n>0&&!a&&ut&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&ut.push(u),u}const Oe=Mp;function Mp(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===gp)&&(e=dt),Ji(e)){const l=Ut(e,t,!0);return s&&Ar(l,s),_n>0&&!o&&ut&&(l.shapeFlag&6?ut[ut.indexOf(e)]=l:ut.push(l)),l.patchFlag|=-2,l}if(Gp(e)&&(e=e.__vccOpts),t){t=Vp(t);let{class:l,style:u}=t;l&&!xe(l)&&(t.class=Ht(l)),Ee(u)&&(Ua(u)&&!Q(u)&&(u=Pe({},u)),t.style=ar(u))}const a=xe(e)?1:tp(e)?128:Pp(e)?64:Ee(e)?4:ie(e)?2:0;return b(e,t,s,n,i,a,o,!0)}function Vp(e){return e?Ua(e)||di in e?Pe({},e):e:null}function Ut(e,t,s=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,l=t?jp(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Cl(l),ref:t&&t.ref?s&&i?Q(i)?i.concat(zn(t)):[i,zn(t)]:zn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ut(e.ssContent),ssFallback:e.ssFallback&&Ut(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Re(e=" ",t=0){return Oe(fi,null,e,t)}function Ol(e,t){const s=Oe(Yn,null,e);return s.staticCount=t,s}function et(e="",t=!1){return t?(be(),Tl(dt,null,e)):Oe(dt,null,e)}function mt(e){return e==null||typeof e=="boolean"?Oe(dt):Q(e)?Oe(ze,null,e.slice()):typeof e=="object"?kt(e):Oe(fi,null,String(e))}function kt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ut(e)}function Ar(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Q(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Ar(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!(di in t)?t._ctx=Ge:i===3&&Ge&&(Ge.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ie(t)?(t={default:t,_ctx:Ge},s=32):(t=String(t),n&64?(s=16,t=[Re(t)]):s=8);e.children=t,e.shapeFlag|=s}function jp(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ht([t.class,n.class]));else if(i==="style")t.style=ar([t.style,n.style]);else if(ni(i)){const o=t[i],a=n[i];a&&o!==a&&!(Q(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function _t(e,t,s,n=null){st(e,t,7,[s,n])}const Hp=yl();let Fp=0;function Bp(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||Hp,o={uid:Fp++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new ch(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gl(n,i),emitsOptions:sl(n,i),emit:null,emitted:null,propsDefaults:ye,inheritAttrs:n.inheritAttrs,ctx:ye,data:ye,props:ye,attrs:ye,slots:ye,refs:ye,setupState:ye,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Xh.bind(null,o),e.ce&&e.ce(o),o}let Ce=null;const Kp=()=>Ce||Ge,Ps=e=>{Ce=e,e.scope.on()},cs=()=>{Ce&&Ce.scope.off(),Ce=null};function Sl(e){return e.vnode.shapeFlag&4}let mn=!1;function Up(e,t=!1){mn=t;const{props:s,children:n}=e.vnode,i=Sl(e);Cp(e,s,i,t),Np(e,n);const o=i?Wp(e,t):void 0;return mn=!1,o}function Wp(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=Wa(new Proxy(e.ctx,bp));const{setup:n}=s;if(n){const i=e.setupContext=n.length>1?Yp(e):null;Ps(e),Ws();const o=Bt(n,e,0,[e.props,i]);if(qs(),cs(),$a(o)){if(o.then(cs,cs),t)return o.then(a=>{Uo(e,a,t)}).catch(a=>{ai(a,e,0)});e.asyncDep=o}else Uo(e,o,t)}else Nl(e,t)}function Uo(e,t,s){ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ee(t)&&(e.setupState=Ga(t)),Nl(e,s)}let Wo;function Nl(e,t,s){const n=e.type;if(!e.render){if(!t&&Wo&&!n.render){const i=n.template||yr(e).template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:l,compilerOptions:u}=n,d=Pe(Pe({isCustomElement:o,delimiters:l},a),u);n.render=Wo(i,d)}}e.render=n.render||ft}Ps(e),Ws(),Ep(e),qs(),cs()}function qp(e){return new Proxy(e.attrs,{get(t,s){return Ke(e,"get","$attrs"),t[s]}})}function Yp(e){const t=n=>{e.exposed=n||{}};let s;return{get attrs(){return s||(s=qp(e))},slots:e.slots,emit:e.emit,expose:t}}function hi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ga(Wa(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in nn)return nn[s](e)},has(t,s){return s in t||s in nn}}))}function zp(e,t=!0){return ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Gp(e){return ie(e)&&"__vccOpts"in e}const tt=(e,t)=>Uh(e,t,mn);function xl(e,t,s){const n=arguments.length;return n===2?Ee(t)&&!Q(t)?Ji(t)?Oe(e,null,[t]):Oe(e,t):Oe(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ji(s)&&(s=[s]),Oe(e,t,s))}const Xp=Symbol(""),Qp=()=>St(Xp),Jp="3.2.47",Zp="http://www.w3.org/2000/svg",os=typeof document<"u"?document:null,qo=os&&os.createElement("template"),e_={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t?os.createElementNS(Zp,e):os.createElement(e,s?{is:s}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>os.createTextNode(e),createComment:e=>os.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>os.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const a=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{qo.innerHTML=n?`<svg>${e}</svg>`:e;const l=qo.content;if(n){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function t_(e,t,s){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function s_(e,t,s){const n=e.style,i=xe(s);if(s&&!i){if(t&&!xe(t))for(const o in t)s[o]==null&&Zi(n,o,"");for(const o in s)Zi(n,o,s[o])}else{const o=n.display;i?t!==s&&(n.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const Yo=/\s*!important$/;function Zi(e,t,s){if(Q(s))s.forEach(n=>Zi(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=n_(e,t);Yo.test(s)?e.setProperty(hs(n),s.replace(Yo,""),"important"):e[n]=s}}const zo=["Webkit","Moz","ms"],Pi={};function n_(e,t){const s=Pi[t];if(s)return s;let n=Et(t);if(n!=="filter"&&n in e)return Pi[t]=n;n=ri(n);for(let i=0;i<zo.length;i++){const o=zo[i]+n;if(o in e)return Pi[t]=o}return t}const Go="http://www.w3.org/1999/xlink";function i_(e,t,s,n,i){if(n&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(Go,t.slice(6,t.length)):e.setAttributeNS(Go,t,s);else{const o=eh(t);s==null||o&&!Na(s)?e.removeAttribute(t):e.setAttribute(t,o?"":s)}}function r_(e,t,s,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=s??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=s;const u=s??"";(e.value!==u||e.tagName==="OPTION")&&(e.value=u),s==null&&e.removeAttribute(t);return}let l=!1;if(s===""||s==null){const u=typeof e[t];u==="boolean"?s=Na(s):s==null&&u==="string"?(s="",l=!0):u==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(t)}function Vt(e,t,s,n){e.addEventListener(t,s,n)}function o_(e,t,s,n){e.removeEventListener(t,s,n)}function a_(e,t,s,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[l,u]=l_(t);if(n){const d=o[t]=f_(n,i);Vt(e,l,d,u)}else a&&(o_(e,l,a,u),o[t]=void 0)}}const Xo=/(?:Once|Passive|Capture)$/;function l_(e){let t;if(Xo.test(e)){t={};let n;for(;n=e.match(Xo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hs(e.slice(2)),t]}let ki=0;const c_=Promise.resolve(),u_=()=>ki||(c_.then(()=>ki=0),ki=Date.now());function f_(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;st(d_(n,s.value),t,5,[n])};return s.value=e,s.attached=u_(),s}function d_(e,t){if(Q(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Qo=/^on[a-z]/,h_=(e,t,s,n,i=!1,o,a,l,u)=>{t==="class"?t_(e,n,i):t==="style"?s_(e,s,n):ni(t)?cr(t)||a_(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):p_(e,t,n,i))?r_(e,t,n,o,a,l,u):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),i_(e,t,n,i))};function p_(e,t,s,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&Qo.test(t)&&ie(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Qo.test(t)&&xe(s)?!1:t in e}const __={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};op.props;const ks=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?s=>Kn(t,s):t};function m_(e){e.target.composing=!0}function Jo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const jt={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e._assign=ks(i);const o=n||i.props&&i.props.type==="number";Vt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;s&&(l=l.trim()),o&&(l=Qn(l)),e._assign(l)}),s&&Vt(e,"change",()=>{e.value=e.value.trim()}),t||(Vt(e,"compositionstart",m_),Vt(e,"compositionend",Jo),Vt(e,"change",Jo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:n,number:i}},o){if(e._assign=ks(o),e.composing||document.activeElement===e&&e.type!=="range"&&(s||n&&e.value.trim()===t||(i||e.type==="number")&&Qn(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},g_={deep:!0,created(e,t,s){e._assign=ks(s),Vt(e,"change",()=>{const n=e._modelValue,i=gn(e),o=e.checked,a=e._assign;if(Q(n)){const l=lr(n,i),u=l!==-1;if(o&&!u)a(n.concat(i));else if(!o&&u){const d=[...n];d.splice(l,1),a(d)}}else if(Us(n)){const l=new Set(n);o?l.add(i):l.delete(i),a(l)}else a($l(e,o))})},mounted:Zo,beforeUpdate(e,t,s){e._assign=ks(s),Zo(e,t,s)}};function Zo(e,{value:t,oldValue:s},n){e._modelValue=t,Q(t)?e.checked=lr(t,n.props.value)>-1:Us(t)?e.checked=t.has(n.props.value):t!==s&&(e.checked=bn(t,$l(e,!0)))}const v_={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const i=Us(t);Vt(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?Qn(gn(a)):gn(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=ks(n)},mounted(e,{value:t}){ea(e,t)},beforeUpdate(e,t,s){e._assign=ks(s)},updated(e,{value:t}){ea(e,t)}};function ea(e,t){const s=e.multiple;if(!(s&&!Q(t)&&!Us(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=gn(o);if(s)Q(t)?o.selected=lr(t,a)>-1:o.selected=t.has(a);else if(bn(gn(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function gn(e){return"_value"in e?e._value:e.value}function $l(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const b_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},E_=(e,t)=>s=>{if(!("key"in s))return;const n=hs(s.key);if(t.some(i=>i===n||b_[i]===n))return e(s)},y_=Pe({patchProp:h_},e_);let ta;function w_(){return ta||(ta=Lp(y_))}const A_=(...e)=>{const t=w_().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=T_(n);if(!i)return;const o=t._component;!ie(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function T_(e){return xe(e)?document.querySelector(e):e}class C_{constructor(t,s){console.log("User has been instantiated."),this.domain_origin=s,this.messages=t,this.login_email="",this.login_password="",this.user={},this.checking=!1,this.password_authorised=!1,this.mfa_authorised=!1,this.logged_in=!1,this.mfa_secret_confirmed=!1,this.mfa_qr_image=[],this.email="",this.name="",this.role_name="",this.ip_address="127.0.0.1",this.mfa_authenticator_code="",this.status="",this.invalid_token=!1,this.session_jwt=""}get_mfa_jwt_from_local_storage(t){return localStorage.getItem("mfa_jwt_"+t)}get_ip_address(){fetch("https://api.ipify.org?format=json").then(s=>s.json()).then(s=>{this.ip_address=s.ip}).catch(s=>{this.ip_address="127.0.0.1",console.log(s)})}api_reset_password_request(t){var s={};s.email=t;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},i=this.domain_origin+"/api_reset_password_request";fetch(i,n).then(o=>o.json()).then(o=>{this.messages.add_message(o.message,"text-success h6")}).catch(o=>{console.log(o)})}api_reset_password(t){var s={};s.session_jwt=this.session_jwt,s.input=t;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},i=this.domain_origin+"/api_reset_password";fetch(i,n).then(o=>o.json()).then(o=>{o.rc==0?(this.messages.add_message(o.message,"text-success h6"),setTimeout(()=>{location.replace("/login")},5e3)):this.messages.add_message(o.message,"text-danger h6")}).catch(o=>{console.log(o)})}check_mfa_authenticator_code(){if(this.password_authorised){var t={};t.session_jwt=this.session_jwt,t.ip_address=this.ip_address,t.mfa_authenticator_code=this.mfa_authenticator_code;const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=this.domain_origin+"/api_check_mfa_authenticator_code";fetch(n,s).then(i=>i.json()).then(i=>{try{localStorage.removeItem("mfa_"+this.email)}catch(o){console.log(o)}try{localStorage.setItem("mfa_"+this.email,i.mfa_jwt)}catch(o){console.log(o),localStorage.setItem("mfa_"+this.email,"")}try{i.mfa_jwt&&i.rc==0?(this.mfa_authorised=!0,this.mfa_secret_confirmed=!0,this.logged_in=!0,this.messages.add_message("The code authenticated correctly and you are now logged in ","text-success h6")):(this.mfa_authorised=!1,this.logged_in=!1,this.messages.add_message("The code did not authenticate correctly. It may have just missed the time expiry, get a new code and try again","text-danger h6"))}catch{}}).catch(i=>{console.log(i)})}return t}getUserFromApi(){if(this.logged_in){var t={};t.session_jwt=this.session_jwt,t.ip_address=this.ip_address,t.mfa_jwt=localStorage.getItem("mfa_"+this.email);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=this.domain_origin+"/api_get_user";fetch(n,s).then(i=>i.json()).then(i=>{i.user.logged_in||this.logOut(!0)}).catch(i=>{console.log(i)})}return t}login(){const t=localStorage.getItem("mfa_"+email),s={};if(s.email=this.login_email,s.password=this.login_password,s.ip_address=this.ip_address,s.mfa_jwt=t,this.login_email="",this.login_password="",this.logged_in==!0)this.messages.add_message("Already logged in","text-danger h6");else{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};fetch("/api_login",n).then(i=>i.json()).then(i=>{if(this.session_jwt=i.session_jwt,i.rc==0){this.messages.add_message(i.message,"text-success h6");const o=i.user;o.mfa_authorised?(this.logged_in=!0,this.mfa_authorised=!0,this.mfa_secret_confirmed=!0):(this.logged_in=!1,this.mfa_authorised=!1,this.mfa_secret_confirmed=o.mfa_secret_confirmed,this.mfa_qr_image=i.mfa_qr_image),o.password_authorised?(this.password_authorised=!0,this.email=email,this.id=o.id,this.name=o.name,this.role_name=o.role_name,this.session_jwt=o.session_jwt,this.failed_login_streak=o.failed_login_streak):(this.password_authorised=!1,this.logged_in=!1,this.email="",this.id="",this.name="",this.role_name="",this.failed_login_streak="",this.logout(),this.messages.add_message(i.message,"text-danger h6"),setTimeout(()=>{location.replace("/login")},5e3))}else setTimeout(()=>{location.replace("/login")},5e3),this.messages.add_message(i.message,"text-danger h6")}).catch(i=>{console.log(i)})}}logout(){console.log("inside logout method"),this.logged_in=!1,this.session_jwt="",this.role_name="",this.email="",this.password_authorised=!1}get_secret_and_image(t){if(this.logged_in){var s={};s.session_jwt=this.session_jwt;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},i=this.domain_origin+"/api_get_secret_and_image";fetch(i,n).then(o=>o.json()).then(o=>{if(o.rc==0){this.messages.add_message("Us your authenticator app (from Google or Microsoft) to scan the qr-code","text-success h6");const a=o.secret,l=o.image;t.secret=a,t.image=l}else this.messages.add_message("There was a slight problem, if you can't proceed, please try again in 5 minutes","text-danger h6"),t.secret="Failed in user.js",t.image=""}).catch(o=>{t.secret="",t.image="",console.log(o)})}return s}setlocalStorage(){sessionStorage.setItem("user",JSON.stringify({logged_in:this.logged_in,role_name:this.role_name}))}api_reset_password(t){var s={};s.session_jwt=this.session_jwt,s.input=t;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},i=this.domain_origin+"/api_reset_password";fetch(i,n).then(o=>o.json()).then(o=>{o.rc==0?(this.messages.add_message(o.message,"text-success h6"),setTimeout(()=>{location.replace("/login")},5e3)):this.messages.add_message(o.message,"text-danger h6")}).catch(o=>{console.log(o)})}check_token_validity(){if(this.logged_in){const t={token:this.session_jwt},s={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};fetch("/api_check_jwt",s).then(n=>{if(!n.ok)throw Error(n.status);return n.json()}).then(n=>{console.log(n),n.status=="invalid"?this.invalid_token=!0:console.log("Token valid, still logged in.")}).catch(n=>{console.log(n)})}}}class O_{constructor(t,s,n,i){console.log("Users has been instantiated."),this.messages=s,this.roles=i,this.user=t,this.domain_origin=n,this.user_list=[],this.new_user={},this.new_user.name="",this.new_user.email="",this.new_user.role="",this.user_to_delete="",this.selected_users=[],this.model_name="User",this.role_valid="",this.email_valid="",this.name_valid="",this.password_valid=""}api_create_user_db(){console.log("inside api_create_user_db");var t=this.new_user;const s=this.roles.get_role_from_name(this.new_user.role);t.id=this.generate_token(),t.role_id=s.id,this.selected_users.push(t);const n={};n.model_name="User",n.session_jwt=this.user.session_jwt,n.role=s;const i={};i.create_package=t,n.data=i;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},a=this.domain_origin+"/api_create_user_db";fetch(a,o).then(l=>l.json()).then(l=>{if(l.rc==0){this.messages.add_message(l.message,"text-success h6");const u=l.created_record;t.id=u.id,this.user_list.push(u)}else this.messages.add_message(l.message,"text-danger h6"),this.remove_local_selected_user(t.id)}).catch(l=>{console.log(l)})}delete_user(t){console.log("inside delete_user method");const s=this.get_selected_user_from_id(t);s.id="";const n={};n.session_jwt=this.user.session_jwt,n.model_name="User";const i={},o={};o.id=t,i.delete_package=o,n.data=i;const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},l=this.domain_origin+"/api_delete_record_db";fetch(l,a).then(u=>u.json()).then(u=>{if(u.rc==0){this.messages.add_message(u.message,"text-success h6");for(let d in this.user_list)this.user_list[d].id==t&&this.user_list.splice(d,1)}else this.messages.add_message(u.message,"text-danger h6")}).catch(u=>{console.log(u)})}generate_token(t){Number.isFinite(t)?t=t*1:t=12;for(var s="aAbBcCdDeEfFgGhHjJkKmMnNpPqQrRsStTuUvVwWxXyYzZ23456789!&-_",n="£!1Ww",i=0;i<t;i++){var o=Math.floor(Math.random()*s.length);n=n+s[o]}return n}remove_local_selected_user(t){for(let s=0;s<this.selected_users.length;s++)this.selected_users[s].id==t&&this.selected_users.splice(s,1)}populate_user_list(){console.log("inside populate_user_list method");const t={model_name:"User",session_jwt:this.user.session_jwt},s={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};fetch("/api_get_records_db",s).then(n=>{if(!n.ok)throw Error(n.status);return n.json()}).then(n=>{this.user_list=n}).catch(n=>{console.log(n)})}get_selected_user_from_id(t){for(let s=0;s<this.selected_users.length;s++){const n=this.selected_users[s];if(n.id==t)return n}return{}}check_name_valid(t){this.name_valid="";let s=!0;var n=/^[a-zA-Z\s-]+$/;const i=n.test(t);n=/^[a-zA-Z\s]+$/;const o=n.test(t);!i&&!o&&(s=!1),s?this.name_valid="is-valid":this.name_valid="is-invalid"}check_email_valid(t){this.email_valid="",/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t)?this.email_valid="is-valid":this.email_valid="is-invalid"}check_role_valid(){this.role_valid="is-valid"}check_password_valid(t){this.password_valid="",this.is_strong_enough(t)?this.password_valid="is-valid":this.password_valid="is-invalid"}is_strong_enough(t){let s=!0;t.length<8&&(s=!1),t.length>64&&(s=!1);let n={};for(let u of t)try{n[u]=n[u]+1}catch{n[u]=1}for(let u in n)n[u]/t.length>.5&&(s=!1);Object.keys(n).length<3&&(s=!1);let i=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=!1;for(let u of t)if(i.includes(u.toLowerCase())&&u===u.toUpperCase()){o=!0;break}o||(s=!1);let a=!1;for(let u of t)if(i.includes(u.toLowerCase())&&u===u.toLowerCase()){a=!0;break}a||(s=!1);let l=!1;for(let u of t)try{u=parseInt(u),l=!0;break}catch{}return l||(s=!1),s}}class S_{constructor(){console.log("Messages has been instantiated."),this.message_array=[]}add_message(t,s){let n={};return n.message=t,n.type=s,this.message_array.push(n),this.message_array}}const ps=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},N_={props:["messages"],methods:{delete_message(e){this.messages.message_array.splice(e,1)}}},x_={class:"container position-absolute bottom-0 start-0"},$_={class:"list-group mb-3"},R_=["onClick"];function L_(e,t,s,n,i,o){return be(),we("div",x_,[b("ul",$_,[(be(!0),we(ze,null,pl(this.messages.message_array,(a,l)=>(be(),we("li",{class:Ht(["list-group-item my-0",a.type])},[b("span",null,sn(a.message),1),b("button",{type:"button",class:"btn btn-light btn-sm me-2",onClick:u=>this.delete_message(l)},"X",8,R_)],2))),256))])])}const D_=ps(N_,[["render",L_]]),Rl=""+new URL("dt_squad_logo-13367e92.png",import.meta.url).href;const I_={props:["user","messages"]},P_={class:"navbar navbar-expand-lg navbar-light",style:{"background-color":"#ffffff"}},k_=b("img",{src:Rl,alt:"Logo",style:{width:"75px"}},null,-1),M_=b("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[b("span",{class:"navbar-toggler-icon"})],-1),V_={class:"collapse navbar-collapse",id:"navbarSupportedContent"},j_={class:"navbar-nav me-auto mb-2 mb-lg-0"},H_={class:"nav-item"},F_={class:"nav-item"},B_={class:"d-flex"},K_={class:"navbar-nav me-auto mb-2 mb-lg-0"},U_={key:0,class:"nav-item dropdown",style:{"margin-right":"50px"}},W_={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},q_={class:"dropdown-menu","aria-labelledby":"navbarDropdown",style:{margin:"0"}},Y_={class:"nav-item"};function z_(e,t,s,n,i,o){const a=Ds("router-link"),l=Ds("RouterLink");return be(),we("nav",P_,[Oe(a,{class:"navbar-brand",to:"/"},{default:Ss(()=>[k_]),_:1}),M_,b("div",V_,[b("ul",j_,[b("li",H_,[Oe(l,{to:"/",class:"nav-link"},{default:Ss(()=>[Re("Home")]),_:1})]),b("li",F_,[Oe(l,{to:"/crud",class:"nav-link"},{default:Ss(()=>[Re("Manage Users")]),_:1})])]),b("div",B_,[b("ul",K_,[s.user.logged_in?(be(),we("li",U_,[b("a",W_,sn(s.user.name)+"     ",1),b("ul",q_,[b("li",Y_,[b("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=u=>{s.user.logout()})},"logout")]),b("li",null,[Oe(a,{class:"nav-link active",to:"/passwordresetview"},{default:Ss(()=>[Re("Change Password")]),_:1})])])])):et("",!0)])])])])}const G_=ps(I_,[["render",z_]]);class X_{constructor(t,s){this.objectName="Roles",this.model_name="Role",this.domain_origin=t,this.user=s,this.roles=[],this.test="hey there from Roles",this.counter=0}get_roles_from_api(){const t={};t.session_jwt=this.user.session_jwt,t.model_name=this.model_name;const s={};t.data=s;const n=this.domain_origin+"/api_get_records_db",i={};i.is_deleted=0,s.filter_package=i,console.log("inside Roles");const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(n,o).then(a=>a.json()).then(a=>{a.rc==0&&(this.roles=a.records)}).catch(a=>{console.log(a)})}get_roles(){return this.roles}get_role_from_id(t){for(let s=0;s<this.roles.length;s++){const n=this.roles[s];if(n.id==t)return n}return{}}get_role_from_name(t){for(let s=0;s<this.roles.length;s++){const n=this.roles[s];if(n.name==t)return n}return{}}}const Q_={data(){return{users:{},user:{},messages:{},roles:{}}},created(){const e=Ot(new S_),t=Ot(new C_(e,window.location.origin)),s=Ot(new X_(window.location.origin,t)),n=Ot(new O_(t,e,window.location.origin,s));this.user=t,this.roles=s,this.users=n,this.messages=e,this.check_invalid_token(),this.check_token_validity()},components:{MessageDisplay:D_,Navbar:G_},methods:{check_invalid_token(){this.user.invalid_token==!0&&(this.user.logout(),this.messages.add_message("Session expired, please login.","text-danger h6"),this.$router.push({name:"login"}),this.user.logged_in=!1,this.user.invalid_token=!1),setTimeout(this.check_invalid_token,2e3)},check_token_validity(){this.user.logged_in==!0&&this.user.check_token_validity(),setTimeout(this.check_token_validity,3e4)},vue_refresh(){try{this.needs_vue_refresh.data=this.user.ip_address}catch{}this.needs_vue_refresh.keep_looping&&setTimeout(this.vue_refresh,500)},check_logged_in(){!this.user.logged_in&&this.$router.name!="passwordreset"&&this.$router.push("login"),setTimeout(this.check_logged_in,5e3)}}},J_={class:"container-fluid"},Z_=b("div",null,[b("br"),Re(),b("br"),Re(),b("br")],-1),em={class:"fixed-bottom text-bg-dark",style:{"z-index":"9999"}},tm=b("hr",{class:"mx-1 my-1"},null,-1),sm=b("div",{class:"row"},[b("div",{class:"col"},[b("p",{class:"mx-3 my-1 py-0 text-start"}," For support, please email us at: support@thebigteam.co.uk ")]),b("div",{class:"col"},[b("p",{class:"mx-3 my-1 py-0 text-end"},[b("i",{className:"icon bi-c-circle ms-0 ps-0",style:{"font-size":"1.0rem"}}),Re(" 2023 - dt-squad Ltd  ")])])],-1),nm=b("hr",{class:"mx-1 my-1"},null,-1);function im(e,t,s,n,i,o){const a=Ds("Navbar"),l=Ds("RouterView"),u=Ds("MessageDisplay");return be(),we("div",J_,[this.user.logged_in?(be(),Tl(a,{key:0,user:i.user,messages:i.messages,roles:i.roles},null,8,["user","messages","roles"])):et("",!0),Oe(l,{users:i.users,user:i.user,roles:i.roles,messages:i.messages},null,8,["users","user","roles","messages"]),Z_,b("footer",em,[Oe(u,{messages:i.messages},null,8,["messages"]),tm,sm,nm])])}const rm=ps(Q_,[["render",im]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Cs=typeof window<"u";function om(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const me=Object.assign;function Mi(e,t){const s={};for(const n in t){const i=t[n];s[n]=ht(i)?i.map(e):e(i)}return s}const on=()=>{},ht=Array.isArray,am=/\/$/,lm=e=>e.replace(am,"");function Vi(e,t,s="/"){let n,i={},o="",a="";const l=t.indexOf("#");let u=t.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(n=t.slice(0,u),o=t.slice(u+1,l>-1?l:t.length),i=e(o)),l>-1&&(n=n||t.slice(0,l),a=t.slice(l,t.length)),n=dm(n??t,s),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function cm(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function sa(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function um(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&Ms(t.matched[n],s.matched[i])&&Ll(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ms(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ll(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!fm(e[s],t[s]))return!1;return!0}function fm(e,t){return ht(e)?na(e,t):ht(t)?na(t,e):e===t}function na(e,t){return ht(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function dm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/");let i=s.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var vn;(function(e){e.pop="pop",e.push="push"})(vn||(vn={}));var an;(function(e){e.back="back",e.forward="forward",e.unknown=""})(an||(an={}));function hm(e){if(!e)if(Cs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),lm(e)}const pm=/^[^#]+#/;function _m(e,t){return e.replace(pm,"#")+t}function mm(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const pi=()=>({left:window.pageXOffset,top:window.pageYOffset});function gm(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=mm(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ia(e,t){return(history.state?history.state.position-t:-1)+e}const er=new Map;function vm(e,t){er.set(e,t)}function bm(e){const t=er.get(e);return er.delete(e),t}let Em=()=>location.protocol+"//"+location.host;function Dl(e,t){const{pathname:s,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let l=i.includes(e.slice(o))?e.slice(o).length:1,u=i.slice(l);return u[0]!=="/"&&(u="/"+u),sa(u,"")}return sa(s,e)+n+i}function ym(e,t,s,n){let i=[],o=[],a=null;const l=({state:v})=>{const y=Dl(e,location),R=s.value,O=t.value;let I=0;if(v){if(s.value=y,t.value=v,a&&a===R){a=null;return}I=O?v.position-O.position:0}else n(y);i.forEach(L=>{L(s.value,R,{delta:I,type:vn.pop,direction:I?I>0?an.forward:an.back:an.unknown})})};function u(){a=s.value}function d(v){i.push(v);const y=()=>{const R=i.indexOf(v);R>-1&&i.splice(R,1)};return o.push(y),y}function f(){const{history:v}=window;v.state&&v.replaceState(me({},v.state,{scroll:pi()}),"")}function g(){for(const v of o)v();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",f),{pauseListeners:u,listen:d,destroy:g}}function ra(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?pi():null}}function wm(e){const{history:t,location:s}=window,n={value:Dl(e,s)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(u,d,f){const g=e.indexOf("#"),v=g>-1?(s.host&&document.querySelector("base")?e:e.slice(g))+u:Em()+e+u;try{t[f?"replaceState":"pushState"](d,"",v),i.value=d}catch(y){console.error(y),s[f?"replace":"assign"](v)}}function a(u,d){const f=me({},t.state,ra(i.value.back,u,i.value.forward,!0),d,{position:i.value.position});o(u,f,!0),n.value=u}function l(u,d){const f=me({},i.value,t.state,{forward:u,scroll:pi()});o(f.current,f,!0);const g=me({},ra(n.value,u,null),{position:f.position+1},d);o(u,g,!1),n.value=u}return{location:n,state:i,push:l,replace:a}}function Am(e){e=hm(e);const t=wm(e),s=ym(e,t.state,t.location,t.replace);function n(o,a=!0){a||s.pauseListeners(),history.go(o)}const i=me({location:"",base:e,go:n,createHref:_m.bind(null,e)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Tm(e){return typeof e=="string"||e&&typeof e=="object"}function Il(e){return typeof e=="string"||typeof e=="symbol"}const Pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Pl=Symbol("");var oa;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(oa||(oa={}));function Vs(e,t){return me(new Error,{type:e,[Pl]:!0},t)}function Tt(e,t){return e instanceof Error&&Pl in e&&(t==null||!!(e.type&t))}const aa="[^/]+?",Cm={sensitive:!1,strict:!1,start:!0,end:!0},Om=/[.+*?^${}()[\]/\\]/g;function Sm(e,t){const s=me({},Cm,t),n=[];let i=s.start?"^":"";const o=[];for(const d of e){const f=d.length?[]:[90];s.strict&&!d.length&&(i+="/");for(let g=0;g<d.length;g++){const v=d[g];let y=40+(s.sensitive?.25:0);if(v.type===0)g||(i+="/"),i+=v.value.replace(Om,"\\$&"),y+=40;else if(v.type===1){const{value:R,repeatable:O,optional:I,regexp:L}=v;o.push({name:R,repeatable:O,optional:I});const H=L||aa;if(H!==aa){y+=10;try{new RegExp(`(${H})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${R}" (${H}): `+F.message)}}let V=O?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;g||(V=I&&d.length<2?`(?:/${V})`:"/"+V),I&&(V+="?"),i+=V,y+=20,I&&(y+=-8),O&&(y+=-20),H===".*"&&(y+=-50)}f.push(y)}n.push(f)}if(s.strict&&s.end){const d=n.length-1;n[d][n[d].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&(i+="(?:/|$)");const a=new RegExp(i,s.sensitive?"":"i");function l(d){const f=d.match(a),g={};if(!f)return null;for(let v=1;v<f.length;v++){const y=f[v]||"",R=o[v-1];g[R.name]=y&&R.repeatable?y.split("/"):y}return g}function u(d){let f="",g=!1;for(const v of e){(!g||!f.endsWith("/"))&&(f+="/"),g=!1;for(const y of v)if(y.type===0)f+=y.value;else if(y.type===1){const{value:R,repeatable:O,optional:I}=y,L=R in d?d[R]:"";if(ht(L)&&!O)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const H=ht(L)?L.join("/"):L;if(!H)if(I)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):g=!0);else throw new Error(`Missing required param "${R}"`);f+=H}}return f||"/"}return{re:a,score:n,keys:o,parse:l,stringify:u}}function Nm(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function xm(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const o=Nm(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(la(n))return 1;if(la(i))return-1}return i.length-n.length}function la(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const $m={type:0,value:""},Rm=/[a-zA-Z0-9_]/;function Lm(e){if(!e)return[[]];if(e==="/")return[[$m]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${s})/"${d}": ${y}`)}let s=0,n=s;const i=[];let o;function a(){o&&i.push(o),o=[]}let l=0,u,d="",f="";function g(){d&&(s===0?o.push({type:0,value:d}):s===1||s===2||s===3?(o.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),d="")}function v(){d+=u}for(;l<e.length;){if(u=e[l++],u==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:u==="/"?(d&&g(),a()):u===":"?(g(),s=1):v();break;case 4:v(),s=n;break;case 1:u==="("?s=2:Rm.test(u)?v():(g(),s=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:s=3:f+=u;break;case 3:g(),s=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,f="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${d}"`),g(),a(),i}function Dm(e,t,s){const n=Sm(Lm(e.path),s),i=me(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Im(e,t){const s=[],n=new Map;t=fa({strict:!1,end:!0,sensitive:!1},t);function i(f){return n.get(f)}function o(f,g,v){const y=!v,R=Pm(f);R.aliasOf=v&&v.record;const O=fa(t,f),I=[R];if("alias"in f){const V=typeof f.alias=="string"?[f.alias]:f.alias;for(const F of V)I.push(me({},R,{components:v?v.record.components:R.components,path:F,aliasOf:v?v.record:R}))}let L,H;for(const V of I){const{path:F}=V;if(g&&F[0]!=="/"){const q=g.record.path,Z=q[q.length-1]==="/"?"":"/";V.path=g.record.path+(F&&Z+F)}if(L=Dm(V,g,O),v?v.alias.push(L):(H=H||L,H!==L&&H.alias.push(L),y&&f.name&&!ua(L)&&a(f.name)),R.children){const q=R.children;for(let Z=0;Z<q.length;Z++)o(q[Z],L,v&&v.children[Z])}v=v||L,(L.record.components&&Object.keys(L.record.components).length||L.record.name||L.record.redirect)&&u(L)}return H?()=>{a(H)}:on}function a(f){if(Il(f)){const g=n.get(f);g&&(n.delete(f),s.splice(s.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=s.indexOf(f);g>-1&&(s.splice(g,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return s}function u(f){let g=0;for(;g<s.length&&xm(f,s[g])>=0&&(f.record.path!==s[g].record.path||!kl(f,s[g]));)g++;s.splice(g,0,f),f.record.name&&!ua(f)&&n.set(f.record.name,f)}function d(f,g){let v,y={},R,O;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw Vs(1,{location:f});O=v.record.name,y=me(ca(g.params,v.keys.filter(H=>!H.optional).map(H=>H.name)),f.params&&ca(f.params,v.keys.map(H=>H.name))),R=v.stringify(y)}else if("path"in f)R=f.path,v=s.find(H=>H.re.test(R)),v&&(y=v.parse(R),O=v.record.name);else{if(v=g.name?n.get(g.name):s.find(H=>H.re.test(g.path)),!v)throw Vs(1,{location:f,currentLocation:g});O=v.record.name,y=me({},g.params,f.params),R=v.stringify(y)}const I=[];let L=v;for(;L;)I.unshift(L.record),L=L.parent;return{name:O,path:R,params:y,matched:I,meta:Mm(I)}}return e.forEach(f=>o(f)),{addRoute:o,resolve:d,removeRoute:a,getRoutes:l,getRecordMatcher:i}}function ca(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Pm(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:km(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function km(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="boolean"?s:s[n];return t}function ua(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Mm(e){return e.reduce((t,s)=>me(t,s.meta),{})}function fa(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function kl(e,t){return t.children.some(s=>s===e||kl(e,s))}const Ml=/#/g,Vm=/&/g,jm=/\//g,Hm=/=/g,Fm=/\?/g,Vl=/\+/g,Bm=/%5B/g,Km=/%5D/g,jl=/%5E/g,Um=/%60/g,Hl=/%7B/g,Wm=/%7C/g,Fl=/%7D/g,qm=/%20/g;function Tr(e){return encodeURI(""+e).replace(Wm,"|").replace(Bm,"[").replace(Km,"]")}function Ym(e){return Tr(e).replace(Hl,"{").replace(Fl,"}").replace(jl,"^")}function tr(e){return Tr(e).replace(Vl,"%2B").replace(qm,"+").replace(Ml,"%23").replace(Vm,"%26").replace(Um,"`").replace(Hl,"{").replace(Fl,"}").replace(jl,"^")}function zm(e){return tr(e).replace(Hm,"%3D")}function Gm(e){return Tr(e).replace(Ml,"%23").replace(Fm,"%3F")}function Xm(e){return e==null?"":Gm(e).replace(jm,"%2F")}function ti(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Qm(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Vl," "),a=o.indexOf("="),l=ti(a<0?o:o.slice(0,a)),u=a<0?null:ti(o.slice(a+1));if(l in t){let d=t[l];ht(d)||(d=t[l]=[d]),d.push(u)}else t[l]=u}return t}function da(e){let t="";for(let s in e){const n=e[s];if(s=zm(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(ht(n)?n.map(o=>o&&tr(o)):[n&&tr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Jm(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=ht(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const Zm=Symbol(""),ha=Symbol(""),Cr=Symbol(""),Bl=Symbol(""),sr=Symbol("");function en(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function s(){e=[]}return{add:t,list:()=>e,reset:s}}function Mt(e,t,s,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=g=>{g===!1?l(Vs(4,{from:s,to:t})):g instanceof Error?l(g):Tm(g)?l(Vs(2,{from:t,to:g})):(o&&n.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},d=e.call(n&&n.instances[i],t,s,u);let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(g=>l(g))})}function ji(e,t,s,n){const i=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(eg(l)){const d=(l.__vccOpts||l)[t];d&&i.push(Mt(d,s,n,o,a))}else{let u=l();i.push(()=>u.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=om(d)?d.default:d;o.components[a]=f;const v=(f.__vccOpts||f)[t];return v&&Mt(v,s,n,o,a)()}))}}return i}function eg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function pa(e){const t=St(Cr),s=St(Bl),n=tt(()=>t.resolve(Rs(e.to))),i=tt(()=>{const{matched:u}=n.value,{length:d}=u,f=u[d-1],g=s.matched;if(!f||!g.length)return-1;const v=g.findIndex(Ms.bind(null,f));if(v>-1)return v;const y=_a(u[d-2]);return d>1&&_a(f)===y&&g[g.length-1].path!==y?g.findIndex(Ms.bind(null,u[d-2])):v}),o=tt(()=>i.value>-1&&ig(s.params,n.value.params)),a=tt(()=>i.value>-1&&i.value===s.matched.length-1&&Ll(s.params,n.value.params));function l(u={}){return ng(u)?t[Rs(e.replace)?"replace":"push"](Rs(e.to)).catch(on):Promise.resolve()}return{route:n,href:tt(()=>n.value.href),isActive:o,isExactActive:a,navigate:l}}const tg=ll({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:pa,setup(e,{slots:t}){const s=Ot(pa(e)),{options:n}=St(Cr),i=tt(()=>({[ma(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[ma(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&t.default(s);return e.custom?o:xl("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),sg=tg;function ng(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ig(e,t){for(const s in t){const n=t[s],i=e[s];if(typeof n=="string"){if(n!==i)return!1}else if(!ht(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function _a(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ma=(e,t,s)=>e??t??s,rg=ll({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=St(sr),i=tt(()=>e.route||n.value),o=St(ha,0),a=tt(()=>{let d=Rs(o);const{matched:f}=i.value;let g;for(;(g=f[d])&&!g.components;)d++;return d}),l=tt(()=>i.value.matched[a.value]);Un(ha,tt(()=>a.value+1)),Un(Zm,l),Un(sr,i);const u=jh();return Wn(()=>[u.value,l.value,e.name],([d,f,g],[v,y,R])=>{f&&(f.instances[g]=d,y&&y!==f&&d&&d===v&&(f.leaveGuards.size||(f.leaveGuards=y.leaveGuards),f.updateGuards.size||(f.updateGuards=y.updateGuards))),d&&f&&(!y||!Ms(f,y)||!v)&&(f.enterCallbacks[g]||[]).forEach(O=>O(d))},{flush:"post"}),()=>{const d=i.value,f=e.name,g=l.value,v=g&&g.components[f];if(!v)return ga(s.default,{Component:v,route:d});const y=g.props[f],R=y?y===!0?d.params:typeof y=="function"?y(d):y:null,I=xl(v,me({},R,t,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(g.instances[f]=null)},ref:u}));return ga(s.default,{Component:I,route:d})||I}}});function ga(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const og=rg;function ag(e){const t=Im(e.routes,e),s=e.parseQuery||Qm,n=e.stringifyQuery||da,i=e.history,o=en(),a=en(),l=en(),u=Hh(Pt);let d=Pt;Cs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Mi.bind(null,C=>""+C),g=Mi.bind(null,Xm),v=Mi.bind(null,ti);function y(C,B){let M,K;return Il(C)?(M=t.getRecordMatcher(C),K=B):K=C,t.addRoute(K,M)}function R(C){const B=t.getRecordMatcher(C);B&&t.removeRoute(B)}function O(){return t.getRoutes().map(C=>C.record)}function I(C){return!!t.getRecordMatcher(C)}function L(C,B){if(B=me({},B||u.value),typeof C=="string"){const h=Vi(s,C,B.path),m=t.resolve({path:h.path},B),w=i.createHref(h.fullPath);return me(h,m,{params:v(m.params),hash:ti(h.hash),redirectedFrom:void 0,href:w})}let M;if("path"in C)M=me({},C,{path:Vi(s,C.path,B.path).path});else{const h=me({},C.params);for(const m in h)h[m]==null&&delete h[m];M=me({},C,{params:g(C.params)}),B.params=g(B.params)}const K=t.resolve(M,B),oe=C.hash||"";K.params=f(v(K.params));const ge=cm(n,me({},C,{hash:Ym(oe),path:K.path})),E=i.createHref(ge);return me({fullPath:ge,hash:oe,query:n===da?Jm(C.query):C.query||{}},K,{redirectedFrom:void 0,href:E})}function H(C){return typeof C=="string"?Vi(s,C,u.value.path):me({},C)}function V(C,B){if(d!==C)return Vs(8,{from:B,to:C})}function F(C){return se(C)}function q(C){return F(me(H(C),{replace:!0}))}function Z(C){const B=C.matched[C.matched.length-1];if(B&&B.redirect){const{redirect:M}=B;let K=typeof M=="function"?M(C):M;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=H(K):{path:K},K.params={}),me({query:C.query,hash:C.hash,params:"path"in K?{}:C.params},K)}}function se(C,B){const M=d=L(C),K=u.value,oe=C.state,ge=C.force,E=C.replace===!0,h=Z(M);if(h)return se(me(H(h),{state:typeof h=="object"?me({},oe,h.state):oe,force:ge,replace:E}),B||M);const m=M;m.redirectedFrom=B;let w;return!ge&&um(n,K,M)&&(w=Vs(16,{to:m,from:K}),He(K,K,!0,!1)),(w?Promise.resolve(w):X(m,K)).catch(A=>Tt(A)?Tt(A,2)?A:Te(A):te(A,m,K)).then(A=>{if(A){if(Tt(A,2))return se(me({replace:E},H(A.to),{state:typeof A.to=="object"?me({},oe,A.to.state):oe,force:ge}),B||m)}else A=ee(m,K,!0,E,oe);return z(m,K,A),A})}function Y(C,B){const M=V(C,B);return M?Promise.reject(M):Promise.resolve()}function X(C,B){let M;const[K,oe,ge]=lg(C,B);M=ji(K.reverse(),"beforeRouteLeave",C,B);for(const h of K)h.leaveGuards.forEach(m=>{M.push(Mt(m,C,B))});const E=Y.bind(null,C,B);return M.push(E),Ts(M).then(()=>{M=[];for(const h of o.list())M.push(Mt(h,C,B));return M.push(E),Ts(M)}).then(()=>{M=ji(oe,"beforeRouteUpdate",C,B);for(const h of oe)h.updateGuards.forEach(m=>{M.push(Mt(m,C,B))});return M.push(E),Ts(M)}).then(()=>{M=[];for(const h of C.matched)if(h.beforeEnter&&!B.matched.includes(h))if(ht(h.beforeEnter))for(const m of h.beforeEnter)M.push(Mt(m,C,B));else M.push(Mt(h.beforeEnter,C,B));return M.push(E),Ts(M)}).then(()=>(C.matched.forEach(h=>h.enterCallbacks={}),M=ji(ge,"beforeRouteEnter",C,B),M.push(E),Ts(M))).then(()=>{M=[];for(const h of a.list())M.push(Mt(h,C,B));return M.push(E),Ts(M)}).catch(h=>Tt(h,8)?h:Promise.reject(h))}function z(C,B,M){for(const K of l.list())K(C,B,M)}function ee(C,B,M,K,oe){const ge=V(C,B);if(ge)return ge;const E=B===Pt,h=Cs?history.state:{};M&&(K||E?i.replace(C.fullPath,me({scroll:E&&h&&h.scroll},oe)):i.push(C.fullPath,oe)),u.value=C,He(C,B,M,E),Te()}let he;function pe(){he||(he=i.listen((C,B,M)=>{if(!We.listening)return;const K=L(C),oe=Z(K);if(oe){se(me(oe,{replace:!0}),K).catch(on);return}d=K;const ge=u.value;Cs&&vm(ia(ge.fullPath,M.delta),pi()),X(K,ge).catch(E=>Tt(E,12)?E:Tt(E,2)?(se(E.to,K).then(h=>{Tt(h,20)&&!M.delta&&M.type===vn.pop&&i.go(-1,!1)}).catch(on),Promise.reject()):(M.delta&&i.go(-M.delta,!1),te(E,K,ge))).then(E=>{E=E||ee(K,ge,!1),E&&(M.delta&&!Tt(E,8)?i.go(-M.delta,!1):M.type===vn.pop&&Tt(E,20)&&i.go(-1,!1)),z(K,ge,E)}).catch(on)}))}let Ne=en(),ke=en(),le;function te(C,B,M){Te(C);const K=ke.list();return K.length?K.forEach(oe=>oe(C,B,M)):console.error(C),Promise.reject(C)}function ce(){return le&&u.value!==Pt?Promise.resolve():new Promise((C,B)=>{Ne.add([C,B])})}function Te(C){return le||(le=!C,pe(),Ne.list().forEach(([B,M])=>C?M(C):B()),Ne.reset()),C}function He(C,B,M,K){const{scrollBehavior:oe}=e;if(!Cs||!oe)return Promise.resolve();const ge=!M&&bm(ia(C.fullPath,0))||(K||!M)&&history.state&&history.state.scroll||null;return Ja().then(()=>oe(C,B,ge)).then(E=>E&&gm(E)).catch(E=>te(E,C,B))}const $e=C=>i.go(C);let Ae;const Ue=new Set,We={currentRoute:u,listening:!0,addRoute:y,removeRoute:R,hasRoute:I,getRoutes:O,resolve:L,options:e,push:F,replace:q,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:o.add,beforeResolve:a.add,afterEach:l.add,onError:ke.add,isReady:ce,install(C){const B=this;C.component("RouterLink",sg),C.component("RouterView",og),C.config.globalProperties.$router=B,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>Rs(u)}),Cs&&!Ae&&u.value===Pt&&(Ae=!0,F(i.location).catch(oe=>{}));const M={};for(const oe in Pt)M[oe]=tt(()=>u.value[oe]);C.provide(Cr,B),C.provide(Bl,Ot(M)),C.provide(sr,u);const K=C.unmount;Ue.add(C),C.unmount=function(){Ue.delete(C),Ue.size<1&&(d=Pt,he&&he(),he=null,u.value=Pt,Ae=!1,le=!1),K()}}};return We}function Ts(e){return e.reduce((t,s)=>t.then(()=>s()),Promise.resolve())}function lg(e,t){const s=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const l=t.matched[a];l&&(e.matched.find(d=>Ms(d,l))?n.push(l):s.push(l));const u=e.matched[a];u&&(t.matched.find(d=>Ms(d,u))||i.push(u))}return[s,n,i]}const cg={data(){return{needsVueRefresh:{data:!1,keepLooping:!1}}},methods:{add_user(){this.users.api_create_user_db()},vueRefresh(){["super user","ho user","support"].includes(this.user.role_name)&&this.user.logged_in||this.$router.push("login"),this.needsVueRefresh.keepLooping&&setTimeout(this.vueRefresh,500)}},props:["users","user","roles"],created(){this.needsVueRefresh.keepLooping=!0,this.vueRefresh(),this.users.populate_user_list(),this.roles.get_roles_from_api()},beforeUnmount(){this.needsVueRefresh.keepLooping=!1}},ug={class:"card d-flex align-items-center"},fg=b("h1",{class:"display-4"},"Add Users",-1),dg={class:"w-50"},hg={class:"form-floating mb-4"},pg=b("div",{class:"valid-feedback"},"Looks good!",-1),_g=b("label",{class:"form-label",for:"name"},"Name",-1),mg={class:"form-floating mb-4"},gg=b("div",{class:"valid-feedback"},"Looks good!",-1),vg=b("label",{class:"form-label",for:"email"},"Email address",-1),bg={class:"mb-4"},Eg=b("option",{value:"",disabled:""},"Select the role",-1),yg={key:0,value:"user"},wg={key:1,value:"support"},Ag={key:2,value:"ho user"},Tg=b("div",{class:"valid-feedback"},"Looks good!",-1),Cg={class:"container"},Og={class:"row"},Sg={class:"col-12"},Ng={class:"table table-bordered table-hover"},xg=b("thead",{class:"thead-dark"},[b("tr",null,[b("th",{scope:"col"},"Id #"),b("th",{scope:"col"},"Name"),b("th",{scope:"col"},"Email"),b("th",{scope:"col"},"Actions")])],-1),$g={scope:"row"},Rg=b("button",{type:"button",class:"btn btn-success"},[b("i",{class:"bi bi-pencil-square"}),Re(" | Edit")],-1),Lg=["onClick"],Dg=b("i",{class:"bi bi-trash"},null,-1),Ig=b("button",{type:"button",class:"btn btn-primary"},[b("i",{class:"bi bi-unlock"}),Re(" | Unlock")],-1),Pg=b("button",{type:"button",class:"btn btn-warning"},[b("i",{class:"bi bi-shield-lock"}),Re(" | Reset MFA")],-1);function kg(e,t,s,n,i,o){return be(),we(ze,null,[b("div",ug,[fg,b("form",dg,[b("div",hg,[vt(b("input",{type:"text",id:"name",class:Ht(["form-control",this.users.name_valid]),"onUpdate:modelValue":t[0]||(t[0]=a=>this.users.new_user.name=a),onChange:t[1]||(t[1]=a=>this.users.check_name_valid(this.users.new_user.name))},null,34),[[jt,this.users.new_user.name]]),pg,_g]),b("div",mg,[vt(b("input",{type:"text",id:"email",class:Ht(["form-control",this.users.email_valid]),"onUpdate:modelValue":t[2]||(t[2]=a=>this.users.new_user.email=a),onChange:t[3]||(t[3]=a=>this.users.check_email_valid(this.users.new_user.email))},null,34),[[jt,this.users.new_user.email]]),gg,vg]),b("div",bg,[vt(b("select",{class:Ht(["form-select",this.role_valid]),onChange:t[4]||(t[4]=a=>this.users.check_role_valid()),"aria-label":"Role","onUpdate:modelValue":t[5]||(t[5]=a=>this.users.new_user.role=a)},[Eg,this.user.role_name=="super user"||this.user.role_name=="ho user"||this.user.role_name=="support"?(be(),we("option",yg," User ")):et("",!0),this.user.role_name=="super user"||this.user.role_name=="ho user"?(be(),we("option",wg," Support ")):et("",!0),this.user.role_name=="super user"?(be(),we("option",Ag," ho user ")):et("",!0)],34),[[v_,this.users.new_user.role]]),Tg]),b("button",{type:"button",class:"btn btn-primary btn-block mb-4",onClick:t[6]||(t[6]=a=>{this.add_user(),this.users.populate_user_list()})}," Create user ")])]),b("div",Cg,[b("div",Og,[b("div",Sg,[b("table",Ng,[xg,b("tbody",null,[(be(!0),we(ze,null,pl(s.users.user_list,a=>(be(),we("tr",{key:a.id},[b("th",$g,sn(a.id),1),b("td",null,sn(a.name),1),b("td",null,sn(a.email),1),b("td",null,[Rg,b("button",{type:"button",onClick:l=>this.users.delete_user(a.id),class:"btn btn-danger"},[Dg,Re(" | Delete")],8,Lg),Ig,Pg])]))),128))])])])])])],64)}const Mg=ps(cg,[["render",kg]]),Vg={data(){return{needsVueRefresh:{data:!1,keepLooping:!1}}},props:["user","users"],methods:{vue_refresh_home(){this.user.logged_in||this.$router.push("login"),this.needsVueRefresh.keepLooping&&setTimeout(this.vue_refresh_home,500)}},created(){this.needsVueRefresh.keepLooping=!0,this.vue_refresh_home()},beforeUnmount(){this.needsVueRefresh.keepLooping=!1}},jg=b("div",{class:"mt-3"},[b("ul",{class:"list-group"},[b("li",{class:"list-group-item display-5"}," Homepage - DT Squad Scaffolding Template "),b("li",{class:"list-group-item"}," Please make sure to read through the README for explicit instructions. ")])],-1),Hg=[jg];function Fg(e,t,s,n,i,o){return be(),we("main",null,Hg)}const va=ps(Vg,[["render",Fg]]),Bg={data(){return{needsVueRefresh:{data:!1,keepLooping:!1},mfa_qr_image_rendered:!1,password_visible:!1,data_usage_checked:[]}},methods:{go_to_index_if_logged_in(){this.user.logged_in&&this.$router.push("index")},login(){this.user.login(),this.go_to_index_if_logged_in()},vue_refresh_login(){try{this.needsVueRefresh.data="",this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.password_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_qr_image.length,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_qr_image_rendered,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_authorised,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.mfa_secret_confirmed,this.needsVueRefresh.data=this.needsVueRefresh.data+" "+this.user.logged_in}catch(e){console.log("vue refresh data cannot be calculated"),console.log(this.user.mfa_qr_image),console.log(e)}this.user.mfa_qr_image.length>0&&(this.mfa_qr_image_rendered||this.render_qr_code()),this.user.logged_in&&this.$router.push("index"),this.needsVueRefresh.keepLooping&&setTimeout(this.vue_refresh_login,500)},render_qr_code(){const e=this.user.mfa_qr_image.length,t=this.user.mfa_qr_image[0].length;var s=document.getElementById("qr_code_canvas");s.width=t,s.height=e;var n=s.getContext("2d");n.fillRect(0,0,t,e);var i=n.getImageData(0,0,t,e);const o=i.data;for(var a=0;a<e;a++)for(var l=0;l<t;l++){const u=this.user.mfa_qr_image[a][l];[0,255].includes(u)||console.log(u);const d=a*t*4+l*4;`${o.length}${d}${a}${l}${u}`,o[d]=u,o[d+1]=u,o[d+2]=u,o[d+3]=255}n.putImageData(i,0,0),this.mfa_qr_image_rendered=!0}},props:["users","user","roles"],created(){this.needsVueRefresh.keepLooping=!0,this.vue_refresh_login()},beforeUnmount(){this.needsVueRefresh.keepLooping=!1,clearTimeout(this.login_timeout)}},Kg={class:"min-vh-100 d-flex align-items-center"},Ug={class:"row w-100"},Wg=b("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1),qg={class:"col-md-8 col-lg-6 col-xl-4"},Yg={class:"card px-0"},zg=b("div",{class:"text-center"},[b("img",{class:"card-img-top m-4",src:Rl,alt:"Logo",style:{width:"90px"}})],-1),Gg={key:0,class:"card-body border border-1 rounded m-3 pb-1 mb-0"},Xg={class:"card-text"},Qg=b("label",{for:"email",class:"form-label"},"Email address",-1),Jg={class:"row"},Zg={class:"col-11"},ev={class:"card-text"},tv=b("label",{for:"password",id:"password",class:"form-label"},"Password",-1),sv={class:"col-1 align-center"},nv=b("br",null,null,-1),iv={class:"mt-1 mb-1"},rv={class:"row"},ov=b("div",{class:"col-5 mr-0 mt-1 align-self-center"},[b("p",{class:"mb-0"},[b("label",{class:"form-check-label text-center",for:"defaultCheck1"},[b("small",null,[Re("I'm happy with the "),b("strong",null,"Data Usage"),b("br"),Re("(tick to enable Login)")])])])],-1),av={class:"col-1 mr-0 mt-1 align-self-center"},lv={class:"form-check"},cv={class:"col-6 d-grid gap-1 mt-1"},uv=["disabled"],fv={class:"row mt-3 mb-0"},dv={class:"col-12 d-grid gap-1"},hv=["disabled"],pv={key:1,class:"card-body mx-3 my-0"},_v={class:"row"},mv={class:"d-grid gap-1"},gv={key:0},vv=b("p",null,"Enter the code from your authenticator and press [enter] or click the button",-1),bv={class:"input-group"},Ev=b("span",{class:"input-group-text"},"6 Digit Code",-1),yv={key:2,class:"card-body border border-1 rounded m-3"},wv=b("h3",null,[Re("Set up MFA "),b("a",{class:"btn btn-success btn-sm",target:"_blank",href:"https://vimeo.com/799113927/57039dd5d5",role:"button"},"2 min. explainer video")],-1),Av=b("p",null,`It's now a requirement that all systems used within the Volkswagen Group must be secured with "Multi Factor Authentication" `,-1),Tv=b("p",null,[Re(" Scan this QR Code with the Microsoft or Google Authenticator and enter the 6 digit MFA Authenticator Code for the "),b("strong",null,"Volkswagen Readiness Tracker"),Re(" in the field above ")],-1),Cv=b("div",{class:"text-center"},[b("canvas",{class:"img-fluid w-50",id:"qr_code_canvas",width:"490",height:"490",style:{border:"1px solid black"}})],-1),Ov=[wv,Av,Tv,Cv],Sv={key:3,class:"m-3"},Nv={class:"row"},xv={class:"d-grid gap-1"},$v={key:4,class:"card-body border border-1 rounded m-3"},Rv=Ol('<h6 class="card-title">Data Usage</h6><p class="small">By signing in, you confirm that you are an authorised user and using this system in a business context. The only personal information it contains is your name and email address</p><p class="small">We will only use the data to monitor the progress made on key tasks </p><p class="small">There is no personally identifiable sensitive information stored by design in the system and it&#39;s your responsibility to not enter data that is personally sensitive</p><p class="small"><strong> You must keep your password secret and not share it with anyone else</strong></p>',5),Lv=[Rv];function Dv(e,t,s,n,i,o){return be(),we("div",Kg,[b("div",Ug,[Wg,b("div",qg,[b("div",null,[b("div",Yg,[zg,this.user.password_authorised?et("",!0):(be(),we("div",Gg,[b("p",Xg,[Qg,vt(b("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":t[0]||(t[0]=a=>s.user.login_email=a),placeholder:"Email"},null,512),[[jt,s.user.login_email]])]),b("div",Jg,[b("div",Zg,[b("p",ev,[tv,i.password_visible?vt((be(),we("input",{key:0,class:"form-control",type:"text",name:"password","onUpdate:modelValue":t[1]||(t[1]=a=>this.user.login_password=a),placeholder:"Password"},null,512)),[[jt,this.user.login_password]]):vt((be(),we("input",{key:1,class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=a=>this.user.login_password=a),placeholder:"Password"},null,512)),[[jt,this.user.login_password]])])]),b("div",sv,[nv,b("p",iv,[b("i",{class:"bi bi-eye",onClick:t[3]||(t[3]=a=>i.password_visible=!i.password_visible),style:{"font-size":"1.8rem"}})])])]),b("div",rv,[ov,b("div",av,[b("p",lv,[vt(b("input",{class:"form-check-input",type:"checkbox",id:"data_usage_checked",value:"data_usage_checked","onUpdate:modelValue":t[4]||(t[4]=a=>i.data_usage_checked=a)},null,512),[[g_,i.data_usage_checked]])])]),b("div",cv,[b("button",{type:"button",class:"btn btn-primary btn-lg my-1",onClick:t[5]||(t[5]=a=>this.login()),disabled:i.data_usage_checked.length==0||this.user.login_email.length==0||this.user.login_password.length==0},"Login",8,uv)])]),b("div",fv,[b("div",dv,[b("button",{type:"button",class:"btn btn-warning btn-sm my-1",disabled:this.user.login_email.length==0,onClick:t[6]||(t[6]=a=>this.user.api_reset_password_request(this.user.login_email))},"Set / Reset Your Password for the email above",8,hv)])])])),this.user.password_authorised&&!this.user.mfa_authorised?(be(),we("div",pv,[b("div",_v,[b("div",mv,[!this.user.mfa_secret_confirmed&&this.user.password_authorised?(be(),we("span",gv,"First set up MFA by following the instructions above the qr-code and then...")):et("",!0),vv,b("div",bv,[Ev,vt(b("input",{class:"form-control",type:"text",id:"mfa_authenticator_code",autocomplete:"off",name:"mfa_authenticator_code","onUpdate:modelValue":t[7]||(t[7]=a=>this.user.mfa_authenticator_code=a),placeholder:"MFA Authenticator code",onKeyup:t[8]||(t[8]=E_(a=>this.user.check_mfa_authenticator_code(),["enter"]))},null,544),[[jt,this.user.mfa_authenticator_code]])]),b("button",{type:"button",class:"btn btn-primary btn-lg my-1",onClick:t[9]||(t[9]=a=>this.user.check_mfa_authenticator_code())},"Check authenticator code")])])])):et("",!0),!this.user.mfa_secret_confirmed&&this.user.password_authorised?(be(),we("div",yv,Ov)):et("",!0),this.user.logged_in&&this.mfa_authorised?(be(),we("div",Sv,[b("div",Nv,[b("div",xv,[b("button",{type:"button",class:"btn btn-primary btn-lg my-1",onClick:t[10]||(t[10]=a=>s.user.logout())},"Logout")])])])):et("",!0),this.user.password_authorised?et("",!0):(be(),we("div",$v,Lv))])])])])])}const Iv=ps(Bg,[["render",Dv]]),Pv={name:"PasswordResetView",data(){return{input:{password_reset_token:this.$route.query.password_reset_token,password_1:"",password_2:""}}},methods:{},props:["user","users"]},kv={class:"min-vh-100 d-flex align-items-center"},Mv={class:"row w-100"},Vv=b("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1),jv={class:"col-md-8 col-lg-6 col-xl-4"},Hv={class:"card my-2 px-0"},Fv={class:"card-body"},Bv=b("h3",{class:"card-title"},"Password Set / Reset",-1),Kv={key:0},Uv=b("p",{class:"card-text"},"The link you have clicked on is only valid for a short while. If it has timed out, you will get a rejection message and you will need to send another request at the main login page ",-1),Wv=[Uv],qv=Ol('<p class="card-text">You are about to set / reset your password.</p><p class="card-text">A password complexity algorithm is in place so choose carefully according to these rules. Your password must:</p><ul><li>be between 8 and 64 characters long</li><li>contain an uppercase character</li><li>contain a lowercase character</li><li>contain a numerical character</li><li>not have more than half the characters as the same character</li><li>not be one of the passwords that are known to be insecure (&quot;password123&quot; for example)</li></ul><p>If your password fails any of these tests, there will be a rejection message.</p><p class="card-text">We recommend using a password manager to choose secure passwords and help you use them in a convenient way.</p>',5),Yv={class:"card-text"},zv=b("label",{for:"password",id:"password",class:"form-label"},"Enter new password",-1),Gv=b("div",{class:"valid-feedback"},"Strong enough",-1),Xv={class:"card-text"},Qv=b("label",{for:"password",id:"password",class:"form-label"},"Confirm new password",-1),Jv={class:"d-grid gap-1"},Zv={class:"d-grid gap-1"},eb=b("div",{class:"col-md-2 col-lg-3 col-xl-4"},null,-1);function tb(e,t,s,n,i,o){const a=Ds("router-link");return be(),we("div",kv,[b("div",Mv,[Vv,b("div",jv,[b("div",Hv,[b("div",Fv,[Bv,this.input.password_reset_token>0?(be(),we("div",Kv,Wv)):et("",!0),qv,b("p",Yv,[zv,vt(b("input",{class:Ht(["form-control",this.users.password_valid]),type:"password",name:"password","onUpdate:modelValue":t[0]||(t[0]=l=>i.input.password_1=l),placeholder:"Password",onChange:t[1]||(t[1]=l=>this.users.check_password_valid(this.input.password_1))},null,34),[[jt,i.input.password_1]]),Gv]),b("p",Xv,[Qv,vt(b("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=l=>i.input.password_2=l),placeholder:"Password"},null,512),[[jt,i.input.password_2]])]),b("div",Jv,[b("button",{type:"button",class:"btn btn-success btn-lg my-1",onClick:t[3]||(t[3]=l=>this.user.api_reset_password(this.input))},"Set / Reset Your Password")]),b("div",Zv,[Oe(a,{class:"btn btn-primary",to:"/"},{default:Ss(()=>[Re("Help & Info")]),_:1})])])])]),eb])])}const sb=ps(Pv,[["render",tb]]),nb=ag({history:Am("./"),routes:[{path:"/",name:"home",component:va},{path:"/index",name:"index",component:va},{path:"/crud",name:"crud",component:Mg},{path:"/login",name:"login",component:Iv},{path:"/passwordresetview",name:"passwordreset",component:sb}]});var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var ba={},ob={get exports(){return ba},set exports(e){ba=e}},Ve="top",Xe="bottom",Qe="right",je="left",_i="auto",Ys=[Ve,Xe,Qe,je],fs="start",js="end",Kl="clippingParents",Or="viewport",Os="popper",Ul="reference",nr=Ys.reduce(function(e,t){return e.concat([t+"-"+fs,t+"-"+js])},[]),Sr=[].concat(Ys,[_i]).reduce(function(e,t){return e.concat([t,t+"-"+fs,t+"-"+js])},[]),Wl="beforeRead",ql="read",Yl="afterRead",zl="beforeMain",Gl="main",Xl="afterMain",Ql="beforeWrite",Jl="write",Zl="afterWrite",ec=[Wl,ql,Yl,zl,Gl,Xl,Ql,Jl,Zl];function yt(e){return e?(e.nodeName||"").toLowerCase():null}function it(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ds(e){var t=it(e).Element;return e instanceof t||e instanceof Element}function nt(e){var t=it(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Nr(e){if(typeof ShadowRoot>"u")return!1;var t=it(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ab(e){var t=e.state;Object.keys(t.elements).forEach(function(s){var n=t.styles[s]||{},i=t.attributes[s]||{},o=t.elements[s];!nt(o)||!yt(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(a){var l=i[a];l===!1?o.removeAttribute(a):o.setAttribute(a,l===!0?"":l)}))})}function lb(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},a=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:s[n]),l=a.reduce(function(u,d){return u[d]="",u},{});!nt(i)||!yt(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const xr={name:"applyStyles",enabled:!0,phase:"write",fn:ab,effect:lb,requires:["computeStyles"]};function bt(e){return e.split("-")[0]}var us=Math.max,si=Math.min,Hs=Math.round;function ir(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tc(){return!/^((?!chrome|android).)*safari/i.test(ir())}function Fs(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&nt(e)&&(i=e.offsetWidth>0&&Hs(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Hs(n.height)/e.offsetHeight||1);var a=ds(e)?it(e):window,l=a.visualViewport,u=!tc()&&s,d=(n.left+(u&&l?l.offsetLeft:0))/i,f=(n.top+(u&&l?l.offsetTop:0))/o,g=n.width/i,v=n.height/o;return{width:g,height:v,top:f,right:d+g,bottom:f+v,left:d,x:d,y:f}}function $r(e){var t=Fs(e),s=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:n}}function sc(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&Nr(s)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function xt(e){return it(e).getComputedStyle(e)}function cb(e){return["table","td","th"].indexOf(yt(e))>=0}function Wt(e){return((ds(e)?e.ownerDocument:e.document)||window.document).documentElement}function mi(e){return yt(e)==="html"?e:e.assignedSlot||e.parentNode||(Nr(e)?e.host:null)||Wt(e)}function Ea(e){return!nt(e)||xt(e).position==="fixed"?null:e.offsetParent}function ub(e){var t=/firefox/i.test(ir()),s=/Trident/i.test(ir());if(s&&nt(e)){var n=xt(e);if(n.position==="fixed")return null}var i=mi(e);for(Nr(i)&&(i=i.host);nt(i)&&["html","body"].indexOf(yt(i))<0;){var o=xt(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function yn(e){for(var t=it(e),s=Ea(e);s&&cb(s)&&xt(s).position==="static";)s=Ea(s);return s&&(yt(s)==="html"||yt(s)==="body"&&xt(s).position==="static")?t:s||ub(e)||t}function Rr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ln(e,t,s){return us(e,si(t,s))}function fb(e,t,s){var n=ln(e,t,s);return n>s?s:n}function nc(){return{top:0,right:0,bottom:0,left:0}}function ic(e){return Object.assign({},nc(),e)}function rc(e,t){return t.reduce(function(s,n){return s[n]=e,s},{})}var db=function(t,s){return t=typeof t=="function"?t(Object.assign({},s.rects,{placement:s.placement})):t,ic(typeof t!="number"?t:rc(t,Ys))};function hb(e){var t,s=e.state,n=e.name,i=e.options,o=s.elements.arrow,a=s.modifiersData.popperOffsets,l=bt(s.placement),u=Rr(l),d=[je,Qe].indexOf(l)>=0,f=d?"height":"width";if(!(!o||!a)){var g=db(i.padding,s),v=$r(o),y=u==="y"?Ve:je,R=u==="y"?Xe:Qe,O=s.rects.reference[f]+s.rects.reference[u]-a[u]-s.rects.popper[f],I=a[u]-s.rects.reference[u],L=yn(o),H=L?u==="y"?L.clientHeight||0:L.clientWidth||0:0,V=O/2-I/2,F=g[y],q=H-v[f]-g[R],Z=H/2-v[f]/2+V,se=ln(F,Z,q),Y=u;s.modifiersData[n]=(t={},t[Y]=se,t.centerOffset=se-Z,t)}}function pb(e){var t=e.state,s=e.options,n=s.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||sc(t.elements.popper,i)&&(t.elements.arrow=i))}const oc={name:"arrow",enabled:!0,phase:"main",fn:hb,effect:pb,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bs(e){return e.split("-")[1]}var _b={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mb(e){var t=e.x,s=e.y,n=window,i=n.devicePixelRatio||1;return{x:Hs(t*i)/i||0,y:Hs(s*i)/i||0}}function ya(e){var t,s=e.popper,n=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,l=e.position,u=e.gpuAcceleration,d=e.adaptive,f=e.roundOffsets,g=e.isFixed,v=a.x,y=v===void 0?0:v,R=a.y,O=R===void 0?0:R,I=typeof f=="function"?f({x:y,y:O}):{x:y,y:O};y=I.x,O=I.y;var L=a.hasOwnProperty("x"),H=a.hasOwnProperty("y"),V=je,F=Ve,q=window;if(d){var Z=yn(s),se="clientHeight",Y="clientWidth";if(Z===it(s)&&(Z=Wt(s),xt(Z).position!=="static"&&l==="absolute"&&(se="scrollHeight",Y="scrollWidth")),Z=Z,i===Ve||(i===je||i===Qe)&&o===js){F=Xe;var X=g&&Z===q&&q.visualViewport?q.visualViewport.height:Z[se];O-=X-n.height,O*=u?1:-1}if(i===je||(i===Ve||i===Xe)&&o===js){V=Qe;var z=g&&Z===q&&q.visualViewport?q.visualViewport.width:Z[Y];y-=z-n.width,y*=u?1:-1}}var ee=Object.assign({position:l},d&&_b),he=f===!0?mb({x:y,y:O}):{x:y,y:O};if(y=he.x,O=he.y,u){var pe;return Object.assign({},ee,(pe={},pe[F]=H?"0":"",pe[V]=L?"0":"",pe.transform=(q.devicePixelRatio||1)<=1?"translate("+y+"px, "+O+"px)":"translate3d("+y+"px, "+O+"px, 0)",pe))}return Object.assign({},ee,(t={},t[F]=H?O+"px":"",t[V]=L?y+"px":"",t.transform="",t))}function gb(e){var t=e.state,s=e.options,n=s.gpuAcceleration,i=n===void 0?!0:n,o=s.adaptive,a=o===void 0?!0:o,l=s.roundOffsets,u=l===void 0?!0:l,d={placement:bt(t.placement),variation:Bs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ya(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ya(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Lr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:gb,data:{}};var Fn={passive:!0};function vb(e){var t=e.state,s=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,a=n.resize,l=a===void 0?!0:a,u=it(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(f){f.addEventListener("scroll",s.update,Fn)}),l&&u.addEventListener("resize",s.update,Fn),function(){o&&d.forEach(function(f){f.removeEventListener("scroll",s.update,Fn)}),l&&u.removeEventListener("resize",s.update,Fn)}}const Dr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vb,data:{}};var bb={left:"right",right:"left",bottom:"top",top:"bottom"};function Gn(e){return e.replace(/left|right|bottom|top/g,function(t){return bb[t]})}var Eb={start:"end",end:"start"};function wa(e){return e.replace(/start|end/g,function(t){return Eb[t]})}function Ir(e){var t=it(e),s=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:s,scrollTop:n}}function Pr(e){return Fs(Wt(e)).left+Ir(e).scrollLeft}function yb(e,t){var s=it(e),n=Wt(e),i=s.visualViewport,o=n.clientWidth,a=n.clientHeight,l=0,u=0;if(i){o=i.width,a=i.height;var d=tc();(d||!d&&t==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:l+Pr(e),y:u}}function wb(e){var t,s=Wt(e),n=Ir(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=us(s.scrollWidth,s.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=us(s.scrollHeight,s.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+Pr(e),u=-n.scrollTop;return xt(i||s).direction==="rtl"&&(l+=us(s.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:l,y:u}}function kr(e){var t=xt(e),s=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+i+n)}function ac(e){return["html","body","#document"].indexOf(yt(e))>=0?e.ownerDocument.body:nt(e)&&kr(e)?e:ac(mi(e))}function cn(e,t){var s;t===void 0&&(t=[]);var n=ac(e),i=n===((s=e.ownerDocument)==null?void 0:s.body),o=it(n),a=i?[o].concat(o.visualViewport||[],kr(n)?n:[]):n,l=t.concat(a);return i?l:l.concat(cn(mi(a)))}function rr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ab(e,t){var s=Fs(e,!1,t==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function Aa(e,t,s){return t===Or?rr(yb(e,s)):ds(t)?Ab(t,s):rr(wb(Wt(e)))}function Tb(e){var t=cn(mi(e)),s=["absolute","fixed"].indexOf(xt(e).position)>=0,n=s&&nt(e)?yn(e):e;return ds(n)?t.filter(function(i){return ds(i)&&sc(i,n)&&yt(i)!=="body"}):[]}function Cb(e,t,s,n){var i=t==="clippingParents"?Tb(e):[].concat(t),o=[].concat(i,[s]),a=o[0],l=o.reduce(function(u,d){var f=Aa(e,d,n);return u.top=us(f.top,u.top),u.right=si(f.right,u.right),u.bottom=si(f.bottom,u.bottom),u.left=us(f.left,u.left),u},Aa(e,a,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function lc(e){var t=e.reference,s=e.element,n=e.placement,i=n?bt(n):null,o=n?Bs(n):null,a=t.x+t.width/2-s.width/2,l=t.y+t.height/2-s.height/2,u;switch(i){case Ve:u={x:a,y:t.y-s.height};break;case Xe:u={x:a,y:t.y+t.height};break;case Qe:u={x:t.x+t.width,y:l};break;case je:u={x:t.x-s.width,y:l};break;default:u={x:t.x,y:t.y}}var d=i?Rr(i):null;if(d!=null){var f=d==="y"?"height":"width";switch(o){case fs:u[d]=u[d]-(t[f]/2-s[f]/2);break;case js:u[d]=u[d]+(t[f]/2-s[f]/2);break}}return u}function Ks(e,t){t===void 0&&(t={});var s=t,n=s.placement,i=n===void 0?e.placement:n,o=s.strategy,a=o===void 0?e.strategy:o,l=s.boundary,u=l===void 0?Kl:l,d=s.rootBoundary,f=d===void 0?Or:d,g=s.elementContext,v=g===void 0?Os:g,y=s.altBoundary,R=y===void 0?!1:y,O=s.padding,I=O===void 0?0:O,L=ic(typeof I!="number"?I:rc(I,Ys)),H=v===Os?Ul:Os,V=e.rects.popper,F=e.elements[R?H:v],q=Cb(ds(F)?F:F.contextElement||Wt(e.elements.popper),u,f,a),Z=Fs(e.elements.reference),se=lc({reference:Z,element:V,strategy:"absolute",placement:i}),Y=rr(Object.assign({},V,se)),X=v===Os?Y:Z,z={top:q.top-X.top+L.top,bottom:X.bottom-q.bottom+L.bottom,left:q.left-X.left+L.left,right:X.right-q.right+L.right},ee=e.modifiersData.offset;if(v===Os&&ee){var he=ee[i];Object.keys(z).forEach(function(pe){var Ne=[Qe,Xe].indexOf(pe)>=0?1:-1,ke=[Ve,Xe].indexOf(pe)>=0?"y":"x";z[pe]+=he[ke]*Ne})}return z}function Ob(e,t){t===void 0&&(t={});var s=t,n=s.placement,i=s.boundary,o=s.rootBoundary,a=s.padding,l=s.flipVariations,u=s.allowedAutoPlacements,d=u===void 0?Sr:u,f=Bs(n),g=f?l?nr:nr.filter(function(R){return Bs(R)===f}):Ys,v=g.filter(function(R){return d.indexOf(R)>=0});v.length===0&&(v=g);var y=v.reduce(function(R,O){return R[O]=Ks(e,{placement:O,boundary:i,rootBoundary:o,padding:a})[bt(O)],R},{});return Object.keys(y).sort(function(R,O){return y[R]-y[O]})}function Sb(e){if(bt(e)===_i)return[];var t=Gn(e);return[wa(e),t,wa(t)]}function Nb(e){var t=e.state,s=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=s.mainAxis,o=i===void 0?!0:i,a=s.altAxis,l=a===void 0?!0:a,u=s.fallbackPlacements,d=s.padding,f=s.boundary,g=s.rootBoundary,v=s.altBoundary,y=s.flipVariations,R=y===void 0?!0:y,O=s.allowedAutoPlacements,I=t.options.placement,L=bt(I),H=L===I,V=u||(H||!R?[Gn(I)]:Sb(I)),F=[I].concat(V).reduce(function(We,C){return We.concat(bt(C)===_i?Ob(t,{placement:C,boundary:f,rootBoundary:g,padding:d,flipVariations:R,allowedAutoPlacements:O}):C)},[]),q=t.rects.reference,Z=t.rects.popper,se=new Map,Y=!0,X=F[0],z=0;z<F.length;z++){var ee=F[z],he=bt(ee),pe=Bs(ee)===fs,Ne=[Ve,Xe].indexOf(he)>=0,ke=Ne?"width":"height",le=Ks(t,{placement:ee,boundary:f,rootBoundary:g,altBoundary:v,padding:d}),te=Ne?pe?Qe:je:pe?Xe:Ve;q[ke]>Z[ke]&&(te=Gn(te));var ce=Gn(te),Te=[];if(o&&Te.push(le[he]<=0),l&&Te.push(le[te]<=0,le[ce]<=0),Te.every(function(We){return We})){X=ee,Y=!1;break}se.set(ee,Te)}if(Y)for(var He=R?3:1,$e=function(C){var B=F.find(function(M){var K=se.get(M);if(K)return K.slice(0,C).every(function(oe){return oe})});if(B)return X=B,"break"},Ae=He;Ae>0;Ae--){var Ue=$e(Ae);if(Ue==="break")break}t.placement!==X&&(t.modifiersData[n]._skip=!0,t.placement=X,t.reset=!0)}}const cc={name:"flip",enabled:!0,phase:"main",fn:Nb,requiresIfExists:["offset"],data:{_skip:!1}};function Ta(e,t,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function Ca(e){return[Ve,Qe,Xe,je].some(function(t){return e[t]>=0})}function xb(e){var t=e.state,s=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=Ks(t,{elementContext:"reference"}),l=Ks(t,{altBoundary:!0}),u=Ta(a,n),d=Ta(l,i,o),f=Ca(u),g=Ca(d);t.modifiersData[s]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}const uc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xb};function $b(e,t,s){var n=bt(e),i=[je,Ve].indexOf(n)>=0?-1:1,o=typeof s=="function"?s(Object.assign({},t,{placement:e})):s,a=o[0],l=o[1];return a=a||0,l=(l||0)*i,[je,Qe].indexOf(n)>=0?{x:l,y:a}:{x:a,y:l}}function Rb(e){var t=e.state,s=e.options,n=e.name,i=s.offset,o=i===void 0?[0,0]:i,a=Sr.reduce(function(f,g){return f[g]=$b(g,t.rects,o),f},{}),l=a[t.placement],u=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=a}const fc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rb};function Lb(e){var t=e.state,s=e.name;t.modifiersData[s]=lc({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Mr={name:"popperOffsets",enabled:!0,phase:"read",fn:Lb,data:{}};function Db(e){return e==="x"?"y":"x"}function Ib(e){var t=e.state,s=e.options,n=e.name,i=s.mainAxis,o=i===void 0?!0:i,a=s.altAxis,l=a===void 0?!1:a,u=s.boundary,d=s.rootBoundary,f=s.altBoundary,g=s.padding,v=s.tether,y=v===void 0?!0:v,R=s.tetherOffset,O=R===void 0?0:R,I=Ks(t,{boundary:u,rootBoundary:d,padding:g,altBoundary:f}),L=bt(t.placement),H=Bs(t.placement),V=!H,F=Rr(L),q=Db(F),Z=t.modifiersData.popperOffsets,se=t.rects.reference,Y=t.rects.popper,X=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,z=typeof X=="number"?{mainAxis:X,altAxis:X}:Object.assign({mainAxis:0,altAxis:0},X),ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,he={x:0,y:0};if(Z){if(o){var pe,Ne=F==="y"?Ve:je,ke=F==="y"?Xe:Qe,le=F==="y"?"height":"width",te=Z[F],ce=te+I[Ne],Te=te-I[ke],He=y?-Y[le]/2:0,$e=H===fs?se[le]:Y[le],Ae=H===fs?-Y[le]:-se[le],Ue=t.elements.arrow,We=y&&Ue?$r(Ue):{width:0,height:0},C=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:nc(),B=C[Ne],M=C[ke],K=ln(0,se[le],We[le]),oe=V?se[le]/2-He-K-B-z.mainAxis:$e-K-B-z.mainAxis,ge=V?-se[le]/2+He+K+M+z.mainAxis:Ae+K+M+z.mainAxis,E=t.elements.arrow&&yn(t.elements.arrow),h=E?F==="y"?E.clientTop||0:E.clientLeft||0:0,m=(pe=ee==null?void 0:ee[F])!=null?pe:0,w=te+oe-m-h,A=te+ge-m,S=ln(y?si(ce,w):ce,te,y?us(Te,A):Te);Z[F]=S,he[F]=S-te}if(l){var $,j=F==="x"?Ve:je,D=F==="x"?Xe:Qe,x=Z[q],N=q==="y"?"height":"width",G=x+I[j],U=x-I[D],W=[Ve,je].indexOf(L)!==-1,J=($=ee==null?void 0:ee[q])!=null?$:0,ne=W?G:x-se[N]-Y[N]-J+z.altAxis,_e=W?x+se[N]+Y[N]-J-z.altAxis:U,ue=y&&W?fb(ne,x,_e):ln(y?ne:G,x,y?_e:U);Z[q]=ue,he[q]=ue-x}t.modifiersData[n]=he}}const dc={name:"preventOverflow",enabled:!0,phase:"main",fn:Ib,requiresIfExists:["offset"]};function Pb(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function kb(e){return e===it(e)||!nt(e)?Ir(e):Pb(e)}function Mb(e){var t=e.getBoundingClientRect(),s=Hs(t.width)/e.offsetWidth||1,n=Hs(t.height)/e.offsetHeight||1;return s!==1||n!==1}function Vb(e,t,s){s===void 0&&(s=!1);var n=nt(t),i=nt(t)&&Mb(t),o=Wt(t),a=Fs(e,i,s),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!s)&&((yt(t)!=="body"||kr(o))&&(l=kb(t)),nt(t)?(u=Fs(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=Pr(o))),{x:a.left+l.scrollLeft-u.x,y:a.top+l.scrollTop-u.y,width:a.width,height:a.height}}function jb(e){var t=new Map,s=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){s.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(l){if(!s.has(l)){var u=t.get(l);u&&i(u)}}),n.push(o)}return e.forEach(function(o){s.has(o.name)||i(o)}),n}function Hb(e){var t=jb(e);return ec.reduce(function(s,n){return s.concat(t.filter(function(i){return i.phase===n}))},[])}function Fb(e){var t;return function(){return t||(t=new Promise(function(s){Promise.resolve().then(function(){t=void 0,s(e())})})),t}}function Bb(e){var t=e.reduce(function(s,n){var i=s[n.name];return s[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,s},{});return Object.keys(t).map(function(s){return t[s]})}var Oa={placement:"bottom",modifiers:[],strategy:"absolute"};function Sa(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function gi(e){e===void 0&&(e={});var t=e,s=t.defaultModifiers,n=s===void 0?[]:s,i=t.defaultOptions,o=i===void 0?Oa:i;return function(l,u,d){d===void 0&&(d=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Oa,o),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},g=[],v=!1,y={state:f,setOptions:function(L){var H=typeof L=="function"?L(f.options):L;O(),f.options=Object.assign({},o,f.options,H),f.scrollParents={reference:ds(l)?cn(l):l.contextElement?cn(l.contextElement):[],popper:cn(u)};var V=Hb(Bb([].concat(n,f.options.modifiers)));return f.orderedModifiers=V.filter(function(F){return F.enabled}),R(),y.update()},forceUpdate:function(){if(!v){var L=f.elements,H=L.reference,V=L.popper;if(Sa(H,V)){f.rects={reference:Vb(H,yn(V),f.options.strategy==="fixed"),popper:$r(V)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(z){return f.modifiersData[z.name]=Object.assign({},z.data)});for(var F=0;F<f.orderedModifiers.length;F++){if(f.reset===!0){f.reset=!1,F=-1;continue}var q=f.orderedModifiers[F],Z=q.fn,se=q.options,Y=se===void 0?{}:se,X=q.name;typeof Z=="function"&&(f=Z({state:f,options:Y,name:X,instance:y})||f)}}}},update:Fb(function(){return new Promise(function(I){y.forceUpdate(),I(f)})}),destroy:function(){O(),v=!0}};if(!Sa(l,u))return y;y.setOptions(d).then(function(I){!v&&d.onFirstUpdate&&d.onFirstUpdate(I)});function R(){f.orderedModifiers.forEach(function(I){var L=I.name,H=I.options,V=H===void 0?{}:H,F=I.effect;if(typeof F=="function"){var q=F({state:f,name:L,instance:y,options:V}),Z=function(){};g.push(q||Z)}})}function O(){g.forEach(function(I){return I()}),g=[]}return y}}var Kb=gi(),Ub=[Dr,Mr,Lr,xr],Wb=gi({defaultModifiers:Ub}),qb=[Dr,Mr,Lr,xr,fc,cc,dc,oc,uc],Yb=gi({defaultModifiers:qb});const zb=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Xl,afterRead:Yl,afterWrite:Zl,applyStyles:xr,arrow:oc,auto:_i,basePlacements:Ys,beforeMain:zl,beforeRead:Wl,beforeWrite:Ql,bottom:Xe,clippingParents:Kl,computeStyles:Lr,createPopper:Yb,createPopperBase:Kb,createPopperLite:Wb,detectOverflow:Ks,end:js,eventListeners:Dr,flip:cc,hide:uc,left:je,main:Gl,modifierPhases:ec,offset:fc,placements:Sr,popper:Os,popperGenerator:gi,popperOffsets:Mr,preventOverflow:dc,read:ql,reference:Ul,right:Qe,start:fs,top:Ve,variationPlacements:nr,viewport:Or,write:Jl},Symbol.toStringTag,{value:"Module"})),Gb=rb(zb);/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(e,t){(function(s,n){e.exports=n(Gb)})(ib,function(s){function n(p){if(p&&p.__esModule)return p;const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(p){for(const c in p)if(c!=="default"){const _=Object.getOwnPropertyDescriptor(p,c);Object.defineProperty(r,c,_.get?_:{enumerable:!0,get:()=>p[c]})}}return r.default=p,Object.freeze(r)}const i=n(s),o=1e6,a=1e3,l="transitionend",u=p=>p==null?`${p}`:Object.prototype.toString.call(p).match(/\s([a-z]+)/i)[1].toLowerCase(),d=p=>{do p+=Math.floor(Math.random()*o);while(document.getElementById(p));return p},f=p=>{let r=p.getAttribute("data-bs-target");if(!r||r==="#"){let c=p.getAttribute("href");if(!c||!c.includes("#")&&!c.startsWith("."))return null;c.includes("#")&&!c.startsWith("#")&&(c=`#${c.split("#")[1]}`),r=c&&c!=="#"?c.trim():null}return r},g=p=>{const r=f(p);return r&&document.querySelector(r)?r:null},v=p=>{const r=f(p);return r?document.querySelector(r):null},y=p=>{if(!p)return 0;let{transitionDuration:r,transitionDelay:c}=window.getComputedStyle(p);const _=Number.parseFloat(r),T=Number.parseFloat(c);return!_&&!T?0:(r=r.split(",")[0],c=c.split(",")[0],(Number.parseFloat(r)+Number.parseFloat(c))*a)},R=p=>{p.dispatchEvent(new Event(l))},O=p=>!p||typeof p!="object"?!1:(typeof p.jquery<"u"&&(p=p[0]),typeof p.nodeType<"u"),I=p=>O(p)?p.jquery?p[0]:p:typeof p=="string"&&p.length>0?document.querySelector(p):null,L=p=>{if(!O(p)||p.getClientRects().length===0)return!1;const r=getComputedStyle(p).getPropertyValue("visibility")==="visible",c=p.closest("details:not([open])");if(!c)return r;if(c!==p){const _=p.closest("summary");if(_&&_.parentNode!==c||_===null)return!1}return r},H=p=>!p||p.nodeType!==Node.ELEMENT_NODE||p.classList.contains("disabled")?!0:typeof p.disabled<"u"?p.disabled:p.hasAttribute("disabled")&&p.getAttribute("disabled")!=="false",V=p=>{if(!document.documentElement.attachShadow)return null;if(typeof p.getRootNode=="function"){const r=p.getRootNode();return r instanceof ShadowRoot?r:null}return p instanceof ShadowRoot?p:p.parentNode?V(p.parentNode):null},F=()=>{},q=p=>{p.offsetHeight},Z=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,se=[],Y=p=>{document.readyState==="loading"?(se.length||document.addEventListener("DOMContentLoaded",()=>{for(const r of se)r()}),se.push(p)):p()},X=()=>document.documentElement.dir==="rtl",z=p=>{Y(()=>{const r=Z();if(r){const c=p.NAME,_=r.fn[c];r.fn[c]=p.jQueryInterface,r.fn[c].Constructor=p,r.fn[c].noConflict=()=>(r.fn[c]=_,p.jQueryInterface)}})},ee=p=>{typeof p=="function"&&p()},he=(p,r,c=!0)=>{if(!c){ee(p);return}const _=5,T=y(r)+_;let k=!1;const P=({target:ae})=>{ae===r&&(k=!0,r.removeEventListener(l,P),ee(p))};r.addEventListener(l,P),setTimeout(()=>{k||R(r)},T)},pe=(p,r,c,_)=>{const T=p.length;let k=p.indexOf(r);return k===-1?!c&&_?p[T-1]:p[0]:(k+=c?1:-1,_&&(k=(k+T)%T),p[Math.max(0,Math.min(k,T-1))])},Ne=/[^.]*(?=\..*)\.|.*/,ke=/\..*/,le=/::\d+$/,te={};let ce=1;const Te={mouseenter:"mouseover",mouseleave:"mouseout"},He=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function $e(p,r){return r&&`${r}::${ce++}`||p.uidEvent||ce++}function Ae(p){const r=$e(p);return p.uidEvent=r,te[r]=te[r]||{},te[r]}function Ue(p,r){return function c(_){return h(_,{delegateTarget:p}),c.oneOff&&E.off(p,_.type,r),r.apply(p,[_])}}function We(p,r,c){return function _(T){const k=p.querySelectorAll(r);for(let{target:P}=T;P&&P!==this;P=P.parentNode)for(const ae of k)if(ae===P)return h(T,{delegateTarget:P}),_.oneOff&&E.off(p,T.type,r,c),c.apply(P,[T])}}function C(p,r,c=null){return Object.values(p).find(_=>_.callable===r&&_.delegationSelector===c)}function B(p,r,c){const _=typeof r=="string",T=_?c:r||c;let k=ge(p);return He.has(k)||(k=p),[_,T,k]}function M(p,r,c,_,T){if(typeof r!="string"||!p)return;let[k,P,ae]=B(r,c,_);r in Te&&(P=(zd=>function(As){if(!As.relatedTarget||As.relatedTarget!==As.delegateTarget&&!As.delegateTarget.contains(As.relatedTarget))return zd.call(this,As)})(P));const Fe=Ae(p),Ye=Fe[ae]||(Fe[ae]={}),Se=C(Ye,P,k?c:null);if(Se){Se.oneOff=Se.oneOff&&T;return}const at=$e(P,r.replace(Ne,"")),pt=k?We(p,c,P):Ue(p,P);pt.delegationSelector=k?c:null,pt.callable=P,pt.oneOff=T,pt.uidEvent=at,Ye[at]=pt,p.addEventListener(ae,pt,k)}function K(p,r,c,_,T){const k=C(r[c],_,T);k&&(p.removeEventListener(c,k,Boolean(T)),delete r[c][k.uidEvent])}function oe(p,r,c,_){const T=r[c]||{};for(const k of Object.keys(T))if(k.includes(_)){const P=T[k];K(p,r,c,P.callable,P.delegationSelector)}}function ge(p){return p=p.replace(ke,""),Te[p]||p}const E={on(p,r,c,_){M(p,r,c,_,!1)},one(p,r,c,_){M(p,r,c,_,!0)},off(p,r,c,_){if(typeof r!="string"||!p)return;const[T,k,P]=B(r,c,_),ae=P!==r,Fe=Ae(p),Ye=Fe[P]||{},Se=r.startsWith(".");if(typeof k<"u"){if(!Object.keys(Ye).length)return;K(p,Fe,P,k,T?c:null);return}if(Se)for(const at of Object.keys(Fe))oe(p,Fe,at,r.slice(1));for(const at of Object.keys(Ye)){const pt=at.replace(le,"");if(!ae||r.includes(pt)){const Zs=Ye[at];K(p,Fe,P,Zs.callable,Zs.delegationSelector)}}},trigger(p,r,c){if(typeof r!="string"||!p)return null;const _=Z(),T=ge(r),k=r!==T;let P=null,ae=!0,Fe=!0,Ye=!1;k&&_&&(P=_.Event(r,c),_(p).trigger(P),ae=!P.isPropagationStopped(),Fe=!P.isImmediatePropagationStopped(),Ye=P.isDefaultPrevented());let Se=new Event(r,{bubbles:ae,cancelable:!0});return Se=h(Se,c),Ye&&Se.preventDefault(),Fe&&p.dispatchEvent(Se),Se.defaultPrevented&&P&&P.preventDefault(),Se}};function h(p,r){for(const[c,_]of Object.entries(r||{}))try{p[c]=_}catch{Object.defineProperty(p,c,{configurable:!0,get(){return _}})}return p}const m=new Map,w={set(p,r,c){m.has(p)||m.set(p,new Map);const _=m.get(p);if(!_.has(r)&&_.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(_.keys())[0]}.`);return}_.set(r,c)},get(p,r){return m.has(p)&&m.get(p).get(r)||null},remove(p,r){if(!m.has(p))return;const c=m.get(p);c.delete(r),c.size===0&&m.delete(p)}};function A(p){if(p==="true")return!0;if(p==="false")return!1;if(p===Number(p).toString())return Number(p);if(p===""||p==="null")return null;if(typeof p!="string")return p;try{return JSON.parse(decodeURIComponent(p))}catch{return p}}function S(p){return p.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}const $={setDataAttribute(p,r,c){p.setAttribute(`data-bs-${S(r)}`,c)},removeDataAttribute(p,r){p.removeAttribute(`data-bs-${S(r)}`)},getDataAttributes(p){if(!p)return{};const r={},c=Object.keys(p.dataset).filter(_=>_.startsWith("bs")&&!_.startsWith("bsConfig"));for(const _ of c){let T=_.replace(/^bs/,"");T=T.charAt(0).toLowerCase()+T.slice(1,T.length),r[T]=A(p.dataset[_])}return r},getDataAttribute(p,r){return A(p.getAttribute(`data-bs-${S(r)}`))}};class j{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(r){return r=this._mergeConfigObj(r),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}_configAfterMerge(r){return r}_mergeConfigObj(r,c){const _=O(c)?$.getDataAttribute(c,"config"):{};return{...this.constructor.Default,...typeof _=="object"?_:{},...O(c)?$.getDataAttributes(c):{},...typeof r=="object"?r:{}}}_typeCheckConfig(r,c=this.constructor.DefaultType){for(const _ of Object.keys(c)){const T=c[_],k=r[_],P=O(k)?"element":u(k);if(!new RegExp(T).test(P))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${_}" provided type "${P}" but expected type "${T}".`)}}}const D="5.2.3";class x extends j{constructor(r,c){super(),r=I(r),r&&(this._element=r,this._config=this._getConfig(c),w.set(this._element,this.constructor.DATA_KEY,this))}dispose(){w.remove(this._element,this.constructor.DATA_KEY),E.off(this._element,this.constructor.EVENT_KEY);for(const r of Object.getOwnPropertyNames(this))this[r]=null}_queueCallback(r,c,_=!0){he(r,c,_)}_getConfig(r){return r=this._mergeConfigObj(r,this._element),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}static getInstance(r){return w.get(I(r),this.DATA_KEY)}static getOrCreateInstance(r,c={}){return this.getInstance(r)||new this(r,typeof c=="object"?c:null)}static get VERSION(){return D}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(r){return`${r}${this.EVENT_KEY}`}}const N=(p,r="hide")=>{const c=`click.dismiss${p.EVENT_KEY}`,_=p.NAME;E.on(document,c,`[data-bs-dismiss="${_}"]`,function(T){if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),H(this))return;const k=v(this)||this.closest(`.${_}`);p.getOrCreateInstance(k)[r]()})},G="alert",W=".bs.alert",J=`close${W}`,ne=`closed${W}`,_e="fade",ue="show";class ve extends x{static get NAME(){return G}close(){if(E.trigger(this._element,J).defaultPrevented)return;this._element.classList.remove(ue);const c=this._element.classList.contains(_e);this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),E.trigger(this._element,ne),this.dispose()}static jQueryInterface(r){return this.each(function(){const c=ve.getOrCreateInstance(this);if(typeof r=="string"){if(c[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);c[r](this)}})}}N(ve,"close"),z(ve);const qe="button",wn=".bs.button",Yt=".data-api",An="active",Le='[data-bs-toggle="button"]',Je=`click${wn}${Yt}`;class Rt extends x{static get NAME(){return qe}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(An))}static jQueryInterface(r){return this.each(function(){const c=Rt.getOrCreateInstance(this);r==="toggle"&&c[r]()})}}E.on(document,Je,Le,p=>{p.preventDefault();const r=p.target.closest(Le);Rt.getOrCreateInstance(r).toggle()}),z(Rt);const re={find(p,r=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(r,p))},findOne(p,r=document.documentElement){return Element.prototype.querySelector.call(r,p)},children(p,r){return[].concat(...p.children).filter(c=>c.matches(r))},parents(p,r){const c=[];let _=p.parentNode.closest(r);for(;_;)c.push(_),_=_.parentNode.closest(r);return c},prev(p,r){let c=p.previousElementSibling;for(;c;){if(c.matches(r))return[c];c=c.previousElementSibling}return[]},next(p,r){let c=p.nextElementSibling;for(;c;){if(c.matches(r))return[c];c=c.nextElementSibling}return[]},focusableChildren(p){const r=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(c=>`${c}:not([tabindex^="-"])`).join(",");return this.find(r,p).filter(c=>!H(c)&&L(c))}},pc="swipe",_s=".bs.swipe",_c=`touchstart${_s}`,mc=`touchmove${_s}`,gc=`touchend${_s}`,vc=`pointerdown${_s}`,bc=`pointerup${_s}`,Ec="touch",yc="pen",wc="pointer-event",Ac=40,Tc={endCallback:null,leftCallback:null,rightCallback:null},Cc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Tn extends j{constructor(r,c){super(),this._element=r,!(!r||!Tn.isSupported())&&(this._config=this._getConfig(c),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Tc}static get DefaultType(){return Cc}static get NAME(){return pc}dispose(){E.off(this._element,_s)}_start(r){if(!this._supportPointerEvents){this._deltaX=r.touches[0].clientX;return}this._eventIsPointerPenTouch(r)&&(this._deltaX=r.clientX)}_end(r){this._eventIsPointerPenTouch(r)&&(this._deltaX=r.clientX-this._deltaX),this._handleSwipe(),ee(this._config.endCallback)}_move(r){this._deltaX=r.touches&&r.touches.length>1?0:r.touches[0].clientX-this._deltaX}_handleSwipe(){const r=Math.abs(this._deltaX);if(r<=Ac)return;const c=r/this._deltaX;this._deltaX=0,c&&ee(c>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(E.on(this._element,vc,r=>this._start(r)),E.on(this._element,bc,r=>this._end(r)),this._element.classList.add(wc)):(E.on(this._element,_c,r=>this._start(r)),E.on(this._element,mc,r=>this._move(r)),E.on(this._element,gc,r=>this._end(r)))}_eventIsPointerPenTouch(r){return this._supportPointerEvents&&(r.pointerType===yc||r.pointerType===Ec)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Oc="carousel",Lt=".bs.carousel",Vr=".data-api",Sc="ArrowLeft",Nc="ArrowRight",xc=500,zs="next",ms="prev",gs="left",Cn="right",$c=`slide${Lt}`,vi=`slid${Lt}`,Rc=`keydown${Lt}`,Lc=`mouseenter${Lt}`,Dc=`mouseleave${Lt}`,Ic=`dragstart${Lt}`,Pc=`load${Lt}${Vr}`,kc=`click${Lt}${Vr}`,jr="carousel",On="active",Mc="slide",Vc="carousel-item-end",jc="carousel-item-start",Hc="carousel-item-next",Fc="carousel-item-prev",Hr=".active",Fr=".carousel-item",Bc=Hr+Fr,Kc=".carousel-item img",Uc=".carousel-indicators",Wc="[data-bs-slide], [data-bs-slide-to]",qc='[data-bs-ride="carousel"]',Yc={[Sc]:Cn,[Nc]:gs},zc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Gc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class vs extends x{constructor(r,c){super(r,c),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(Uc,this._element),this._addEventListeners(),this._config.ride===jr&&this.cycle()}static get Default(){return zc}static get DefaultType(){return Gc}static get NAME(){return Oc}next(){this._slide(zs)}nextWhenVisible(){!document.hidden&&L(this._element)&&this.next()}prev(){this._slide(ms)}pause(){this._isSliding&&R(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){E.one(this._element,vi,()=>this.cycle());return}this.cycle()}}to(r){const c=this._getItems();if(r>c.length-1||r<0)return;if(this._isSliding){E.one(this._element,vi,()=>this.to(r));return}const _=this._getItemIndex(this._getActive());if(_===r)return;const T=r>_?zs:ms;this._slide(T,c[r])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(r){return r.defaultInterval=r.interval,r}_addEventListeners(){this._config.keyboard&&E.on(this._element,Rc,r=>this._keydown(r)),this._config.pause==="hover"&&(E.on(this._element,Lc,()=>this.pause()),E.on(this._element,Dc,()=>this._maybeEnableCycle())),this._config.touch&&Tn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of re.find(Kc,this._element))E.on(_,Ic,T=>T.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(gs)),rightCallback:()=>this._slide(this._directionToOrder(Cn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),xc+this._config.interval))}};this._swipeHelper=new Tn(this._element,c)}_keydown(r){if(/input|textarea/i.test(r.target.tagName))return;const c=Yc[r.key];c&&(r.preventDefault(),this._slide(this._directionToOrder(c)))}_getItemIndex(r){return this._getItems().indexOf(r)}_setActiveIndicatorElement(r){if(!this._indicatorsElement)return;const c=re.findOne(Hr,this._indicatorsElement);c.classList.remove(On),c.removeAttribute("aria-current");const _=re.findOne(`[data-bs-slide-to="${r}"]`,this._indicatorsElement);_&&(_.classList.add(On),_.setAttribute("aria-current","true"))}_updateInterval(){const r=this._activeElement||this._getActive();if(!r)return;const c=Number.parseInt(r.getAttribute("data-bs-interval"),10);this._config.interval=c||this._config.defaultInterval}_slide(r,c=null){if(this._isSliding)return;const _=this._getActive(),T=r===zs,k=c||pe(this._getItems(),_,T,this._config.wrap);if(k===_)return;const P=this._getItemIndex(k),ae=Zs=>E.trigger(this._element,Zs,{relatedTarget:k,direction:this._orderToDirection(r),from:this._getItemIndex(_),to:P});if(ae($c).defaultPrevented||!_||!k)return;const Ye=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(P),this._activeElement=k;const Se=T?jc:Vc,at=T?Hc:Fc;k.classList.add(at),q(k),_.classList.add(Se),k.classList.add(Se);const pt=()=>{k.classList.remove(Se,at),k.classList.add(On),_.classList.remove(On,at,Se),this._isSliding=!1,ae(vi)};this._queueCallback(pt,_,this._isAnimated()),Ye&&this.cycle()}_isAnimated(){return this._element.classList.contains(Mc)}_getActive(){return re.findOne(Bc,this._element)}_getItems(){return re.find(Fr,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(r){return X()?r===gs?ms:zs:r===gs?zs:ms}_orderToDirection(r){return X()?r===ms?gs:Cn:r===ms?Cn:gs}static jQueryInterface(r){return this.each(function(){const c=vs.getOrCreateInstance(this,r);if(typeof r=="number"){c.to(r);return}if(typeof r=="string"){if(c[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);c[r]()}})}}E.on(document,kc,Wc,function(p){const r=v(this);if(!r||!r.classList.contains(jr))return;p.preventDefault();const c=vs.getOrCreateInstance(r),_=this.getAttribute("data-bs-slide-to");if(_){c.to(_),c._maybeEnableCycle();return}if($.getDataAttribute(this,"slide")==="next"){c.next(),c._maybeEnableCycle();return}c.prev(),c._maybeEnableCycle()}),E.on(window,Pc,()=>{const p=re.find(qc);for(const r of p)vs.getOrCreateInstance(r)}),z(vs);const Xc="collapse",Gs=".bs.collapse",Qc=".data-api",Jc=`show${Gs}`,Zc=`shown${Gs}`,eu=`hide${Gs}`,tu=`hidden${Gs}`,su=`click${Gs}${Qc}`,bi="show",bs="collapse",Sn="collapsing",nu="collapsed",iu=`:scope .${bs} .${bs}`,ru="collapse-horizontal",ou="width",au="height",lu=".collapse.show, .collapse.collapsing",Ei='[data-bs-toggle="collapse"]',cu={parent:null,toggle:!0},uu={parent:"(null|element)",toggle:"boolean"};class Es extends x{constructor(r,c){super(r,c),this._isTransitioning=!1,this._triggerArray=[];const _=re.find(Ei);for(const T of _){const k=g(T),P=re.find(k).filter(ae=>ae===this._element);k!==null&&P.length&&this._triggerArray.push(T)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return cu}static get DefaultType(){return uu}static get NAME(){return Xc}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let r=[];if(this._config.parent&&(r=this._getFirstLevelChildren(lu).filter(ae=>ae!==this._element).map(ae=>Es.getOrCreateInstance(ae,{toggle:!1}))),r.length&&r[0]._isTransitioning||E.trigger(this._element,Jc).defaultPrevented)return;for(const ae of r)ae.hide();const _=this._getDimension();this._element.classList.remove(bs),this._element.classList.add(Sn),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const T=()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(bs,bi),this._element.style[_]="",E.trigger(this._element,Zc)},P=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(T,this._element,!0),this._element.style[_]=`${this._element[P]}px`}hide(){if(this._isTransitioning||!this._isShown()||E.trigger(this._element,eu).defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,q(this._element),this._element.classList.add(Sn),this._element.classList.remove(bs,bi);for(const T of this._triggerArray){const k=v(T);k&&!this._isShown(k)&&this._addAriaAndCollapsedClass([T],!1)}this._isTransitioning=!0;const _=()=>{this._isTransitioning=!1,this._element.classList.remove(Sn),this._element.classList.add(bs),E.trigger(this._element,tu)};this._element.style[c]="",this._queueCallback(_,this._element,!0)}_isShown(r=this._element){return r.classList.contains(bi)}_configAfterMerge(r){return r.toggle=Boolean(r.toggle),r.parent=I(r.parent),r}_getDimension(){return this._element.classList.contains(ru)?ou:au}_initializeChildren(){if(!this._config.parent)return;const r=this._getFirstLevelChildren(Ei);for(const c of r){const _=v(c);_&&this._addAriaAndCollapsedClass([c],this._isShown(_))}}_getFirstLevelChildren(r){const c=re.find(iu,this._config.parent);return re.find(r,this._config.parent).filter(_=>!c.includes(_))}_addAriaAndCollapsedClass(r,c){if(r.length)for(const _ of r)_.classList.toggle(nu,!c),_.setAttribute("aria-expanded",c)}static jQueryInterface(r){const c={};return typeof r=="string"&&/show|hide/.test(r)&&(c.toggle=!1),this.each(function(){const _=Es.getOrCreateInstance(this,c);if(typeof r=="string"){if(typeof _[r]>"u")throw new TypeError(`No method named "${r}"`);_[r]()}})}}E.on(document,su,Ei,function(p){(p.target.tagName==="A"||p.delegateTarget&&p.delegateTarget.tagName==="A")&&p.preventDefault();const r=g(this),c=re.find(r);for(const _ of c)Es.getOrCreateInstance(_,{toggle:!1}).toggle()}),z(Es);const Br="dropdown",zt=".bs.dropdown",yi=".data-api",fu="Escape",Kr="Tab",du="ArrowUp",Ur="ArrowDown",hu=2,pu=`hide${zt}`,_u=`hidden${zt}`,mu=`show${zt}`,gu=`shown${zt}`,Wr=`click${zt}${yi}`,qr=`keydown${zt}${yi}`,vu=`keyup${zt}${yi}`,ys="show",bu="dropup",Eu="dropend",yu="dropstart",wu="dropup-center",Au="dropdown-center",Gt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Tu=`${Gt}.${ys}`,Nn=".dropdown-menu",Cu=".navbar",Ou=".navbar-nav",Su=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Nu=X()?"top-end":"top-start",xu=X()?"top-start":"top-end",$u=X()?"bottom-end":"bottom-start",Ru=X()?"bottom-start":"bottom-end",Lu=X()?"left-start":"right-start",Du=X()?"right-start":"left-start",Iu="top",Pu="bottom",ku={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class rt extends x{constructor(r,c){super(r,c),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,Nn)[0]||re.prev(this._element,Nn)[0]||re.findOne(Nn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ku}static get DefaultType(){return Mu}static get NAME(){return Br}toggle(){return this._isShown()?this.hide():this.show()}show(){if(H(this._element)||this._isShown())return;const r={relatedTarget:this._element};if(!E.trigger(this._element,mu,r).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Ou))for(const _ of[].concat(...document.body.children))E.on(_,"mouseover",F);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ys),this._element.classList.add(ys),E.trigger(this._element,gu,r)}}hide(){if(H(this._element)||!this._isShown())return;const r={relatedTarget:this._element};this._completeHide(r)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(r){if(!E.trigger(this._element,pu,r).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))E.off(_,"mouseover",F);this._popper&&this._popper.destroy(),this._menu.classList.remove(ys),this._element.classList.remove(ys),this._element.setAttribute("aria-expanded","false"),$.removeDataAttribute(this._menu,"popper"),E.trigger(this._element,_u,r)}}_getConfig(r){if(r=super._getConfig(r),typeof r.reference=="object"&&!O(r.reference)&&typeof r.reference.getBoundingClientRect!="function")throw new TypeError(`${Br.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return r}_createPopper(){if(typeof i>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let r=this._element;this._config.reference==="parent"?r=this._parent:O(this._config.reference)?r=I(this._config.reference):typeof this._config.reference=="object"&&(r=this._config.reference);const c=this._getPopperConfig();this._popper=i.createPopper(r,this._menu,c)}_isShown(){return this._menu.classList.contains(ys)}_getPlacement(){const r=this._parent;if(r.classList.contains(Eu))return Lu;if(r.classList.contains(yu))return Du;if(r.classList.contains(wu))return Iu;if(r.classList.contains(Au))return Pu;const c=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return r.classList.contains(bu)?c?xu:Nu:c?Ru:$u}_detectNavbar(){return this._element.closest(Cu)!==null}_getOffset(){const{offset:r}=this._config;return typeof r=="string"?r.split(",").map(c=>Number.parseInt(c,10)):typeof r=="function"?c=>r(c,this._element):r}_getPopperConfig(){const r={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&($.setDataAttribute(this._menu,"popper","static"),r.modifiers=[{name:"applyStyles",enabled:!1}]),{...r,...typeof this._config.popperConfig=="function"?this._config.popperConfig(r):this._config.popperConfig}}_selectMenuItem({key:r,target:c}){const _=re.find(Su,this._menu).filter(T=>L(T));_.length&&pe(_,c,r===Ur,!_.includes(c)).focus()}static jQueryInterface(r){return this.each(function(){const c=rt.getOrCreateInstance(this,r);if(typeof r=="string"){if(typeof c[r]>"u")throw new TypeError(`No method named "${r}"`);c[r]()}})}static clearMenus(r){if(r.button===hu||r.type==="keyup"&&r.key!==Kr)return;const c=re.find(Tu);for(const _ of c){const T=rt.getInstance(_);if(!T||T._config.autoClose===!1)continue;const k=r.composedPath(),P=k.includes(T._menu);if(k.includes(T._element)||T._config.autoClose==="inside"&&!P||T._config.autoClose==="outside"&&P||T._menu.contains(r.target)&&(r.type==="keyup"&&r.key===Kr||/input|select|option|textarea|form/i.test(r.target.tagName)))continue;const ae={relatedTarget:T._element};r.type==="click"&&(ae.clickEvent=r),T._completeHide(ae)}}static dataApiKeydownHandler(r){const c=/input|textarea/i.test(r.target.tagName),_=r.key===fu,T=[du,Ur].includes(r.key);if(!T&&!_||c&&!_)return;r.preventDefault();const k=this.matches(Gt)?this:re.prev(this,Gt)[0]||re.next(this,Gt)[0]||re.findOne(Gt,r.delegateTarget.parentNode),P=rt.getOrCreateInstance(k);if(T){r.stopPropagation(),P.show(),P._selectMenuItem(r);return}P._isShown()&&(r.stopPropagation(),P.hide(),k.focus())}}E.on(document,qr,Gt,rt.dataApiKeydownHandler),E.on(document,qr,Nn,rt.dataApiKeydownHandler),E.on(document,Wr,rt.clearMenus),E.on(document,vu,rt.clearMenus),E.on(document,Wr,Gt,function(p){p.preventDefault(),rt.getOrCreateInstance(this).toggle()}),z(rt);const Yr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zr=".sticky-top",xn="padding-right",Gr="margin-right";class wi{constructor(){this._element=document.body}getWidth(){const r=document.documentElement.clientWidth;return Math.abs(window.innerWidth-r)}hide(){const r=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xn,c=>c+r),this._setElementAttributes(Yr,xn,c=>c+r),this._setElementAttributes(zr,Gr,c=>c-r)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xn),this._resetElementAttributes(Yr,xn),this._resetElementAttributes(zr,Gr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(r,c,_){const T=this.getWidth(),k=P=>{if(P!==this._element&&window.innerWidth>P.clientWidth+T)return;this._saveInitialAttribute(P,c);const ae=window.getComputedStyle(P).getPropertyValue(c);P.style.setProperty(c,`${_(Number.parseFloat(ae))}px`)};this._applyManipulationCallback(r,k)}_saveInitialAttribute(r,c){const _=r.style.getPropertyValue(c);_&&$.setDataAttribute(r,c,_)}_resetElementAttributes(r,c){const _=T=>{const k=$.getDataAttribute(T,c);if(k===null){T.style.removeProperty(c);return}$.removeDataAttribute(T,c),T.style.setProperty(c,k)};this._applyManipulationCallback(r,_)}_applyManipulationCallback(r,c){if(O(r)){c(r);return}for(const _ of re.find(r,this._element))c(_)}}const Xr="backdrop",Vu="fade",Qr="show",Jr=`mousedown.bs.${Xr}`,ju={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Hu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zr extends j{constructor(r){super(),this._config=this._getConfig(r),this._isAppended=!1,this._element=null}static get Default(){return ju}static get DefaultType(){return Hu}static get NAME(){return Xr}show(r){if(!this._config.isVisible){ee(r);return}this._append();const c=this._getElement();this._config.isAnimated&&q(c),c.classList.add(Qr),this._emulateAnimation(()=>{ee(r)})}hide(r){if(!this._config.isVisible){ee(r);return}this._getElement().classList.remove(Qr),this._emulateAnimation(()=>{this.dispose(),ee(r)})}dispose(){this._isAppended&&(E.off(this._element,Jr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const r=document.createElement("div");r.className=this._config.className,this._config.isAnimated&&r.classList.add(Vu),this._element=r}return this._element}_configAfterMerge(r){return r.rootElement=I(r.rootElement),r}_append(){if(this._isAppended)return;const r=this._getElement();this._config.rootElement.append(r),E.on(r,Jr,()=>{ee(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(r){he(r,this._getElement(),this._config.isAnimated)}}const Fu="focustrap",$n=".bs.focustrap",Bu=`focusin${$n}`,Ku=`keydown.tab${$n}`,Uu="Tab",Wu="forward",eo="backward",qu={autofocus:!0,trapElement:null},Yu={autofocus:"boolean",trapElement:"element"};class to extends j{constructor(r){super(),this._config=this._getConfig(r),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qu}static get DefaultType(){return Yu}static get NAME(){return Fu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),E.off(document,$n),E.on(document,Bu,r=>this._handleFocusin(r)),E.on(document,Ku,r=>this._handleKeydown(r)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,E.off(document,$n))}_handleFocusin(r){const{trapElement:c}=this._config;if(r.target===document||r.target===c||c.contains(r.target))return;const _=re.focusableChildren(c);_.length===0?c.focus():this._lastTabNavDirection===eo?_[_.length-1].focus():_[0].focus()}_handleKeydown(r){r.key===Uu&&(this._lastTabNavDirection=r.shiftKey?eo:Wu)}}const zu="modal",ot=".bs.modal",Gu=".data-api",Xu="Escape",Qu=`hide${ot}`,Ju=`hidePrevented${ot}`,so=`hidden${ot}`,no=`show${ot}`,Zu=`shown${ot}`,ef=`resize${ot}`,tf=`click.dismiss${ot}`,sf=`mousedown.dismiss${ot}`,nf=`keydown.dismiss${ot}`,rf=`click${ot}${Gu}`,io="modal-open",of="fade",ro="show",Ai="modal-static",af=".modal.show",lf=".modal-dialog",cf=".modal-body",uf='[data-bs-toggle="modal"]',ff={backdrop:!0,focus:!0,keyboard:!0},df={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Xt extends x{constructor(r,c){super(r,c),this._dialog=re.findOne(lf,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new wi,this._addEventListeners()}static get Default(){return ff}static get DefaultType(){return df}static get NAME(){return zu}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){this._isShown||this._isTransitioning||E.trigger(this._element,no,{relatedTarget:r}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(io),this._adjustDialog(),this._backdrop.show(()=>this._showElement(r)))}hide(){!this._isShown||this._isTransitioning||E.trigger(this._element,Qu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ro),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const r of[window,this._dialog])E.off(r,ot);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new to({trapElement:this._element})}_showElement(r){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const c=re.findOne(cf,this._dialog);c&&(c.scrollTop=0),q(this._element),this._element.classList.add(ro);const _=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,E.trigger(this._element,Zu,{relatedTarget:r})};this._queueCallback(_,this._dialog,this._isAnimated())}_addEventListeners(){E.on(this._element,nf,r=>{if(r.key===Xu){if(this._config.keyboard){r.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),E.on(window,ef,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),E.on(this._element,sf,r=>{E.one(this._element,tf,c=>{if(!(this._element!==r.target||this._element!==c.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(io),this._resetAdjustments(),this._scrollBar.reset(),E.trigger(this._element,so)})}_isAnimated(){return this._element.classList.contains(of)}_triggerBackdropTransition(){if(E.trigger(this._element,Ju).defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;_==="hidden"||this._element.classList.contains(Ai)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(Ai),this._queueCallback(()=>{this._element.classList.remove(Ai),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const r=this._element.scrollHeight>document.documentElement.clientHeight,c=this._scrollBar.getWidth(),_=c>0;if(_&&!r){const T=X()?"paddingLeft":"paddingRight";this._element.style[T]=`${c}px`}if(!_&&r){const T=X()?"paddingRight":"paddingLeft";this._element.style[T]=`${c}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(r,c){return this.each(function(){const _=Xt.getOrCreateInstance(this,r);if(typeof r=="string"){if(typeof _[r]>"u")throw new TypeError(`No method named "${r}"`);_[r](c)}})}}E.on(document,rf,uf,function(p){const r=v(this);["A","AREA"].includes(this.tagName)&&p.preventDefault(),E.one(r,no,T=>{T.defaultPrevented||E.one(r,so,()=>{L(this)&&this.focus()})});const c=re.findOne(af);c&&Xt.getInstance(c).hide(),Xt.getOrCreateInstance(r).toggle(this)}),N(Xt),z(Xt);const hf="offcanvas",wt=".bs.offcanvas",oo=".data-api",pf=`load${wt}${oo}`,_f="Escape",ao="show",lo="showing",co="hiding",mf="offcanvas-backdrop",uo=".offcanvas.show",gf=`show${wt}`,vf=`shown${wt}`,bf=`hide${wt}`,fo=`hidePrevented${wt}`,ho=`hidden${wt}`,Ef=`resize${wt}`,yf=`click${wt}${oo}`,wf=`keydown.dismiss${wt}`,Af='[data-bs-toggle="offcanvas"]',Tf={backdrop:!0,keyboard:!0,scroll:!1},Cf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class At extends x{constructor(r,c){super(r,c),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Tf}static get DefaultType(){return Cf}static get NAME(){return hf}toggle(r){return this._isShown?this.hide():this.show(r)}show(r){if(this._isShown||E.trigger(this._element,gf,{relatedTarget:r}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new wi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lo);const _=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ao),this._element.classList.remove(lo),E.trigger(this._element,vf,{relatedTarget:r})};this._queueCallback(_,this._element,!0)}hide(){if(!this._isShown||E.trigger(this._element,bf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(co),this._backdrop.hide();const c=()=>{this._element.classList.remove(ao,co),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new wi().reset(),E.trigger(this._element,ho)};this._queueCallback(c,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const r=()=>{if(this._config.backdrop==="static"){E.trigger(this._element,fo);return}this.hide()},c=Boolean(this._config.backdrop);return new Zr({className:mf,isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?r:null})}_initializeFocusTrap(){return new to({trapElement:this._element})}_addEventListeners(){E.on(this._element,wf,r=>{if(r.key===_f){if(!this._config.keyboard){E.trigger(this._element,fo);return}this.hide()}})}static jQueryInterface(r){return this.each(function(){const c=At.getOrCreateInstance(this,r);if(typeof r=="string"){if(c[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);c[r](this)}})}}E.on(document,yf,Af,function(p){const r=v(this);if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),H(this))return;E.one(r,ho,()=>{L(this)&&this.focus()});const c=re.findOne(uo);c&&c!==r&&At.getInstance(c).hide(),At.getOrCreateInstance(r).toggle(this)}),E.on(window,pf,()=>{for(const p of re.find(uo))At.getOrCreateInstance(p).show()}),E.on(window,Ef,()=>{for(const p of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(p).position!=="fixed"&&At.getOrCreateInstance(p).hide()}),N(At),z(At);const Of=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Sf=/^aria-[\w-]*$/i,Nf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,xf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,$f=(p,r)=>{const c=p.nodeName.toLowerCase();return r.includes(c)?Of.has(c)?Boolean(Nf.test(p.nodeValue)||xf.test(p.nodeValue)):!0:r.filter(_=>_ instanceof RegExp).some(_=>_.test(c))},po={"*":["class","dir","id","lang","role",Sf],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Rf(p,r,c){if(!p.length)return p;if(c&&typeof c=="function")return c(p);const T=new window.DOMParser().parseFromString(p,"text/html"),k=[].concat(...T.body.querySelectorAll("*"));for(const P of k){const ae=P.nodeName.toLowerCase();if(!Object.keys(r).includes(ae)){P.remove();continue}const Fe=[].concat(...P.attributes),Ye=[].concat(r["*"]||[],r[ae]||[]);for(const Se of Fe)$f(Se,Ye)||P.removeAttribute(Se.nodeName)}return T.body.innerHTML}const Lf="TemplateFactory",Df={allowList:po,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},If={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Pf={entry:"(string|element|function|null)",selector:"(string|element)"};class kf extends j{constructor(r){super(),this._config=this._getConfig(r)}static get Default(){return Df}static get DefaultType(){return If}static get NAME(){return Lf}getContent(){return Object.values(this._config.content).map(r=>this._resolvePossibleFunction(r)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(r){return this._checkContent(r),this._config.content={...this._config.content,...r},this}toHtml(){const r=document.createElement("div");r.innerHTML=this._maybeSanitize(this._config.template);for(const[T,k]of Object.entries(this._config.content))this._setContent(r,k,T);const c=r.children[0],_=this._resolvePossibleFunction(this._config.extraClass);return _&&c.classList.add(..._.split(" ")),c}_typeCheckConfig(r){super._typeCheckConfig(r),this._checkContent(r.content)}_checkContent(r){for(const[c,_]of Object.entries(r))super._typeCheckConfig({selector:c,entry:_},Pf)}_setContent(r,c,_){const T=re.findOne(_,r);if(T){if(c=this._resolvePossibleFunction(c),!c){T.remove();return}if(O(c)){this._putElementInTemplate(I(c),T);return}if(this._config.html){T.innerHTML=this._maybeSanitize(c);return}T.textContent=c}}_maybeSanitize(r){return this._config.sanitize?Rf(r,this._config.allowList,this._config.sanitizeFn):r}_resolvePossibleFunction(r){return typeof r=="function"?r(this):r}_putElementInTemplate(r,c){if(this._config.html){c.innerHTML="",c.append(r);return}c.textContent=r.textContent}}const Mf="tooltip",Vf=new Set(["sanitize","allowList","sanitizeFn"]),Ti="fade",jf="modal",Rn="show",Hf=".tooltip-inner",_o=`.${jf}`,mo="hide.bs.modal",Xs="hover",Ci="focus",Ff="click",Bf="manual",Kf="hide",Uf="hidden",Wf="show",qf="shown",Yf="inserted",zf="click",Gf="focusin",Xf="focusout",Qf="mouseenter",Jf="mouseleave",Zf={AUTO:"auto",TOP:"top",RIGHT:X()?"left":"right",BOTTOM:"bottom",LEFT:X()?"right":"left"},ed={allowList:po,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},td={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Qt extends x{constructor(r,c){if(typeof i>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(r,c),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ed}static get DefaultType(){return td}static get NAME(){return Mf}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),E.off(this._element.closest(_o),mo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const r=E.trigger(this._element,this.constructor.eventName(Wf)),_=(V(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(r.defaultPrevented||!_)return;this._disposePopper();const T=this._getTipElement();this._element.setAttribute("aria-describedby",T.getAttribute("id"));const{container:k}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(k.append(T),E.trigger(this._element,this.constructor.eventName(Yf))),this._popper=this._createPopper(T),T.classList.add(Rn),"ontouchstart"in document.documentElement)for(const ae of[].concat(...document.body.children))E.on(ae,"mouseover",F);const P=()=>{E.trigger(this._element,this.constructor.eventName(qf)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(P,this.tip,this._isAnimated())}hide(){if(!this._isShown()||E.trigger(this._element,this.constructor.eventName(Kf)).defaultPrevented)return;if(this._getTipElement().classList.remove(Rn),"ontouchstart"in document.documentElement)for(const T of[].concat(...document.body.children))E.off(T,"mouseover",F);this._activeTrigger[Ff]=!1,this._activeTrigger[Ci]=!1,this._activeTrigger[Xs]=!1,this._isHovered=null;const _=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),E.trigger(this._element,this.constructor.eventName(Uf)))};this._queueCallback(_,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(r){const c=this._getTemplateFactory(r).toHtml();if(!c)return null;c.classList.remove(Ti,Rn),c.classList.add(`bs-${this.constructor.NAME}-auto`);const _=d(this.constructor.NAME).toString();return c.setAttribute("id",_),this._isAnimated()&&c.classList.add(Ti),c}setContent(r){this._newContent=r,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(r){return this._templateFactory?this._templateFactory.changeContent(r):this._templateFactory=new kf({...this._config,content:r,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Hf]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(r){return this.constructor.getOrCreateInstance(r.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ti)}_isShown(){return this.tip&&this.tip.classList.contains(Rn)}_createPopper(r){const c=typeof this._config.placement=="function"?this._config.placement.call(this,r,this._element):this._config.placement,_=Zf[c.toUpperCase()];return i.createPopper(this._element,r,this._getPopperConfig(_))}_getOffset(){const{offset:r}=this._config;return typeof r=="string"?r.split(",").map(c=>Number.parseInt(c,10)):typeof r=="function"?c=>r(c,this._element):r}_resolvePossibleFunction(r){return typeof r=="function"?r.call(this._element):r}_getPopperConfig(r){const c={placement:r,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:_=>{this._getTipElement().setAttribute("data-popper-placement",_.state.placement)}}]};return{...c,...typeof this._config.popperConfig=="function"?this._config.popperConfig(c):this._config.popperConfig}}_setListeners(){const r=this._config.trigger.split(" ");for(const c of r)if(c==="click")E.on(this._element,this.constructor.eventName(zf),this._config.selector,_=>{this._initializeOnDelegatedTarget(_).toggle()});else if(c!==Bf){const _=c===Xs?this.constructor.eventName(Qf):this.constructor.eventName(Gf),T=c===Xs?this.constructor.eventName(Jf):this.constructor.eventName(Xf);E.on(this._element,_,this._config.selector,k=>{const P=this._initializeOnDelegatedTarget(k);P._activeTrigger[k.type==="focusin"?Ci:Xs]=!0,P._enter()}),E.on(this._element,T,this._config.selector,k=>{const P=this._initializeOnDelegatedTarget(k);P._activeTrigger[k.type==="focusout"?Ci:Xs]=P._element.contains(k.relatedTarget),P._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},E.on(this._element.closest(_o),mo,this._hideModalHandler)}_fixTitle(){const r=this._element.getAttribute("title");r&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",r),this._element.setAttribute("data-bs-original-title",r),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(r,c){clearTimeout(this._timeout),this._timeout=setTimeout(r,c)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(r){const c=$.getDataAttributes(this._element);for(const _ of Object.keys(c))Vf.has(_)&&delete c[_];return r={...c,...typeof r=="object"&&r?r:{}},r=this._mergeConfigObj(r),r=this._configAfterMerge(r),this._typeCheckConfig(r),r}_configAfterMerge(r){return r.container=r.container===!1?document.body:I(r.container),typeof r.delay=="number"&&(r.delay={show:r.delay,hide:r.delay}),typeof r.title=="number"&&(r.title=r.title.toString()),typeof r.content=="number"&&(r.content=r.content.toString()),r}_getDelegateConfig(){const r={};for(const c in this._config)this.constructor.Default[c]!==this._config[c]&&(r[c]=this._config[c]);return r.selector=!1,r.trigger="manual",r}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(r){return this.each(function(){const c=Qt.getOrCreateInstance(this,r);if(typeof r=="string"){if(typeof c[r]>"u")throw new TypeError(`No method named "${r}"`);c[r]()}})}}z(Qt);const sd="popover",nd=".popover-header",id=".popover-body",rd={...Qt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},od={...Qt.DefaultType,content:"(null|string|element|function)"};class Ln extends Qt{static get Default(){return rd}static get DefaultType(){return od}static get NAME(){return sd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[nd]:this._getTitle(),[id]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(r){return this.each(function(){const c=Ln.getOrCreateInstance(this,r);if(typeof r=="string"){if(typeof c[r]>"u")throw new TypeError(`No method named "${r}"`);c[r]()}})}}z(Ln);const ad="scrollspy",Oi=".bs.scrollspy",ld=".data-api",cd=`activate${Oi}`,go=`click${Oi}`,ud=`load${Oi}${ld}`,fd="dropdown-item",ws="active",dd='[data-bs-spy="scroll"]',Si="[href]",hd=".nav, .list-group",vo=".nav-link",pd=`${vo}, .nav-item > ${vo}, .list-group-item`,_d=".dropdown",md=".dropdown-toggle",gd={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},vd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qs extends x{constructor(r,c){super(r,c),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return gd}static get DefaultType(){return vd}static get NAME(){return ad}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const r of this._observableSections.values())this._observer.observe(r)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(r){return r.target=I(r.target)||document.body,r.rootMargin=r.offset?`${r.offset}px 0px -30%`:r.rootMargin,typeof r.threshold=="string"&&(r.threshold=r.threshold.split(",").map(c=>Number.parseFloat(c))),r}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(E.off(this._config.target,go),E.on(this._config.target,go,Si,r=>{const c=this._observableSections.get(r.target.hash);if(c){r.preventDefault();const _=this._rootElement||window,T=c.offsetTop-this._element.offsetTop;if(_.scrollTo){_.scrollTo({top:T,behavior:"smooth"});return}_.scrollTop=T}}))}_getNewObserver(){const r={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(c=>this._observerCallback(c),r)}_observerCallback(r){const c=P=>this._targetLinks.get(`#${P.target.id}`),_=P=>{this._previousScrollData.visibleEntryTop=P.target.offsetTop,this._process(c(P))},T=(this._rootElement||document.documentElement).scrollTop,k=T>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=T;for(const P of r){if(!P.isIntersecting){this._activeTarget=null,this._clearActiveClass(c(P));continue}const ae=P.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(k&&ae){if(_(P),!T)return;continue}!k&&!ae&&_(P)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const r=re.find(Si,this._config.target);for(const c of r){if(!c.hash||H(c))continue;const _=re.findOne(c.hash,this._element);L(_)&&(this._targetLinks.set(c.hash,c),this._observableSections.set(c.hash,_))}}_process(r){this._activeTarget!==r&&(this._clearActiveClass(this._config.target),this._activeTarget=r,r.classList.add(ws),this._activateParents(r),E.trigger(this._element,cd,{relatedTarget:r}))}_activateParents(r){if(r.classList.contains(fd)){re.findOne(md,r.closest(_d)).classList.add(ws);return}for(const c of re.parents(r,hd))for(const _ of re.prev(c,pd))_.classList.add(ws)}_clearActiveClass(r){r.classList.remove(ws);const c=re.find(`${Si}.${ws}`,r);for(const _ of c)_.classList.remove(ws)}static jQueryInterface(r){return this.each(function(){const c=Qs.getOrCreateInstance(this,r);if(typeof r=="string"){if(c[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);c[r]()}})}}E.on(window,ud,()=>{for(const p of re.find(dd))Qs.getOrCreateInstance(p)}),z(Qs);const bd="tab",Jt=".bs.tab",Ed=`hide${Jt}`,yd=`hidden${Jt}`,wd=`show${Jt}`,Ad=`shown${Jt}`,Td=`click${Jt}`,Cd=`keydown${Jt}`,Od=`load${Jt}`,Sd="ArrowLeft",bo="ArrowRight",Nd="ArrowUp",Eo="ArrowDown",Zt="active",yo="fade",Ni="show",xd="dropdown",$d=".dropdown-toggle",Rd=".dropdown-menu",xi=":not(.dropdown-toggle)",Ld='.list-group, .nav, [role="tablist"]',Dd=".nav-item, .list-group-item",Id=`.nav-link${xi}, .list-group-item${xi}, [role="tab"]${xi}`,wo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$i=`${Id}, ${wo}`,Pd=`.${Zt}[data-bs-toggle="tab"], .${Zt}[data-bs-toggle="pill"], .${Zt}[data-bs-toggle="list"]`;class es extends x{constructor(r){super(r),this._parent=this._element.closest(Ld),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),E.on(this._element,Cd,c=>this._keydown(c)))}static get NAME(){return bd}show(){const r=this._element;if(this._elemIsActive(r))return;const c=this._getActiveElem(),_=c?E.trigger(c,Ed,{relatedTarget:r}):null;E.trigger(r,wd,{relatedTarget:c}).defaultPrevented||_&&_.defaultPrevented||(this._deactivate(c,r),this._activate(r,c))}_activate(r,c){if(!r)return;r.classList.add(Zt),this._activate(v(r));const _=()=>{if(r.getAttribute("role")!=="tab"){r.classList.add(Ni);return}r.removeAttribute("tabindex"),r.setAttribute("aria-selected",!0),this._toggleDropDown(r,!0),E.trigger(r,Ad,{relatedTarget:c})};this._queueCallback(_,r,r.classList.contains(yo))}_deactivate(r,c){if(!r)return;r.classList.remove(Zt),r.blur(),this._deactivate(v(r));const _=()=>{if(r.getAttribute("role")!=="tab"){r.classList.remove(Ni);return}r.setAttribute("aria-selected",!1),r.setAttribute("tabindex","-1"),this._toggleDropDown(r,!1),E.trigger(r,yd,{relatedTarget:c})};this._queueCallback(_,r,r.classList.contains(yo))}_keydown(r){if(![Sd,bo,Nd,Eo].includes(r.key))return;r.stopPropagation(),r.preventDefault();const c=[bo,Eo].includes(r.key),_=pe(this._getChildren().filter(T=>!H(T)),r.target,c,!0);_&&(_.focus({preventScroll:!0}),es.getOrCreateInstance(_).show())}_getChildren(){return re.find($i,this._parent)}_getActiveElem(){return this._getChildren().find(r=>this._elemIsActive(r))||null}_setInitialAttributes(r,c){this._setAttributeIfNotExists(r,"role","tablist");for(const _ of c)this._setInitialAttributesOnChild(_)}_setInitialAttributesOnChild(r){r=this._getInnerElement(r);const c=this._elemIsActive(r),_=this._getOuterElement(r);r.setAttribute("aria-selected",c),_!==r&&this._setAttributeIfNotExists(_,"role","presentation"),c||r.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(r,"role","tab"),this._setInitialAttributesOnTargetPanel(r)}_setInitialAttributesOnTargetPanel(r){const c=v(r);c&&(this._setAttributeIfNotExists(c,"role","tabpanel"),r.id&&this._setAttributeIfNotExists(c,"aria-labelledby",`#${r.id}`))}_toggleDropDown(r,c){const _=this._getOuterElement(r);if(!_.classList.contains(xd))return;const T=(k,P)=>{const ae=re.findOne(k,_);ae&&ae.classList.toggle(P,c)};T($d,Zt),T(Rd,Ni),_.setAttribute("aria-expanded",c)}_setAttributeIfNotExists(r,c,_){r.hasAttribute(c)||r.setAttribute(c,_)}_elemIsActive(r){return r.classList.contains(Zt)}_getInnerElement(r){return r.matches($i)?r:re.findOne($i,r)}_getOuterElement(r){return r.closest(Dd)||r}static jQueryInterface(r){return this.each(function(){const c=es.getOrCreateInstance(this);if(typeof r=="string"){if(c[r]===void 0||r.startsWith("_")||r==="constructor")throw new TypeError(`No method named "${r}"`);c[r]()}})}}E.on(document,Td,wo,function(p){["A","AREA"].includes(this.tagName)&&p.preventDefault(),!H(this)&&es.getOrCreateInstance(this).show()}),E.on(window,Od,()=>{for(const p of re.find(Pd))es.getOrCreateInstance(p)}),z(es);const kd="toast",Dt=".bs.toast",Md=`mouseover${Dt}`,Vd=`mouseout${Dt}`,jd=`focusin${Dt}`,Hd=`focusout${Dt}`,Fd=`hide${Dt}`,Bd=`hidden${Dt}`,Kd=`show${Dt}`,Ud=`shown${Dt}`,Wd="fade",Ao="hide",Dn="show",In="showing",qd={animation:"boolean",autohide:"boolean",delay:"number"},Yd={animation:!0,autohide:!0,delay:5e3};class Js extends x{constructor(r,c){super(r,c),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Yd}static get DefaultType(){return qd}static get NAME(){return kd}show(){if(E.trigger(this._element,Kd).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Wd);const c=()=>{this._element.classList.remove(In),E.trigger(this._element,Ud),this._maybeScheduleHide()};this._element.classList.remove(Ao),q(this._element),this._element.classList.add(Dn,In),this._queueCallback(c,this._element,this._config.animation)}hide(){if(!this.isShown()||E.trigger(this._element,Fd).defaultPrevented)return;const c=()=>{this._element.classList.add(Ao),this._element.classList.remove(In,Dn),E.trigger(this._element,Bd)};this._element.classList.add(In),this._queueCallback(c,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Dn),super.dispose()}isShown(){return this._element.classList.contains(Dn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(r,c){switch(r.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=c;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=c;break}}if(c){this._clearTimeout();return}const _=r.relatedTarget;this._element===_||this._element.contains(_)||this._maybeScheduleHide()}_setListeners(){E.on(this._element,Md,r=>this._onInteraction(r,!0)),E.on(this._element,Vd,r=>this._onInteraction(r,!1)),E.on(this._element,jd,r=>this._onInteraction(r,!0)),E.on(this._element,Hd,r=>this._onInteraction(r,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(r){return this.each(function(){const c=Js.getOrCreateInstance(this,r);if(typeof r=="string"){if(typeof c[r]>"u")throw new TypeError(`No method named "${r}"`);c[r](this)}})}}return N(Js),z(Js),{Alert:ve,Button:Rt,Carousel:vs,Collapse:Es,Dropdown:rt,Modal:Xt,Offcanvas:At,Popover:Ln,ScrollSpy:Qs,Tab:es,Toast:Js,Tooltip:Qt}})})(ob);const hc=A_(rm);hc.use(nb);hc.mount("#app");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgtOWIyOGIzZGMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHZ1ZS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0B2dWUvcnVudGltZS1jb3JlL2Rpc3QvcnVudGltZS1jb3JlLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtZG9tL2Rpc3QvcnVudGltZS1kb20uZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2pzL1VzZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2pzL1VzZXJzLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9qcy9NZXNzYWdlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvY29tcG9uZW50cy9NZXNzYWdlRGlzcGxheS52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL2Fzc2V0cy9kdF9zcXVhZF9sb2dvLnBuZyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvY29tcG9uZW50cy9OYXZiYXIudnVlIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9qcy9Sb2xlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvQXBwLnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIubWpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy92aWV3cy9DcnVkVmlldy52dWUiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvc3JjL3ZpZXdzL0hvbWVWaWV3LnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvdmlld3MvTG9naW5WaWV3LnZ1ZSIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9zcmMvdmlld3MvUGFzc3dvcmRSZXNldFZpZXcudnVlIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9yb3V0ZXIvaW5kZXguanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9lbnVtcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlTmFtZS5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3cuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9hcHBseVN0eWxlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tYXRoLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvdXNlckFnZW50LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2lzTGF5b3V0Vmlld3BvcnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldExheW91dFJlY3QuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvY29udGFpbnMuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Q29tcHV0ZWRTdHlsZS5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc1RhYmxlRWxlbWVudC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0UGFyZW50Tm9kZS5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy93aXRoaW4uanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRGcmVzaFNpZGVPYmplY3QuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tZXJnZVBhZGRpbmdPYmplY3QuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9leHBhbmRUb0hhc2hNYXAuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXJyb3cuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRWYXJpYXRpb24uanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlUGxhY2VtZW50LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93U2Nyb2xsLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbEJhclguanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Vmlld3BvcnRSZWN0LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldERvY3VtZW50UmVjdC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc1Njcm9sbFBhcmVudC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRTY3JvbGxQYXJlbnQuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9yZWN0VG9DbGllbnRSZWN0LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENsaXBwaW5nUmVjdC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9jb21wdXRlQXV0b1BsYWNlbWVudC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9mbGlwLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2hpZGUuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvb2Zmc2V0LmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRBbHRBeGlzLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL3ByZXZlbnRPdmVyZmxvdy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRIVE1MRWxlbWVudFNjcm9sbC5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlU2Nyb2xsLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXBvc2l0ZVJlY3QuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9vcmRlck1vZGlmaWVycy5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RlYm91bmNlLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VCeU5hbWUuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9jcmVhdGVQb3BwZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9wb3BwZXItbGl0ZS5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3BvcHBlci5qcyIsIi4uLy4uLy4uLy4uLy4uL2Zyb250X2VuZC9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2Rpc3QvanMvYm9vdHN0cmFwLmpzIiwiLi4vLi4vLi4vLi4vLi4vZnJvbnRfZW5kL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XG4gKiBpcyBpbiB0aGF0IG1hcC5cbiAqIElNUE9SVEFOVDogYWxsIGNhbGxzIG9mIHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBwcmVmaXhlZCB3aXRoXG4gKiBcXC9cXCojXFxfXFxfUFVSRVxcX1xcX1xcKlxcL1xuICogU28gdGhhdCByb2xsdXAgY2FuIHRyZWUtc2hha2UgdGhlbSBpZiBuZWNlc3NhcnkuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyLCBleHBlY3RzTG93ZXJDYXNlKSB7XG4gICAgY29uc3QgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBjb25zdCBsaXN0ID0gc3RyLnNwbGl0KCcsJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBleHBlY3RzTG93ZXJDYXNlID8gdmFsID0+ICEhbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXSA6IHZhbCA9PiAhIW1hcFt2YWxdO1xufVxuXG4vKipcbiAqIGRldiBvbmx5IGZsYWcgLT4gbmFtZSBtYXBwaW5nXG4gKi9cbmNvbnN0IFBhdGNoRmxhZ05hbWVzID0ge1xuICAgIFsxIC8qIFBhdGNoRmxhZ3MuVEVYVCAqL106IGBURVhUYCxcbiAgICBbMiAvKiBQYXRjaEZsYWdzLkNMQVNTICovXTogYENMQVNTYCxcbiAgICBbNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovXTogYFNUWUxFYCxcbiAgICBbOCAvKiBQYXRjaEZsYWdzLlBST1BTICovXTogYFBST1BTYCxcbiAgICBbMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXTogYEZVTExfUFJPUFNgLFxuICAgIFszMiAvKiBQYXRjaEZsYWdzLkhZRFJBVEVfRVZFTlRTICovXTogYEhZRFJBVEVfRVZFTlRTYCxcbiAgICBbNjQgLyogUGF0Y2hGbGFncy5TVEFCTEVfRlJBR01FTlQgKi9dOiBgU1RBQkxFX0ZSQUdNRU5UYCxcbiAgICBbMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi9dOiBgS0VZRURfRlJBR01FTlRgLFxuICAgIFsyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovXTogYFVOS0VZRURfRlJBR01FTlRgLFxuICAgIFs1MTIgLyogUGF0Y2hGbGFncy5ORUVEX1BBVENIICovXTogYE5FRURfUEFUQ0hgLFxuICAgIFsxMDI0IC8qIFBhdGNoRmxhZ3MuRFlOQU1JQ19TTE9UUyAqL106IGBEWU5BTUlDX1NMT1RTYCxcbiAgICBbMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovXTogYERFVl9ST09UX0ZSQUdNRU5UYCxcbiAgICBbLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovXTogYEhPSVNURURgLFxuICAgIFstMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi9dOiBgQkFJTGBcbn07XG5cbi8qKlxuICogRGV2IG9ubHlcbiAqL1xuY29uc3Qgc2xvdEZsYWdzVGV4dCA9IHtcbiAgICBbMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovXTogJ1NUQUJMRScsXG4gICAgWzIgLyogU2xvdEZsYWdzLkRZTkFNSUMgKi9dOiAnRFlOQU1JQycsXG4gICAgWzMgLyogU2xvdEZsYWdzLkZPUldBUkRFRCAqL106ICdGT1JXQVJERUQnXG59O1xuXG5jb25zdCBHTE9CQUxTX1dISVRFX0xJU1RFRCA9ICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLHBhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLCcgK1xuICAgICdkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCxNYXRoLE51bWJlcixEYXRlLEFycmF5LCcgK1xuICAgICdPYmplY3QsQm9vbGVhbixTdHJpbmcsUmVnRXhwLE1hcCxTZXQsSlNPTixJbnRsLEJpZ0ludCc7XG5jb25zdCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoR0xPQkFMU19XSElURV9MSVNURUQpO1xuXG5jb25zdCByYW5nZSA9IDI7XG5mdW5jdGlvbiBnZW5lcmF0ZUNvZGVGcmFtZShzb3VyY2UsIHN0YXJ0ID0gMCwgZW5kID0gc291cmNlLmxlbmd0aCkge1xuICAgIC8vIFNwbGl0IHRoZSBjb250ZW50IGludG8gaW5kaXZpZHVhbCBsaW5lcyBidXQgY2FwdHVyZSB0aGUgbmV3bGluZSBzZXF1ZW5jZVxuICAgIC8vIHRoYXQgc2VwYXJhdGVkIGVhY2ggbGluZS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgYWN0dWFsIHNlcXVlbmNlIGlzXG4gICAgLy8gbmVlZGVkIHRvIHByb3Blcmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBmdWxsIGxpbmUgbGVuZ3RoIGZvciBvZmZzZXRcbiAgICAvLyBjb21wYXJpc29uXG4gICAgbGV0IGxpbmVzID0gc291cmNlLnNwbGl0KC8oXFxyP1xcbikvKTtcbiAgICAvLyBTZXBhcmF0ZSB0aGUgbGluZXMgYW5kIG5ld2xpbmUgc2VxdWVuY2VzIGludG8gc2VwYXJhdGUgYXJyYXlzIGZvciBlYXNpZXIgcmVmZXJlbmNpbmdcbiAgICBjb25zdCBuZXdsaW5lU2VxdWVuY2VzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDEpO1xuICAgIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgY29uc3QgcmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb3VudCArPVxuICAgICAgICAgICAgbGluZXNbaV0ubGVuZ3RoICtcbiAgICAgICAgICAgICAgICAoKG5ld2xpbmVTZXF1ZW5jZXNbaV0gJiYgbmV3bGluZVNlcXVlbmNlc1tpXS5sZW5ndGgpIHx8IDApO1xuICAgICAgICBpZiAoY291bnQgPj0gc3RhcnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpIC0gcmFuZ2U7IGogPD0gaSArIHJhbmdlIHx8IGVuZCA+IGNvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcbiAgICAgICAgICAgICAgICByZXMucHVzaChgJHtsaW5lfSR7JyAnLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaW5lU2VxTGVuZ3RoID0gKG5ld2xpbmVTZXF1ZW5jZXNbal0gJiYgbmV3bGluZVNlcXVlbmNlc1tqXS5sZW5ndGgpIHx8IDA7XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkID0gc3RhcnQgLSAoY291bnQgLSAobGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoMSwgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArICcgJy5yZXBlYXQocGFkKSArICdeJy5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzLmpvaW4oJ1xcbicpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IGlzU3RyaW5nKGl0ZW0pXG4gICAgICAgICAgICAgICAgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5jb25zdCBsaXN0RGVsaW1pdGVyUkUgPSAvOyg/IVteKF0qXFwpKS9nO1xuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KFteXSspLztcbmNvbnN0IHN0eWxlQ29tbWVudFJFID0gL1xcL1xcKi4qP1xcKlxcLy9ncztcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGNzc1RleHRcbiAgICAgICAgLnJlcGxhY2Uoc3R5bGVDb21tZW50UkUsICcnKVxuICAgICAgICAuc3BsaXQobGlzdERlbGltaXRlclJFKVxuICAgICAgICAuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXJSRSk7XG4gICAgICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3R5bGUoc3R5bGVzKSB7XG4gICAgbGV0IHJldCA9ICcnO1xuICAgIGlmICghc3R5bGVzIHx8IGlzU3RyaW5nKHN0eWxlcykpIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc3R5bGVzW2tleV07XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkuc3RhcnRzV2l0aChgLS1gKSA/IGtleSA6IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcmVuZGVyIHZhbGlkIHZhbHVlc1xuICAgICAgICAgICAgcmV0ICs9IGAke25vcm1hbGl6ZWRLZXl9OiR7dmFsdWV9O2A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gICAgbGV0IHJlcyA9ICcnO1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgcmVzID0gdmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDbGFzcyh2YWx1ZVtpXSk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBub3JtYWxpemVkICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZVtuYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlcyArPSBuYW1lICsgJyAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXMudHJpbSgpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMocHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xuICAgICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgICB9XG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHM7XG59XG5cbi8vIFRoZXNlIHRhZyBjb25maWdzIGFyZSBzaGFyZWQgYmV0d2VlbiBjb21waWxlci1kb20gYW5kIHJ1bnRpbWUtZG9tLCBzbyB0aGV5XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnRcbmNvbnN0IEhUTUxfVEFHUyA9ICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSxhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLCcgK1xuICAgICdoZWFkZXIsaGdyb3VwLGgxLGgyLGgzLGg0LGg1LGg2LG5hdixzZWN0aW9uLGRpdixkZCxkbCxkdCxmaWdjYXB0aW9uLCcgK1xuICAgICdmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSwnICtcbiAgICAnZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsJyArXG4gICAgJ3RpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLGVtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsJyArXG4gICAgJ2NhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucyxjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCwnICtcbiAgICAndGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLCcgK1xuICAgICdvcHRpb24sb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSxkZXRhaWxzLGRpYWxvZyxtZW51LCcgK1xuICAgICdzdW1tYXJ5LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290Jztcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1NWRy9FbGVtZW50XG5jb25zdCBTVkdfVEFHUyA9ICdzdmcsYW5pbWF0ZSxhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGNsaXBQYXRoLGNvbG9yLXByb2ZpbGUsJyArXG4gICAgJ2RlZnMsZGVzYyxkaXNjYXJkLGVsbGlwc2UsZmVCbGVuZCxmZUNvbG9yTWF0cml4LGZlQ29tcG9uZW50VHJhbnNmZXIsJyArXG4gICAgJ2ZlQ29tcG9zaXRlLGZlQ29udm9sdmVNYXRyaXgsZmVEaWZmdXNlTGlnaHRpbmcsZmVEaXNwbGFjZW1lbnRNYXAsJyArXG4gICAgJ2ZlRGlzdGFudExpZ2h0LGZlRHJvcFNoYWRvdyxmZUZsb29kLGZlRnVuY0EsZmVGdW5jQixmZUZ1bmNHLGZlRnVuY1IsJyArXG4gICAgJ2ZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsJyArXG4gICAgJ2ZlUG9pbnRMaWdodCxmZVNwZWN1bGFyTGlnaHRpbmcsZmVTcG90TGlnaHQsZmVUaWxlLGZlVHVyYnVsZW5jZSxmaWx0ZXIsJyArXG4gICAgJ2ZvcmVpZ25PYmplY3QsZyxoYXRjaCxoYXRjaHBhdGgsaW1hZ2UsbGluZSxsaW5lYXJHcmFkaWVudCxtYXJrZXIsbWFzaywnICtcbiAgICAnbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLCcgK1xuICAgICdwb2x5Z29uLHBvbHlsaW5lLHJhZGlhbEdyYWRpZW50LHJlY3Qsc2V0LHNvbGlkY29sb3Isc3RvcCxzd2l0Y2gsc3ltYm9sLCcgK1xuICAgICd0ZXh0LHRleHRQYXRoLHRpdGxlLHRzcGFuLHVua25vd24sdXNlLHZpZXcnO1xuY29uc3QgVk9JRF9UQUdTID0gJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJztcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNIVE1MVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKEhUTUxfVEFHUyk7XG4vKipcbiAqIENvbXBpbGVyIG9ubHkuXG4gKiBEbyBOT1QgdXNlIGluIHJ1bnRpbWUgY29kZSBwYXRocyB1bmxlc3MgYmVoaW5kIGAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylgIGZsYWcuXG4gKi9cbmNvbnN0IGlzU1ZHVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFNWR19UQUdTKTtcbi8qKlxuICogQ29tcGlsZXIgb25seS5cbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cbiAqL1xuY29uc3QgaXNWb2lkVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbi8qKlxuICogT24gdGhlIGNsaWVudCB3ZSBvbmx5IG5lZWQgdG8gb2ZmZXIgc3BlY2lhbCBjYXNlcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXRcbiAqIGhhdmUgZGlmZmVyZW50IG5hbWVzIGZyb20gdGhlaXIgY29ycmVzcG9uZGluZyBkb20gcHJvcGVydGllczpcbiAqIC0gaXRlbXNjb3BlIC0+IE4vQVxuICogLSBhbGxvd2Z1bGxzY3JlZW4gLT4gYWxsb3dGdWxsc2NyZWVuXG4gKiAtIGZvcm1ub3ZhbGlkYXRlIC0+IGZvcm1Ob1ZhbGlkYXRlXG4gKiAtIGlzbWFwIC0+IGlzTWFwXG4gKiAtIG5vbW9kdWxlIC0+IG5vTW9kdWxlXG4gKiAtIG5vdmFsaWRhdGUgLT4gbm9WYWxpZGF0ZVxuICogLSByZWFkb25seSAtPiByZWFkT25seVxuICovXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG5jb25zdCBpc1NwZWNpYWxCb29sZWFuQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChzcGVjaWFsQm9vbGVhbkF0dHJzKTtcbi8qKlxuICogVGhlIGZ1bGwgbGlzdCBpcyBuZWVkZWQgZHVyaW5nIFNTUiB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGluaXRpYWwgbWFya3VwLlxuICovXG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMgK1xuICAgIGAsYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNvbnRyb2xzLGRlZmF1bHQsZGVmZXIsZGlzYWJsZWQsaGlkZGVuLGAgK1xuICAgIGBsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGAgK1xuICAgIGBjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYCk7XG4vKipcbiAqIEJvb2xlYW4gYXR0cmlidXRlcyBzaG91bGQgYmUgaW5jbHVkZWQgaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBvciAnJy5cbiAqIGUuZy4gYDxzZWxlY3QgbXVsdGlwbGU+YCBjb21waWxlcyB0byBgeyBtdWx0aXBsZTogJycgfWBcbiAqL1xuZnVuY3Rpb24gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgfHwgdmFsdWUgPT09ICcnO1xufVxuY29uc3QgdW5zYWZlQXR0ckNoYXJSRSA9IC9bPi89XCInXFx1MDAwOVxcdTAwMGFcXHUwMDBjXFx1MDAyMF0vO1xuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xuICAgIGlmIChhdHRyVmFsaWRhdGlvbkNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xuICAgIH1cbiAgICBjb25zdCBpc1Vuc2FmZSA9IHVuc2FmZUF0dHJDaGFyUkUudGVzdChuYW1lKTtcbiAgICBpZiAoaXNVbnNhZmUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XG4gICAgfVxuICAgIHJldHVybiAoYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZSk7XG59XG5jb25zdCBwcm9wc1RvQXR0ck1hcCA9IHtcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcbiAgICBodG1sRm9yOiAnZm9yJyxcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xufTtcbi8qKlxuICogS25vd24gYXR0cmlidXRlcywgdGhpcyBpcyB1c2VkIGZvciBzdHJpbmdpZmljYXRpb24gb2YgcnVudGltZSBzdGF0aWMgbm9kZXNcbiAqIHNvIHRoYXQgd2UgZG9uJ3Qgc3RyaW5naWZ5IGJpbmRpbmdzIHRoYXQgY2Fubm90IGJlIHNldCBmcm9tIEhUTUwuXG4gKiBEb24ndCBhbHNvIGZvcmdldCB0byBhbGxvdyBgZGF0YS0qYCBhbmQgYGFyaWEtKmAhXG4gKiBHZW5lcmF0ZWQgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0F0dHJpYnV0ZXNcbiAqL1xuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYCArXG4gICAgYGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGAgK1xuICAgIGBib3JkZXIsYnVmZmVyZWQsY2FwdHVyZSxjaGFsbGVuZ2UsY2hhcnNldCxjaGVja2VkLGNpdGUsY2xhc3MsY29kZSxgICtcbiAgICBgY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGAgK1xuICAgIGBjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxgICtcbiAgICBgZGlzYWJsZWQsZG93bmxvYWQsZHJhZ2dhYmxlLGRyb3B6b25lLGVuY3R5cGUsZW50ZXJrZXloaW50LGZvcixmb3JtLGAgK1xuICAgIGBmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGAgK1xuICAgIGBoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbnRlZ3JpdHksYCArXG4gICAgYGlzbWFwLGl0ZW1wcm9wLGtleXR5cGUsa2luZCxsYWJlbCxsYW5nLGxhbmd1YWdlLGxvYWRpbmcsbGlzdCxsb29wLGxvdyxgICtcbiAgICBgbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxgICtcbiAgICBgb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LGAgK1xuICAgIGByZWZlcnJlcnBvbGljeSxyZWwscmVxdWlyZWQscmV2ZXJzZWQscm93cyxyb3dzcGFuLHNhbmRib3gsc2NvcGUsc2NvcGVkLGAgK1xuICAgIGBzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsYCArXG4gICAgYHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLGAgK1xuICAgIGB2YWx1ZSx3aWR0aCx3cmFwYCk7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1NWRy9BdHRyaWJ1dGVcbiAqL1xuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYCArXG4gICAgYGFyYWJpYy1mb3JtLGFzY2VudCxhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYXppbXV0aCxiYXNlRnJlcXVlbmN5LGAgK1xuICAgIGBiYXNlbGluZS1zaGlmdCxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJpYXMsYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxgICtcbiAgICBgY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixgICtcbiAgICBgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzLGNvbG9yLXByb2ZpbGUsY29sb3ItcmVuZGVyaW5nLGAgK1xuICAgIGBjb250ZW50U2NyaXB0VHlwZSxjb250ZW50U3R5bGVUeXBlLGNyb3Nzb3JpZ2luLGN1cnNvcixjeCxjeSxkLGRlY2VsZXJhdGUsYCArXG4gICAgYGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGAgK1xuICAgIGBkeSxlZGdlTW9kZSxlbGV2YXRpb24sZW5hYmxlLWJhY2tncm91bmQsZW5kLGV4cG9uZW50LGZpbGwsZmlsbC1vcGFjaXR5LGAgK1xuICAgIGBmaWxsLXJ1bGUsZmlsdGVyLGZpbHRlclJlcyxmaWx0ZXJVbml0cyxmbG9vZC1jb2xvcixmbG9vZC1vcGFjaXR5LGAgK1xuICAgIGBmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxgICtcbiAgICBgZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZvcm1hdCxmcm9tLGZyLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsYCArXG4gICAgYGdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwsZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwsZ2x5cGhSZWYsYCArXG4gICAgYGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxgICtcbiAgICBgaG9yaXotb3JpZ2luLXgsaWQsaWRlb2dyYXBoaWMsaW1hZ2UtcmVuZGVyaW5nLGluLGluMixpbnRlcmNlcHQsayxrMSxrMixrMyxgICtcbiAgICBgazQsa2VybmVsTWF0cml4LGtlcm5lbFVuaXRMZW5ndGgsa2VybmluZyxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxgICtcbiAgICBgbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsYCArXG4gICAgYG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLG1hcmtlcldpZHRoLGAgK1xuICAgIGBtYXNrLG1hc2tDb250ZW50VW5pdHMsbWFza1VuaXRzLG1hdGhlbWF0aWNhbCxtYXgsbWVkaWEsbWV0aG9kLG1pbixtb2RlLGAgK1xuICAgIGBuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixgICtcbiAgICBgb3ZlcmZsb3csb3ZlcmxpbmUtcG9zaXRpb24sb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhaW50LW9yZGVyLHBhdGgsYCArXG4gICAgYHBhdGhMZW5ndGgscGF0dGVybkNvbnRlbnRVbml0cyxwYXR0ZXJuVHJhbnNmb3JtLHBhdHRlcm5Vbml0cyxwaW5nLGAgK1xuICAgIGBwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxgICtcbiAgICBgcHJlc2VydmVBc3BlY3RSYXRpbyxwcmltaXRpdmVVbml0cyxyLHJhZGl1cyxyZWZlcnJlclBvbGljeSxyZWZYLHJlZlkscmVsLGAgK1xuICAgIGByZW5kZXJpbmctaW50ZW50LHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxgICtcbiAgICBgcmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsYCArXG4gICAgYHNwZWN1bGFyQ29uc3RhbnQsc3BlY3VsYXJFeHBvbmVudCxzcGVlZCxzcHJlYWRNZXRob2Qsc3RhcnRPZmZzZXQsYCArXG4gICAgYHN0ZERldmlhdGlvbixzdGVtaCxzdGVtdixzdGl0Y2hUaWxlcyxzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxgICtcbiAgICBgc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLGAgK1xuICAgIGBzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixgICtcbiAgICBgc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN0eWxlLHN1cmZhY2VTY2FsZSxgICtcbiAgICBgc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcixgICtcbiAgICBgdGV4dC1kZWNvcmF0aW9uLHRleHQtcmVuZGVyaW5nLHRleHRMZW5ndGgsdG8sdHJhbnNmb3JtLHRyYW5zZm9ybS1vcmlnaW4sYCArXG4gICAgYHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLWJpZGksYCArXG4gICAgYHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyxgICtcbiAgICBgdi1tYXRoZW1hdGljYWwsdmFsdWVzLHZlY3Rvci1lZmZlY3QsdmVyc2lvbix2ZXJ0LWFkdi15LHZlcnQtb3JpZ2luLXgsYCArXG4gICAgYHZlcnQtb3JpZ2luLXksdmlld0JveCx2aWV3VGFyZ2V0LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHdvcmQtc3BhY2luZyxgICtcbiAgICBgd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUsYCArXG4gICAgYHhsaW5rOmhyZWYseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcsYCArXG4gICAgYHhtbDpzcGFjZSx5LHkxLHkyLHlDaGFubmVsU2VsZWN0b3Iseix6b29tQW5kUGFuYCk7XG5cbmNvbnN0IGVzY2FwZVJFID0gL1tcIicmPD5dLztcbmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyID0gJycgKyBzdHJpbmc7XG4gICAgY29uc3QgbWF0Y2ggPSBlc2NhcGVSRS5leGVjKHN0cik7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBsZXQgaHRtbCA9ICcnO1xuICAgIGxldCBlc2NhcGVkO1xuICAgIGxldCBpbmRleDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGluZGV4ID0gbWF0Y2guaW5kZXg7IGluZGV4IDwgc3RyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgICAgICAgY2FzZSAzNDogLy8gXCJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZxdW90Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM4OiAvLyAmXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmYW1wOyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM5OiAvLyAnXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmIzM5Oyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDYwOiAvLyA8XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmbHQ7JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjI6IC8vID5cbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZndDsnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdEluZGV4ICE9PSBpbmRleCkge1xuICAgICAgICAgICAgaHRtbCArPSBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBodG1sICs9IGVzY2FwZWQ7XG4gICAgfVxuICAgIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4ID8gaHRtbCArIHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KSA6IGh0bWw7XG59XG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUyL3N5bnRheC5odG1sI2NvbW1lbnRzXG5jb25zdCBjb21tZW50U3RyaXBSRSA9IC9eLT8+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xuZnVuY3Rpb24gZXNjYXBlSHRtbENvbW1lbnQoc3JjKSB7XG4gICAgcmV0dXJuIHNyYy5yZXBsYWNlKGNvbW1lbnRTdHJpcFJFLCAnJyk7XG59XG5cbmZ1bmN0aW9uIGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlcXVhbCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGVxdWFsICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGVxdWFsO1xufVxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBhVmFsaWRUeXBlID0gaXNEYXRlKGEpO1xuICAgIGxldCBiVmFsaWRUeXBlID0gaXNEYXRlKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNTeW1ib2woYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzU3ltYm9sKGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgfVxuICAgIGFWYWxpZFR5cGUgPSBpc0FycmF5KGEpO1xuICAgIGJWYWxpZFR5cGUgPSBpc0FycmF5KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSA6IGZhbHNlO1xuICAgIH1cbiAgICBhVmFsaWRUeXBlID0gaXNPYmplY3QoYSk7XG4gICAgYlZhbGlkVHlwZSA9IGlzT2JqZWN0KGIpO1xuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmOiB0aGlzIGlmIHdpbGwgcHJvYmFibHkgbmV2ZXIgYmUgY2FsbGVkICovXG4gICAgICAgIGlmICghYVZhbGlkVHlwZSB8fCAhYlZhbGlkVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhiKS5sZW5ndGg7XG4gICAgICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICAgICAgY29uc3QgYUhhc0tleSA9IGEuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IGJIYXNLZXkgPSBiLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICAgICAgICBpZiAoKGFIYXNLZXkgJiYgIWJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgKCFhSGFzS2V5ICYmIGJIYXNLZXkpIHx8XG4gICAgICAgICAgICAgICAgIWxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKTtcbn1cbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsIHZhbCkge1xuICAgIHJldHVybiBhcnIuZmluZEluZGV4KGl0ZW0gPT4gbG9vc2VFcXVhbChpdGVtLCB2YWwpKTtcbn1cblxuLyoqXG4gKiBGb3IgY29udmVydGluZyB7eyBpbnRlcnBvbGF0aW9uIH19IHZhbHVlcyB0byBkaXNwbGF5ZWQgc3RyaW5ncy5cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHRvRGlzcGxheVN0cmluZyA9ICh2YWwpID0+IHtcbiAgICByZXR1cm4gaXNTdHJpbmcodmFsKVxuICAgICAgICA/IHZhbFxuICAgICAgICA6IHZhbCA9PSBudWxsXG4gICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICA6IGlzQXJyYXkodmFsKSB8fFxuICAgICAgICAgICAgICAgIChpc09iamVjdCh2YWwpICYmXG4gICAgICAgICAgICAgICAgICAgICh2YWwudG9TdHJpbmcgPT09IG9iamVjdFRvU3RyaW5nIHx8ICFpc0Z1bmN0aW9uKHZhbC50b1N0cmluZykpKVxuICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMilcbiAgICAgICAgICAgICAgICA6IFN0cmluZyh2YWwpO1xufTtcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xuICAgIC8vIGNhbid0IHVzZSBpc1JlZiBoZXJlIHNpbmNlIEB2dWUvc2hhcmVkIGhhcyBubyBkZXBzXG4gICAgaWYgKHZhbCAmJiB2YWwuX192X2lzUmVmKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlcihfa2V5LCB2YWwudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbYE1hcCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC5lbnRyaWVzKCldLnJlZHVjZSgoZW50cmllcywgW2tleSwgdmFsXSkgPT4ge1xuICAgICAgICAgICAgICAgIGVudHJpZXNbYCR7a2V5fSA9PmBdID0gdmFsO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICAgICAgfSwge30pXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtgU2V0KCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLnZhbHVlcygpXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWwpICYmICFpc0FycmF5KHZhbCkgJiYgIWlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59O1xuXG5jb25zdCBFTVBUWV9PQkogPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICA/IE9iamVjdC5mcmVlemUoe30pXG4gICAgOiB7fTtcbmNvbnN0IEVNUFRZX0FSUiA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IE9iamVjdC5mcmVlemUoW10pIDogW107XG5jb25zdCBOT09QID0gKCkgPT4geyB9O1xuLyoqXG4gKiBBbHdheXMgcmV0dXJuIGZhbHNlLlxuICovXG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xuY29uc3Qgb25SRSA9IC9eb25bXmEtel0vO1xuY29uc3QgaXNPbiA9IChrZXkpID0+IG9uUkUudGVzdChrZXkpO1xuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ29uVXBkYXRlOicpO1xuY29uc3QgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbjtcbmNvbnN0IHJlbW92ZSA9IChhcnIsIGVsKSA9PiB7XG4gICAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcbiAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgfVxufTtcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE1hcF0nO1xuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgU2V0XSc7XG5jb25zdCBpc0RhdGUgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuY29uc3QgaXNSZWdFeHAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5jb25zdCBpc0Z1bmN0aW9uID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJztcbmNvbnN0IGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG5jb25zdCBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzeW1ib2wnO1xuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG5jb25zdCBpc1Byb21pc2UgPSAodmFsKSA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwudGhlbikgJiYgaXNGdW5jdGlvbih2YWwuY2F0Y2gpO1xufTtcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5jb25zdCB0b1Jhd1R5cGUgPSAodmFsdWUpID0+IHtcbiAgICAvLyBleHRyYWN0IFwiUmF3VHlwZVwiIGZyb20gc3RyaW5ncyBsaWtlIFwiW29iamVjdCBSYXdUeXBlXVwiXG4gICAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5jb25zdCBpc0ludGVnZXJLZXkgPSAoa2V5KSA9PiBpc1N0cmluZyhrZXkpICYmXG4gICAga2V5ICE9PSAnTmFOJyAmJlxuICAgIGtleVswXSAhPT0gJy0nICYmXG4gICAgJycgKyBwYXJzZUludChrZXksIDEwKSA9PT0ga2V5O1xuY29uc3QgaXNSZXNlcnZlZFByb3AgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoXG4vLyB0aGUgbGVhZGluZyBjb21tYSBpcyBpbnRlbnRpb25hbCBzbyBlbXB0eSBzdHJpbmcgXCJcIiBpcyBhbHNvIGluY2x1ZGVkXG4nLGtleSxyZWYscmVmX2ZvcixyZWZfa2V5LCcgK1xuICAgICdvblZub2RlQmVmb3JlTW91bnQsb25Wbm9kZU1vdW50ZWQsJyArXG4gICAgJ29uVm5vZGVCZWZvcmVVcGRhdGUsb25Wbm9kZVVwZGF0ZWQsJyArXG4gICAgJ29uVm5vZGVCZWZvcmVVbm1vdW50LG9uVm5vZGVVbm1vdW50ZWQnKTtcbmNvbnN0IGlzQnVpbHRJbkRpcmVjdGl2ZSA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnYmluZCxjbG9hayxlbHNlLWlmLGVsc2UsZm9yLGh0bWwsaWYsbW9kZWwsb24sb25jZSxwcmUsc2hvdyxzbG90LHRleHQsbWVtbycpO1xuY29uc3QgY2FjaGVTdHJpbmdGdW5jdGlvbiA9IChmbikgPT4ge1xuICAgIGNvbnN0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gKChzdHIpID0+IHtcbiAgICAgICAgY29uc3QgaGl0ID0gY2FjaGVbc3RyXTtcbiAgICAgICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xuICAgIH0pO1xufTtcbmNvbnN0IGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGNhbWVsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIChfLCBjKSA9PiAoYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnKSk7XG59KTtcbmNvbnN0IGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgaHlwaGVuYXRlID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKCkpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB0b0hhbmRsZXJLZXkgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ciA/IGBvbiR7Y2FwaXRhbGl6ZShzdHIpfWAgOiBgYCk7XG4vLyBjb21wYXJlIHdoZXRoZXIgYSB2YWx1ZSBoYXMgY2hhbmdlZCwgYWNjb3VudGluZyBmb3IgTmFOLlxuY29uc3QgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+ICFPYmplY3QuaXModmFsdWUsIG9sZFZhbHVlKTtcbmNvbnN0IGludm9rZUFycmF5Rm5zID0gKGZucywgYXJnKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm5zW2ldKGFyZyk7XG4gICAgfVxufTtcbmNvbnN0IGRlZiA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWVcbiAgICB9KTtcbn07XG4vKipcbiAqIFwiMTIzLWZvb1wiIHdpbGwgYmUgcGFyc2VkIHRvIDEyM1xuICogVGhpcyBpcyB1c2VkIGZvciB0aGUgLm51bWJlciBtb2RpZmllciBpbiB2LW1vZGVsXG4gKi9cbmNvbnN0IGxvb3NlVG9OdW1iZXIgPSAodmFsKSA9PiB7XG4gICAgY29uc3QgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xufTtcbi8qKlxuICogT25seSBjb25lcmNlcyBudW1iZXItbGlrZSBzdHJpbmdzXG4gKiBcIjEyMy1mb29cIiB3aWxsIGJlIHJldHVybmVkIGFzLWlzXG4gKi9cbmNvbnN0IHRvTnVtYmVyID0gKHZhbCkgPT4ge1xuICAgIGNvbnN0IG4gPSBpc1N0cmluZyh2YWwpID8gTnVtYmVyKHZhbCkgOiBOYU47XG4gICAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogbjtcbn07XG5sZXQgX2dsb2JhbFRoaXM7XG5jb25zdCBnZXRHbG9iYWxUaGlzID0gKCkgPT4ge1xuICAgIHJldHVybiAoX2dsb2JhbFRoaXMgfHxcbiAgICAgICAgKF9nbG9iYWxUaGlzID1cbiAgICAgICAgICAgIHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICAgICAgICAgIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZlxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHdpbmRvd1xuICAgICAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSkpO1xufTtcbmNvbnN0IGlkZW50UkUgPSAvXltfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qJC87XG5mdW5jdGlvbiBnZW5Qcm9wc0FjY2Vzc0V4cChuYW1lKSB7XG4gICAgcmV0dXJuIGlkZW50UkUudGVzdChuYW1lKVxuICAgICAgICA/IGBfX3Byb3BzLiR7bmFtZX1gXG4gICAgICAgIDogYF9fcHJvcHNbJHtKU09OLnN0cmluZ2lmeShuYW1lKX1dYDtcbn1cblxuZXhwb3J0IHsgRU1QVFlfQVJSLCBFTVBUWV9PQkosIE5PLCBOT09QLCBQYXRjaEZsYWdOYW1lcywgY2FtZWxpemUsIGNhcGl0YWxpemUsIGRlZiwgZXNjYXBlSHRtbCwgZXNjYXBlSHRtbENvbW1lbnQsIGV4dGVuZCwgZ2VuUHJvcHNBY2Nlc3NFeHAsIGdlbmVyYXRlQ29kZUZyYW1lLCBnZXRHbG9iYWxUaGlzLCBoYXNDaGFuZ2VkLCBoYXNPd24sIGh5cGhlbmF0ZSwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpbnZva2VBcnJheUZucywgaXNBcnJheSwgaXNCb29sZWFuQXR0ciwgaXNCdWlsdEluRGlyZWN0aXZlLCBpc0RhdGUsIGlzRnVuY3Rpb24sIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgaXNIVE1MVGFnLCBpc0ludGVnZXJLZXksIGlzS25vd25IdG1sQXR0ciwgaXNLbm93blN2Z0F0dHIsIGlzTWFwLCBpc01vZGVsTGlzdGVuZXIsIGlzT2JqZWN0LCBpc09uLCBpc1BsYWluT2JqZWN0LCBpc1Byb21pc2UsIGlzUmVnRXhwLCBpc1Jlc2VydmVkUHJvcCwgaXNTU1JTYWZlQXR0ck5hbWUsIGlzU1ZHVGFnLCBpc1NldCwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGlzU3RyaW5nLCBpc1N5bWJvbCwgaXNWb2lkVGFnLCBsb29zZUVxdWFsLCBsb29zZUluZGV4T2YsIGxvb3NlVG9OdW1iZXIsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiaW1wb3J0IHsgZXh0ZW5kLCBpc0FycmF5LCBpc01hcCwgaXNJbnRlZ2VyS2V5LCBoYXNPd24sIGlzU3ltYm9sLCBpc09iamVjdCwgaGFzQ2hhbmdlZCwgbWFrZU1hcCwgY2FwaXRhbGl6ZSwgdG9SYXdUeXBlLCBkZWYsIGlzRnVuY3Rpb24sIE5PT1AgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XG4gICAgY29uc29sZS53YXJuKGBbVnVlIHdhcm5dICR7bXNnfWAsIC4uLmFyZ3MpO1xufVxuXG5sZXQgYWN0aXZlRWZmZWN0U2NvcGU7XG5jbGFzcyBFZmZlY3RTY29wZSB7XG4gICAgY29uc3RydWN0b3IoZGV0YWNoZWQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmRldGFjaGVkID0gZGV0YWNoZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsZWFudXBzID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgICAgIGlmICghZGV0YWNoZWQgJiYgYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPVxuICAgICAgICAgICAgICAgIChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgfHwgKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyA9IFtdKSkucHVzaCh0aGlzKSAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgICB9XG4gICAgcnVuKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IGN1cnJlbnRFZmZlY3RTY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYGNhbm5vdCBydW4gYW4gaW5hY3RpdmUgZWZmZWN0IHNjb3BlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIG5vbi1kZXRhY2hlZCBzY29wZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbigpIHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb2ZmKCkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXMucGFyZW50O1xuICAgIH1cbiAgICBzdG9wKGZyb21QYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgICAgICAgbGV0IGksIGw7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5lZmZlY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWZmZWN0c1tpXS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jbGVhbnVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXBzW2ldKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zY29wZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGVzW2ldLnN0b3AodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbmVzdGVkIHNjb3BlLCBkZXJlZmVyZW5jZSBmcm9tIHBhcmVudCB0byBhdm9pZCBtZW1vcnkgbGVha3NcbiAgICAgICAgICAgIGlmICghdGhpcy5kZXRhY2hlZCAmJiB0aGlzLnBhcmVudCAmJiAhZnJvbVBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIG9wdGltaXplZCBPKDEpIHJlbW92YWxcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gdGhpcy5wYXJlbnQuc2NvcGVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0ICYmIGxhc3QgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2NvcGVzW3RoaXMuaW5kZXhdID0gbGFzdDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdC5pbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGVmZmVjdFNjb3BlKGRldGFjaGVkKSB7XG4gICAgcmV0dXJuIG5ldyBFZmZlY3RTY29wZShkZXRhY2hlZCk7XG59XG5mdW5jdGlvbiByZWNvcmRFZmZlY3RTY29wZShlZmZlY3QsIHNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGUpIHtcbiAgICBpZiAoc2NvcGUgJiYgc2NvcGUuYWN0aXZlKSB7XG4gICAgICAgIHNjb3BlLmVmZmVjdHMucHVzaChlZmZlY3QpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEN1cnJlbnRTY29wZSgpIHtcbiAgICByZXR1cm4gYWN0aXZlRWZmZWN0U2NvcGU7XG59XG5mdW5jdGlvbiBvblNjb3BlRGlzcG9zZShmbikge1xuICAgIGlmIChhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZS5jbGVhbnVwcy5wdXNoKGZuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYG9uU2NvcGVEaXNwb3NlKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGVmZmVjdCBzY29wZWAgK1xuICAgICAgICAgICAgYCB0byBiZSBhc3NvY2lhdGVkIHdpdGguYCk7XG4gICAgfVxufVxuXG5jb25zdCBjcmVhdGVEZXAgPSAoZWZmZWN0cykgPT4ge1xuICAgIGNvbnN0IGRlcCA9IG5ldyBTZXQoZWZmZWN0cyk7XG4gICAgZGVwLncgPSAwO1xuICAgIGRlcC5uID0gMDtcbiAgICByZXR1cm4gZGVwO1xufTtcbmNvbnN0IHdhc1RyYWNrZWQgPSAoZGVwKSA9PiAoZGVwLncgJiB0cmFja09wQml0KSA+IDA7XG5jb25zdCBuZXdUcmFja2VkID0gKGRlcCkgPT4gKGRlcC5uICYgdHJhY2tPcEJpdCkgPiAwO1xuY29uc3QgaW5pdERlcE1hcmtlcnMgPSAoeyBkZXBzIH0pID0+IHtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkZXBzW2ldLncgfD0gdHJhY2tPcEJpdDsgLy8gc2V0IHdhcyB0cmFja2VkXG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgZmluYWxpemVEZXBNYXJrZXJzID0gKGVmZmVjdCkgPT4ge1xuICAgIGNvbnN0IHsgZGVwcyB9ID0gZWZmZWN0O1xuICAgIGlmIChkZXBzLmxlbmd0aCkge1xuICAgICAgICBsZXQgcHRyID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkZXAgPSBkZXBzW2ldO1xuICAgICAgICAgICAgaWYgKHdhc1RyYWNrZWQoZGVwKSAmJiAhbmV3VHJhY2tlZChkZXApKSB7XG4gICAgICAgICAgICAgICAgZGVwLmRlbGV0ZShlZmZlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVwc1twdHIrK10gPSBkZXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBiaXRzXG4gICAgICAgICAgICBkZXAudyAmPSB+dHJhY2tPcEJpdDtcbiAgICAgICAgICAgIGRlcC5uICY9IH50cmFja09wQml0O1xuICAgICAgICB9XG4gICAgICAgIGRlcHMubGVuZ3RoID0gcHRyO1xuICAgIH1cbn07XG5cbmNvbnN0IHRhcmdldE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vLyBUaGUgbnVtYmVyIG9mIGVmZmVjdHMgY3VycmVudGx5IGJlaW5nIHRyYWNrZWQgcmVjdXJzaXZlbHkuXG5sZXQgZWZmZWN0VHJhY2tEZXB0aCA9IDA7XG5sZXQgdHJhY2tPcEJpdCA9IDE7XG4vKipcbiAqIFRoZSBiaXR3aXNlIHRyYWNrIG1hcmtlcnMgc3VwcG9ydCBhdCBtb3N0IDMwIGxldmVscyBvZiByZWN1cnNpb24uXG4gKiBUaGlzIHZhbHVlIGlzIGNob3NlbiB0byBlbmFibGUgbW9kZXJuIEpTIGVuZ2luZXMgdG8gdXNlIGEgU01JIG9uIGFsbCBwbGF0Zm9ybXMuXG4gKiBXaGVuIHJlY3Vyc2lvbiBkZXB0aCBpcyBncmVhdGVyLCBmYWxsIGJhY2sgdG8gdXNpbmcgYSBmdWxsIGNsZWFudXAuXG4gKi9cbmNvbnN0IG1heE1hcmtlckJpdHMgPSAzMDtcbmxldCBhY3RpdmVFZmZlY3Q7XG5jb25zdCBJVEVSQVRFX0tFWSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnaXRlcmF0ZScgOiAnJyk7XG5jb25zdCBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdNYXAga2V5IGl0ZXJhdGUnIDogJycpO1xuY2xhc3MgUmVhY3RpdmVFZmZlY3Qge1xuICAgIGNvbnN0cnVjdG9yKGZuLCBzY2hlZHVsZXIgPSBudWxsLCBzY29wZSkge1xuICAgICAgICB0aGlzLmZuID0gZm47XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVwcyA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUodGhpcywgc2NvcGUpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudCA9IGFjdGl2ZUVmZmVjdDtcbiAgICAgICAgbGV0IGxhc3RTaG91bGRUcmFjayA9IHNob3VsZFRyYWNrO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBhY3RpdmVFZmZlY3Q7XG4gICAgICAgICAgICBhY3RpdmVFZmZlY3QgPSB0aGlzO1xuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSB0cnVlO1xuICAgICAgICAgICAgdHJhY2tPcEJpdCA9IDEgPDwgKytlZmZlY3RUcmFja0RlcHRoO1xuICAgICAgICAgICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xuICAgICAgICAgICAgICAgIGluaXREZXBNYXJrZXJzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0VHJhY2tEZXB0aCA8PSBtYXhNYXJrZXJCaXRzKSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVEZXBNYXJrZXJzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tPcEJpdCA9IDEgPDwgLS1lZmZlY3RUcmFja0RlcHRoO1xuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzaG91bGRUcmFjayA9IGxhc3RTaG91bGRUcmFjaztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVmZXJTdG9wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgLy8gc3RvcHBlZCB3aGlsZSBydW5uaW5nIGl0c2VsZiAtIGRlZmVyIHRoZSBjbGVhbnVwXG4gICAgICAgIGlmIChhY3RpdmVFZmZlY3QgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmZXJTdG9wID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uU3RvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYW51cEVmZmVjdChlZmZlY3QpIHtcbiAgICBjb25zdCB7IGRlcHMgfSA9IGVmZmVjdDtcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkZXBzW2ldLmRlbGV0ZShlZmZlY3QpO1xuICAgICAgICB9XG4gICAgICAgIGRlcHMubGVuZ3RoID0gMDtcbiAgICB9XG59XG5mdW5jdGlvbiBlZmZlY3QoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAoZm4uZWZmZWN0KSB7XG4gICAgICAgIGZuID0gZm4uZWZmZWN0LmZuO1xuICAgIH1cbiAgICBjb25zdCBfZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGZuKTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBleHRlbmQoX2VmZmVjdCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLnNjb3BlKVxuICAgICAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUoX2VmZmVjdCwgb3B0aW9ucy5zY29wZSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5sYXp5KSB7XG4gICAgICAgIF9lZmZlY3QucnVuKCk7XG4gICAgfVxuICAgIGNvbnN0IHJ1bm5lciA9IF9lZmZlY3QucnVuLmJpbmQoX2VmZmVjdCk7XG4gICAgcnVubmVyLmVmZmVjdCA9IF9lZmZlY3Q7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbn1cbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XG4gICAgcnVubmVyLmVmZmVjdC5zdG9wKCk7XG59XG5sZXQgc2hvdWxkVHJhY2sgPSB0cnVlO1xuY29uc3QgdHJhY2tTdGFjayA9IFtdO1xuZnVuY3Rpb24gcGF1c2VUcmFja2luZygpIHtcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICAgIHNob3VsZFRyYWNrID0gZmFsc2U7XG59XG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICAgIHNob3VsZFRyYWNrID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc2V0VHJhY2tpbmcoKSB7XG4gICAgY29uc3QgbGFzdCA9IHRyYWNrU3RhY2sucG9wKCk7XG4gICAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB1bmRlZmluZWQgPyB0cnVlIDogbGFzdDtcbn1cbmZ1bmN0aW9uIHRyYWNrKHRhcmdldCwgdHlwZSwga2V5KSB7XG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xuICAgICAgICBsZXQgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICAgICAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgKGRlcHNNYXAgPSBuZXcgTWFwKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVwID0gZGVwc01hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFkZXApIHtcbiAgICAgICAgICAgIGRlcHNNYXAuc2V0KGtleSwgKGRlcCA9IGNyZWF0ZURlcCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICA/IHsgZWZmZWN0OiBhY3RpdmVFZmZlY3QsIHRhcmdldCwgdHlwZSwga2V5IH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB0cmFja0VmZmVjdHMoZGVwLCBldmVudEluZm8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYWNrRWZmZWN0cyhkZXAsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICBsZXQgc2hvdWxkVHJhY2sgPSBmYWxzZTtcbiAgICBpZiAoZWZmZWN0VHJhY2tEZXB0aCA8PSBtYXhNYXJrZXJCaXRzKSB7XG4gICAgICAgIGlmICghbmV3VHJhY2tlZChkZXApKSB7XG4gICAgICAgICAgICBkZXAubiB8PSB0cmFja09wQml0OyAvLyBzZXQgbmV3bHkgdHJhY2tlZFxuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSAhd2FzVHJhY2tlZChkZXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBGdWxsIGNsZWFudXAgbW9kZS5cbiAgICAgICAgc2hvdWxkVHJhY2sgPSAhZGVwLmhhcyhhY3RpdmVFZmZlY3QpO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkVHJhY2spIHtcbiAgICAgICAgZGVwLmFkZChhY3RpdmVFZmZlY3QpO1xuICAgICAgICBhY3RpdmVFZmZlY3QuZGVwcy5wdXNoKGRlcCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYWN0aXZlRWZmZWN0Lm9uVHJhY2spIHtcbiAgICAgICAgICAgIGFjdGl2ZUVmZmVjdC5vblRyYWNrKE9iamVjdC5hc3NpZ24oeyBlZmZlY3Q6IGFjdGl2ZUVmZmVjdCB9LCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0cmlnZ2VyKHRhcmdldCwgdHlwZSwga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIG9sZFRhcmdldCkge1xuICAgIGNvbnN0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICAgIC8vIG5ldmVyIGJlZW4gdHJhY2tlZFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBkZXBzID0gW107XG4gICAgaWYgKHR5cGUgPT09IFwiY2xlYXJcIiAvKiBUcmlnZ2VyT3BUeXBlcy5DTEVBUiAqLykge1xuICAgICAgICAvLyBjb2xsZWN0aW9uIGJlaW5nIGNsZWFyZWRcbiAgICAgICAgLy8gdHJpZ2dlciBhbGwgZWZmZWN0cyBmb3IgdGFyZ2V0XG4gICAgICAgIGRlcHMgPSBbLi4uZGVwc01hcC52YWx1ZXMoKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleSA9PT0gJ2xlbmd0aCcgJiYgaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IE51bWJlcihuZXdWYWx1ZSk7XG4gICAgICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdsZW5ndGgnIHx8IGtleSA+PSBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzY2hlZHVsZSBydW5zIGZvciBTRVQgfCBBREQgfCBERUxFVEVcbiAgICAgICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxzbyBydW4gZm9yIGl0ZXJhdGlvbiBrZXkgb24gQUREIHwgREVMRVRFIHwgTWFwLlNFVFxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi86XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcktleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBpbmRleCBhZGRlZCB0byBhcnJheSAtPiBsZW5ndGggY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoJ2xlbmd0aCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovOlxuICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5TRVQgKi86XG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IHsgdGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0IH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGRlcHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChkZXBzWzBdKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoZGVwc1swXSwgZXZlbnRJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcHNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBlZmZlY3RzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGlmIChkZXApIHtcbiAgICAgICAgICAgICAgICBlZmZlY3RzLnB1c2goLi4uZGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cyksIGV2ZW50SW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cykpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XG4gICAgLy8gc3ByZWFkIGludG8gYXJyYXkgZm9yIHN0YWJpbGl6YXRpb25cbiAgICBjb25zdCBlZmZlY3RzID0gaXNBcnJheShkZXApID8gZGVwIDogWy4uLmRlcF07XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoZWZmZWN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0KGVmZmVjdCwgZGVidWdnZXJFdmVudEV4dHJhSW5mbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICBpZiAoIWVmZmVjdC5jb21wdXRlZCkge1xuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdChlZmZlY3QsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcbiAgICBpZiAoZWZmZWN0ICE9PSBhY3RpdmVFZmZlY3QgfHwgZWZmZWN0LmFsbG93UmVjdXJzZSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGVmZmVjdC5vblRyaWdnZXIpIHtcbiAgICAgICAgICAgIGVmZmVjdC5vblRyaWdnZXIoZXh0ZW5kKHsgZWZmZWN0IH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnNjaGVkdWxlcikge1xuICAgICAgICAgICAgZWZmZWN0LnNjaGVkdWxlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGVwRnJvbVJlYWN0aXZlKG9iamVjdCwga2V5KSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSB0YXJnZXRNYXAuZ2V0KG9iamVjdCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXQoa2V5KTtcbn1cblxuY29uc3QgaXNOb25UcmFja2FibGVLZXlzID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBfX3Byb3RvX18sX192X2lzUmVmLF9faXNWdWVgKTtcbmNvbnN0IGJ1aWx0SW5TeW1ib2xzID0gbmV3IFNldChcbi8qI19fUFVSRV9fKi9cbk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFN5bWJvbClcbiAgICAvLyBpb3MxMC54IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFN5bWJvbCkgY2FuIGVudW1lcmF0ZSAnYXJndW1lbnRzJyBhbmQgJ2NhbGxlcidcbiAgICAvLyBidXQgYWNjZXNzaW5nIHRoZW0gb24gU3ltYm9sIGxlYWRzIHRvIFR5cGVFcnJvciBiZWNhdXNlIFN5bWJvbCBpcyBhIHN0cmljdCBtb2RlXG4gICAgLy8gZnVuY3Rpb25cbiAgICAuZmlsdGVyKGtleSA9PiBrZXkgIT09ICdhcmd1bWVudHMnICYmIGtleSAhPT0gJ2NhbGxlcicpXG4gICAgLm1hcChrZXkgPT4gU3ltYm9sW2tleV0pXG4gICAgLmZpbHRlcihpc1N5bWJvbCkpO1xuY29uc3QgZ2V0JDEgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcigpO1xuY29uc3Qgc2hhbGxvd0dldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKGZhbHNlLCB0cnVlKTtcbmNvbnN0IHJlYWRvbmx5R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIodHJ1ZSk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlLCB0cnVlKTtcbmNvbnN0IGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IC8qI19fUFVSRV9fKi8gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCk7XG5mdW5jdGlvbiBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKSB7XG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHt9O1xuICAgIFsnaW5jbHVkZXMnLCAnaW5kZXhPZicsICdsYXN0SW5kZXhPZiddLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyYWNrKGFyciwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBpICsgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgcnVuIHRoZSBtZXRob2QgdXNpbmcgdGhlIG9yaWdpbmFsIGFyZ3MgZmlyc3QgKHdoaWNoIG1heSBiZSByZWFjdGl2ZSlcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoYXQgZGlkbid0IHdvcmssIHJ1biBpdCBhZ2FpbiB1c2luZyByYXcgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJba2V5XSguLi5hcmdzLm1hcCh0b1JhdykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gdG9SYXcodGhpcylba2V5XS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XG59XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShrZXkpIHtcbiAgICBjb25zdCBvYmogPSB0b1Jhdyh0aGlzKTtcbiAgICB0cmFjayhvYmosIFwiaGFzXCIgLyogVHJhY2tPcFR5cGVzLkhBUyAqLywga2V5KTtcbiAgICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KGtleSk7XG59XG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXIoaXNSZWFkb25seSA9IGZhbHNlLCBzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqLykge1xuICAgICAgICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfUkVBRE9OTFkgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhbGxvdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovICYmXG4gICAgICAgICAgICByZWNlaXZlciA9PT1cbiAgICAgICAgICAgICAgICAoaXNSZWFkb25seVxuICAgICAgICAgICAgICAgICAgICA/IHNoYWxsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlYWRvbmx5TWFwXG4gICAgICAgICAgICAgICAgICAgIDogc2hhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhY3RpdmVNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhY3RpdmVNYXApLmdldCh0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICAgICAgaWYgKHRhcmdldElzQXJyYXkgJiYgaGFzT3duKGFycmF5SW5zdHJ1bWVudGF0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2hhc093blByb3BlcnR5Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICBpZiAoaXNTeW1ib2woa2V5KSA/IGJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpIDogaXNOb25UcmFja2FibGVLZXlzKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1JlYWRvbmx5KSB7XG4gICAgICAgICAgICB0cmFjayh0YXJnZXQsIFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhbGxvdykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNSZWYocmVzKSkge1xuICAgICAgICAgICAgLy8gcmVmIHVud3JhcHBpbmcgLSBza2lwIHVud3JhcCBmb3IgQXJyYXkgKyBpbnRlZ2VyIGtleS5cbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRJc0FycmF5ICYmIGlzSW50ZWdlcktleShrZXkpID8gcmVzIDogcmVzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IHJldHVybmVkIHZhbHVlIGludG8gYSBwcm94eSBhcyB3ZWxsLiB3ZSBkbyB0aGUgaXNPYmplY3QgY2hlY2tcbiAgICAgICAgICAgIC8vIGhlcmUgdG8gYXZvaWQgaW52YWxpZCB2YWx1ZSB3YXJuaW5nLiBBbHNvIG5lZWQgdG8gbGF6eSBhY2Nlc3MgcmVhZG9ubHlcbiAgICAgICAgICAgIC8vIGFuZCByZWFjdGl2ZSBoZXJlIHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY3kuXG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seSA/IHJlYWRvbmx5KHJlcykgOiByZWFjdGl2ZShyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbn1cbmNvbnN0IHNldCQxID0gLyojX19QVVJFX18qLyBjcmVhdGVTZXR0ZXIoKTtcbmNvbnN0IHNoYWxsb3dTZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcih0cnVlKTtcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgIGlmIChpc1JlYWRvbmx5KG9sZFZhbHVlKSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhbGxvdykge1xuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkgJiYgaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhZEtleSA9IGlzQXJyYXkodGFyZ2V0KSAmJiBpc0ludGVnZXJLZXkoa2V5KVxuICAgICAgICAgICAgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGhcbiAgICAgICAgICAgIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIC8vIGRvbid0IHRyaWdnZXIgaWYgdGFyZ2V0IGlzIHNvbWV0aGluZyB1cCBpbiB0aGUgcHJvdG90eXBlIGNoYWluIG9mIG9yaWdpbmFsXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi8sIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogVHJpZ2dlck9wVHlwZXMuREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaGFzJDEodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0Lmhhcyh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFpc1N5bWJvbChrZXkpIHx8ICFidWlsdEluU3ltYm9scy5oYXMoa2V5KSkge1xuICAgICAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIgLyogVHJhY2tPcFR5cGVzLkhBUyAqLywga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XG4gICAgdHJhY2sodGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBUcmFja09wVHlwZXMuSVRFUkFURSAqLywgaXNBcnJheSh0YXJnZXQpID8gJ2xlbmd0aCcgOiBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xufVxuY29uc3QgbXV0YWJsZUhhbmRsZXJzID0ge1xuICAgIGdldDogZ2V0JDEsXG4gICAgc2V0OiBzZXQkMSxcbiAgICBkZWxldGVQcm9wZXJ0eSxcbiAgICBoYXM6IGhhcyQxLFxuICAgIG93bktleXNcbn07XG5jb25zdCByZWFkb25seUhhbmRsZXJzID0ge1xuICAgIGdldDogcmVhZG9ubHlHZXQsXG4gICAgc2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oYFNldCBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgRGVsZXRlIG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIG11dGFibGVIYW5kbGVycywge1xuICAgIGdldDogc2hhbGxvd0dldCxcbiAgICBzZXQ6IHNoYWxsb3dTZXRcbn0pO1xuLy8gUHJvcHMgaGFuZGxlcnMgYXJlIHNwZWNpYWwgaW4gdGhlIHNlbnNlIHRoYXQgaXQgc2hvdWxkIG5vdCB1bndyYXAgdG9wLWxldmVsXG4vLyByZWZzIChpbiBvcmRlciB0byBhbGxvdyByZWZzIHRvIGJlIGV4cGxpY2l0bHkgcGFzc2VkIGRvd24pLCBidXQgc2hvdWxkXG4vLyByZXRhaW4gdGhlIHJlYWN0aXZpdHkgb2YgdGhlIG5vcm1hbCByZWFkb25seSBvYmplY3QuXG5jb25zdCBzaGFsbG93UmVhZG9ubHlIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCByZWFkb25seUhhbmRsZXJzLCB7XG4gICAgZ2V0OiBzaGFsbG93UmVhZG9ubHlHZXRcbn0pO1xuXG5jb25zdCB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xuY29uc3QgZ2V0UHJvdG8gPSAodikgPT4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih2KTtcbmZ1bmN0aW9uIGdldCh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xuICAgIC8vICMxNzcyOiByZWFkb25seShyZWFjdGl2ZShNYXApKSBzaG91bGQgcmV0dXJuIHJlYWRvbmx5ICsgcmVhY3RpdmUgdmVyc2lvblxuICAgIC8vIG9mIHRoZSB2YWx1ZVxuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgIGlmICghaXNSZWFkb25seSkge1xuICAgICAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCByYXdLZXkpO1xuICAgIH1cbiAgICBjb25zdCB7IGhhcyB9ID0gZ2V0UHJvdG8ocmF3VGFyZ2V0KTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChrZXkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGFzLmNhbGwocmF3VGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQocmF3S2V5KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCAhPT0gcmF3VGFyZ2V0KSB7XG4gICAgICAgIC8vICMzNjAyIHJlYWRvbmx5KHJlYWN0aXZlKE1hcCkpXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBuZXN0ZWQgcmVhY3RpdmUgYE1hcGAgY2FuIGRvIHRyYWNraW5nIGZvciBpdHNlbGZcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhcyhrZXksIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dO1xuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgICBpZiAoIWlzUmVhZG9ubHkpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gcmF3S2V5KSB7XG4gICAgICAgICAgICB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIgLyogVHJhY2tPcFR5cGVzLkhBUyAqLywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIgLyogVHJhY2tPcFR5cGVzLkhBUyAqLywgcmF3S2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGtleSA9PT0gcmF3S2V5XG4gICAgICAgID8gdGFyZ2V0LmhhcyhrZXkpXG4gICAgICAgIDogdGFyZ2V0LmhhcyhrZXkpIHx8IHRhcmdldC5oYXMocmF3S2V5KTtcbn1cbmZ1bmN0aW9uIHNpemUodGFyZ2V0LCBpc1JlYWRvbmx5ID0gZmFsc2UpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dO1xuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHRvUmF3KHRhcmdldCksIFwiaXRlcmF0ZVwiIC8qIFRyYWNrT3BUeXBlcy5JVEVSQVRFICovLCBJVEVSQVRFX0tFWSk7XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgJ3NpemUnLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgY29uc3QgcHJvdG8gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgIGNvbnN0IGhhZEtleSA9IHByb3RvLmhhcy5jYWxsKHRhcmdldCwgdmFsdWUpO1xuICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRhcmdldC5hZGQodmFsdWUpO1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi8sIHZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxuZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgfVxuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgIHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovLCBrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLywga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1cbmZ1bmN0aW9uIGRlbGV0ZUVudHJ5KGtleSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgbGV0IGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgICBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KTtcbiAgICB9XG4gICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQgPyBnZXQuY2FsbCh0YXJnZXQsIGtleSkgOiB1bmRlZmluZWQ7XG4gICAgLy8gZm9yd2FyZCB0aGUgb3BlcmF0aW9uIGJlZm9yZSBxdWV1ZWluZyByZWFjdGlvbnNcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuZGVsZXRlKGtleSk7XG4gICAgaWYgKGhhZEtleSkge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8sIGtleSwgdW5kZWZpbmVkLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICBjb25zdCBoYWRJdGVtcyA9IHRhcmdldC5zaXplICE9PSAwO1xuICAgIGNvbnN0IG9sZFRhcmdldCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IGlzTWFwKHRhcmdldClcbiAgICAgICAgICAgID8gbmV3IE1hcCh0YXJnZXQpXG4gICAgICAgICAgICA6IG5ldyBTZXQodGFyZ2V0KVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBmb3J3YXJkIHRoZSBvcGVyYXRpb24gYmVmb3JlIHF1ZXVlaW5nIHJlYWN0aW9uc1xuICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xuICAgIGlmIChoYWRJdGVtcykge1xuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJjbGVhclwiIC8qIFRyaWdnZXJPcFR5cGVzLkNMRUFSICovLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb2xkVGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvckVhY2goaXNSZWFkb25seSwgaXNTaGFsbG93KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZWQgPSB0aGlzO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqL107XG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIgLyogVHJhY2tPcFR5cGVzLklURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBpbXBvcnRhbnQ6IG1ha2Ugc3VyZSB0aGUgY2FsbGJhY2sgaXNcbiAgICAgICAgICAgIC8vIDEuIGludm9rZWQgd2l0aCB0aGUgcmVhY3RpdmUgbWFwIGFzIGB0aGlzYCBhbmQgM3JkIGFyZ1xuICAgICAgICAgICAgLy8gMi4gdGhlIHZhbHVlIHJlY2VpdmVkIHNob3VsZCBiZSBhIGNvcnJlc3BvbmRpbmcgcmVhY3RpdmUvcmVhZG9ubHkuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB3cmFwKHZhbHVlKSwgd3JhcChrZXkpLCBvYnNlcnZlZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXTtcbiAgICAgICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICAgICAgY29uc3QgdGFyZ2V0SXNNYXAgPSBpc01hcChyYXdUYXJnZXQpO1xuICAgICAgICBjb25zdCBpc1BhaXIgPSBtZXRob2QgPT09ICdlbnRyaWVzJyB8fCAobWV0aG9kID09PSBTeW1ib2wuaXRlcmF0b3IgJiYgdGFyZ2V0SXNNYXApO1xuICAgICAgICBjb25zdCBpc0tleU9ubHkgPSBtZXRob2QgPT09ICdrZXlzJyAmJiB0YXJnZXRJc01hcDtcbiAgICAgICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRhcmdldFttZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgICAhaXNSZWFkb25seSAmJlxuICAgICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBUcmFja09wVHlwZXMuSVRFUkFURSAqLywgaXNLZXlPbmx5ID8gTUFQX0tFWV9JVEVSQVRFX0tFWSA6IElURVJBVEVfS0VZKTtcbiAgICAgICAgLy8gcmV0dXJuIGEgd3JhcHBlZCBpdGVyYXRvciB3aGljaCByZXR1cm5zIG9ic2VydmVkIHZlcnNpb25zIG9mIHRoZVxuICAgICAgICAvLyB2YWx1ZXMgZW1pdHRlZCBmcm9tIHRoZSByZWFsIGl0ZXJhdG9yXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBpdGVyYXRvciBwcm90b2NvbFxuICAgICAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZVxuICAgICAgICAgICAgICAgICAgICA/IHsgdmFsdWUsIGRvbmUgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc1BhaXIgPyBbd3JhcCh2YWx1ZVswXSksIHdyYXAodmFsdWVbMV0pXSA6IHdyYXAodmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGl0ZXJhYmxlIHByb3RvY29sXG4gICAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhZG9ubHlNZXRob2QodHlwZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhcmdzWzBdID8gYG9uIGtleSBcIiR7YXJnc1swXX1cIiBgIDogYGA7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7Y2FwaXRhbGl6ZSh0eXBlKX0gb3BlcmF0aW9uICR7a2V5fWZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRvUmF3KHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8gPyBmYWxzZSA6IHRoaXM7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKSB7XG4gICAgY29uc3QgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQodGhpcywga2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzLFxuICAgICAgICBhZGQsXG4gICAgICAgIHNldCxcbiAgICAgICAgZGVsZXRlOiBkZWxldGVFbnRyeSxcbiAgICAgICAgY2xlYXIsXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIGZhbHNlKVxuICAgIH07XG4gICAgY29uc3Qgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQodGhpcywga2V5LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBzaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyxcbiAgICAgICAgYWRkLFxuICAgICAgICBzZXQsXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXG4gICAgICAgIGNsZWFyLFxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKGZhbHNlLCB0cnVlKVxuICAgIH07XG4gICAgY29uc3QgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xuICAgICAgICBnZXQoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0KHRoaXMsIGtleSwgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBzaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcywgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyhrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBoYXMuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiYWRkXCIgLyogVHJpZ2dlck9wVHlwZXMuQUREICovKSxcbiAgICAgICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcInNldFwiIC8qIFRyaWdnZXJPcFR5cGVzLlNFVCAqLyksXG4gICAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiAvKiBUcmlnZ2VyT3BUeXBlcy5ERUxFVEUgKi8pLFxuICAgICAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJjbGVhclwiIC8qIFRyaWdnZXJPcFR5cGVzLkNMRUFSICovKSxcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCBmYWxzZSlcbiAgICB9O1xuICAgIGNvbnN0IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgICAgIGdldChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXQodGhpcywga2V5LCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhcy5jYWxsKHRoaXMsIGtleSwgdHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJhZGRcIiAvKiBUcmlnZ2VyT3BUeXBlcy5BREQgKi8pLFxuICAgICAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovKSxcbiAgICAgICAgZGVsZXRlOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImRlbGV0ZVwiIC8qIFRyaWdnZXJPcFR5cGVzLkRFTEVURSAqLyksXG4gICAgICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImNsZWFyXCIgLyogVHJpZ2dlck9wVHlwZXMuQ0xFQVIgKi8pLFxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKHRydWUsIHRydWUpXG4gICAgfTtcbiAgICBjb25zdCBpdGVyYXRvck1ldGhvZHMgPSBbJ2tleXMnLCAndmFsdWVzJywgJ2VudHJpZXMnLCBTeW1ib2wuaXRlcmF0b3JdO1xuICAgIGl0ZXJhdG9yTWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCB0cnVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW1xuICAgICAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyxcbiAgICAgICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLFxuICAgICAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9ucyxcbiAgICAgICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xuICAgIF07XG59XG5jb25zdCBbbXV0YWJsZUluc3RydW1lbnRhdGlvbnMsIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNdID0gLyogI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpO1xuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGlzUmVhZG9ubHksIHNoYWxsb3cpIHtcbiAgICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0gc2hhbGxvd1xuICAgICAgICA/IGlzUmVhZG9ubHlcbiAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xuICAgICAgICAgICAgOiBzaGFsbG93SW5zdHJ1bWVudGF0aW9uc1xuICAgICAgICA6IGlzUmVhZG9ubHlcbiAgICAgICAgICAgID8gcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXG4gICAgICAgICAgICA6IG11dGFibGVJbnN0cnVtZW50YXRpb25zO1xuICAgIHJldHVybiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XG4gICAgICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQUNUSVZFICovKSB7XG4gICAgICAgICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9yYXdcIiAvKiBSZWFjdGl2ZUZsYWdzLlJBVyAqLykge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoaGFzT3duKGluc3RydW1lbnRhdGlvbnMsIGtleSkgJiYga2V5IGluIHRhcmdldFxuICAgICAgICAgICAgPyBpbnN0cnVtZW50YXRpb25zXG4gICAgICAgICAgICA6IHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgfTtcbn1cbmNvbnN0IG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCB0cnVlKVxufTtcbmNvbnN0IHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgdHJ1ZSlcbn07XG5mdW5jdGlvbiBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KSB7XG4gICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgICBpZiAocmF3S2V5ICE9PSBrZXkgJiYgaGFzLmNhbGwodGFyZ2V0LCByYXdLZXkpKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0b1Jhd1R5cGUodGFyZ2V0KTtcbiAgICAgICAgY29uc29sZS53YXJuKGBSZWFjdGl2ZSAke3R5cGV9IGNvbnRhaW5zIGJvdGggdGhlIHJhdyBhbmQgcmVhY3RpdmUgYCArXG4gICAgICAgICAgICBgdmVyc2lvbnMgb2YgdGhlIHNhbWUgb2JqZWN0JHt0eXBlID09PSBgTWFwYCA/IGAgYXMga2V5c2AgOiBgYH0sIGAgK1xuICAgICAgICAgICAgYHdoaWNoIGNhbiBsZWFkIHRvIGluY29uc2lzdGVuY2llcy4gYCArXG4gICAgICAgICAgICBgQXZvaWQgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgYCArXG4gICAgICAgICAgICBgb2YgYW4gb2JqZWN0IGFuZCBvbmx5IHVzZSB0aGUgcmVhY3RpdmUgdmVyc2lvbiBpZiBwb3NzaWJsZS5gKTtcbiAgICB9XG59XG5cbmNvbnN0IHJlYWN0aXZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZWFkb25seU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlNYXAgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gdGFyZ2V0VHlwZU1hcChyYXdUeXBlKSB7XG4gICAgc3dpdGNoIChyYXdUeXBlKSB7XG4gICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFRhcmdldFR5cGUuQ09NTU9OICovO1xuICAgICAgICBjYXNlICdNYXAnOlxuICAgICAgICBjYXNlICdTZXQnOlxuICAgICAgICBjYXNlICdXZWFrTWFwJzpcbiAgICAgICAgY2FzZSAnV2Vha1NldCc6XG4gICAgICAgICAgICByZXR1cm4gMiAvKiBUYXJnZXRUeXBlLkNPTExFQ1RJT04gKi87XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gMCAvKiBUYXJnZXRUeXBlLklOVkFMSUQgKi87XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZVtcIl9fdl9za2lwXCIgLyogUmVhY3RpdmVGbGFncy5TS0lQICovXSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSlcbiAgICAgICAgPyAwIC8qIFRhcmdldFR5cGUuSU5WQUxJRCAqL1xuICAgICAgICA6IHRhcmdldFR5cGVNYXAodG9SYXdUeXBlKHZhbHVlKSk7XG59XG5mdW5jdGlvbiByZWFjdGl2ZSh0YXJnZXQpIHtcbiAgICAvLyBpZiB0cnlpbmcgdG8gb2JzZXJ2ZSBhIHJlYWRvbmx5IHByb3h5LCByZXR1cm4gdGhlIHJlYWRvbmx5IHZlcnNpb24uXG4gICAgaWYgKGlzUmVhZG9ubHkodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBmYWxzZSwgbXV0YWJsZUhhbmRsZXJzLCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzLCByZWFjdGl2ZU1hcCk7XG59XG4vKipcbiAqIFJldHVybiBhIHNoYWxsb3dseS1yZWFjdGl2ZSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QsIHdoZXJlIG9ubHkgdGhlIHJvb3RcbiAqIGxldmVsIHByb3BlcnRpZXMgYXJlIHJlYWN0aXZlLiBJdCBhbHNvIGRvZXMgbm90IGF1dG8tdW53cmFwIHJlZnMgKGV2ZW4gYXQgdGhlXG4gKiByb290IGxldmVsKS5cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd1JlYWN0aXZlKHRhcmdldCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGZhbHNlLCBzaGFsbG93UmVhY3RpdmVIYW5kbGVycywgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycywgc2hhbGxvd1JlYWN0aXZlTWFwKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHJlYWRvbmx5IGNvcHkgb2YgdGhlIG9yaWdpbmFsIG9iamVjdC4gTm90ZSB0aGUgcmV0dXJuZWQgY29weSBpcyBub3RcbiAqIG1hZGUgcmVhY3RpdmUsIGJ1dCBgcmVhZG9ubHlgIGNhbiBiZSBjYWxsZWQgb24gYW4gYWxyZWFkeSByZWFjdGl2ZSBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHJlYWRvbmx5KHRhcmdldCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIHRydWUsIHJlYWRvbmx5SGFuZGxlcnMsIHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLCByZWFkb25seU1hcCk7XG59XG4vKipcbiAqIFJldHVybnMgYSByZWFjdGl2ZS1jb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QsIHdoZXJlIG9ubHkgdGhlIHJvb3QgbGV2ZWxcbiAqIHByb3BlcnRpZXMgYXJlIHJlYWRvbmx5LCBhbmQgZG9lcyBOT1QgdW53cmFwIHJlZnMgbm9yIHJlY3Vyc2l2ZWx5IGNvbnZlcnRcbiAqIHJldHVybmVkIHByb3BlcnRpZXMuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGNyZWF0aW5nIHRoZSBwcm9wcyBwcm94eSBvYmplY3QgZm9yIHN0YXRlZnVsIGNvbXBvbmVudHMuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dSZWFkb25seSh0YXJnZXQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCB0cnVlLCBzaGFsbG93UmVhZG9ubHlIYW5kbGVycywgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLCBzaGFsbG93UmVhZG9ubHlNYXApO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBpc1JlYWRvbmx5LCBiYXNlSGFuZGxlcnMsIGNvbGxlY3Rpb25IYW5kbGVycywgcHJveHlNYXApIHtcbiAgICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGB2YWx1ZSBjYW5ub3QgYmUgbWFkZSByZWFjdGl2ZTogJHtTdHJpbmcodGFyZ2V0KX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICAvLyB0YXJnZXQgaXMgYWxyZWFkeSBhIFByb3h5LCByZXR1cm4gaXQuXG4gICAgLy8gZXhjZXB0aW9uOiBjYWxsaW5nIHJlYWRvbmx5KCkgb24gYSByZWFjdGl2ZSBvYmplY3RcbiAgICBpZiAodGFyZ2V0W1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXSAmJlxuICAgICAgICAhKGlzUmVhZG9ubHkgJiYgdGFyZ2V0W1wiX192X2lzUmVhY3RpdmVcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQUNUSVZFICovXSkpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgLy8gdGFyZ2V0IGFscmVhZHkgaGFzIGNvcnJlc3BvbmRpbmcgUHJveHlcbiAgICBjb25zdCBleGlzdGluZ1Byb3h5ID0gcHJveHlNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKGV4aXN0aW5nUHJveHkpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUHJveHk7XG4gICAgfVxuICAgIC8vIG9ubHkgc3BlY2lmaWMgdmFsdWUgdHlwZXMgY2FuIGJlIG9ic2VydmVkLlxuICAgIGNvbnN0IHRhcmdldFR5cGUgPSBnZXRUYXJnZXRUeXBlKHRhcmdldCk7XG4gICAgaWYgKHRhcmdldFR5cGUgPT09IDAgLyogVGFyZ2V0VHlwZS5JTlZBTElEICovKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwgdGFyZ2V0VHlwZSA9PT0gMiAvKiBUYXJnZXRUeXBlLkNPTExFQ1RJT04gKi8gPyBjb2xsZWN0aW9uSGFuZGxlcnMgOiBiYXNlSGFuZGxlcnMpO1xuICAgIHByb3h5TWFwLnNldCh0YXJnZXQsIHByb3h5KTtcbiAgICByZXR1cm4gcHJveHk7XG59XG5mdW5jdGlvbiBpc1JlYWN0aXZlKHZhbHVlKSB7XG4gICAgaWYgKGlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBpc1JlYWN0aXZlKHZhbHVlW1wiX192X3Jhd1wiIC8qIFJlYWN0aXZlRmxhZ3MuUkFXICovXSk7XG4gICAgfVxuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWN0aXZlXCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFDVElWRSAqL10pO1xufVxuZnVuY3Rpb24gaXNSZWFkb25seSh2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqL10pO1xufVxuZnVuY3Rpb24gaXNTaGFsbG93KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzU2hhbGxvd1wiIC8qIFJlYWN0aXZlRmxhZ3MuSVNfU0hBTExPVyAqL10pO1xufVxuZnVuY3Rpb24gaXNQcm94eSh2YWx1ZSkge1xuICAgIHJldHVybiBpc1JlYWN0aXZlKHZhbHVlKSB8fCBpc1JlYWRvbmx5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHRvUmF3KG9ic2VydmVkKSB7XG4gICAgY29uc3QgcmF3ID0gb2JzZXJ2ZWQgJiYgb2JzZXJ2ZWRbXCJfX3ZfcmF3XCIgLyogUmVhY3RpdmVGbGFncy5SQVcgKi9dO1xuICAgIHJldHVybiByYXcgPyB0b1JhdyhyYXcpIDogb2JzZXJ2ZWQ7XG59XG5mdW5jdGlvbiBtYXJrUmF3KHZhbHVlKSB7XG4gICAgZGVmKHZhbHVlLCBcIl9fdl9za2lwXCIgLyogUmVhY3RpdmVGbGFncy5TS0lQICovLCB0cnVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5jb25zdCB0b1JlYWN0aXZlID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFjdGl2ZSh2YWx1ZSkgOiB2YWx1ZTtcbmNvbnN0IHRvUmVhZG9ubHkgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWRvbmx5KHZhbHVlKSA6IHZhbHVlO1xuXG5mdW5jdGlvbiB0cmFja1JlZlZhbHVlKHJlZikge1xuICAgIGlmIChzaG91bGRUcmFjayAmJiBhY3RpdmVFZmZlY3QpIHtcbiAgICAgICAgcmVmID0gdG9SYXcocmVmKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgdHJhY2tFZmZlY3RzKHJlZi5kZXAgfHwgKHJlZi5kZXAgPSBjcmVhdGVEZXAoKSksIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHJlZixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiIC8qIFRyYWNrT3BUeXBlcy5HRVQgKi8sXG4gICAgICAgICAgICAgICAga2V5OiAndmFsdWUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYWNrRWZmZWN0cyhyZWYuZGVwIHx8IChyZWYuZGVwID0gY3JlYXRlRGVwKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJSZWZWYWx1ZShyZWYsIG5ld1ZhbCkge1xuICAgIHJlZiA9IHRvUmF3KHJlZik7XG4gICAgY29uc3QgZGVwID0gcmVmLmRlcDtcbiAgICBpZiAoZGVwKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcCwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogcmVmLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLFxuICAgICAgICAgICAgICAgIGtleTogJ3ZhbHVlJyxcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZTogbmV3VmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gICAgcmV0dXJuICEhKHIgJiYgci5fX3ZfaXNSZWYgPT09IHRydWUpO1xufVxuZnVuY3Rpb24gcmVmKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgZmFsc2UpO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlZih2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIHRydWUpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVmKHJhd1ZhbHVlLCBzaGFsbG93KSB7XG4gICAgaWYgKGlzUmVmKHJhd1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gcmF3VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVmSW1wbChyYXdWYWx1ZSwgc2hhbGxvdyk7XG59XG5jbGFzcyBSZWZJbXBsIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgX192X2lzU2hhbGxvdykge1xuICAgICAgICB0aGlzLl9fdl9pc1NoYWxsb3cgPSBfX3ZfaXNTaGFsbG93O1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfX3ZfaXNTaGFsbG93ID8gdmFsdWUgOiB0b1JlYWN0aXZlKHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgY29uc3QgdXNlRGlyZWN0VmFsdWUgPSB0aGlzLl9fdl9pc1NoYWxsb3cgfHwgaXNTaGFsbG93KG5ld1ZhbCkgfHwgaXNSZWFkb25seShuZXdWYWwpO1xuICAgICAgICBuZXdWYWwgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKG5ld1ZhbCwgdGhpcy5fcmF3VmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IG5ld1ZhbDtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdXNlRGlyZWN0VmFsdWUgPyBuZXdWYWwgOiB0b1JlYWN0aXZlKG5ld1ZhbCk7XG4gICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcywgbmV3VmFsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJSZWYocmVmKSB7XG4gICAgdHJpZ2dlclJlZlZhbHVlKHJlZiwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gcmVmLnZhbHVlIDogdm9pZCAwKTtcbn1cbmZ1bmN0aW9uIHVucmVmKHJlZikge1xuICAgIHJldHVybiBpc1JlZihyZWYpID8gcmVmLnZhbHVlIDogcmVmO1xufVxuY29uc3Qgc2hhbGxvd1Vud3JhcEhhbmRsZXJzID0ge1xuICAgIGdldDogKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4gdW5yZWYoUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSksXG4gICAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICBpZiAoaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5mdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZShvYmplY3RXaXRoUmVmcylcbiAgICAgICAgPyBvYmplY3RXaXRoUmVmc1xuICAgICAgICA6IG5ldyBQcm94eShvYmplY3RXaXRoUmVmcywgc2hhbGxvd1Vud3JhcEhhbmRsZXJzKTtcbn1cbmNsYXNzIEN1c3RvbVJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyBnZXQsIHNldCB9ID0gZmFjdG9yeSgoKSA9PiB0cmFja1JlZlZhbHVlKHRoaXMpLCAoKSA9PiB0cmlnZ2VyUmVmVmFsdWUodGhpcykpO1xuICAgICAgICB0aGlzLl9nZXQgPSBnZXQ7XG4gICAgICAgIHRoaXMuX3NldCA9IHNldDtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KCk7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fc2V0KG5ld1ZhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcbiAgICByZXR1cm4gbmV3IEN1c3RvbVJlZkltcGwoZmFjdG9yeSk7XG59XG5mdW5jdGlvbiB0b1JlZnMob2JqZWN0KSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNQcm94eShvYmplY3QpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKSA6IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICByZXRba2V5XSA9IHRvUmVmKG9iamVjdCwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmNsYXNzIE9iamVjdFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKF9vYmplY3QsIF9rZXksIF9kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gX2RlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuX29iamVjdFt0aGlzLl9rZXldO1xuICAgICAgICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyB0aGlzLl9kZWZhdWx0VmFsdWUgOiB2YWw7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5fb2JqZWN0W3RoaXMuX2tleV0gPSBuZXdWYWw7XG4gICAgfVxuICAgIGdldCBkZXAoKSB7XG4gICAgICAgIHJldHVybiBnZXREZXBGcm9tUmVhY3RpdmUodG9SYXcodGhpcy5fb2JqZWN0KSwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5mdW5jdGlvbiB0b1JlZihvYmplY3QsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3QgdmFsID0gb2JqZWN0W2tleV07XG4gICAgcmV0dXJuIGlzUmVmKHZhbClcbiAgICAgICAgPyB2YWxcbiAgICAgICAgOiBuZXcgT2JqZWN0UmVmSW1wbChvYmplY3QsIGtleSwgZGVmYXVsdFZhbHVlKTtcbn1cblxudmFyIF9hJDE7XG5jbGFzcyBDb21wdXRlZFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGdldHRlciwgX3NldHRlciwgaXNSZWFkb25seSwgaXNTU1IpIHtcbiAgICAgICAgdGhpcy5fc2V0dGVyID0gX3NldHRlcjtcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcbiAgICAgICAgdGhpc1tfYSQxXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVmZmVjdC5jb21wdXRlZCA9IHRoaXM7XG4gICAgICAgIHRoaXMuZWZmZWN0LmFjdGl2ZSA9IHRoaXMuX2NhY2hlYWJsZSA9ICFpc1NTUjtcbiAgICAgICAgdGhpc1tcIl9fdl9pc1JlYWRvbmx5XCIgLyogUmVhY3RpdmVGbGFncy5JU19SRUFET05MWSAqL10gPSBpc1JlYWRvbmx5O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIC8vIHRoZSBjb21wdXRlZCByZWYgbWF5IGdldCB3cmFwcGVkIGJ5IG90aGVyIHByb3hpZXMgZS5nLiByZWFkb25seSgpICMzMzc2XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgdHJhY2tSZWZWYWx1ZShzZWxmKTtcbiAgICAgICAgaWYgKHNlbGYuX2RpcnR5IHx8ICFzZWxmLl9jYWNoZWFibGUpIHtcbiAgICAgICAgICAgIHNlbGYuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxmLl92YWx1ZSA9IHNlbGYuZWZmZWN0LnJ1bigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZTtcbiAgICB9XG4gICAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldHRlcihuZXdWYWx1ZSk7XG4gICAgfVxufVxuX2EkMSA9IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovO1xuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcbiAgICBsZXQgZ2V0dGVyO1xuICAgIGxldCBzZXR0ZXI7XG4gICAgY29uc3Qgb25seUdldHRlciA9IGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKTtcbiAgICBpZiAob25seUdldHRlcikge1xuICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnM7XG4gICAgICAgIHNldHRlciA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgPyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBOT09QO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLmdldDtcbiAgICAgICAgc2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLnNldDtcbiAgICB9XG4gICAgY29uc3QgY1JlZiA9IG5ldyBDb21wdXRlZFJlZkltcGwoZ2V0dGVyLCBzZXR0ZXIsIG9ubHlHZXR0ZXIgfHwgIXNldHRlciwgaXNTU1IpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZGVidWdPcHRpb25zICYmICFpc1NTUikge1xuICAgICAgICBjUmVmLmVmZmVjdC5vblRyYWNrID0gZGVidWdPcHRpb25zLm9uVHJhY2s7XG4gICAgICAgIGNSZWYuZWZmZWN0Lm9uVHJpZ2dlciA9IGRlYnVnT3B0aW9ucy5vblRyaWdnZXI7XG4gICAgfVxuICAgIHJldHVybiBjUmVmO1xufVxuXG52YXIgX2E7XG5jb25zdCB0aWNrID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IHF1ZXVlID0gW107XG5sZXQgcXVldWVkID0gZmFsc2U7XG5jb25zdCBzY2hlZHVsZXIgPSAoZm4pID0+IHtcbiAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICBpZiAoIXF1ZXVlZCkge1xuICAgICAgICBxdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aWNrLnRoZW4oZmx1c2gpO1xuICAgIH1cbn07XG5jb25zdCBmbHVzaCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHF1ZXVlW2ldKCk7XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgcXVldWVkID0gZmFsc2U7XG59O1xuY2xhc3MgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwge1xuICAgIGNvbnN0cnVjdG9yKGdldHRlcikge1xuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgICAgIHRoaXNbX2FdID0gdHJ1ZTtcbiAgICAgICAgbGV0IGNvbXBhcmVUYXJnZXQ7XG4gICAgICAgIGxldCBoYXNDb21wYXJlVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgIGxldCBzY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCAoY29tcHV0ZWRUcmlnZ2VyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZXApIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVUYXJnZXQgPSB0aGlzLl92YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQ29tcGFyZVRhcmdldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVUb0NvbXBhcmUgPSBoYXNDb21wYXJlVGFyZ2V0ID8gY29tcGFyZVRhcmdldCA6IHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNDb21wYXJlVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lZmZlY3QuYWN0aXZlICYmIHRoaXMuX2dldCgpICE9PSB2YWx1ZVRvQ29tcGFyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2hhaW5lZCB1cHN0cmVhbSBjb21wdXRlZHMgYXJlIG5vdGlmaWVkIHN5bmNocm9ub3VzbHkgdG8gZW5zdXJlXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUgaW52YWxpZGF0aW9uIGluIGNhc2Ugb2Ygc3luYyBhY2Nlc3M7IG5vcm1hbCBlZmZlY3RzIGFyZVxuICAgICAgICAgICAgICAgIC8vIGRlZmVycmVkIHRvIGJlIHRyaWdnZXJlZCBpbiBzY2hlZHVsZXIuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZGVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmNvbXB1dGVkIGluc3RhbmNlb2YgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2NoZWR1bGVyKHRydWUgLyogY29tcHV0ZWRUcmlnZ2VyICovKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWZmZWN0LmNvbXB1dGVkID0gdGhpcztcbiAgICB9XG4gICAgX2dldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLl92YWx1ZSA9IHRoaXMuZWZmZWN0LnJ1bigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdHJhY2tSZWZWYWx1ZSh0aGlzKTtcbiAgICAgICAgLy8gdGhlIGNvbXB1dGVkIHJlZiBtYXkgZ2V0IHdyYXBwZWQgYnkgb3RoZXIgcHJveGllcyBlLmcuIHJlYWRvbmx5KCkgIzMzNzZcbiAgICAgICAgcmV0dXJuIHRvUmF3KHRoaXMpLl9nZXQoKTtcbiAgICB9XG59XG5fYSA9IFwiX192X2lzUmVhZG9ubHlcIiAvKiBSZWFjdGl2ZUZsYWdzLklTX1JFQURPTkxZICovO1xuZnVuY3Rpb24gZGVmZXJyZWRDb21wdXRlZChnZXR0ZXIpIHtcbiAgICByZXR1cm4gbmV3IERlZmVycmVkQ29tcHV0ZWRSZWZJbXBsKGdldHRlcik7XG59XG5cbmV4cG9ydCB7IEVmZmVjdFNjb3BlLCBJVEVSQVRFX0tFWSwgUmVhY3RpdmVFZmZlY3QsIGNvbXB1dGVkLCBjdXN0b21SZWYsIGRlZmVycmVkQ29tcHV0ZWQsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGVuYWJsZVRyYWNraW5nLCBnZXRDdXJyZW50U2NvcGUsIGlzUHJveHksIGlzUmVhY3RpdmUsIGlzUmVhZG9ubHksIGlzUmVmLCBpc1NoYWxsb3csIG1hcmtSYXcsIG9uU2NvcGVEaXNwb3NlLCBwYXVzZVRyYWNraW5nLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFkb25seSwgcmVmLCByZXNldFRyYWNraW5nLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRyYWNrLCB0cmlnZ2VyLCB0cmlnZ2VyUmVmLCB1bnJlZiB9O1xuIiwiaW1wb3J0IHsgcGF1c2VUcmFja2luZywgcmVzZXRUcmFja2luZywgaXNSZWYsIHRvUmF3LCBnZXRDdXJyZW50U2NvcGUsIGlzU2hhbGxvdyBhcyBpc1NoYWxsb3ckMSwgaXNSZWFjdGl2ZSwgUmVhY3RpdmVFZmZlY3QsIHJlZiwgc2hhbGxvd1JlYWRvbmx5LCB0cmFjaywgcmVhY3RpdmUsIHNoYWxsb3dSZWFjdGl2ZSwgdHJpZ2dlciwgaXNQcm94eSwgcHJveHlSZWZzLCBtYXJrUmF3LCBFZmZlY3RTY29wZSwgY29tcHV0ZWQgYXMgY29tcHV0ZWQkMSwgaXNSZWFkb25seSB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5leHBvcnQgeyBFZmZlY3RTY29wZSwgUmVhY3RpdmVFZmZlY3QsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvblNjb3BlRGlzcG9zZSwgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0cmlnZ2VyUmVmLCB1bnJlZiB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNGdW5jdGlvbiwgaXNQcm9taXNlLCBpc0FycmF5LCBOT09QLCBnZXRHbG9iYWxUaGlzLCBleHRlbmQsIEVNUFRZX09CSiwgdG9IYW5kbGVyS2V5LCBsb29zZVRvTnVtYmVyLCBoeXBoZW5hdGUsIGNhbWVsaXplLCBpc09iamVjdCwgaXNPbiwgaGFzT3duLCBpc01vZGVsTGlzdGVuZXIsIHRvTnVtYmVyLCBoYXNDaGFuZ2VkLCByZW1vdmUsIGlzU2V0LCBpc01hcCwgaXNQbGFpbk9iamVjdCwgaW52b2tlQXJyYXlGbnMsIGlzUmVnRXhwLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGNhcGl0YWxpemUsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgZGVmLCBpc1Jlc2VydmVkUHJvcCwgRU1QVFlfQVJSLCB0b1Jhd1R5cGUsIG1ha2VNYXAsIE5PLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplU3R5bGUgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5leHBvcnQgeyBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVByb3BzLCBub3JtYWxpemVTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXkgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmNvbnN0IHN0YWNrID0gW107XG5mdW5jdGlvbiBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpIHtcbiAgICBzdGFjay5wdXNoKHZub2RlKTtcbn1cbmZ1bmN0aW9uIHBvcFdhcm5pbmdDb250ZXh0KCkge1xuICAgIHN0YWNrLnBvcCgpO1xufVxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIC8vIGF2b2lkIHByb3BzIGZvcm1hdHRpbmcgb3Igd2FybiBoYW5kbGVyIHRyYWNraW5nIGRlcHMgdGhhdCBtaWdodCBiZSBtdXRhdGVkXG4gICAgLy8gZHVyaW5nIHBhdGNoLCBsZWFkaW5nIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBzdGFjay5sZW5ndGggPyBzdGFja1tzdGFjay5sZW5ndGggLSAxXS5jb21wb25lbnQgOiBudWxsO1xuICAgIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XG4gICAgY29uc3QgdHJhY2UgPSBnZXRDb21wb25lbnRUcmFjZSgpO1xuICAgIGlmIChhcHBXYXJuSGFuZGxlcikge1xuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwV2FybkhhbmRsZXIsIGluc3RhbmNlLCAxMSAvKiBFcnJvckNvZGVzLkFQUF9XQVJOX0hBTkRMRVIgKi8sIFtcbiAgICAgICAgICAgIG1zZyArIGFyZ3Muam9pbignJyksXG4gICAgICAgICAgICBpbnN0YW5jZSAmJiBpbnN0YW5jZS5wcm94eSxcbiAgICAgICAgICAgIHRyYWNlXG4gICAgICAgICAgICAgICAgLm1hcCgoeyB2bm9kZSB9KSA9PiBgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgdm5vZGUudHlwZSl9PmApXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgdHJhY2VcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB3YXJuQXJncyA9IFtgW1Z1ZSB3YXJuXTogJHttc2d9YCwgLi4uYXJnc107XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodHJhY2UubGVuZ3RoICYmXG4gICAgICAgICAgICAvLyBhdm9pZCBzcGFtbWluZyBjb25zb2xlIGR1cmluZyB0ZXN0c1xuICAgICAgICAgICAgIWZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuQXJncy5wdXNoKGBcXG5gLCAuLi5mb3JtYXRUcmFjZSh0cmFjZSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUud2FybiguLi53YXJuQXJncyk7XG4gICAgfVxuICAgIHJlc2V0VHJhY2tpbmcoKTtcbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudFRyYWNlKCkge1xuICAgIGxldCBjdXJyZW50Vk5vZGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWN1cnJlbnRWTm9kZSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8vIHdlIGNhbid0IGp1c3QgdXNlIHRoZSBzdGFjayBiZWNhdXNlIGl0IHdpbGwgYmUgaW5jb21wbGV0ZSBkdXJpbmcgdXBkYXRlc1xuICAgIC8vIHRoYXQgZGlkIG5vdCBzdGFydCBmcm9tIHRoZSByb290LiBSZS1jb25zdHJ1Y3QgdGhlIHBhcmVudCBjaGFpbiB1c2luZ1xuICAgIC8vIGluc3RhbmNlIHBhcmVudCBwb2ludGVycy5cbiAgICBjb25zdCBub3JtYWxpemVkU3RhY2sgPSBbXTtcbiAgICB3aGlsZSAoY3VycmVudFZOb2RlKSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XG4gICAgICAgIGlmIChsYXN0ICYmIGxhc3Qudm5vZGUgPT09IGN1cnJlbnRWTm9kZSkge1xuICAgICAgICAgICAgbGFzdC5yZWN1cnNlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRTdGFjay5wdXNoKHtcbiAgICAgICAgICAgICAgICB2bm9kZTogY3VycmVudFZOb2RlLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2VDb3VudDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50SW5zdGFuY2UgPSBjdXJyZW50Vk5vZGUuY29tcG9uZW50ICYmIGN1cnJlbnRWTm9kZS5jb21wb25lbnQucGFyZW50O1xuICAgICAgICBjdXJyZW50Vk5vZGUgPSBwYXJlbnRJbnN0YW5jZSAmJiBwYXJlbnRJbnN0YW5jZS52bm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRTdGFjaztcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRUcmFjZSh0cmFjZSkge1xuICAgIGNvbnN0IGxvZ3MgPSBbXTtcbiAgICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xuICAgICAgICBsb2dzLnB1c2goLi4uKGkgPT09IDAgPyBbXSA6IFtgXFxuYF0pLCAuLi5mb3JtYXRUcmFjZUVudHJ5KGVudHJ5KSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxvZ3M7XG59XG5mdW5jdGlvbiBmb3JtYXRUcmFjZUVudHJ5KHsgdm5vZGUsIHJlY3Vyc2VDb3VudCB9KSB7XG4gICAgY29uc3QgcG9zdGZpeCA9IHJlY3Vyc2VDb3VudCA+IDAgPyBgLi4uICgke3JlY3Vyc2VDb3VudH0gcmVjdXJzaXZlIGNhbGxzKWAgOiBgYDtcbiAgICBjb25zdCBpc1Jvb3QgPSB2bm9kZS5jb21wb25lbnQgPyB2bm9kZS5jb21wb25lbnQucGFyZW50ID09IG51bGwgOiBmYWxzZTtcbiAgICBjb25zdCBvcGVuID0gYCBhdCA8JHtmb3JtYXRDb21wb25lbnROYW1lKHZub2RlLmNvbXBvbmVudCwgdm5vZGUudHlwZSwgaXNSb290KX1gO1xuICAgIGNvbnN0IGNsb3NlID0gYD5gICsgcG9zdGZpeDtcbiAgICByZXR1cm4gdm5vZGUucHJvcHNcbiAgICAgICAgPyBbb3BlbiwgLi4uZm9ybWF0UHJvcHModm5vZGUucHJvcHMpLCBjbG9zZV1cbiAgICAgICAgOiBbb3BlbiArIGNsb3NlXTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBmb3JtYXRQcm9wcyhwcm9wcykge1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gICAga2V5cy5zbGljZSgwLCAzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIHJlcy5wdXNoKC4uLmZvcm1hdFByb3Aoa2V5LCBwcm9wc1trZXldKSk7XG4gICAgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoID4gMykge1xuICAgICAgICByZXMucHVzaChgIC4uLmApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGZvcm1hdFByb3Aoa2V5LCB2YWx1ZSwgcmF3KSB7XG4gICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fFxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB8fFxuICAgICAgICB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PSR7dmFsdWV9YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IGZvcm1hdFByb3Aoa2V5LCB0b1Jhdyh2YWx1ZS52YWx1ZSksIHRydWUpO1xuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1SZWY8YCwgdmFsdWUsIGA+YF07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09YCwgdmFsdWVdO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGFzc2VydE51bWJlcih2YWwsIHR5cGUpIHtcbiAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHdhcm4oYCR7dHlwZX0gaXMgbm90IGEgdmFsaWQgbnVtYmVyIC0gYCArIGBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWwpfS5gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOYU4odmFsKSkge1xuICAgICAgICB3YXJuKGAke3R5cGV9IGlzIE5hTiAtIGAgKyAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicpO1xuICAgIH1cbn1cblxuY29uc3QgRXJyb3JUeXBlU3RyaW5ncyA9IHtcbiAgICBbXCJzcFwiIC8qIExpZmVjeWNsZUhvb2tzLlNFUlZFUl9QUkVGRVRDSCAqL106ICdzZXJ2ZXJQcmVmZXRjaCBob29rJyxcbiAgICBbXCJiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9DUkVBVEUgKi9dOiAnYmVmb3JlQ3JlYXRlIGhvb2snLFxuICAgIFtcImNcIiAvKiBMaWZlY3ljbGVIb29rcy5DUkVBVEVEICovXTogJ2NyZWF0ZWQgaG9vaycsXG4gICAgW1wiYm1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfTU9VTlQgKi9dOiAnYmVmb3JlTW91bnQgaG9vaycsXG4gICAgW1wibVwiIC8qIExpZmVjeWNsZUhvb2tzLk1PVU5URUQgKi9dOiAnbW91bnRlZCBob29rJyxcbiAgICBbXCJidVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VUERBVEUgKi9dOiAnYmVmb3JlVXBkYXRlIGhvb2snLFxuICAgIFtcInVcIiAvKiBMaWZlY3ljbGVIb29rcy5VUERBVEVEICovXTogJ3VwZGF0ZWQnLFxuICAgIFtcImJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VTk1PVU5UICovXTogJ2JlZm9yZVVubW91bnQgaG9vaycsXG4gICAgW1widW1cIiAvKiBMaWZlY3ljbGVIb29rcy5VTk1PVU5URUQgKi9dOiAndW5tb3VudGVkIGhvb2snLFxuICAgIFtcImFcIiAvKiBMaWZlY3ljbGVIb29rcy5BQ1RJVkFURUQgKi9dOiAnYWN0aXZhdGVkIGhvb2snLFxuICAgIFtcImRhXCIgLyogTGlmZWN5Y2xlSG9va3MuREVBQ1RJVkFURUQgKi9dOiAnZGVhY3RpdmF0ZWQgaG9vaycsXG4gICAgW1wiZWNcIiAvKiBMaWZlY3ljbGVIb29rcy5FUlJPUl9DQVBUVVJFRCAqL106ICdlcnJvckNhcHR1cmVkIGhvb2snLFxuICAgIFtcInJ0Y1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUkFDS0VEICovXTogJ3JlbmRlclRyYWNrZWQgaG9vaycsXG4gICAgW1wicnRnXCIgLyogTGlmZWN5Y2xlSG9va3MuUkVOREVSX1RSSUdHRVJFRCAqL106ICdyZW5kZXJUcmlnZ2VyZWQgaG9vaycsXG4gICAgWzAgLyogRXJyb3JDb2Rlcy5TRVRVUF9GVU5DVElPTiAqL106ICdzZXR1cCBmdW5jdGlvbicsXG4gICAgWzEgLyogRXJyb3JDb2Rlcy5SRU5ERVJfRlVOQ1RJT04gKi9dOiAncmVuZGVyIGZ1bmN0aW9uJyxcbiAgICBbMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqL106ICd3YXRjaGVyIGdldHRlcicsXG4gICAgWzMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqL106ICd3YXRjaGVyIGNhbGxiYWNrJyxcbiAgICBbNCAvKiBFcnJvckNvZGVzLldBVENIX0NMRUFOVVAgKi9dOiAnd2F0Y2hlciBjbGVhbnVwIGZ1bmN0aW9uJyxcbiAgICBbNSAvKiBFcnJvckNvZGVzLk5BVElWRV9FVkVOVF9IQU5ETEVSICovXTogJ25hdGl2ZSBldmVudCBoYW5kbGVyJyxcbiAgICBbNiAvKiBFcnJvckNvZGVzLkNPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovXTogJ2NvbXBvbmVudCBldmVudCBoYW5kbGVyJyxcbiAgICBbNyAvKiBFcnJvckNvZGVzLlZOT0RFX0hPT0sgKi9dOiAndm5vZGUgaG9vaycsXG4gICAgWzggLyogRXJyb3JDb2Rlcy5ESVJFQ1RJVkVfSE9PSyAqL106ICdkaXJlY3RpdmUgaG9vaycsXG4gICAgWzkgLyogRXJyb3JDb2Rlcy5UUkFOU0lUSU9OX0hPT0sgKi9dOiAndHJhbnNpdGlvbiBob29rJyxcbiAgICBbMTAgLyogRXJyb3JDb2Rlcy5BUFBfRVJST1JfSEFORExFUiAqL106ICdhcHAgZXJyb3JIYW5kbGVyJyxcbiAgICBbMTEgLyogRXJyb3JDb2Rlcy5BUFBfV0FSTl9IQU5ETEVSICovXTogJ2FwcCB3YXJuSGFuZGxlcicsXG4gICAgWzEyIC8qIEVycm9yQ29kZXMuRlVOQ1RJT05fUkVGICovXTogJ3JlZiBmdW5jdGlvbicsXG4gICAgWzEzIC8qIEVycm9yQ29kZXMuQVNZTkNfQ09NUE9ORU5UX0xPQURFUiAqL106ICdhc3luYyBjb21wb25lbnQgbG9hZGVyJyxcbiAgICBbMTQgLyogRXJyb3JDb2Rlcy5TQ0hFRFVMRVIgKi9dOiAnc2NoZWR1bGVyIGZsdXNoLiBUaGlzIGlzIGxpa2VseSBhIFZ1ZSBpbnRlcm5hbHMgYnVnLiAnICtcbiAgICAgICAgJ1BsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vbmV3LWlzc3VlLnZ1ZWpzLm9yZy8/cmVwbz12dWVqcy9jb3JlJ1xufTtcbmZ1bmN0aW9uIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgICBsZXQgcmVzO1xuICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IGFyZ3MgPyBmbiguLi5hcmdzKSA6IGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgY29uc3QgcmVzID0gY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncyk7XG4gICAgICAgIGlmIChyZXMgJiYgaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICAgIHJlcy5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZXMucHVzaChjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbltpXSwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUsIHRocm93SW5EZXYgPSB0cnVlKSB7XG4gICAgY29uc3QgY29udGV4dFZOb2RlID0gaW5zdGFuY2UgPyBpbnN0YW5jZS52bm9kZSA6IG51bGw7XG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgICAgIC8vIHRoZSBleHBvc2VkIGluc3RhbmNlIGlzIHRoZSByZW5kZXIgcHJveHkgdG8ga2VlcCBpdCBjb25zaXN0ZW50IHdpdGggMi54XG4gICAgICAgIGNvbnN0IGV4cG9zZWRJbnN0YW5jZSA9IGluc3RhbmNlLnByb3h5O1xuICAgICAgICAvLyBpbiBwcm9kdWN0aW9uIHRoZSBob29rIHJlY2VpdmVzIG9ubHkgdGhlIGVycm9yIGNvZGVcbiAgICAgICAgY29uc3QgZXJyb3JJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gRXJyb3JUeXBlU3RyaW5nc1t0eXBlXSA6IHR5cGU7XG4gICAgICAgIHdoaWxlIChjdXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yQ2FwdHVyZWRIb29rcyA9IGN1ci5lYztcbiAgICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzW2ldKGVyciwgZXhwb3NlZEluc3RhbmNlLCBlcnJvckluZm8pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyID0gY3VyLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHAtbGV2ZWwgaGFuZGxpbmdcbiAgICAgICAgY29uc3QgYXBwRXJyb3JIYW5kbGVyID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcuZXJyb3JIYW5kbGVyO1xuICAgICAgICBpZiAoYXBwRXJyb3JIYW5kbGVyKSB7XG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwRXJyb3JIYW5kbGVyLCBudWxsLCAxMCAvKiBFcnJvckNvZGVzLkFQUF9FUlJPUl9IQU5ETEVSICovLCBbZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mb10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2KTtcbn1cbmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgaW5mbyA9IEVycm9yVHlwZVN0cmluZ3NbdHlwZV07XG4gICAgICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcbiAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChjb250ZXh0Vk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHdhcm4oYFVuaGFuZGxlZCBlcnJvciR7aW5mbyA/IGAgZHVyaW5nIGV4ZWN1dGlvbiBvZiAke2luZm99YCA6IGBgfWApO1xuICAgICAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyYXNoIGluIGRldiBieSBkZWZhdWx0IHNvIGl0J3MgbW9yZSBub3RpY2VhYmxlXG4gICAgICAgIGlmICh0aHJvd0luRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHJlY292ZXIgaW4gcHJvZCB0byByZWR1Y2UgdGhlIGltcGFjdCBvbiBlbmQtdXNlclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxufVxuXG5sZXQgaXNGbHVzaGluZyA9IGZhbHNlO1xubGV0IGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XG5jb25zdCBxdWV1ZSA9IFtdO1xubGV0IGZsdXNoSW5kZXggPSAwO1xuY29uc3QgcGVuZGluZ1Bvc3RGbHVzaENicyA9IFtdO1xubGV0IGFjdGl2ZVBvc3RGbHVzaENicyA9IG51bGw7XG5sZXQgcG9zdEZsdXNoSW5kZXggPSAwO1xuY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmxldCBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbmNvbnN0IFJFQ1VSU0lPTl9MSU1JVCA9IDEwMDtcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgY29uc3QgcCA9IGN1cnJlbnRGbHVzaFByb21pc2UgfHwgcmVzb2x2ZWRQcm9taXNlO1xuICAgIHJldHVybiBmbiA/IHAudGhlbih0aGlzID8gZm4uYmluZCh0aGlzKSA6IGZuKSA6IHA7XG59XG4vLyAjMjc2OFxuLy8gVXNlIGJpbmFyeS1zZWFyY2ggdG8gZmluZCBhIHN1aXRhYmxlIHBvc2l0aW9uIGluIHRoZSBxdWV1ZSxcbi8vIHNvIHRoYXQgdGhlIHF1ZXVlIG1haW50YWlucyB0aGUgaW5jcmVhc2luZyBvcmRlciBvZiBqb2IncyBpZCxcbi8vIHdoaWNoIGNhbiBwcmV2ZW50IHRoZSBqb2IgZnJvbSBiZWluZyBza2lwcGVkIGFuZCBhbHNvIGNhbiBhdm9pZCByZXBlYXRlZCBwYXRjaGluZy5cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChpZCkge1xuICAgIC8vIHRoZSBzdGFydCBpbmRleCBzaG91bGQgYmUgYGZsdXNoSW5kZXggKyAxYFxuICAgIGxldCBzdGFydCA9IGZsdXNoSW5kZXggKyAxO1xuICAgIGxldCBlbmQgPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IChzdGFydCArIGVuZCkgPj4+IDE7XG4gICAgICAgIGNvbnN0IG1pZGRsZUpvYklkID0gZ2V0SWQocXVldWVbbWlkZGxlXSk7XG4gICAgICAgIG1pZGRsZUpvYklkIDwgaWQgPyAoc3RhcnQgPSBtaWRkbGUgKyAxKSA6IChlbmQgPSBtaWRkbGUpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnQ7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgICAvLyB0aGUgZGVkdXBlIHNlYXJjaCB1c2VzIHRoZSBzdGFydEluZGV4IGFyZ3VtZW50IG9mIEFycmF5LmluY2x1ZGVzKClcbiAgICAvLyBieSBkZWZhdWx0IHRoZSBzZWFyY2ggaW5kZXggaW5jbHVkZXMgdGhlIGN1cnJlbnQgam9iIHRoYXQgaXMgYmVpbmcgcnVuXG4gICAgLy8gc28gaXQgY2Fubm90IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIGFnYWluLlxuICAgIC8vIGlmIHRoZSBqb2IgaXMgYSB3YXRjaCgpIGNhbGxiYWNrLCB0aGUgc2VhcmNoIHdpbGwgc3RhcnQgd2l0aCBhICsxIGluZGV4IHRvXG4gICAgLy8gYWxsb3cgaXQgcmVjdXJzaXZlbHkgdHJpZ2dlciBpdHNlbGYgLSBpdCBpcyB0aGUgdXNlcidzIHJlc3BvbnNpYmlsaXR5IHRvXG4gICAgLy8gZW5zdXJlIGl0IGRvZXNuJ3QgZW5kIHVwIGluIGFuIGluZmluaXRlIGxvb3AuXG4gICAgaWYgKCFxdWV1ZS5sZW5ndGggfHxcbiAgICAgICAgIXF1ZXVlLmluY2x1ZGVzKGpvYiwgaXNGbHVzaGluZyAmJiBqb2IuYWxsb3dSZWN1cnNlID8gZmx1c2hJbmRleCArIDEgOiBmbHVzaEluZGV4KSkge1xuICAgICAgICBpZiAoam9iLmlkID09IG51bGwpIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goam9iKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShmaW5kSW5zZXJ0aW9uSW5kZXgoam9iLmlkKSwgMCwgam9iKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUZsdXNoKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVldWVGbHVzaCgpIHtcbiAgICBpZiAoIWlzRmx1c2hpbmcgJiYgIWlzRmx1c2hQZW5kaW5nKSB7XG4gICAgICAgIGlzRmx1c2hQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IHJlc29sdmVkUHJvbWlzZS50aGVuKGZsdXNoSm9icyk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW52YWxpZGF0ZUpvYihqb2IpIHtcbiAgICBjb25zdCBpID0gcXVldWUuaW5kZXhPZihqb2IpO1xuICAgIGlmIChpID4gZmx1c2hJbmRleCkge1xuICAgICAgICBxdWV1ZS5zcGxpY2UoaSwgMSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVldWVQb3N0Rmx1c2hDYihjYikge1xuICAgIGlmICghaXNBcnJheShjYikpIHtcbiAgICAgICAgaWYgKCFhY3RpdmVQb3N0Rmx1c2hDYnMgfHxcbiAgICAgICAgICAgICFhY3RpdmVQb3N0Rmx1c2hDYnMuaW5jbHVkZXMoY2IsIGNiLmFsbG93UmVjdXJzZSA/IHBvc3RGbHVzaEluZGV4ICsgMSA6IHBvc3RGbHVzaEluZGV4KSkge1xuICAgICAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5wdXNoKGNiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaWYgY2IgaXMgYW4gYXJyYXksIGl0IGlzIGEgY29tcG9uZW50IGxpZmVjeWNsZSBob29rIHdoaWNoIGNhbiBvbmx5IGJlXG4gICAgICAgIC8vIHRyaWdnZXJlZCBieSBhIGpvYiwgd2hpY2ggaXMgYWxyZWFkeSBkZWR1cGVkIGluIHRoZSBtYWluIHF1ZXVlLCBzb1xuICAgICAgICAvLyB3ZSBjYW4gc2tpcCBkdXBsaWNhdGUgY2hlY2sgaGVyZSB0byBpbXByb3ZlIHBlcmZcbiAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5wdXNoKC4uLmNiKTtcbiAgICB9XG4gICAgcXVldWVGbHVzaCgpO1xufVxuZnVuY3Rpb24gZmx1c2hQcmVGbHVzaENicyhzZWVuLCBcbi8vIGlmIGN1cnJlbnRseSBmbHVzaGluZywgc2tpcCB0aGUgY3VycmVudCBqb2IgaXRzZWxmXG5pID0gaXNGbHVzaGluZyA/IGZsdXNoSW5kZXggKyAxIDogMCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xuICAgIH1cbiAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNiID0gcXVldWVbaV07XG4gICAgICAgIGlmIChjYiAmJiBjYi5wcmUpIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGNiKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGZsdXNoUG9zdEZsdXNoQ2JzKHNlZW4pIHtcbiAgICBpZiAocGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVkdXBlZCA9IFsuLi5uZXcgU2V0KHBlbmRpbmdQb3N0Rmx1c2hDYnMpXTtcbiAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGggPSAwO1xuICAgICAgICAvLyAjMTk0NyBhbHJlYWR5IGhhcyBhY3RpdmUgcXVldWUsIG5lc3RlZCBmbHVzaFBvc3RGbHVzaENicyBjYWxsXG4gICAgICAgIGlmIChhY3RpdmVQb3N0Rmx1c2hDYnMpIHtcbiAgICAgICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5wdXNoKC4uLmRlZHVwZWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IGRlZHVwZWQ7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMuc29ydCgoYSwgYikgPT4gZ2V0SWQoYSkgLSBnZXRJZChiKSk7XG4gICAgICAgIGZvciAocG9zdEZsdXNoSW5kZXggPSAwOyBwb3N0Rmx1c2hJbmRleCA8IGFjdGl2ZVBvc3RGbHVzaENicy5sZW5ndGg7IHBvc3RGbHVzaEluZGV4KyspIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgYWN0aXZlUG9zdEZsdXNoQ2JzW3Bvc3RGbHVzaEluZGV4XSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0oKTtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xuICAgICAgICBwb3N0Rmx1c2hJbmRleCA9IDA7XG4gICAgfVxufVxuY29uc3QgZ2V0SWQgPSAoam9iKSA9PiBqb2IuaWQgPT0gbnVsbCA/IEluZmluaXR5IDogam9iLmlkO1xuY29uc3QgY29tcGFyYXRvciA9IChhLCBiKSA9PiB7XG4gICAgY29uc3QgZGlmZiA9IGdldElkKGEpIC0gZ2V0SWQoYik7XG4gICAgaWYgKGRpZmYgPT09IDApIHtcbiAgICAgICAgaWYgKGEucHJlICYmICFiLnByZSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgaWYgKGIucHJlICYmICFhLnByZSlcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gZGlmZjtcbn07XG5mdW5jdGlvbiBmbHVzaEpvYnMoc2Vlbikge1xuICAgIGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XG4gICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxuICAgIC8vIFRoaXMgZW5zdXJlcyB0aGF0OlxuICAgIC8vIDEuIENvbXBvbmVudHMgYXJlIHVwZGF0ZWQgZnJvbSBwYXJlbnQgdG8gY2hpbGQuIChiZWNhdXNlIHBhcmVudCBpcyBhbHdheXNcbiAgICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQgc28gaXRzIHJlbmRlciBlZmZlY3Qgd2lsbCBoYXZlIHNtYWxsZXJcbiAgICAvLyAgICBwcmlvcml0eSBudW1iZXIpXG4gICAgLy8gMi4gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGR1cmluZyBhIHBhcmVudCBjb21wb25lbnQncyB1cGRhdGUsXG4gICAgLy8gICAgaXRzIHVwZGF0ZSBjYW4gYmUgc2tpcHBlZC5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmF0b3IpO1xuICAgIC8vIGNvbmRpdGlvbmFsIHVzYWdlIG9mIGNoZWNrUmVjdXJzaXZlVXBkYXRlIG11c3QgYmUgZGV0ZXJtaW5lZCBvdXQgb2ZcbiAgICAvLyB0cnkgLi4uIGNhdGNoIGJsb2NrIHNpbmNlIFJvbGx1cCBieSBkZWZhdWx0IGRlLW9wdGltaXplcyB0cmVlc2hha2luZ1xuICAgIC8vIGluc2lkZSB0cnktY2F0Y2guIFRoaXMgY2FuIGxlYXZlIGFsbCB3YXJuaW5nIGNvZGUgdW5zaGFrZWQuIEFsdGhvdWdoXG4gICAgLy8gdGhleSB3b3VsZCBnZXQgZXZlbnR1YWxseSBzaGFrZW4gYnkgYSBtaW5pZmllciBsaWtlIHRlcnNlciwgc29tZSBtaW5pZmllcnNcbiAgICAvLyB3b3VsZCBmYWlsIHRvIGRvIHRoYXQgKGUuZy4gaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2VzYnVpbGQvaXNzdWVzLzE2MTApXG4gICAgY29uc3QgY2hlY2sgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgPyAoam9iKSA9PiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2Vlbiwgam9iKVxuICAgICAgICA6IE5PT1A7XG4gICAgdHJ5IHtcbiAgICAgICAgZm9yIChmbHVzaEluZGV4ID0gMDsgZmx1c2hJbmRleCA8IHF1ZXVlLmxlbmd0aDsgZmx1c2hJbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcbiAgICAgICAgICAgIGlmIChqb2IgJiYgam9iLmFjdGl2ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNoZWNrKGpvYikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBydW5uaW5nOmAsIGpvYi5pZClcbiAgICAgICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoam9iLCBudWxsLCAxNCAvKiBFcnJvckNvZGVzLlNDSEVEVUxFUiAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGZsdXNoSW5kZXggPSAwO1xuICAgICAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICBmbHVzaFBvc3RGbHVzaENicyhzZWVuKTtcbiAgICAgICAgaXNGbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgLy8gc29tZSBwb3N0Rmx1c2hDYiBxdWV1ZWQgam9icyFcbiAgICAgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkcmFpbnMuXG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggfHwgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZsdXNoSm9icyhzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBmbikge1xuICAgIGlmICghc2Vlbi5oYXMoZm4pKSB7XG4gICAgICAgIHNlZW4uc2V0KGZuLCAxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2Vlbi5nZXQoZm4pO1xuICAgICAgICBpZiAoY291bnQgPiBSRUNVUlNJT05fTElNSVQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZm4ub3duZXJJbnN0YW5jZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBpbnN0YW5jZSAmJiBnZXRDb21wb25lbnROYW1lKGluc3RhbmNlLnR5cGUpO1xuICAgICAgICAgICAgd2FybihgTWF4aW11bSByZWN1cnNpdmUgdXBkYXRlcyBleGNlZWRlZCR7Y29tcG9uZW50TmFtZSA/IGAgaW4gY29tcG9uZW50IDwke2NvbXBvbmVudE5hbWV9PmAgOiBgYH0uIGAgK1xuICAgICAgICAgICAgICAgIGBUaGlzIG1lYW5zIHlvdSBoYXZlIGEgcmVhY3RpdmUgZWZmZWN0IHRoYXQgaXMgbXV0YXRpbmcgaXRzIG93biBgICtcbiAgICAgICAgICAgICAgICBgZGVwZW5kZW5jaWVzIGFuZCB0aHVzIHJlY3Vyc2l2ZWx5IHRyaWdnZXJpbmcgaXRzZWxmLiBQb3NzaWJsZSBzb3VyY2VzIGAgK1xuICAgICAgICAgICAgICAgIGBpbmNsdWRlIGNvbXBvbmVudCB0ZW1wbGF0ZSwgcmVuZGVyIGZ1bmN0aW9uLCB1cGRhdGVkIGhvb2sgb3IgYCArXG4gICAgICAgICAgICAgICAgYHdhdGNoZXIgc291cmNlIGZ1bmN0aW9uLmApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWVuLnNldChmbiwgY291bnQgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG5sZXQgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuY29uc3QgaG1yRGlydHlDb21wb25lbnRzID0gbmV3IFNldCgpO1xuLy8gRXhwb3NlIHRoZSBITVIgcnVudGltZSBvbiB0aGUgZ2xvYmFsIG9iamVjdFxuLy8gVGhpcyBtYWtlcyBpdCBlbnRpcmVseSB0cmVlLXNoYWthYmxlIHdpdGhvdXQgcG9sbHV0aW5nIHRoZSBleHBvcnRzIGFuZCBtYWtlc1xuLy8gaXQgZWFzaWVyIHRvIGJlIHVzZWQgaW4gdG9vbGluZ3MgbGlrZSB2dWUtbG9hZGVyXG4vLyBOb3RlOiBmb3IgYSBjb21wb25lbnQgdG8gYmUgZWxpZ2libGUgZm9yIEhNUiBpdCBhbHNvIG5lZWRzIHRoZSBfX2htcklkIG9wdGlvblxuLy8gdG8gYmUgc2V0IHNvIHRoYXQgaXRzIGluc3RhbmNlcyBjYW4gYmUgcmVnaXN0ZXJlZCAvIHJlbW92ZWQuXG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0hNUl9SVU5USU1FX18gPSB7XG4gICAgICAgIGNyZWF0ZVJlY29yZDogdHJ5V3JhcChjcmVhdGVSZWNvcmQpLFxuICAgICAgICByZXJlbmRlcjogdHJ5V3JhcChyZXJlbmRlciksXG4gICAgICAgIHJlbG9hZDogdHJ5V3JhcChyZWxvYWQpXG4gICAgfTtcbn1cbmNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gICAgY29uc3QgaWQgPSBpbnN0YW5jZS50eXBlLl9faG1ySWQ7XG4gICAgbGV0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIGlmICghcmVjb3JkKSB7XG4gICAgICAgIGNyZWF0ZVJlY29yZChpZCwgaW5zdGFuY2UudHlwZSk7XG4gICAgICAgIHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIH1cbiAgICByZWNvcmQuaW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gICAgbWFwLmdldChpbnN0YW5jZS50eXBlLl9faG1ySWQpLmluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVjb3JkKGlkLCBpbml0aWFsRGVmKSB7XG4gICAgaWYgKG1hcC5oYXMoaWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbWFwLnNldChpZCwge1xuICAgICAgICBpbml0aWFsRGVmOiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbml0aWFsRGVmKSxcbiAgICAgICAgaW5zdGFuY2VzOiBuZXcgU2V0KClcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIHJldHVybiBpc0NsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQuX192Y2NPcHRzIDogY29tcG9uZW50O1xufVxuZnVuY3Rpb24gcmVyZW5kZXIoaWQsIG5ld1JlbmRlcikge1xuICAgIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICAgIGlmICghcmVjb3JkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdXBkYXRlIGluaXRpYWwgcmVjb3JkIChmb3Igbm90LXlldC1yZW5kZXJlZCBjb21wb25lbnQpXG4gICAgcmVjb3JkLmluaXRpYWxEZWYucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgIFsuLi5yZWNvcmQuaW5zdGFuY2VzXS5mb3JFYWNoKGluc3RhbmNlID0+IHtcbiAgICAgICAgaWYgKG5ld1JlbmRlcikge1xuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSkucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLnJlbmRlckNhY2hlID0gW107XG4gICAgICAgIC8vIHRoaXMgZmxhZyBmb3JjZXMgY2hpbGQgY29tcG9uZW50cyB3aXRoIHNsb3QgY29udGVudCB0byB1cGRhdGVcbiAgICAgICAgaXNIbXJVcGRhdGluZyA9IHRydWU7XG4gICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICBpc0htclVwZGF0aW5nID0gZmFsc2U7XG4gICAgfSk7XG59XG5mdW5jdGlvbiByZWxvYWQoaWQsIG5ld0NvbXApIHtcbiAgICBjb25zdCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlY29yZClcbiAgICAgICAgcmV0dXJuO1xuICAgIG5ld0NvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChuZXdDb21wKTtcbiAgICAvLyB1cGRhdGUgaW5pdGlhbCBkZWYgKGZvciBub3QteWV0LXJlbmRlcmVkIGNvbXBvbmVudHMpXG4gICAgdXBkYXRlQ29tcG9uZW50RGVmKHJlY29yZC5pbml0aWFsRGVmLCBuZXdDb21wKTtcbiAgICAvLyBjcmVhdGUgYSBzbmFwc2hvdCB3aGljaCBhdm9pZHMgdGhlIHNldCBiZWluZyBtdXRhdGVkIGR1cmluZyB1cGRhdGVzXG4gICAgY29uc3QgaW5zdGFuY2VzID0gWy4uLnJlY29yZC5pbnN0YW5jZXNdO1xuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XG4gICAgICAgIGNvbnN0IG9sZENvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgaWYgKCFobXJEaXJ0eUNvbXBvbmVudHMuaGFzKG9sZENvbXApKSB7XG4gICAgICAgICAgICAvLyAxLiBVcGRhdGUgZXhpc3RpbmcgY29tcCBkZWZpbml0aW9uIHRvIG1hdGNoIG5ldyBvbmVcbiAgICAgICAgICAgIGlmIChvbGRDb21wICE9PSByZWNvcmQuaW5pdGlhbERlZikge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIDIuIG1hcmsgZGVmaW5pdGlvbiBkaXJ0eS4gVGhpcyBmb3JjZXMgdGhlIHJlbmRlcmVyIHRvIHJlcGxhY2UgdGhlXG4gICAgICAgICAgICAvLyBjb21wb25lbnQgb24gcGF0Y2guXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIGludmFsaWRhdGUgb3B0aW9ucyByZXNvbHV0aW9uIGNhY2hlXG4gICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICAgICAgLy8gNC4gYWN0dWFsbHkgdXBkYXRlXG4gICAgICAgIGlmIChpbnN0YW5jZS5jZVJlbG9hZCkge1xuICAgICAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnRcbiAgICAgICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5hZGQob2xkQ29tcCk7XG4gICAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG9sZENvbXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgICAgICAgLy8gNC4gRm9yY2UgdGhlIHBhcmVudCBpbnN0YW5jZSB0byByZS1yZW5kZXIuIFRoaXMgd2lsbCBjYXVzZSBhbGwgdXBkYXRlZFxuICAgICAgICAgICAgLy8gY29tcG9uZW50cyB0byBiZSB1bm1vdW50ZWQgYW5kIHJlLW1vdW50ZWQuIFF1ZXVlIHRoZSB1cGRhdGUgc28gdGhhdCB3ZVxuICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHVwIGZvcmNpbmcgdGhlIHNhbWUgcGFyZW50IHRvIHJlLXJlbmRlciBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKSB7XG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIG1vdW50ZWQgdmlhIGNyZWF0ZUFwcCgpIGhhcyBhIHJlbG9hZCBtZXRob2RcbiAgICAgICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2UgaW5zaWRlIHRyZWUgY3JlYXRlZCB2aWEgcmF3IHJlbmRlcigpLiBGb3JjZSByZWxvYWQuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tITVJdIFJvb3Qgb3IgbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSBtb2RpZmllZC4gRnVsbCByZWxvYWQgcmVxdWlyZWQuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gNS4gbWFrZSBzdXJlIHRvIGNsZWFudXAgZGlydHkgaG1yIGNvbXBvbmVudHMgYWZ0ZXIgdXBkYXRlXG4gICAgcXVldWVQb3N0Rmx1c2hDYigoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApIHtcbiAgICBleHRlbmQob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xuICAgICAgICBpZiAoa2V5ICE9PSAnX19maWxlJyAmJiAhKGtleSBpbiBuZXdDb21wKSkge1xuICAgICAgICAgICAgZGVsZXRlIG9sZENvbXBba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeVdyYXAoZm4pIHtcbiAgICByZXR1cm4gKGlkLCBhcmcpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmbihpZCwgYXJnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0hNUl0gU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIFZ1ZSBjb21wb25lbnQgaG90LXJlbG9hZC4gYCArXG4gICAgICAgICAgICAgICAgYEZ1bGwgcmVsb2FkIHJlcXVpcmVkLmApO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxubGV0IGRldnRvb2xzO1xubGV0IGJ1ZmZlciA9IFtdO1xubGV0IGRldnRvb2xzTm90SW5zdGFsbGVkID0gZmFsc2U7XG5mdW5jdGlvbiBlbWl0JDEoZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgICAgZGV2dG9vbHMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFkZXZ0b29sc05vdEluc3RhbGxlZCkge1xuICAgICAgICBidWZmZXIucHVzaCh7IGV2ZW50LCBhcmdzIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldERldnRvb2xzSG9vayhob29rLCB0YXJnZXQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGRldnRvb2xzID0gaG9vaztcbiAgICBpZiAoZGV2dG9vbHMpIHtcbiAgICAgICAgZGV2dG9vbHMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJ1ZmZlci5mb3JFYWNoKCh7IGV2ZW50LCBhcmdzIH0pID0+IGRldnRvb2xzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpKTtcbiAgICAgICAgYnVmZmVyID0gW107XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgIC8vIGhhbmRsZSBsYXRlIGRldnRvb2xzIGluamVjdGlvbiAtIG9ubHkgZG8gdGhpcyBpZiB3ZSBhcmUgaW4gYW4gYWN0dWFsXG4gICAgLy8gYnJvd3NlciBlbnZpcm9ubWVudCB0byBhdm9pZCB0aGUgdGltZXIgaGFuZGxlIHN0YWxsaW5nIHRlc3QgcnVubmVyIGV4aXRcbiAgICAvLyAoIzQ4MTUpXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgLy8gc29tZSBlbnZzIG1vY2sgd2luZG93IGJ1dCBub3QgZnVsbHlcbiAgICAgICAgd2luZG93LkhUTUxFbGVtZW50ICYmXG4gICAgICAgIC8vIGFsc28gZXhjbHVkZSBqc2RvbVxuICAgICAgICAhKChfYiA9IChfYSA9IHdpbmRvdy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51c2VyQWdlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcygnanNkb20nKSkpIHtcbiAgICAgICAgY29uc3QgcmVwbGF5ID0gKHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fID1cbiAgICAgICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fIHx8IFtdKTtcbiAgICAgICAgcmVwbGF5LnB1c2goKG5ld0hvb2spID0+IHtcbiAgICAgICAgICAgIHNldERldnRvb2xzSG9vayhuZXdIb29rLCB0YXJnZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gY2xlYXIgYnVmZmVyIGFmdGVyIDNzIC0gdGhlIHVzZXIgcHJvYmFibHkgZG9lc24ndCBoYXZlIGRldnRvb2xzIGluc3RhbGxlZFxuICAgICAgICAvLyBhdCBhbGwsIGFuZCBrZWVwaW5nIHRoZSBidWZmZXIgd2lsbCBjYXVzZSBtZW1vcnkgbGVha3MgKCM0NzM4KVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICghZGV2dG9vbHMpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9IG51bGw7XG4gICAgICAgICAgICAgICAgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG5vbi1icm93c2VyIGVudiwgYXNzdW1lIG5vdCBpbnN0YWxsZWRcbiAgICAgICAgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSB0cnVlO1xuICAgICAgICBidWZmZXIgPSBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXZ0b29sc0luaXRBcHAoYXBwLCB2ZXJzaW9uKSB7XG4gICAgZW1pdCQxKFwiYXBwOmluaXRcIiAvKiBEZXZ0b29sc0hvb2tzLkFQUF9JTklUICovLCBhcHAsIHZlcnNpb24sIHtcbiAgICAgICAgRnJhZ21lbnQsXG4gICAgICAgIFRleHQsXG4gICAgICAgIENvbW1lbnQsXG4gICAgICAgIFN0YXRpY1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZGV2dG9vbHNVbm1vdW50QXBwKGFwcCkge1xuICAgIGVtaXQkMShcImFwcDp1bm1vdW50XCIgLyogRGV2dG9vbHNIb29rcy5BUFBfVU5NT1VOVCAqLywgYXBwKTtcbn1cbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDphZGRlZFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX0FEREVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IFxuLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX1VQREFURUQgKi8pO1xuY29uc3QgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBEZXZ0b29sc0hvb2tzLkNPTVBPTkVOVF9SRU1PVkVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IChjb21wb25lbnQpID0+IHtcbiAgICBpZiAoZGV2dG9vbHMgJiZcbiAgICAgICAgdHlwZW9mIGRldnRvb2xzLmNsZWFudXBCdWZmZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBjb21wb25lbnQgaWYgaXQgd2Fzbid0IGJ1ZmZlcmVkXG4gICAgICAgICFkZXZ0b29scy5jbGVhbnVwQnVmZmVyKGNvbXBvbmVudCkpIHtcbiAgICAgICAgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChjb21wb25lbnQpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soaG9vaykge1xuICAgIHJldHVybiAoY29tcG9uZW50KSA9PiB7XG4gICAgICAgIGVtaXQkMShob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudC5wYXJlbnQgPyBjb21wb25lbnQucGFyZW50LnVpZCA6IHVuZGVmaW5lZCwgY29tcG9uZW50KTtcbiAgICB9O1xufVxuY29uc3QgZGV2dG9vbHNQZXJmU3RhcnQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjpzdGFydFwiIC8qIERldnRvb2xzSG9va3MuUEVSRk9STUFOQ0VfU1RBUlQgKi8pO1xuY29uc3QgZGV2dG9vbHNQZXJmRW5kID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6ZW5kXCIgLyogRGV2dG9vbHNIb29rcy5QRVJGT1JNQU5DRV9FTkQgKi8pO1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soaG9vaykge1xuICAgIHJldHVybiAoY29tcG9uZW50LCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgICAgIGVtaXQkMShob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudCwgdHlwZSwgdGltZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcbiAgICBlbWl0JDEoXCJjb21wb25lbnQ6ZW1pdFwiIC8qIERldnRvb2xzSG9va3MuQ09NUE9ORU5UX0VNSVQgKi8sIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LCBldmVudCwgcGFyYW1zKTtcbn1cblxuZnVuY3Rpb24gZW1pdChpbnN0YW5jZSwgZXZlbnQsIC4uLnJhd0FyZ3MpIHtcbiAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBwcm9wcyA9IGluc3RhbmNlLnZub2RlLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IHsgZW1pdHNPcHRpb25zLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKGVtaXRzT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCEoZXZlbnQgaW4gZW1pdHNPcHRpb25zKSAmJlxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICAgICAgICAgIGlmICghcHJvcHNPcHRpb25zIHx8ICEodG9IYW5kbGVyS2V5KGV2ZW50KSBpbiBwcm9wc09wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBlbWl0dGVkIGV2ZW50IFwiJHtldmVudH1cIiBidXQgaXQgaXMgbmVpdGhlciBkZWNsYXJlZCBpbiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGV2ZW50KX1cIiBwcm9wLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGVtaXRzT3B0aW9uc1tldmVudF07XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdG9yKC4uLnJhd0FyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgZXZlbnQgYXJndW1lbnRzOiBldmVudCB2YWxpZGF0aW9uIGZhaWxlZCBmb3IgZXZlbnQgXCIke2V2ZW50fVwiLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBhcmdzID0gcmF3QXJncztcbiAgICBjb25zdCBpc01vZGVsTGlzdGVuZXIgPSBldmVudC5zdGFydHNXaXRoKCd1cGRhdGU6Jyk7XG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFwcGx5IG1vZGlmaWVycyBvbiBhcmdzXG4gICAgY29uc3QgbW9kZWxBcmcgPSBpc01vZGVsTGlzdGVuZXIgJiYgZXZlbnQuc2xpY2UoNyk7XG4gICAgaWYgKG1vZGVsQXJnICYmIG1vZGVsQXJnIGluIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVyc0tleSA9IGAke21vZGVsQXJnID09PSAnbW9kZWxWYWx1ZScgPyAnbW9kZWwnIDogbW9kZWxBcmd9TW9kaWZpZXJzYDtcbiAgICAgICAgY29uc3QgeyBudW1iZXIsIHRyaW0gfSA9IHByb3BzW21vZGlmaWVyc0tleV0gfHwgRU1QVFlfT0JKO1xuICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGEgPT4gKGlzU3RyaW5nKGEpID8gYS50cmltKCkgOiBhKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bWJlcikge1xuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGxvb3NlVG9OdW1iZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKGxvd2VyQ2FzZUV2ZW50ICE9PSBldmVudCAmJiBwcm9wc1t0b0hhbmRsZXJLZXkobG93ZXJDYXNlRXZlbnQpXSkge1xuICAgICAgICAgICAgd2FybihgRXZlbnQgXCIke2xvd2VyQ2FzZUV2ZW50fVwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50IGAgK1xuICAgICAgICAgICAgICAgIGAke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIGluc3RhbmNlLnR5cGUpfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBgICtcbiAgICAgICAgICAgICAgICBgTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2UgYCArXG4gICAgICAgICAgICAgICAgYHYtb24gdG8gbGlzdGVuIHRvIGNhbWVsQ2FzZSBldmVudHMgd2hlbiB1c2luZyBpbi1ET00gdGVtcGxhdGVzLiBgICtcbiAgICAgICAgICAgICAgICBgWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShldmVudCl9XCIgaW5zdGVhZCBvZiBcIiR7ZXZlbnR9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGhhbmRsZXJOYW1lO1xuICAgIGxldCBoYW5kbGVyID0gcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGV2ZW50KSldIHx8XG4gICAgICAgIC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcbiAgICAgICAgcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSkpXTtcbiAgICAvLyBmb3Igdi1tb2RlbCB1cGRhdGU6eHh4IGV2ZW50cywgYWxzbyB0cmlnZ2VyIGtlYmFiLWNhc2UgZXF1aXZhbGVudFxuICAgIC8vIGZvciBwcm9wcyBwYXNzZWQgdmlhIGtlYmFiLWNhc2VcbiAgICBpZiAoIWhhbmRsZXIgJiYgaXNNb2RlbExpc3RlbmVyKSB7XG4gICAgICAgIGhhbmRsZXIgPSBwcm9wc1soaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoaHlwaGVuYXRlKGV2ZW50KSkpXTtcbiAgICB9XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaGFuZGxlciwgaW5zdGFuY2UsIDYgLyogRXJyb3JDb2Rlcy5DT01QT05FTlRfRVZFTlRfSEFORExFUiAqLywgYXJncyk7XG4gICAgfVxuICAgIGNvbnN0IG9uY2VIYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgKyBgT25jZWBdO1xuICAgIGlmIChvbmNlSGFuZGxlcikge1xuICAgICAgICBpZiAoIWluc3RhbmNlLmVtaXR0ZWQpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmVtaXR0ZWQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5lbWl0dGVkW2hhbmRsZXJOYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLmVtaXR0ZWRbaGFuZGxlck5hbWVdID0gdHJ1ZTtcbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcob25jZUhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIEVycm9yQ29kZXMuQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVIgKi8sIGFyZ3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcbiAgICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQuZW1pdHNDYWNoZTtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJhdyA9IGNvbXAuZW1pdHM7XG4gICAgbGV0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgICAvLyBhcHBseSBtaXhpbi9leHRlbmRzIHByb3BzXG4gICAgbGV0IGhhc0V4dGVuZHMgPSBmYWxzZTtcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgICAgICBjb25zdCBleHRlbmRFbWl0cyA9IChyYXcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGcm9tRXh0ZW5kID0gbm9ybWFsaXplRW1pdHNPcHRpb25zKHJhdywgYXBwQ29udGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZEZyb21FeHRlbmQpIHtcbiAgICAgICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgbm9ybWFsaXplZEZyb21FeHRlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICAgICAgICBleHRlbmRFbWl0cyhjb21wLmV4dGVuZHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wLm1peGlucykge1xuICAgICAgICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICAgICAgICBjYWNoZS5zZXQoY29tcCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgcmF3LmZvckVhY2goa2V5ID0+IChub3JtYWxpemVkW2tleV0gPSBudWxsKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgcmF3KTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICAgIGNhY2hlLnNldChjb21wLCBub3JtYWxpemVkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG4vLyBDaGVjayBpZiBhbiBpbmNvbWluZyBwcm9wIGtleSBpcyBhIGRlY2xhcmVkIGVtaXQgZXZlbnQgbGlzdGVuZXIuXG4vLyBlLmcuIFdpdGggYGVtaXRzOiB7IGNsaWNrOiBudWxsIH1gLCBwcm9wcyBuYW1lZCBgb25DbGlja2AgYW5kIGBvbmNsaWNrYCBhcmVcbi8vIGJvdGggY29uc2lkZXJlZCBtYXRjaGVkIGxpc3RlbmVycy5cbmZ1bmN0aW9uIGlzRW1pdExpc3RlbmVyKG9wdGlvbnMsIGtleSkge1xuICAgIGlmICghb3B0aW9ucyB8fCAhaXNPbihrZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAga2V5ID0ga2V5LnNsaWNlKDIpLnJlcGxhY2UoL09uY2UkLywgJycpO1xuICAgIHJldHVybiAoaGFzT3duKG9wdGlvbnMsIGtleVswXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpKSB8fFxuICAgICAgICBoYXNPd24ob3B0aW9ucywgaHlwaGVuYXRlKGtleSkpIHx8XG4gICAgICAgIGhhc093bihvcHRpb25zLCBrZXkpKTtcbn1cblxuLyoqXG4gKiBtYXJrIHRoZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZSBmb3IgYXNzZXQgcmVzb2x1dGlvbiAoZS5nLlxuICogcmVzb2x2ZUNvbXBvbmVudCwgcmVzb2x2ZURpcmVjdGl2ZSkgZHVyaW5nIHJlbmRlclxuICovXG5sZXQgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gbnVsbDtcbmxldCBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG4vKipcbiAqIE5vdGU6IHJlbmRlcmluZyBjYWxscyBtYXliZSBuZXN0ZWQuIFRoZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBwYXJlbnQgcmVuZGVyaW5nXG4gKiBpbnN0YW5jZSBpZiBwcmVzZW50LCB3aGljaCBzaG91bGQgYmUgcmVzdG9yZWQgYWZ0ZXIgdGhlIHJlbmRlciBpcyBkb25lOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwcmV2ID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGkpXG4gKiAvLyAuLi5yZW5kZXJcbiAqIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGNvbnN0IHByZXYgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgY3VycmVudFNjb3BlSWQgPSAoaW5zdGFuY2UgJiYgaW5zdGFuY2UudHlwZS5fX3Njb3BlSWQpIHx8IG51bGw7XG4gICAgcmV0dXJuIHByZXY7XG59XG4vKipcbiAqIFNldCBzY29wZSBpZCB3aGVuIGNyZWF0aW5nIGhvaXN0ZWQgdm5vZGVzLlxuICogQHByaXZhdGUgY29tcGlsZXIgaGVscGVyXG4gKi9cbmZ1bmN0aW9uIHB1c2hTY29wZUlkKGlkKSB7XG4gICAgY3VycmVudFNjb3BlSWQgPSBpZDtcbn1cbi8qKlxuICogVGVjaG5pY2FsbHkgd2Ugbm8gbG9uZ2VyIG5lZWQgdGhpcyBhZnRlciAzLjAuOCBidXQgd2UgbmVlZCB0byBrZWVwIHRoZSBzYW1lXG4gKiBBUEkgZm9yIGJhY2t3YXJkcyBjb21wYXQgdy8gY29kZSBnZW5lcmF0ZWQgYnkgY29tcGlsZXJzLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcG9wU2NvcGVJZCgpIHtcbiAgICBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG59XG4vKipcbiAqIE9ubHkgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHdpdGhTY29wZUlkID0gKF9pZCkgPT4gd2l0aEN0eDtcbi8qKlxuICogV3JhcCBhIHNsb3QgZnVuY3Rpb24gdG8gbWVtb2l6ZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZVxuICogQHByaXZhdGUgY29tcGlsZXIgaGVscGVyXG4gKi9cbmZ1bmN0aW9uIHdpdGhDdHgoZm4sIGN0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgaXNOb25TY29wZWRTbG90IC8vIGZhbHNlIG9ubHlcbikge1xuICAgIGlmICghY3R4KVxuICAgICAgICByZXR1cm4gZm47XG4gICAgLy8gYWxyZWFkeSBub3JtYWxpemVkXG4gICAgaWYgKGZuLl9uKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gICAgY29uc3QgcmVuZGVyRm5XaXRoQ29udGV4dCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIElmIGEgdXNlciBjYWxscyBhIGNvbXBpbGVkIHNsb3QgaW5zaWRlIGEgdGVtcGxhdGUgZXhwcmVzc2lvbiAoIzE3NDUpLCBpdFxuICAgICAgICAvLyBjYW4gbWVzcyB1cCBibG9jayB0cmFja2luZywgc28gYnkgZGVmYXVsdCB3ZSBkaXNhYmxlIGJsb2NrIHRyYWNraW5nIGFuZFxuICAgICAgICAvLyBmb3JjZSBiYWlsIG91dCB3aGVuIGludm9raW5nIGEgY29tcGlsZWQgc2xvdCAoaW5kaWNhdGVkIGJ5IHRoZSAuX2QgZmxhZykuXG4gICAgICAgIC8vIFRoaXMgaXNuJ3QgbmVjZXNzYXJ5IGlmIHJlbmRlcmluZyBhIGNvbXBpbGVkIGA8c2xvdD5gLCBzbyB3ZSBmbGlwIHRoZVxuICAgICAgICAvLyAuX2QgZmxhZyBvZmYgd2hlbiBpbnZva2luZyB0aGUgd3JhcHBlZCBmbiBpbnNpZGUgYHJlbmRlclNsb3RgLlxuICAgICAgICBpZiAocmVuZGVyRm5XaXRoQ29udGV4dC5fZCkge1xuICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldkluc3RhbmNlID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGN0eCk7XG4gICAgICAgIGxldCByZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXMgPSBmbiguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2SW5zdGFuY2UpO1xuICAgICAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgICAgICAgICBzZXRCbG9ja1RyYWNraW5nKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoY3R4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgLy8gbWFyayBub3JtYWxpemVkIHRvIGF2b2lkIGR1cGxpY2F0ZWQgd3JhcHBpbmdcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9uID0gdHJ1ZTtcbiAgICAvLyBtYXJrIHRoaXMgYXMgY29tcGlsZWQgYnkgZGVmYXVsdFxuICAgIC8vIHRoaXMgaXMgdXNlZCBpbiB2bm9kZS50cyAtPiBub3JtYWxpemVDaGlsZHJlbigpIHRvIHNldCB0aGUgc2xvdFxuICAgIC8vIHJlbmRlcmluZyBmbGFnLlxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX2MgPSB0cnVlO1xuICAgIC8vIGRpc2FibGUgYmxvY2sgdHJhY2tpbmcgYnkgZGVmYXVsdFxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX2QgPSB0cnVlO1xuICAgIHJldHVybiByZW5kZXJGbldpdGhDb250ZXh0O1xufVxuXG4vKipcbiAqIGRldiBvbmx5IGZsYWcgdG8gdHJhY2sgd2hldGhlciAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlci5cbiAqIElmICRhdHRycyB3YXMgdXNlZCBkdXJpbmcgcmVuZGVyIHRoZW4gdGhlIHdhcm5pbmcgZm9yIGZhaWxlZCBhdHRyc1xuICogZmFsbHRocm91Z2ggY2FuIGJlIHN1cHByZXNzZWQuXG4gKi9cbmxldCBhY2Nlc3NlZEF0dHJzID0gZmFsc2U7XG5mdW5jdGlvbiBtYXJrQXR0cnNBY2Nlc3NlZCgpIHtcbiAgICBhY2Nlc3NlZEF0dHJzID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IHR5cGU6IENvbXBvbmVudCwgdm5vZGUsIHByb3h5LCB3aXRoUHJveHksIHByb3BzLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdLCBzbG90cywgYXR0cnMsIGVtaXQsIHJlbmRlciwgcmVuZGVyQ2FjaGUsIGRhdGEsIHNldHVwU3RhdGUsIGN0eCwgaW5oZXJpdEF0dHJzIH0gPSBpbnN0YW5jZTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBmYWxsdGhyb3VnaEF0dHJzO1xuICAgIGNvbnN0IHByZXYgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgLy8gd2l0aFByb3h5IGlzIGEgcHJveHkgd2l0aCBhIGRpZmZlcmVudCBgaGFzYCB0cmFwIG9ubHkgZm9yXG4gICAgICAgICAgICAvLyBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrLlxuICAgICAgICAgICAgY29uc3QgcHJveHlUb1VzZSA9IHdpdGhQcm94eSB8fCBwcm94eTtcbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5jYWxsKHByb3h5VG9Vc2UsIHByb3h5VG9Vc2UsIHJlbmRlckNhY2hlLCBwcm9wcywgc2V0dXBTdGF0ZSwgZGF0YSwgY3R4KSk7XG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gYXR0cnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbmFsXG4gICAgICAgICAgICBjb25zdCByZW5kZXIgPSBDb21wb25lbnQ7XG4gICAgICAgICAgICAvLyBpbiBkZXYsIG1hcmsgYXR0cnMgYWNjZXNzZWQgaWYgb3B0aW9uYWwgcHJvcHMgKGF0dHJzID09PSBwcm9wcylcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYXR0cnMgPT09IHByb3BzKSB7XG4gICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgPyByZW5kZXIocHJvcHMsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHsgYXR0cnMsIHNsb3RzLCBlbWl0IH0pXG4gICAgICAgICAgICAgICAgOiByZW5kZXIocHJvcHMsIG51bGwgLyogd2Uga25vdyBpdCBkb2Vzbid0IG5lZWQgaXQgKi8pKTtcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBDb21wb25lbnQucHJvcHNcbiAgICAgICAgICAgICAgICA/IGF0dHJzXG4gICAgICAgICAgICAgICAgOiBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2goYXR0cnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgYmxvY2tTdGFjay5sZW5ndGggPSAwO1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAxIC8qIEVycm9yQ29kZXMuUkVOREVSX0ZVTkNUSU9OICovKTtcbiAgICAgICAgcmVzdWx0ID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gICAgfVxuICAgIC8vIGF0dHIgbWVyZ2luZ1xuICAgIC8vIGluIGRldiBtb2RlLCBjb21tZW50cyBhcmUgcHJlc2VydmVkLCBhbmQgaXQncyBwb3NzaWJsZSBmb3IgYSB0ZW1wbGF0ZVxuICAgIC8vIHRvIGhhdmUgY29tbWVudHMgYWxvbmcgc2lkZSB0aGUgcm9vdCBlbGVtZW50IHdoaWNoIG1ha2VzIGl0IGEgZnJhZ21lbnRcbiAgICBsZXQgcm9vdCA9IHJlc3VsdDtcbiAgICBsZXQgc2V0Um9vdCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIHJlc3VsdC5wYXRjaEZsYWcgPiAwICYmXG4gICAgICAgIHJlc3VsdC5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pIHtcbiAgICAgICAgW3Jvb3QsIHNldFJvb3RdID0gZ2V0Q2hpbGRSb290KHJlc3VsdCk7XG4gICAgfVxuICAgIGlmIChmYWxsdGhyb3VnaEF0dHJzICYmIGluaGVyaXRBdHRycyAhPT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZhbGx0aHJvdWdoQXR0cnMpO1xuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gcm9vdDtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgKDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovIHwgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHNPcHRpb25zICYmIGtleXMuc29tZShpc01vZGVsTGlzdGVuZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgdi1tb2RlbCBsaXN0ZW5lciAob25VcGRhdGU6eHh4KSBoYXMgYSBjb3JyZXNwb25kaW5nIGRlY2xhcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3AsIGl0IGluZGljYXRlcyB0aGlzIGNvbXBvbmVudCBleHBlY3RzIHRvIGhhbmRsZSB2LW1vZGVsIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBzaG91bGQgbm90IGZhbGx0aHJvdWdoLlxuICAgICAgICAgICAgICAgICAgICAvLyByZWxhdGVkOiAjMTU0MywgIzE2NDMsICMxOTg5XG4gICAgICAgICAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBmaWx0ZXJNb2RlbExpc3RlbmVycyhmYWxsdGhyb3VnaEF0dHJzLCBwcm9wc09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb290ID0gY2xvbmVWTm9kZShyb290LCBmYWxsdGhyb3VnaEF0dHJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWNjZXNzZWRBdHRycyAmJiByb290LnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxBdHRycyA9IE9iamVjdC5rZXlzKGF0dHJzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEF0dHJzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmFBdHRycyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWxsQXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFsbEF0dHJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPbihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdi1tb2RlbCBoYW5kbGVycyB3aGVuIHRoZXkgZmFpbCB0byBmYWxsdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBgb25gLCBsb3dlcmNhc2UgZmlyc3QgbGV0dGVyIHRvIHJlZmxlY3QgZXZlbnQgY2FzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjdXJhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QXR0cnMucHVzaChrZXlbMl0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXh0cmFBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRXh0cmFuZW91cyBub24tcHJvcHMgYXR0cmlidXRlcyAoYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtleHRyYUF0dHJzLmpvaW4oJywgJyl9KSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEV4dHJhbmVvdXMgbm9uLWVtaXRzIGV2ZW50IGxpc3RlbmVycyAoYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtldmVudEF0dHJzLmpvaW4oJywgJyl9KSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgcm9vdCBub2Rlcy4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgSWYgdGhlIGxpc3RlbmVyIGlzIGludGVuZGVkIHRvIGJlIGEgY29tcG9uZW50IGN1c3RvbSBldmVudCBsaXN0ZW5lciBvbmx5LCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBkZWNsYXJlIGl0IHVzaW5nIHRoZSBcImVtaXRzXCIgb3B0aW9uLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBpbmhlcml0IGRpcmVjdGl2ZXNcbiAgICBpZiAodm5vZGUuZGlycykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICAgICAgICB3YXJuKGBSdW50aW1lIGRpcmVjdGl2ZSB1c2VkIG9uIGNvbXBvbmVudCB3aXRoIG5vbi1lbGVtZW50IHJvb3Qgbm9kZS4gYCArXG4gICAgICAgICAgICAgICAgYFRoZSBkaXJlY3RpdmVzIHdpbGwgbm90IGZ1bmN0aW9uIGFzIGludGVuZGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsb25lIGJlZm9yZSBtdXRhdGluZyBzaW5jZSB0aGUgcm9vdCBtYXkgYmUgYSBob2lzdGVkIHZub2RlXG4gICAgICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QpO1xuICAgICAgICByb290LmRpcnMgPSByb290LmRpcnMgPyByb290LmRpcnMuY29uY2F0KHZub2RlLmRpcnMpIDogdm5vZGUuZGlycztcbiAgICB9XG4gICAgLy8gaW5oZXJpdCB0cmFuc2l0aW9uIGRhdGFcbiAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgaW5zaWRlIDxUcmFuc2l0aW9uPiByZW5kZXJzIG5vbi1lbGVtZW50IHJvb3Qgbm9kZSBgICtcbiAgICAgICAgICAgICAgICBgdGhhdCBjYW5ub3QgYmUgYW5pbWF0ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdC50cmFuc2l0aW9uID0gdm5vZGUudHJhbnNpdGlvbjtcbiAgICB9XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBzZXRSb290KSB7XG4gICAgICAgIHNldFJvb3Qocm9vdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHQgPSByb290O1xuICAgIH1cbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqIEluIGRldiBtb2RlLCB0ZW1wbGF0ZSByb290IGxldmVsIGNvbW1lbnRzIGFyZSByZW5kZXJlZCwgd2hpY2ggdHVybnMgdGhlXG4gKiB0ZW1wbGF0ZSBpbnRvIGEgZnJhZ21lbnQgcm9vdCwgYnV0IHdlIG5lZWQgdG8gbG9jYXRlIHRoZSBzaW5nbGUgZWxlbWVudFxuICogcm9vdCBmb3IgYXR0cnMgYW5kIHNjb3BlIGlkIHByb2Nlc3NpbmcuXG4gKi9cbmNvbnN0IGdldENoaWxkUm9vdCA9ICh2bm9kZSkgPT4ge1xuICAgIGNvbnN0IHJhd0NoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgY29uc3QgZHluYW1pY0NoaWxkcmVuID0gdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgIGNvbnN0IGNoaWxkUm9vdCA9IGZpbHRlclNpbmdsZVJvb3QocmF3Q2hpbGRyZW4pO1xuICAgIGlmICghY2hpbGRSb290KSB7XG4gICAgICAgIHJldHVybiBbdm5vZGUsIHVuZGVmaW5lZF07XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gcmF3Q2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpO1xuICAgIGNvbnN0IGR5bmFtaWNJbmRleCA9IGR5bmFtaWNDaGlsZHJlbiA/IGR5bmFtaWNDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCkgOiAtMTtcbiAgICBjb25zdCBzZXRSb290ID0gKHVwZGF0ZWRSb290KSA9PiB7XG4gICAgICAgIHJhd0NoaWxkcmVuW2luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoZHluYW1pY0luZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW5bZHluYW1pY0luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodXBkYXRlZFJvb3QucGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IFsuLi5keW5hbWljQ2hpbGRyZW4sIHVwZGF0ZWRSb290XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFtub3JtYWxpemVWTm9kZShjaGlsZFJvb3QpLCBzZXRSb290XTtcbn07XG5mdW5jdGlvbiBmaWx0ZXJTaW5nbGVSb290KGNoaWxkcmVuKSB7XG4gICAgbGV0IHNpbmdsZVJvb3Q7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoaXNWTm9kZShjaGlsZCkpIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB1c2VyIGNvbW1lbnRcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9PSBDb21tZW50IHx8IGNoaWxkLmNoaWxkcmVuID09PSAndi1pZicpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2luZ2xlUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgbW9yZSB0aGFuIDEgbm9uLWNvbW1lbnQgY2hpbGQsIHJldHVybiBub3dcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlUm9vdCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2luZ2xlUm9vdDtcbn1cbmNvbnN0IGdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCA9IChhdHRycykgPT4ge1xuICAgIGxldCByZXM7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJyB8fCBrZXkgPT09ICdzdHlsZScgfHwgaXNPbihrZXkpKSB7XG4gICAgICAgICAgICAocmVzIHx8IChyZXMgPSB7fSkpW2tleV0gPSBhdHRyc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59O1xuY29uc3QgZmlsdGVyTW9kZWxMaXN0ZW5lcnMgPSAoYXR0cnMsIHByb3BzKSA9PiB7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSB8fCAhKGtleS5zbGljZSg5KSBpbiBwcm9wcykpIHtcbiAgICAgICAgICAgIHJlc1trZXldID0gYXR0cnNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbmNvbnN0IGlzRWxlbWVudFJvb3QgPSAodm5vZGUpID0+IHtcbiAgICByZXR1cm4gKHZub2RlLnNoYXBlRmxhZyAmICg2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovIHwgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8pIHx8XG4gICAgICAgIHZub2RlLnR5cGUgPT09IENvbW1lbnQgLy8gcG90ZW50aWFsIHYtaWYgYnJhbmNoIHN3aXRjaFxuICAgICk7XG59O1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlQ29tcG9uZW50KHByZXZWTm9kZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpIHtcbiAgICBjb25zdCB7IHByb3BzOiBwcmV2UHJvcHMsIGNoaWxkcmVuOiBwcmV2Q2hpbGRyZW4sIGNvbXBvbmVudCB9ID0gcHJldlZOb2RlO1xuICAgIGNvbnN0IHsgcHJvcHM6IG5leHRQcm9wcywgY2hpbGRyZW46IG5leHRDaGlsZHJlbiwgcGF0Y2hGbGFnIH0gPSBuZXh0Vk5vZGU7XG4gICAgY29uc3QgZW1pdHMgPSBjb21wb25lbnQuZW1pdHNPcHRpb25zO1xuICAgIC8vIFBhcmVudCBjb21wb25lbnQncyByZW5kZXIgZnVuY3Rpb24gd2FzIGhvdC11cGRhdGVkLiBTaW5jZSB0aGlzIG1heSBoYXZlXG4gICAgLy8gY2F1c2VkIHRoZSBjaGlsZCBjb21wb25lbnQncyBzbG90cyBjb250ZW50IHRvIGhhdmUgY2hhbmdlZCwgd2UgbmVlZCB0b1xuICAgIC8vIGZvcmNlIHRoZSBjaGlsZCB0byB1cGRhdGUgYXMgd2VsbC5cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBmb3JjZSBjaGlsZCB1cGRhdGUgZm9yIHJ1bnRpbWUgZGlyZWN0aXZlIG9yIHRyYW5zaXRpb24gb24gY29tcG9uZW50IHZub2RlLlxuICAgIGlmIChuZXh0Vk5vZGUuZGlycyB8fCBuZXh0Vk5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdGltaXplZCAmJiBwYXRjaEZsYWcgPj0gMCkge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTAyNCAvKiBQYXRjaEZsYWdzLkRZTkFNSUNfU0xPVFMgKi8pIHtcbiAgICAgICAgICAgIC8vIHNsb3QgY29udGVudCB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHRoYXQgbWlnaHQgaGF2ZSBjaGFuZ2VkLFxuICAgICAgICAgICAgLy8gZS5nLiBpbiBhIHYtZm9yXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovKSB7XG4gICAgICAgICAgICBpZiAoIXByZXZQcm9wcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIW5leHRQcm9wcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByZXNlbmNlIG9mIHRoaXMgZmxhZyBpbmRpY2F0ZXMgcHJvcHMgYXJlIGFsd2F5cyBub24tbnVsbFxuICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhdGNoRmxhZyAmIDggLyogUGF0Y2hGbGFncy5QUk9QUyAqLykge1xuICAgICAgICAgICAgY29uc3QgZHluYW1pY1Byb3BzID0gbmV4dFZOb2RlLmR5bmFtaWNQcm9wcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZHluYW1pY1Byb3BzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiZcbiAgICAgICAgICAgICAgICAgICAgIWlzRW1pdExpc3RlbmVyKGVtaXRzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gdGhpcyBwYXRoIGlzIG9ubHkgdGFrZW4gYnkgbWFudWFsbHkgd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zXG4gICAgICAgIC8vIHNvIHByZXNlbmNlIG9mIGFueSBjaGlsZHJlbiBsZWFkcyB0byBhIGZvcmNlZCB1cGRhdGVcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghbmV4dENoaWxkcmVuIHx8ICFuZXh0Q2hpbGRyZW4uJHN0YWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2UHJvcHMgPT09IG5leHRQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJldlByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0c09wdGlvbnMpIHtcbiAgICBjb25zdCBuZXh0S2V5cyA9IE9iamVjdC5rZXlzKG5leHRQcm9wcyk7XG4gICAgaWYgKG5leHRLZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMocHJldlByb3BzKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmV4dEtleXNbaV07XG4gICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiZcbiAgICAgICAgICAgICFpc0VtaXRMaXN0ZW5lcihlbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUhPQ0hvc3RFbCh7IHZub2RlLCBwYXJlbnQgfSwgZWwgLy8gSG9zdE5vZGVcbikge1xuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50LnN1YlRyZWUgPT09IHZub2RlKSB7XG4gICAgICAgICh2bm9kZSA9IHBhcmVudC52bm9kZSkuZWwgPSBlbDtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9XG59XG5cbmNvbnN0IGlzU3VzcGVuc2UgPSAodHlwZSkgPT4gdHlwZS5fX2lzU3VzcGVuc2U7XG4vLyBTdXNwZW5zZSBleHBvc2VzIGEgY29tcG9uZW50LWxpa2UgQVBJLCBhbmQgaXMgdHJlYXRlZCBsaWtlIGEgY29tcG9uZW50XG4vLyBpbiB0aGUgY29tcGlsZXIsIGJ1dCBpbnRlcm5hbGx5IGl0J3MgYSBzcGVjaWFsIGJ1aWx0LWluIHR5cGUgdGhhdCBob29rc1xuLy8gZGlyZWN0bHkgaW50byB0aGUgcmVuZGVyZXIuXG5jb25zdCBTdXNwZW5zZUltcGwgPSB7XG4gICAgbmFtZTogJ1N1c3BlbnNlJyxcbiAgICAvLyBJbiBvcmRlciB0byBtYWtlIFN1c3BlbnNlIHRyZWUtc2hha2FibGUsIHdlIG5lZWQgdG8gYXZvaWQgaW1wb3J0aW5nIGl0XG4gICAgLy8gZGlyZWN0bHkgaW4gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgY2hlY2tzIGZvciB0aGUgX19pc1N1c3BlbnNlIGZsYWdcbiAgICAvLyBvbiBhIHZub2RlJ3MgdHlwZSBhbmQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2QsIHBhc3NpbmcgaW4gcmVuZGVyZXJcbiAgICAvLyBpbnRlcm5hbHMuXG4gICAgX19pc1N1c3BlbnNlOiB0cnVlLFxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBcbiAgICAvLyBwbGF0Zm9ybS1zcGVjaWZpYyBpbXBsIHBhc3NlZCBmcm9tIHJlbmRlcmVyXG4gICAgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIG1vdW50U3VzcGVuc2UobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdGNoU3VzcGVuc2UobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaHlkcmF0ZTogaHlkcmF0ZVN1c3BlbnNlLFxuICAgIGNyZWF0ZTogY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW5cbn07XG4vLyBGb3JjZS1jYXN0ZWQgcHVibGljIHR5cGluZyBmb3IgaCBhbmQgVFNYIHByb3BzIGluZmVyZW5jZVxuY29uc3QgU3VzcGVuc2UgPSAoU3VzcGVuc2VJbXBsXG4gICAgKTtcbmZ1bmN0aW9uIHRyaWdnZXJFdmVudCh2bm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wc1tuYW1lXTtcbiAgICBpZiAoaXNGdW5jdGlvbihldmVudExpc3RlbmVyKSkge1xuICAgICAgICBldmVudExpc3RlbmVyKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gbW91bnRTdXNwZW5zZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7IHA6IHBhdGNoLCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gICAgY29uc3QgaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3Qgc3VzcGVuc2UgPSAodm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSk7XG4gICAgLy8gc3RhcnQgbW91bnRpbmcgdGhlIGNvbnRlbnQgc3VidHJlZSBpbiBhbiBvZmYtZG9tIGNvbnRhaW5lclxuICAgIHBhdGNoKG51bGwsIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50KSwgaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAvLyBub3cgY2hlY2sgaWYgd2UgaGF2ZSBlbmNvdW50ZXJlZCBhbnkgYXN5bmMgZGVwc1xuICAgIGlmIChzdXNwZW5zZS5kZXBzID4gMCkge1xuICAgICAgICAvLyBoYXMgYXN5bmNcbiAgICAgICAgLy8gaW52b2tlIEBmYWxsYmFjayBldmVudFxuICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvblBlbmRpbmcnKTtcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25GYWxsYmFjaycpO1xuICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxuICAgICAgICBwYXRjaChudWxsLCB2bm9kZS5zc0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCB2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFN1c3BlbnNlIGhhcyBubyBhc3luYyBkZXBzLiBKdXN0IHJlc29sdmUuXG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCB7IHA6IHBhdGNoLCB1bTogdW5tb3VudCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSkge1xuICAgIGNvbnN0IHN1c3BlbnNlID0gKG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2UpO1xuICAgIHN1c3BlbnNlLnZub2RlID0gbjI7XG4gICAgbjIuZWwgPSBuMS5lbDtcbiAgICBjb25zdCBuZXdCcmFuY2ggPSBuMi5zc0NvbnRlbnQ7XG4gICAgY29uc3QgbmV3RmFsbGJhY2sgPSBuMi5zc0ZhbGxiYWNrO1xuICAgIGNvbnN0IHsgYWN0aXZlQnJhbmNoLCBwZW5kaW5nQnJhbmNoLCBpc0luRmFsbGJhY2ssIGlzSHlkcmF0aW5nIH0gPSBzdXNwZW5zZTtcbiAgICBpZiAocGVuZGluZ0JyYW5jaCkge1xuICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgcGVuZGluZ0JyYW5jaCkpIHtcbiAgICAgICAgICAgIC8vIHNhbWUgcm9vdCB0eXBlIGJ1dCBjb250ZW50IG1heSBoYXZlIGNoYW5nZWQuXG4gICAgICAgICAgICBwYXRjaChwZW5kaW5nQnJhbmNoLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0b2dnbGVkIGJlZm9yZSBwZW5kaW5nIHRyZWUgaXMgcmVzb2x2ZWRcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCsrO1xuICAgICAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdG9nZ2xlZCBiZWZvcmUgaHlkcmF0aW9uIGlzIGZpbmlzaGVkLCB0aGUgY3VycmVudCBET00gdHJlZSBpc1xuICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciB2YWxpZC4gc2V0IGl0IGFzIHRoZSBhY3RpdmUgYnJhbmNoIHNvIGl0IHdpbGwgYmUgdW5tb3VudGVkXG4gICAgICAgICAgICAgICAgLy8gd2hlbiByZXNvbHZlZFxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gcGVuZGluZ0JyYW5jaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHVubW91bnQocGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpbmNyZW1lbnQgcGVuZGluZyBJRC4gdGhpcyBpcyB1c2VkIHRvIGludmFsaWRhdGUgYXN5bmMgY2FsbGJhY2tzXG4gICAgICAgICAgICAvLyByZXNldCBzdXNwZW5zZSBzdGF0ZVxuICAgICAgICAgICAgc3VzcGVuc2UuZGVwcyA9IDA7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIGVmZmVjdHMgZnJvbSBwZW5kaW5nIGJyYW5jaFxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBwcmV2aW91cyBjb250YWluZXJcbiAgICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaWYgKGlzSW5GYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgaW4gZmFsbGJhY2sgc3RhdGVcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKGFjdGl2ZUJyYW5jaCwgbmV3RmFsbGJhY2ssIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9nZ2xlZCBcImJhY2tcIiB0byBjdXJyZW50IGFjdGl2ZSBicmFuY2hcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgcmVzb2x2ZVxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzd2l0Y2hlZCB0byBhIDNyZCBicmFuY2hcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgICAgICAgLy8gcm9vdCBkaWQgbm90IGNoYW5nZSwganVzdCBub3JtYWwgcGF0Y2hcbiAgICAgICAgICAgIHBhdGNoKGFjdGl2ZUJyYW5jaCwgbmV3QnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3QnJhbmNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJvb3Qgbm9kZSB0b2dnbGVkXG4gICAgICAgICAgICAvLyBpbnZva2UgQHBlbmRpbmcgZXZlbnRcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChuMiwgJ29uUGVuZGluZycpO1xuICAgICAgICAgICAgLy8gbW91bnQgcGVuZGluZyBicmFuY2ggaW4gb2ZmLWRvbSBjb250YWluZXJcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQrKztcbiAgICAgICAgICAgIHBhdGNoKG51bGwsIG5ld0JyYW5jaCwgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGluY29taW5nIGJyYW5jaCBoYXMgbm8gYXN5bmMgZGVwcywgcmVzb2x2ZSBub3cuXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB0aW1lb3V0LCBwZW5kaW5nSWQgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nSWQgPT09IHBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbWVvdXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UuZmFsbGJhY2sobmV3RmFsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBpc0h5ZHJhdGluZyA9IGZhbHNlKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZmFsc2UgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAvLyBAdHMtaWdub3JlIGBjb25zb2xlLmluZm9gIGNhbm5vdCBiZSBudWxsIGVycm9yXG4gICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKGA8U3VzcGVuc2U+IGlzIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlIGFuZCBpdHMgQVBJIHdpbGwgbGlrZWx5IGNoYW5nZS5gKTtcbiAgICB9XG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IHVubW91bnQsIG46IG5leHQsIG86IHsgcGFyZW50Tm9kZSwgcmVtb3ZlIH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB2bm9kZS5wcm9wcyA/IHRvTnVtYmVyKHZub2RlLnByb3BzLnRpbWVvdXQpIDogdW5kZWZpbmVkO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgYXNzZXJ0TnVtYmVyKHRpbWVvdXQsIGBTdXNwZW5zZSB0aW1lb3V0YCk7XG4gICAgfVxuICAgIGNvbnN0IHN1c3BlbnNlID0ge1xuICAgICAgICB2bm9kZSxcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIGlzU1ZHLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBkZXBzOiAwLFxuICAgICAgICBwZW5kaW5nSWQ6IDAsXG4gICAgICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSAnbnVtYmVyJyA/IHRpbWVvdXQgOiAtMSxcbiAgICAgICAgYWN0aXZlQnJhbmNoOiBudWxsLFxuICAgICAgICBwZW5kaW5nQnJhbmNoOiBudWxsLFxuICAgICAgICBpc0luRmFsbGJhY2s6IHRydWUsXG4gICAgICAgIGlzSHlkcmF0aW5nLFxuICAgICAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICByZXNvbHZlKHJlc3VtZSA9IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bWUgJiYgIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIHdpdGhvdXQgYSBwZW5kaW5nIGJyYW5jaC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc3VzcGVuc2UucmVzb2x2ZSgpIGlzIGNhbGxlZCBvbiBhbiBhbHJlYWR5IHVubW91bnRlZCBzdXNwZW5zZSBib3VuZGFyeS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZub2RlLCBhY3RpdmVCcmFuY2gsIHBlbmRpbmdCcmFuY2gsIHBlbmRpbmdJZCwgZWZmZWN0cywgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIgfSA9IHN1c3BlbnNlO1xuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuaXNIeWRyYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFyZXN1bWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxheUVudGVyID0gYWN0aXZlQnJhbmNoICYmXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQnJhbmNoLnRyYW5zaXRpb24ubW9kZSA9PT0gJ291dC1pbic7XG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nSWQgPT09IHN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmUocGVuZGluZ0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogTW92ZVR5cGUuRU5URVIgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIGluaXRpYWwgYW5jaG9yIG9uIG1vdW50XG4gICAgICAgICAgICAgICAgbGV0IHsgYW5jaG9yIH0gPSBzdXNwZW5zZTtcbiAgICAgICAgICAgICAgICAvLyB1bm1vdW50IGN1cnJlbnQgYWN0aXZlIHRyZWVcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBmYWxsYmFjayB0cmVlIHdhcyBtb3VudGVkLCBpdCBtYXkgaGF2ZSBiZWVuIG1vdmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIHBhcnQgb2YgYSBwYXJlbnQgc3VzcGVuc2UuIGdldCB0aGUgbGF0ZXN0IGFuY2hvciBmb3IgaW5zZXJ0aW9uXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBjb250ZW50IGZyb20gb2ZmLWRvbSBjb250YWluZXIgdG8gYWN0dWFsIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBtb3ZlKHBlbmRpbmdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIE1vdmVUeXBlLkVOVEVSICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHBlbmRpbmdCcmFuY2gpO1xuICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG51bGw7XG4gICAgICAgICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGZsdXNoIGJ1ZmZlcmVkIGVmZmVjdHNcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGEgcGVuZGluZyBwYXJlbnQgc3VzcGVuc2VcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBzdXNwZW5zZS5wYXJlbnQ7XG4gICAgICAgICAgICBsZXQgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgcGVuZGluZyBwYXJlbnQgc3VzcGVuc2UsIG1lcmdlIGJ1ZmZlcmVkIHBvc3Qgam9ic1xuICAgICAgICAgICAgICAgICAgICAvLyBpbnRvIHRoYXQgcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5lZmZlY3RzLnB1c2goLi4uZWZmZWN0cyk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm8gcGVuZGluZyBwYXJlbnQgc3VzcGVuc2UsIGZsdXNoIGFsbCBqb2JzXG4gICAgICAgICAgICBpZiAoIWhhc1VucmVzb2x2ZWRBbmNlc3Rvcikge1xuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdEZsdXNoQ2IoZWZmZWN0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzID0gW107XG4gICAgICAgICAgICAvLyBpbnZva2UgQHJlc29sdmUgZXZlbnRcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uUmVzb2x2ZScpO1xuICAgICAgICB9LFxuICAgICAgICBmYWxsYmFjayhmYWxsYmFja1ZOb2RlKSB7XG4gICAgICAgICAgICBpZiAoIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZub2RlLCBhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBpc1NWRyB9ID0gc3VzcGVuc2U7XG4gICAgICAgICAgICAvLyBpbnZva2UgQGZhbGxiYWNrIGV2ZW50XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvbkZhbGxiYWNrJyk7XG4gICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0KGFjdGl2ZUJyYW5jaCk7XG4gICAgICAgICAgICBjb25zdCBtb3VudEZhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnQgdGhlIGZhbGxiYWNrIHRyZWVcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBmYWxsYmFja1ZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBmYWxsYmFja1ZOb2RlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBkZWxheUVudGVyID0gZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uICYmIGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbi5tb2RlID09PSAnb3V0LWluJztcbiAgICAgICAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9IG1vdW50RmFsbGJhY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgICAgICAgLy8gdW5tb3VudCBjdXJyZW50IGFjdGl2ZSBicmFuY2hcbiAgICAgICAgICAgIHVubW91bnQoYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIG5vIHN1c3BlbnNlIHNvIHVubW91bnQgaG9va3MgZmlyZSBub3dcbiAgICAgICAgICAgIHRydWUgLy8gc2hvdWxkUmVtb3ZlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFkZWxheUVudGVyKSB7XG4gICAgICAgICAgICAgICAgbW91bnRGYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtb3ZlKGNvbnRhaW5lciwgYW5jaG9yLCB0eXBlKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggJiZcbiAgICAgICAgICAgICAgICBtb3ZlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHR5cGUpO1xuICAgICAgICAgICAgc3VzcGVuc2UuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB9LFxuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJiBuZXh0KHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZ2lzdGVyRGVwKGluc3RhbmNlLCBzZXR1cFJlbmRlckVmZmVjdCkge1xuICAgICAgICAgICAgY29uc3QgaXNJblBlbmRpbmdTdXNwZW5zZSA9ICEhc3VzcGVuc2UucGVuZGluZ0JyYW5jaDtcbiAgICAgICAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlKSB7XG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuZGVwcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaHlkcmF0ZWRFbCA9IGluc3RhbmNlLnZub2RlLmVsO1xuICAgICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAuYXN5bmNEZXAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAwIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi8pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihhc3luY1NldHVwUmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICAvLyByZXRyeSB3aGVuIHRoZSBzZXR1cCgpIHByb21pc2UgcmVzb2x2ZXMuXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gdW5tb3VudGVkIGJlZm9yZSByZXNvbHZlLlxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5pc1VubW91bnRlZCB8fFxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCB8fFxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQgIT09IGluc3RhbmNlLnN1c3BlbnNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyByZXRyeSBmcm9tIHRoaXMgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2bm9kZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgYXN5bmNTZXR1cFJlc3VsdCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChoeWRyYXRlZEVsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZub2RlIG1heSBoYXZlIGJlZW4gcmVwbGFjZWQgaWYgYW4gdXBkYXRlIGhhcHBlbmVkIGJlZm9yZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gYXN5bmMgZGVwIGlzIHJlc29sdmVkLlxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5lbCA9IGh5ZHJhdGVkRWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gIWh5ZHJhdGVkRWwgJiYgaW5zdGFuY2Uuc3ViVHJlZS5lbDtcbiAgICAgICAgICAgICAgICBzZXR1cFJlbmRlckVmZmVjdChpbnN0YW5jZSwgdm5vZGUsIFxuICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgaGF2ZSBiZWVuIG1vdmVkIGJlZm9yZSByZXNvbHZlLlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgbm90IGEgaHlkcmF0aW9uLCBpbnN0YW5jZS5zdWJUcmVlIHdpbGwgYmUgdGhlIGNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBwbGFjZWhvbGRlci5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlKGh5ZHJhdGVkRWwgfHwgaW5zdGFuY2Uuc3ViVHJlZS5lbCksIFxuICAgICAgICAgICAgICAgIC8vIGFuY2hvciB3aWxsIG5vdCBiZSB1c2VkIGlmIHRoaXMgaXMgaHlkcmF0aW9uLCBzbyBvbmx5IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb25zaWRlciB0aGUgY29tbWVudCBwbGFjZWhvbGRlciBjYXNlLlxuICAgICAgICAgICAgICAgIGh5ZHJhdGVkRWwgPyBudWxsIDogbmV4dChpbnN0YW5jZS5zdWJUcmVlKSwgc3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUocGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIHZub2RlLmVsKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG9ubHkgZGVjcmVhc2UgZGVwcyBjb3VudCBpZiBzdXNwZW5zZSBpcyBub3QgYWxyZWFkeSByZXNvbHZlZFxuICAgICAgICAgICAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlICYmIC0tc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSB7XG4gICAgICAgICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudChzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBzdXNwZW5zZTtcbn1cbmZ1bmN0aW9uIGh5ZHJhdGVTdXNwZW5zZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaHlkcmF0ZU5vZGUpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbiAgICBjb25zdCBzdXNwZW5zZSA9ICh2bm9kZS5zdXNwZW5zZSA9IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudFN1c3BlbnNlLCBwYXJlbnRDb21wb25lbnQsIG5vZGUucGFyZW50Tm9kZSwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIG51bGwsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIHRydWUgLyogaHlkcmF0aW5nICovKSk7XG4gICAgLy8gdGhlcmUgYXJlIHR3byBwb3NzaWJsZSBzY2VuYXJpb3MgZm9yIHNlcnZlci1yZW5kZXJlZCBzdXNwZW5zZTpcbiAgICAvLyAtIHN1Y2Nlc3M6IHNzciBjb250ZW50IHNob3VsZCBiZSBmdWxseSByZXNvbHZlZFxuICAgIC8vIC0gZmFpbHVyZTogc3NyIGNvbnRlbnQgc2hvdWxkIGJlIHRoZSBmYWxsYmFjayBicmFuY2guXG4gICAgLy8gaG93ZXZlciwgb24gdGhlIGNsaWVudCB3ZSBkb24ndCByZWFsbHkga25vdyBpZiBpdCBoYXMgZmFpbGVkIG9yIG5vdFxuICAgIC8vIGF0dGVtcHQgdG8gaHlkcmF0ZSB0aGUgRE9NIGFzc3VtaW5nIGl0IGhhcyBzdWNjZWVkZWQsIGJ1dCB3ZSBzdGlsbFxuICAgIC8vIG5lZWQgdG8gY29uc3RydWN0IGEgc3VzcGVuc2UgYm91bmRhcnkgZmlyc3RcbiAgICBjb25zdCByZXN1bHQgPSBoeWRyYXRlTm9kZShub2RlLCAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCksIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICBpZiAoc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW4odm5vZGUpIHtcbiAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICAgIGNvbnN0IGlzU2xvdENoaWxkcmVuID0gc2hhcGVGbGFnICYgMzIgLyogU2hhcGVGbGFncy5TTE9UU19DSElMRFJFTiAqLztcbiAgICB2bm9kZS5zc0NvbnRlbnQgPSBub3JtYWxpemVTdXNwZW5zZVNsb3QoaXNTbG90Q2hpbGRyZW4gPyBjaGlsZHJlbi5kZWZhdWx0IDogY2hpbGRyZW4pO1xuICAgIHZub2RlLnNzRmFsbGJhY2sgPSBpc1Nsb3RDaGlsZHJlblxuICAgICAgICA/IG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChjaGlsZHJlbi5mYWxsYmFjaylcbiAgICAgICAgOiBjcmVhdGVWTm9kZShDb21tZW50KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChzKSB7XG4gICAgbGV0IGJsb2NrO1xuICAgIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrQmxvY2sgPSBpc0Jsb2NrVHJlZUVuYWJsZWQgJiYgcy5fYztcbiAgICAgICAgaWYgKHRyYWNrQmxvY2spIHtcbiAgICAgICAgICAgIC8vIGRpc2FibGVUcmFja2luZzogZmFsc2VcbiAgICAgICAgICAgIC8vIGFsbG93IGJsb2NrIHRyYWNraW5nIGZvciBjb21waWxlZCBzbG90c1xuICAgICAgICAgICAgLy8gKHNlZSAuL2NvbXBvbmVudFJlbmRlckNvbnRleHQudHMpXG4gICAgICAgICAgICBzLl9kID0gZmFsc2U7XG4gICAgICAgICAgICBvcGVuQmxvY2soKTtcbiAgICAgICAgfVxuICAgICAgICBzID0gcygpO1xuICAgICAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgICAgICAgcy5fZCA9IHRydWU7XG4gICAgICAgICAgICBibG9jayA9IGN1cnJlbnRCbG9jaztcbiAgICAgICAgICAgIGNsb3NlQmxvY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBcnJheShzKSkge1xuICAgICAgICBjb25zdCBzaW5nbGVDaGlsZCA9IGZpbHRlclNpbmdsZVJvb3Qocyk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXNpbmdsZUNoaWxkKSB7XG4gICAgICAgICAgICB3YXJuKGA8U3VzcGVuc2U+IHNsb3RzIGV4cGVjdCBhIHNpbmdsZSByb290IG5vZGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHNpbmdsZUNoaWxkO1xuICAgIH1cbiAgICBzID0gbm9ybWFsaXplVk5vZGUocyk7XG4gICAgaWYgKGJsb2NrICYmICFzLmR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBzLmR5bmFtaWNDaGlsZHJlbiA9IGJsb2NrLmZpbHRlcihjID0+IGMgIT09IHMpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cbmZ1bmN0aW9uIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKGZuLCBzdXNwZW5zZSkge1xuICAgIGlmIChzdXNwZW5zZSAmJiBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGZuKSkge1xuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKC4uLmZuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaChmbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHF1ZXVlUG9zdEZsdXNoQ2IoZm4pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgYnJhbmNoKSB7XG4gICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gYnJhbmNoO1xuICAgIGNvbnN0IHsgdm5vZGUsIHBhcmVudENvbXBvbmVudCB9ID0gc3VzcGVuc2U7XG4gICAgY29uc3QgZWwgPSAodm5vZGUuZWwgPSBicmFuY2guZWwpO1xuICAgIC8vIGluIGNhc2Ugc3VzcGVuc2UgaXMgdGhlIHJvb3Qgbm9kZSBvZiBhIGNvbXBvbmVudCxcbiAgICAvLyByZWN1cnNpdmVseSB1cGRhdGUgdGhlIEhPQyBlbFxuICAgIGlmIChwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnN1YlRyZWUgPT09IHZub2RlKSB7XG4gICAgICAgIHBhcmVudENvbXBvbmVudC52bm9kZS5lbCA9IGVsO1xuICAgICAgICB1cGRhdGVIT0NIb3N0RWwocGFyZW50Q29tcG9uZW50LCBlbCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoIWN1cnJlbnRJbnN0YW5jZSkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBwcm92aWRlKCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnByb3ZpZGVzO1xuICAgICAgICAvLyBieSBkZWZhdWx0IGFuIGluc3RhbmNlIGluaGVyaXRzIGl0cyBwYXJlbnQncyBwcm92aWRlcyBvYmplY3RcbiAgICAgICAgLy8gYnV0IHdoZW4gaXQgbmVlZHMgdG8gcHJvdmlkZSB2YWx1ZXMgb2YgaXRzIG93biwgaXQgY3JlYXRlcyBpdHNcbiAgICAgICAgLy8gb3duIHByb3ZpZGVzIG9iamVjdCB1c2luZyBwYXJlbnQgcHJvdmlkZXMgb2JqZWN0IGFzIHByb3RvdHlwZS5cbiAgICAgICAgLy8gdGhpcyB3YXkgaW4gYGluamVjdGAgd2UgY2FuIHNpbXBseSBsb29rIHVwIGluamVjdGlvbnMgZnJvbSBkaXJlY3RcbiAgICAgICAgLy8gcGFyZW50IGFuZCBsZXQgdGhlIHByb3RvdHlwZSBjaGFpbiBkbyB0aGUgd29yay5cbiAgICAgICAgY29uc3QgcGFyZW50UHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucGFyZW50ICYmIGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQucHJvdmlkZXM7XG4gICAgICAgIGlmIChwYXJlbnRQcm92aWRlcyA9PT0gcHJvdmlkZXMpIHtcbiAgICAgICAgICAgIHByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnByb3ZpZGVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRQcm92aWRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVFMgZG9lc24ndCBhbGxvdyBzeW1ib2wgYXMgaW5kZXggdHlwZVxuICAgICAgICBwcm92aWRlc1trZXldID0gdmFsdWU7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5qZWN0KGtleSwgZGVmYXVsdFZhbHVlLCB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgPSBmYWxzZSkge1xuICAgIC8vIGZhbGxiYWNrIHRvIGBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VgIHNvIHRoYXQgdGhpcyBjYW4gYmUgY2FsbGVkIGluXG4gICAgLy8gYSBmdW5jdGlvbmFsIGNvbXBvbmVudFxuICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgLy8gIzI0MDBcbiAgICAgICAgLy8gdG8gc3VwcG9ydCBgYXBwLnVzZWAgcGx1Z2lucyxcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwQ29udGV4dCdzIGBwcm92aWRlc2AgaWYgdGhlIGluc3RhbmNlIGlzIGF0IHJvb3RcbiAgICAgICAgY29uc3QgcHJvdmlkZXMgPSBpbnN0YW5jZS5wYXJlbnQgPT0gbnVsbFxuICAgICAgICAgICAgPyBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0ICYmIGluc3RhbmNlLnZub2RlLmFwcENvbnRleHQucHJvdmlkZXNcbiAgICAgICAgICAgIDogaW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xuICAgICAgICBpZiAocHJvdmlkZXMgJiYga2V5IGluIHByb3ZpZGVzKSB7XG4gICAgICAgICAgICAvLyBUUyBkb2Vzbid0IGFsbG93IHN5bWJvbCBhcyBpbmRleCB0eXBlXG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRWYWx1ZS5jYWxsKGluc3RhbmNlLnByb3h5KVxuICAgICAgICAgICAgICAgIDogZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgaW5qZWN0aW9uIFwiJHtTdHJpbmcoa2V5KX1cIiBub3QgZm91bmQuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYGluamVjdCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkgb3IgZnVuY3Rpb25hbCBjb21wb25lbnRzLmApO1xuICAgIH1cbn1cblxuLy8gU2ltcGxlIGVmZmVjdC5cbmZ1bmN0aW9uIHdhdGNoRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiB3YXRjaFBvc3RFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZsdXNoOiAncG9zdCcgfSkgOiB7IGZsdXNoOiAncG9zdCcgfSk7XG59XG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZsdXNoOiAnc3luYycgfSkgOiB7IGZsdXNoOiAnc3luYycgfSk7XG59XG4vLyBpbml0aWFsIHZhbHVlIGZvciB3YXRjaGVycyB0byB0cmlnZ2VyIG9uIHVuZGVmaW5lZCBpbml0aWFsIHZhbHVlc1xuY29uc3QgSU5JVElBTF9XQVRDSEVSX1ZBTFVFID0ge307XG4vLyBpbXBsZW1lbnRhdGlvblxuZnVuY3Rpb24gd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucykge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgIHdhcm4oYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBgICtcbiAgICAgICAgICAgIGBVc2UgXFxgd2F0Y2hFZmZlY3QoZm4sIG9wdGlvbnM/KVxcYCBpbnN0ZWFkLiBcXGB3YXRjaFxcYCBub3cgb25seSBgICtcbiAgICAgICAgICAgIGBzdXBwb3J0cyBcXGB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xuICAgIH1cbiAgICByZXR1cm4gZG9XYXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvblRyYWNrLCBvblRyaWdnZXIgfSA9IEVNUFRZX09CSikge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNiKSB7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2Fybihgd2F0Y2goKSBcImltbWVkaWF0ZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVlcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3YXJuKGB3YXRjaCgpIFwiZGVlcFwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcbiAgICAgICAgICAgICAgICBgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3YXJuSW52YWxpZFNvdXJjZSA9IChzKSA9PiB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggc291cmNlOiBgLCBzLCBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYCArXG4gICAgICAgICAgICBgYSByZWFjdGl2ZSBvYmplY3QsIG9yIGFuIGFycmF5IG9mIHRoZXNlIHR5cGVzLmApO1xuICAgIH07XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50U2NvcGUoKSA9PT0gKGN1cnJlbnRJbnN0YW5jZSA9PT0gbnVsbCB8fCBjdXJyZW50SW5zdGFuY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRJbnN0YW5jZS5zY29wZSkgPyBjdXJyZW50SW5zdGFuY2UgOiBudWxsO1xuICAgIC8vIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlXG4gICAgbGV0IGdldHRlcjtcbiAgICBsZXQgZm9yY2VUcmlnZ2VyID0gZmFsc2U7XG4gICAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcbiAgICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UudmFsdWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IGlzU2hhbGxvdyQxKHNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUoc291cmNlKSkge1xuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2U7XG4gICAgICAgIGRlZXAgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IHNvdXJjZS5zb21lKHMgPT4gaXNSZWFjdGl2ZShzKSB8fCBpc1NoYWxsb3ckMShzKSk7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS5tYXAocyA9PiB7XG4gICAgICAgICAgICBpZiAoaXNSZWYocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhdmVyc2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhzLCBpbnN0YW5jZSwgMiAvKiBFcnJvckNvZGVzLldBVENIX0dFVFRFUiAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyBnZXR0ZXIgd2l0aCBjYlxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDIgLyogRXJyb3JDb2Rlcy5XQVRDSF9HRVRURVIgKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gY2IgLT4gc2ltcGxlIGVmZmVjdFxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDMgLyogRXJyb3JDb2Rlcy5XQVRDSF9DQUxMQkFDSyAqLywgW29uQ2xlYW51cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ2V0dGVyID0gTk9PUDtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5JbnZhbGlkU291cmNlKHNvdXJjZSk7XG4gICAgfVxuICAgIGlmIChjYiAmJiBkZWVwKSB7XG4gICAgICAgIGNvbnN0IGJhc2VHZXR0ZXIgPSBnZXR0ZXI7XG4gICAgICAgIGdldHRlciA9ICgpID0+IHRyYXZlcnNlKGJhc2VHZXR0ZXIoKSk7XG4gICAgfVxuICAgIGxldCBjbGVhbnVwO1xuICAgIGxldCBvbkNsZWFudXAgPSAoZm4pID0+IHtcbiAgICAgICAgY2xlYW51cCA9IGVmZmVjdC5vblN0b3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCA0IC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0xFQU5VUCAqLyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBpbiBTU1IgdGhlcmUgaXMgbm8gbmVlZCB0byBzZXR1cCBhbiBhY3R1YWwgZWZmZWN0LCBhbmQgaXQgc2hvdWxkIGJlIG5vb3BcbiAgICAvLyB1bmxlc3MgaXQncyBlYWdlciBvciBzeW5jIGZsdXNoXG4gICAgbGV0IHNzckNsZWFudXA7XG4gICAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgICAgICAvLyB3ZSB3aWxsIGFsc28gbm90IGNhbGwgdGhlIGludmFsaWRhdGUgY2FsbGJhY2sgKCsgcnVubmVyIGlzIG5vdCBzZXQgdXApXG4gICAgICAgIG9uQ2xlYW51cCA9IE5PT1A7XG4gICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgIGdldHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoY2IsIGluc3RhbmNlLCAzIC8qIEVycm9yQ29kZXMuV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcbiAgICAgICAgICAgICAgICBnZXR0ZXIoKSxcbiAgICAgICAgICAgICAgICBpc011bHRpU291cmNlID8gW10gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgb25DbGVhbnVwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmx1c2ggPT09ICdzeW5jJykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdXNlU1NSQ29udGV4dCgpO1xuICAgICAgICAgICAgc3NyQ2xlYW51cCA9IGN0eC5fX3dhdGNoZXJIYW5kbGVzIHx8IChjdHguX193YXRjaGVySGFuZGxlcyA9IFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2VcbiAgICAgICAgPyBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCkuZmlsbChJTklUSUFMX1dBVENIRVJfVkFMVUUpXG4gICAgICAgIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xuICAgIGNvbnN0IGpvYiA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFlZmZlY3QuYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAvLyB3YXRjaChzb3VyY2UsIGNiKVxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgICAgICAgICBpZiAoZGVlcCB8fFxuICAgICAgICAgICAgICAgIGZvcmNlVHJpZ2dlciB8fFxuICAgICAgICAgICAgICAgIChpc011bHRpU291cmNlXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpXG4gICAgICAgICAgICAgICAgICAgIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB8fFxuICAgICAgICAgICAgICAgIChmYWxzZSAgKSkge1xuICAgICAgICAgICAgICAgIC8vIGNsZWFudXAgYmVmb3JlIHJ1bm5pbmcgY2IgYWdhaW5cbiAgICAgICAgICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMyAvKiBFcnJvckNvZGVzLldBVENIX0NBTExCQUNLICovLCBbXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9PT0gSU5JVElBTF9XQVRDSEVSX1ZBTFVFXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpc011bHRpU291cmNlICYmIG9sZFZhbHVlWzBdID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvbGRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgb25DbGVhbnVwXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHdhdGNoRWZmZWN0XG4gICAgICAgICAgICBlZmZlY3QucnVuKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIGltcG9ydGFudDogbWFyayB0aGUgam9iIGFzIGEgd2F0Y2hlciBjYWxsYmFjayBzbyB0aGF0IHNjaGVkdWxlciBrbm93c1xuICAgIC8vIGl0IGlzIGFsbG93ZWQgdG8gc2VsZi10cmlnZ2VyICgjMTcyNylcbiAgICBqb2IuYWxsb3dSZWN1cnNlID0gISFjYjtcbiAgICBsZXQgc2NoZWR1bGVyO1xuICAgIGlmIChmbHVzaCA9PT0gJ3N5bmMnKSB7XG4gICAgICAgIHNjaGVkdWxlciA9IGpvYjsgLy8gdGhlIHNjaGVkdWxlciBmdW5jdGlvbiBnZXRzIGNhbGxlZCBkaXJlY3RseVxuICAgIH1cbiAgICBlbHNlIGlmIChmbHVzaCA9PT0gJ3Bvc3QnKSB7XG4gICAgICAgIHNjaGVkdWxlciA9ICgpID0+IHF1ZXVlUG9zdFJlbmRlckVmZmVjdChqb2IsIGluc3RhbmNlICYmIGluc3RhbmNlLnN1c3BlbnNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGRlZmF1bHQ6ICdwcmUnXG4gICAgICAgIGpvYi5wcmUgPSB0cnVlO1xuICAgICAgICBpZiAoaW5zdGFuY2UpXG4gICAgICAgICAgICBqb2IuaWQgPSBpbnN0YW5jZS51aWQ7XG4gICAgICAgIHNjaGVkdWxlciA9ICgpID0+IHF1ZXVlSm9iKGpvYik7XG4gICAgfVxuICAgIGNvbnN0IGVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIHNjaGVkdWxlcik7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBlZmZlY3Qub25UcmFjayA9IG9uVHJhY2s7XG4gICAgICAgIGVmZmVjdC5vblRyaWdnZXIgPSBvblRyaWdnZXI7XG4gICAgfVxuICAgIC8vIGluaXRpYWwgcnVuXG4gICAgaWYgKGNiKSB7XG4gICAgICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIGpvYigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2xkVmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZmx1c2ggPT09ICdwb3N0Jykge1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZWZmZWN0LnJ1bi5iaW5kKGVmZmVjdCksIGluc3RhbmNlICYmIGluc3RhbmNlLnN1c3BlbnNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVmZmVjdC5ydW4oKTtcbiAgICB9XG4gICAgY29uc3QgdW53YXRjaCA9ICgpID0+IHtcbiAgICAgICAgZWZmZWN0LnN0b3AoKTtcbiAgICAgICAgaWYgKGluc3RhbmNlICYmIGluc3RhbmNlLnNjb3BlKSB7XG4gICAgICAgICAgICByZW1vdmUoaW5zdGFuY2Uuc2NvcGUuZWZmZWN0cywgZWZmZWN0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKHNzckNsZWFudXApXG4gICAgICAgIHNzckNsZWFudXAucHVzaCh1bndhdGNoKTtcbiAgICByZXR1cm4gdW53YXRjaDtcbn1cbi8vIHRoaXMuJHdhdGNoXG5mdW5jdGlvbiBpbnN0YW5jZVdhdGNoKHNvdXJjZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwdWJsaWNUaGlzID0gdGhpcy5wcm94eTtcbiAgICBjb25zdCBnZXR0ZXIgPSBpc1N0cmluZyhzb3VyY2UpXG4gICAgICAgID8gc291cmNlLmluY2x1ZGVzKCcuJylcbiAgICAgICAgICAgID8gY3JlYXRlUGF0aEdldHRlcihwdWJsaWNUaGlzLCBzb3VyY2UpXG4gICAgICAgICAgICA6ICgpID0+IHB1YmxpY1RoaXNbc291cmNlXVxuICAgICAgICA6IHNvdXJjZS5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICAgIGxldCBjYjtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgY2IgPSB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNiID0gdmFsdWUuaGFuZGxlcjtcbiAgICAgICAgb3B0aW9ucyA9IHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBjdXIgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgc2V0Q3VycmVudEluc3RhbmNlKHRoaXMpO1xuICAgIGNvbnN0IHJlcyA9IGRvV2F0Y2goZ2V0dGVyLCBjYi5iaW5kKHB1YmxpY1RoaXMpLCBvcHRpb25zKTtcbiAgICBpZiAoY3VyKSB7XG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShjdXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhdGhHZXR0ZXIoY3R4LCBwYXRoKSB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgbGV0IGN1ciA9IGN0eDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggJiYgY3VyOyBpKyspIHtcbiAgICAgICAgICAgIGN1ciA9IGN1cltzZWdtZW50c1tpXV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cjtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhdmVyc2UodmFsdWUsIHNlZW4pIHtcbiAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCB2YWx1ZVtcIl9fdl9za2lwXCIgLyogUmVhY3RpdmVGbGFncy5TS0lQICovXSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBTZXQoKTtcbiAgICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2Vlbi5hZGQodmFsdWUpO1xuICAgIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICAgICAgdHJhdmVyc2UodmFsdWUudmFsdWUsIHNlZW4pO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZVtpXSwgc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNTZXQodmFsdWUpIHx8IGlzTWFwKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICB0cmF2ZXJzZSh2LCBzZWVuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZVtrZXldLCBzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVzZVRyYW5zaXRpb25TdGF0ZSgpIHtcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICAgICAgaXNMZWF2aW5nOiBmYWxzZSxcbiAgICAgICAgaXNVbm1vdW50aW5nOiBmYWxzZSxcbiAgICAgICAgbGVhdmluZ1ZOb2RlczogbmV3IE1hcCgpXG4gICAgfTtcbiAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgICBzdGF0ZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICAgIHN0YXRlLmlzVW5tb3VudGluZyA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufVxuY29uc3QgVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IgPSBbRnVuY3Rpb24sIEFycmF5XTtcbmNvbnN0IEJhc2VUcmFuc2l0aW9uSW1wbCA9IHtcbiAgICBuYW1lOiBgQmFzZVRyYW5zaXRpb25gLFxuICAgIHByb3BzOiB7XG4gICAgICAgIG1vZGU6IFN0cmluZyxcbiAgICAgICAgYXBwZWFyOiBCb29sZWFuLFxuICAgICAgICBwZXJzaXN0ZWQ6IEJvb2xlYW4sXG4gICAgICAgIC8vIGVudGVyXG4gICAgICAgIG9uQmVmb3JlRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BZnRlckVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25FbnRlckNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIC8vIGxlYXZlXG4gICAgICAgIG9uQmVmb3JlTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICAgICAgICBvbkxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BZnRlckxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25MZWF2ZUNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIC8vIGFwcGVhclxuICAgICAgICBvbkJlZm9yZUFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgICAgICAgb25BZnRlckFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gICAgICAgIG9uQXBwZWFyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvclxuICAgIH0sXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgICAgICBsZXQgcHJldlRyYW5zaXRpb25LZXk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoIWNoaWxkcmVuIHx8ICFjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlblswXTtcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhhc0ZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIGZpcnN0IG5vbi1jb21tZW50IGNoaWxkXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaGFzRm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3YXJuIG1vcmUgdGhhbiBvbmUgbm9uLWNvbW1lbnQgY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCc8dHJhbnNpdGlvbj4gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIHNpbmdsZSBlbGVtZW50IG9yIGNvbXBvbmVudC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2UgPHRyYW5zaXRpb24tZ3JvdXA+IGZvciBsaXN0cy4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhlcmUncyBubyBuZWVkIHRvIHRyYWNrIHJlYWN0aXZpdHkgZm9yIHRoZXNlIHByb3BzIHNvIHVzZSB0aGUgcmF3XG4gICAgICAgICAgICAvLyBwcm9wcyBmb3IgYSBiaXQgYmV0dGVyIHBlcmZcbiAgICAgICAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgeyBtb2RlIH0gPSByYXdQcm9wcztcbiAgICAgICAgICAgIC8vIGNoZWNrIG1vZGVcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICBtb2RlICYmXG4gICAgICAgICAgICAgICAgbW9kZSAhPT0gJ2luLW91dCcgJiZcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnb3V0LWluJyAmJlxuICAgICAgICAgICAgICAgIG1vZGUgIT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgICAgIHdhcm4oYGludmFsaWQgPHRyYW5zaXRpb24+IG1vZGU6ICR7bW9kZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc0xlYXZpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiA8dHJhbnNpdGlvbj48a2VlcC1hbGl2ZS8+PC90cmFuc2l0aW9uPiwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gY29tcGFyZSB0aGUgdHlwZSBvZiB0aGUga2VwdC1hbGl2ZSBjaGlsZHJlbi5cbiAgICAgICAgICAgIGNvbnN0IGlubmVyQ2hpbGQgPSBnZXRLZWVwQWxpdmVDaGlsZChjaGlsZCk7XG4gICAgICAgICAgICBpZiAoIWlubmVyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbnRlckhvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhpbm5lckNoaWxkLCByYXdQcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcbiAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhpbm5lckNoaWxkLCBlbnRlckhvb2tzKTtcbiAgICAgICAgICAgIGNvbnN0IG9sZENoaWxkID0gaW5zdGFuY2Uuc3ViVHJlZTtcbiAgICAgICAgICAgIGNvbnN0IG9sZElubmVyQ2hpbGQgPSBvbGRDaGlsZCAmJiBnZXRLZWVwQWxpdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAgICAgICBsZXQgdHJhbnNpdGlvbktleUNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0VHJhbnNpdGlvbktleSB9ID0gaW5uZXJDaGlsZC50eXBlO1xuICAgICAgICAgICAgaWYgKGdldFRyYW5zaXRpb25LZXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRUcmFuc2l0aW9uS2V5KCk7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZUcmFuc2l0aW9uS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlRyYW5zaXRpb25LZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleSAhPT0gcHJldlRyYW5zaXRpb25LZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlRyYW5zaXRpb25LZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25LZXlDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBoYW5kbGUgbW9kZVxuICAgICAgICAgICAgaWYgKG9sZElubmVyQ2hpbGQgJiZcbiAgICAgICAgICAgICAgICBvbGRJbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQgJiZcbiAgICAgICAgICAgICAgICAoIWlzU2FtZVZOb2RlVHlwZShpbm5lckNoaWxkLCBvbGRJbm5lckNoaWxkKSB8fCB0cmFuc2l0aW9uS2V5Q2hhbmdlZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nSG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKG9sZElubmVyQ2hpbGQsIHJhd1Byb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbGQgdHJlZSdzIGhvb2tzIGluIGNhc2Ugb2YgZHluYW1pYyB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKG9sZElubmVyQ2hpbGQsIGxlYXZpbmdIb29rcyk7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGJldHdlZW4gZGlmZmVyZW50IHZpZXdzXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdvdXQtaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzTGVhdmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBwbGFjZWhvbGRlciBub2RlIGFuZCBxdWV1ZSB1cGRhdGUgd2hlbiBsZWF2ZSBmaW5pc2hlc1xuICAgICAgICAgICAgICAgICAgICBsZWF2aW5nSG9va3MuYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmlzTGVhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIzY4MzVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0IGFsc28gbmVlZHMgdG8gYmUgdXBkYXRlZCB3aGVuIGFjdGl2ZSBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS51cGRhdGUuYWN0aXZlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdpbi1vdXQnICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBsZWF2aW5nSG9va3MuZGVsYXlMZWF2ZSA9IChlbCwgZWFybHlSZW1vdmUsIGRlbGF5ZWRMZWF2ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgb2xkSW5uZXJDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGVbU3RyaW5nKG9sZElubmVyQ2hpbGQua2V5KV0gPSBvbGRJbm5lckNoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWFybHkgcmVtb3ZhbCBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFybHlSZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZW50ZXJIb29rcy5kZWxheWVkTGVhdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJIb29rcy5kZWxheWVkTGVhdmUgPSBkZWxheWVkTGVhdmU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2Vcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXG5jb25zdCBCYXNlVHJhbnNpdGlvbiA9IEJhc2VUcmFuc2l0aW9uSW1wbDtcbmZ1bmN0aW9uIGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIHZub2RlKSB7XG4gICAgY29uc3QgeyBsZWF2aW5nVk5vZGVzIH0gPSBzdGF0ZTtcbiAgICBsZXQgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gbGVhdmluZ1ZOb2Rlcy5nZXQodm5vZGUudHlwZSk7XG4gICAgaWYgKCFsZWF2aW5nVk5vZGVzQ2FjaGUpIHtcbiAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGVhdmluZ1ZOb2Rlcy5zZXQodm5vZGUudHlwZSwgbGVhdmluZ1ZOb2Rlc0NhY2hlKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlYXZpbmdWTm9kZXNDYWNoZTtcbn1cbi8vIFRoZSB0cmFuc2l0aW9uIGhvb2tzIGFyZSBhdHRhY2hlZCB0byB0aGUgdm5vZGUgYXMgdm5vZGUudHJhbnNpdGlvblxuLy8gYW5kIHdpbGwgYmUgY2FsbGVkIGF0IGFwcHJvcHJpYXRlIHRpbWluZyBpbiB0aGUgcmVuZGVyZXIuXG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyBhcHBlYXIsIG1vZGUsIHBlcnNpc3RlZCA9IGZhbHNlLCBvbkJlZm9yZUVudGVyLCBvbkVudGVyLCBvbkFmdGVyRW50ZXIsIG9uRW50ZXJDYW5jZWxsZWQsIG9uQmVmb3JlTGVhdmUsIG9uTGVhdmUsIG9uQWZ0ZXJMZWF2ZSwgb25MZWF2ZUNhbmNlbGxlZCwgb25CZWZvcmVBcHBlYXIsIG9uQXBwZWFyLCBvbkFmdGVyQXBwZWFyLCBvbkFwcGVhckNhbmNlbGxlZCB9ID0gcHJvcHM7XG4gICAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XG4gICAgY29uc3QgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpO1xuICAgIGNvbnN0IGNhbGxIb29rID0gKGhvb2ssIGFyZ3MpID0+IHtcbiAgICAgICAgaG9vayAmJlxuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDkgLyogRXJyb3JDb2Rlcy5UUkFOU0lUSU9OX0hPT0sgKi8sIGFyZ3MpO1xuICAgIH07XG4gICAgY29uc3QgY2FsbEFzeW5jSG9vayA9IChob29rLCBhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSBhcmdzWzFdO1xuICAgICAgICBjYWxsSG9vayhob29rLCBhcmdzKTtcbiAgICAgICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgICAgIGlmIChob29rLmV2ZXJ5KGhvb2sgPT4gaG9vay5sZW5ndGggPD0gMSkpXG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhvb2subGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaG9va3MgPSB7XG4gICAgICAgIG1vZGUsXG4gICAgICAgIHBlcnNpc3RlZCxcbiAgICAgICAgYmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgICAgICAgIGxldCBob29rID0gb25CZWZvcmVFbnRlcjtcbiAgICAgICAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVhcikge1xuICAgICAgICAgICAgICAgICAgICBob29rID0gb25CZWZvcmVBcHBlYXIgfHwgb25CZWZvcmVFbnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmb3Igc2FtZSBlbGVtZW50ICh2LXNob3cpXG4gICAgICAgICAgICBpZiAoZWwuX2xlYXZlQ2IpIHtcbiAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYih0cnVlIC8qIGNhbmNlbGxlZCAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmb3IgdG9nZ2xlZCBlbGVtZW50IHdpdGggc2FtZSBrZXkgKHYtaWYpXG4gICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGUgPSBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XTtcbiAgICAgICAgICAgIGlmIChsZWF2aW5nVk5vZGUgJiZcbiAgICAgICAgICAgICAgICBpc1NhbWVWTm9kZVR5cGUodm5vZGUsIGxlYXZpbmdWTm9kZSkgJiZcbiAgICAgICAgICAgICAgICBsZWF2aW5nVk5vZGUuZWwuX2xlYXZlQ2IpIHtcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSBlYXJseSByZW1vdmFsIChub3QgY2FuY2VsbGVkKVxuICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZS5lbC5fbGVhdmVDYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbEhvb2soaG9vaywgW2VsXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudGVyKGVsKSB7XG4gICAgICAgICAgICBsZXQgaG9vayA9IG9uRW50ZXI7XG4gICAgICAgICAgICBsZXQgYWZ0ZXJIb29rID0gb25BZnRlckVudGVyO1xuICAgICAgICAgICAgbGV0IGNhbmNlbEhvb2sgPSBvbkVudGVyQ2FuY2VsbGVkO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2sgPSBvbkFwcGVhciB8fCBvbkVudGVyO1xuICAgICAgICAgICAgICAgICAgICBhZnRlckhvb2sgPSBvbkFmdGVyQXBwZWFyIHx8IG9uQWZ0ZXJFbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsSG9vayA9IG9uQXBwZWFyQ2FuY2VsbGVkIHx8IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZG9uZSA9IChlbC5fZW50ZXJDYiA9IChjYW5jZWxsZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKGNhbmNlbEhvb2ssIFtlbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2soYWZ0ZXJIb29rLCBbZWxdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhvb2tzLmRlbGF5ZWRMZWF2ZSkge1xuICAgICAgICAgICAgICAgICAgICBob29rcy5kZWxheWVkTGVhdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWwuX2VudGVyQ2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChob29rKSB7XG4gICAgICAgICAgICAgICAgY2FsbEFzeW5jSG9vayhob29rLCBbZWwsIGRvbmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGVhdmUoZWwsIHJlbW92ZSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XG4gICAgICAgICAgICBpZiAoZWwuX2VudGVyQ2IpIHtcbiAgICAgICAgICAgICAgICBlbC5fZW50ZXJDYih0cnVlIC8qIGNhbmNlbGxlZCAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuaXNVbm1vdW50aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbEhvb2sob25CZWZvcmVMZWF2ZSwgW2VsXSk7XG4gICAgICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBkb25lID0gKGVsLl9sZWF2ZUNiID0gKGNhbmNlbGxlZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhvbkFmdGVyTGVhdmUsIFtlbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAobGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV0gPT09IHZub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldID0gdm5vZGU7XG4gICAgICAgICAgICBpZiAob25MZWF2ZSkge1xuICAgICAgICAgICAgICAgIGNhbGxBc3luY0hvb2sob25MZWF2ZSwgW2VsLCBkb25lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNsb25lKHZub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyh2bm9kZSwgcHJvcHMsIHN0YXRlLCBpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBob29rcztcbn1cbi8vIHRoZSBwbGFjZWhvbGRlciByZWFsbHkgb25seSBoYW5kbGVzIG9uZSBzcGVjaWFsIGNhc2U6IEtlZXBBbGl2ZVxuLy8gaW4gdGhlIGNhc2Ugb2YgYSBLZWVwQWxpdmUgaW4gYSBsZWF2ZSBwaGFzZSB3ZSBuZWVkIHRvIHJldHVybiBhIEtlZXBBbGl2ZVxuLy8gcGxhY2Vob2xkZXIgd2l0aCBlbXB0eSBjb250ZW50IHRvIGF2b2lkIHRoZSBLZWVwQWxpdmUgaW5zdGFuY2UgZnJvbSBiZWluZ1xuLy8gdW5tb3VudGVkLlxuZnVuY3Rpb24gZW1wdHlQbGFjZWhvbGRlcih2bm9kZSkge1xuICAgIGlmIChpc0tlZXBBbGl2ZSh2bm9kZSkpIHtcbiAgICAgICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICByZXR1cm4gdm5vZGU7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0S2VlcEFsaXZlQ2hpbGQodm5vZGUpIHtcbiAgICByZXR1cm4gaXNLZWVwQWxpdmUodm5vZGUpXG4gICAgICAgID8gdm5vZGUuY2hpbGRyZW5cbiAgICAgICAgICAgID8gdm5vZGUuY2hpbGRyZW5bMF1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIDogdm5vZGU7XG59XG5mdW5jdGlvbiBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIGhvb2tzKSB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8gJiYgdm5vZGUuY29tcG9uZW50KSB7XG4gICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgaG9va3MpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICB2bm9kZS5zc0NvbnRlbnQudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzQ29udGVudCk7XG4gICAgICAgIHZub2RlLnNzRmFsbGJhY2sudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzRmFsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdm5vZGUudHJhbnNpdGlvbiA9IGhvb2tzO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihjaGlsZHJlbiwga2VlcENvbW1lbnQgPSBmYWxzZSwgcGFyZW50S2V5KSB7XG4gICAgbGV0IHJldCA9IFtdO1xuICAgIGxldCBrZXllZEZyYWdtZW50Q291bnQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIC8vICM1MzYwIGluaGVyaXQgcGFyZW50IGtleSBpbiBjYXNlIG9mIDx0ZW1wbGF0ZSB2LWZvcj5cbiAgICAgICAgY29uc3Qga2V5ID0gcGFyZW50S2V5ID09IG51bGxcbiAgICAgICAgICAgID8gY2hpbGQua2V5XG4gICAgICAgICAgICA6IFN0cmluZyhwYXJlbnRLZXkpICsgU3RyaW5nKGNoaWxkLmtleSAhPSBudWxsID8gY2hpbGQua2V5IDogaSk7XG4gICAgICAgIC8vIGhhbmRsZSBmcmFnbWVudCBjaGlsZHJlbiBjYXNlLCBlLmcuIHYtZm9yXG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICAgICAgaWYgKGNoaWxkLnBhdGNoRmxhZyAmIDEyOCAvKiBQYXRjaEZsYWdzLktFWUVEX0ZSQUdNRU5UICovKVxuICAgICAgICAgICAgICAgIGtleWVkRnJhZ21lbnRDb3VudCsrO1xuICAgICAgICAgICAgcmV0ID0gcmV0LmNvbmNhdChnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGQuY2hpbGRyZW4sIGtlZXBDb21tZW50LCBrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb21tZW50IHBsYWNlaG9sZGVycyBzaG91bGQgYmUgc2tpcHBlZCwgZS5nLiB2LWlmXG4gICAgICAgIGVsc2UgaWYgKGtlZXBDb21tZW50IHx8IGNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKGtleSAhPSBudWxsID8gY2xvbmVWTm9kZShjaGlsZCwgeyBrZXkgfSkgOiBjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gIzExMjYgaWYgYSB0cmFuc2l0aW9uIGNoaWxkcmVuIGxpc3QgY29udGFpbnMgbXVsdGlwbGUgc3ViIGZyYWdtZW50cywgdGhlc2VcbiAgICAvLyBmcmFnbWVudHMgd2lsbCBiZSBtZXJnZWQgaW50byBhIGZsYXQgY2hpbGRyZW4gYXJyYXkuIFNpbmNlIGVhY2ggdi1mb3JcbiAgICAvLyBmcmFnbWVudCBtYXkgY29udGFpbiBkaWZmZXJlbnQgc3RhdGljIGJpbmRpbmdzIGluc2lkZSwgd2UgbmVlZCB0byBkZS1vcFxuICAgIC8vIHRoZXNlIGNoaWxkcmVuIHRvIGZvcmNlIGZ1bGwgZGlmZnMgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuXG4gICAgaWYgKGtleWVkRnJhZ21lbnRDb3VudCA+IDEpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJldFtpXS5wYXRjaEZsYWcgPSAtMiAvKiBQYXRjaEZsYWdzLkJBSUwgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLy8gaW1wbGVtZW50YXRpb24sIGNsb3NlIHRvIG5vLW9wXG5mdW5jdGlvbiBkZWZpbmVDb21wb25lbnQob3B0aW9ucykge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKG9wdGlvbnMpID8geyBzZXR1cDogb3B0aW9ucywgbmFtZTogb3B0aW9ucy5uYW1lIH0gOiBvcHRpb25zO1xufVxuXG5jb25zdCBpc0FzeW5jV3JhcHBlciA9IChpKSA9PiAhIWkudHlwZS5fX2FzeW5jTG9hZGVyO1xuZnVuY3Rpb24gZGVmaW5lQXN5bmNDb21wb25lbnQoc291cmNlKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xuICAgICAgICBzb3VyY2UgPSB7IGxvYWRlcjogc291cmNlIH07XG4gICAgfVxuICAgIGNvbnN0IHsgbG9hZGVyLCBsb2FkaW5nQ29tcG9uZW50LCBlcnJvckNvbXBvbmVudCwgZGVsYXkgPSAyMDAsIHRpbWVvdXQsIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dFxuICAgIHN1c3BlbnNpYmxlID0gdHJ1ZSwgb25FcnJvcjogdXNlck9uRXJyb3IgfSA9IHNvdXJjZTtcbiAgICBsZXQgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgIGxldCByZXNvbHZlZENvbXA7XG4gICAgbGV0IHJldHJpZXMgPSAwO1xuICAgIGNvbnN0IHJldHJ5ID0gKCkgPT4ge1xuICAgICAgICByZXRyaWVzKys7XG4gICAgICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGxvYWQoKTtcbiAgICB9O1xuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGxldCB0aGlzUmVxdWVzdDtcbiAgICAgICAgcmV0dXJuIChwZW5kaW5nUmVxdWVzdCB8fFxuICAgICAgICAgICAgKHRoaXNSZXF1ZXN0ID0gcGVuZGluZ1JlcXVlc3QgPVxuICAgICAgICAgICAgICAgIGxvYWRlcigpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnIgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyT25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmV0cnkgPSAoKSA9PiByZXNvbHZlKHJldHJ5KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJGYWlsID0gKCkgPT4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck9uRXJyb3IoZXJyLCB1c2VyUmV0cnksIHVzZXJGYWlsLCByZXRyaWVzICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChjb21wKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzUmVxdWVzdCAhPT0gcGVuZGluZ1JlcXVlc3QgJiYgcGVuZGluZ1JlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFjb21wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBBc3luYyBjb21wb25lbnQgbG9hZGVyIHJlc29sdmVkIHRvIHVuZGVmaW5lZC4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYElmIHlvdSBhcmUgdXNpbmcgcmV0cnkoKSwgbWFrZSBzdXJlIHRvIHJldHVybiBpdHMgcmV0dXJuIHZhbHVlLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVyb3AgbW9kdWxlIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjb21wICYmICFpc09iamVjdChjb21wKSAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFzeW5jIGNvbXBvbmVudCBsb2FkIHJlc3VsdDogJHtjb21wfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVkQ29tcCA9IGNvbXA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wO1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgfTtcbiAgICByZXR1cm4gZGVmaW5lQ29tcG9uZW50KHtcbiAgICAgICAgbmFtZTogJ0FzeW5jQ29tcG9uZW50V3JhcHBlcicsXG4gICAgICAgIF9fYXN5bmNMb2FkZXI6IGxvYWQsXG4gICAgICAgIGdldCBfX2FzeW5jUmVzb2x2ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRDb21wO1xuICAgICAgICB9LFxuICAgICAgICBzZXR1cCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlO1xuICAgICAgICAgICAgLy8gYWxyZWFkeSByZXNvbHZlZFxuICAgICAgICAgICAgaWYgKHJlc29sdmVkQ29tcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvbkVycm9yID0gKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAxMyAvKiBFcnJvckNvZGVzLkFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi8sICFlcnJvckNvbXBvbmVudCAvKiBkbyBub3QgdGhyb3cgaW4gZGV2IGlmIHVzZXIgcHJvdmlkZWQgZXJyb3IgY29tcG9uZW50ICovKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBzdXNwZW5zZS1jb250cm9sbGVkIG9yIFNTUi5cbiAgICAgICAgICAgIGlmICgoc3VzcGVuc2libGUgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpIHx8XG4gICAgICAgICAgICAgICAgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNvbXAgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKGNvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gZXJyb3JDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9hZGVkID0gcmVmKGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gcmVmKCk7XG4gICAgICAgICAgICBjb25zdCBkZWxheWVkID0gcmVmKCEhZGVsYXkpO1xuICAgICAgICAgICAgaWYgKGRlbGF5KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ZWQudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbG9hZGVkLnZhbHVlICYmICFlcnJvci52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGBBc3luYyBjb21wb25lbnQgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH1tcy5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkKClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9hZGVkLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UucGFyZW50ICYmIGlzS2VlcEFsaXZlKGluc3RhbmNlLnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGlzIGtlZXAtYWxpdmUsIGZvcmNlIHVwZGF0ZSBzbyB0aGUgbG9hZGVkIGNvbXBvbmVudCdzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hbWUgaXMgdGFrZW4gaW50byBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChsb2FkZWQudmFsdWUgJiYgcmVzb2x2ZWRDb21wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVycm9yLnZhbHVlICYmIGVycm9yQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsb2FkaW5nQ29tcG9uZW50ICYmICFkZWxheWVkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShsb2FkaW5nQ29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVJbm5lckNvbXAoY29tcCwgcGFyZW50KSB7XG4gICAgY29uc3QgeyByZWYsIHByb3BzLCBjaGlsZHJlbiwgY2UgfSA9IHBhcmVudC52bm9kZTtcbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKGNvbXAsIHByb3BzLCBjaGlsZHJlbik7XG4gICAgLy8gZW5zdXJlIGlubmVyIGNvbXBvbmVudCBpbmhlcml0cyB0aGUgYXN5bmMgd3JhcHBlcidzIHJlZiBvd25lclxuICAgIHZub2RlLnJlZiA9IHJlZjtcbiAgICAvLyBwYXNzIHRoZSBjdXN0b20gZWxlbWVudCBjYWxsYmFjayBvbiB0byB0aGUgaW5uZXIgY29tcFxuICAgIC8vIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgYXN5bmMgd3JhcHBlclxuICAgIHZub2RlLmNlID0gY2U7XG4gICAgZGVsZXRlIHBhcmVudC52bm9kZS5jZTtcbiAgICByZXR1cm4gdm5vZGU7XG59XG5cbmNvbnN0IGlzS2VlcEFsaXZlID0gKHZub2RlKSA9PiB2bm9kZS50eXBlLl9faXNLZWVwQWxpdmU7XG5jb25zdCBLZWVwQWxpdmVJbXBsID0ge1xuICAgIG5hbWU6IGBLZWVwQWxpdmVgLFxuICAgIC8vIE1hcmtlciBmb3Igc3BlY2lhbCBoYW5kbGluZyBpbnNpZGUgdGhlIHJlbmRlcmVyLiBXZSBhcmUgbm90IHVzaW5nIGEgPT09XG4gICAgLy8gY2hlY2sgZGlyZWN0bHkgb24gS2VlcEFsaXZlIGluIHRoZSByZW5kZXJlciwgYmVjYXVzZSBpbXBvcnRpbmcgaXQgZGlyZWN0bHlcbiAgICAvLyB3b3VsZCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgdHJlZS1zaGFrZW4uXG4gICAgX19pc0tlZXBBbGl2ZTogdHJ1ZSxcbiAgICBwcm9wczoge1xuICAgICAgICBpbmNsdWRlOiBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XSxcbiAgICAgICAgZXhjbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuICAgIH0sXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAvLyBLZWVwQWxpdmUgY29tbXVuaWNhdGVzIHdpdGggdGhlIGluc3RhbnRpYXRlZCByZW5kZXJlciB2aWEgdGhlXG4gICAgICAgIC8vIGN0eCB3aGVyZSB0aGUgcmVuZGVyZXIgcGFzc2VzIGluIGl0cyBpbnRlcm5hbHMsXG4gICAgICAgIC8vIGFuZCB0aGUgS2VlcEFsaXZlIGluc3RhbmNlIGV4cG9zZXMgYWN0aXZhdGUvZGVhY3RpdmF0ZSBpbXBsZW1lbnRhdGlvbnMuXG4gICAgICAgIC8vIFRoZSB3aG9sZSBwb2ludCBvZiB0aGlzIGlzIHRvIGF2b2lkIGltcG9ydGluZyBLZWVwQWxpdmUgZGlyZWN0bHkgaW4gdGhlXG4gICAgICAgIC8vIHJlbmRlcmVyIHRvIGZhY2lsaXRhdGUgdHJlZS1zaGFraW5nLlxuICAgICAgICBjb25zdCBzaGFyZWRDb250ZXh0ID0gaW5zdGFuY2UuY3R4O1xuICAgICAgICAvLyBpZiB0aGUgaW50ZXJuYWwgcmVuZGVyZXIgaXMgbm90IHJlZ2lzdGVyZWQsIGl0IGluZGljYXRlcyB0aGF0IHRoaXMgaXMgc2VydmVyLXNpZGUgcmVuZGVyaW5nLFxuICAgICAgICAvLyBmb3IgS2VlcEFsaXZlLCB3ZSBqdXN0IG5lZWQgdG8gcmVuZGVyIGl0cyBjaGlsZHJlblxuICAgICAgICBpZiAoIXNoYXJlZENvbnRleHQucmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoID09PSAxID8gY2hpbGRyZW5bMF0gOiBjaGlsZHJlbjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGxldCBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgIGluc3RhbmNlLl9fdl9jYWNoZSA9IGNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudFN1c3BlbnNlID0gaW5zdGFuY2Uuc3VzcGVuc2U7XG4gICAgICAgIGNvbnN0IHsgcmVuZGVyZXI6IHsgcDogcGF0Y2gsIG06IG1vdmUsIHVtOiBfdW5tb3VudCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSB9ID0gc2hhcmVkQ29udGV4dDtcbiAgICAgICAgY29uc3Qgc3RvcmFnZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzaGFyZWRDb250ZXh0LmFjdGl2YXRlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICBtb3ZlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBNb3ZlVHlwZS5FTlRFUiAqLywgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgLy8gaW4gY2FzZSBwcm9wcyBoYXZlIGNoYW5nZWRcbiAgICAgICAgICAgIHBhdGNoKGluc3RhbmNlLnZub2RlLCB2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHZub2RlLnNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNEZWFjdGl2YXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5hKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlLmEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlTW91bnRlZDtcbiAgICAgICAgICAgICAgICBpZiAodm5vZGVIb29rKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlLnBhcmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvbXBvbmVudHMgdHJlZVxuICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzaGFyZWRDb250ZXh0LmRlYWN0aXZhdGUgPSAodm5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgbW92ZSh2bm9kZSwgc3RvcmFnZUNvbnRhaW5lciwgbnVsbCwgMSAvKiBNb3ZlVHlwZS5MRUFWRSAqLywgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UuZGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlVW5tb3VudGVkO1xuICAgICAgICAgICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UucGFyZW50LCB2bm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzRGVhY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29tcG9uZW50cyB0cmVlXG4gICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHVubW91bnQodm5vZGUpIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBzaGFwZUZsYWcgc28gaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZFxuICAgICAgICAgICAgcmVzZXRTaGFwZUZsYWcodm5vZGUpO1xuICAgICAgICAgICAgX3VubW91bnQodm5vZGUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcHJ1bmVDYWNoZShmaWx0ZXIpIHtcbiAgICAgICAgICAgIGNhY2hlLmZvckVhY2goKHZub2RlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZSh2bm9kZS50eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSAmJiAoIWZpbHRlciB8fCAhZmlsdGVyKG5hbWUpKSkge1xuICAgICAgICAgICAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkoa2V5KSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICghY3VycmVudCB8fCAhaXNTYW1lVk5vZGVUeXBlKGNhY2hlZCwgY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgaW5zdGFuY2Ugc2hvdWxkIG5vIGxvbmdlciBiZSBrZXB0LWFsaXZlLlxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVubW91bnQgaXQgbm93IGJ1dCBpdCBtaWdodCBiZSBsYXRlciwgc28gcmVzZXQgaXRzIGZsYWcgbm93LlxuICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBydW5lIGNhY2hlIG9uIGluY2x1ZGUvZXhjbHVkZSBwcm9wIGNoYW5nZVxuICAgICAgICB3YXRjaCgoKSA9PiBbcHJvcHMuaW5jbHVkZSwgcHJvcHMuZXhjbHVkZV0sIChbaW5jbHVkZSwgZXhjbHVkZV0pID0+IHtcbiAgICAgICAgICAgIGluY2x1ZGUgJiYgcHJ1bmVDYWNoZShuYW1lID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xuICAgICAgICAgICAgZXhjbHVkZSAmJiBwcnVuZUNhY2hlKG5hbWUgPT4gIW1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpO1xuICAgICAgICB9LCBcbiAgICAgICAgLy8gcHJ1bmUgcG9zdC1yZW5kZXIgYWZ0ZXIgYGN1cnJlbnRgIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgeyBmbHVzaDogJ3Bvc3QnLCBkZWVwOiB0cnVlIH0pO1xuICAgICAgICAvLyBjYWNoZSBzdWIgdHJlZSBhZnRlciByZW5kZXJcbiAgICAgICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgICAgIGNvbnN0IGNhY2hlU3VidHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGZpeCAjMTYyMSwgdGhlIHBlbmRpbmdDYWNoZUtleSBjb3VsZCBiZSAwXG4gICAgICAgICAgICBpZiAocGVuZGluZ0NhY2hlS2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XG4gICAgICAgIG9uVXBkYXRlZChjYWNoZVN1YnRyZWUpO1xuICAgICAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaChjYWNoZWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc3ViVHJlZSwgc3VzcGVuc2UgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChzdWJUcmVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUgJiYgY2FjaGVkLmtleSA9PT0gdm5vZGUua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgaW5zdGFuY2Ugd2lsbCBiZSB1bm1vdW50ZWQgYXMgcGFydCBvZiBrZWVwLWFsaXZlJ3MgdW5tb3VudFxuICAgICAgICAgICAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBpbnZva2UgaXRzIGRlYWN0aXZhdGVkIGhvb2sgaGVyZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYSA9IHZub2RlLmNvbXBvbmVudC5kYTtcbiAgICAgICAgICAgICAgICAgICAgZGEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRhLCBzdXNwZW5zZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdW5tb3VudChjYWNoZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcGVuZGluZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghc2xvdHMuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCByYXdWTm9kZSA9IGNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEtlZXBBbGl2ZSBzaG91bGQgY29udGFpbiBleGFjdGx5IG9uZSBjb21wb25lbnQgY2hpbGQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc1ZOb2RlKHJhd1ZOb2RlKSB8fFxuICAgICAgICAgICAgICAgICghKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8pICYmXG4gICAgICAgICAgICAgICAgICAgICEocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiByYXdWTm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB2bm9kZSA9IGdldElubmVyQ2hpbGQocmF3Vk5vZGUpO1xuICAgICAgICAgICAgY29uc3QgY29tcCA9IHZub2RlLnR5cGU7XG4gICAgICAgICAgICAvLyBmb3IgYXN5bmMgY29tcG9uZW50cywgbmFtZSBjaGVjayBzaG91bGQgYmUgYmFzZWQgaW4gaXRzIGxvYWRlZFxuICAgICAgICAgICAgLy8gaW5uZXIgY29tcG9uZW50IGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoaXNBc3luY1dyYXBwZXIodm5vZGUpXG4gICAgICAgICAgICAgICAgPyB2bm9kZS50eXBlLl9fYXN5bmNSZXNvbHZlZCB8fCB7fVxuICAgICAgICAgICAgICAgIDogY29tcCk7XG4gICAgICAgICAgICBjb25zdCB7IGluY2x1ZGUsIGV4Y2x1ZGUsIG1heCB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAoKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSkgfHxcbiAgICAgICAgICAgICAgICAoZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHZub2RlO1xuICAgICAgICAgICAgICAgIHJldHVybiByYXdWTm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHZub2RlLmtleSA9PSBudWxsID8gY29tcCA6IHZub2RlLmtleTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZFZOb2RlID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgICAgICAvLyBjbG9uZSB2bm9kZSBpZiBpdCdzIHJldXNlZCBiZWNhdXNlIHdlIGFyZSBnb2luZyB0byBtdXRhdGUgaXRcbiAgICAgICAgICAgIGlmICh2bm9kZS5lbCkge1xuICAgICAgICAgICAgICAgIHZub2RlID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhd1ZOb2RlLnNzQ29udGVudCA9IHZub2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICMxNTEzIGl0J3MgcG9zc2libGUgZm9yIHRoZSByZXR1cm5lZCB2bm9kZSB0byBiZSBjbG9uZWQgZHVlIHRvIGF0dHJcbiAgICAgICAgICAgIC8vIGZhbGx0aHJvdWdoIG9yIHNjb3BlSWQsIHNvIHRoZSB2bm9kZSBoZXJlIG1heSBub3QgYmUgdGhlIGZpbmFsIHZub2RlXG4gICAgICAgICAgICAvLyB0aGF0IGlzIG1vdW50ZWQuIEluc3RlYWQgb2YgY2FjaGluZyBpdCBkaXJlY3RseSwgd2Ugc3RvcmUgdGhlIHBlbmRpbmdcbiAgICAgICAgICAgIC8vIGtleSBhbmQgY2FjaGUgYGluc3RhbmNlLnN1YlRyZWVgICh0aGUgbm9ybWFsaXplZCB2bm9kZSkgaW5cbiAgICAgICAgICAgIC8vIGJlZm9yZU1vdW50L2JlZm9yZVVwZGF0ZSBob29rcy5cbiAgICAgICAgICAgIHBlbmRpbmdDYWNoZUtleSA9IGtleTtcbiAgICAgICAgICAgIGlmIChjYWNoZWRWTm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvcHkgb3ZlciBtb3VudGVkIHN0YXRlXG4gICAgICAgICAgICAgICAgdm5vZGUuZWwgPSBjYWNoZWRWTm9kZS5lbDtcbiAgICAgICAgICAgICAgICB2bm9kZS5jb21wb25lbnQgPSBjYWNoZWRWTm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHZub2RlLnRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgdXBkYXRlIHRyYW5zaXRpb24gaG9va3Mgb24gc3ViVHJlZVxuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIHZub2RlLnRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB2bm9kZSBiZWluZyBtb3VudGVkIGFzIGZyZXNoXG4gICAgICAgICAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IDUxMiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhpcyBrZXkgdGhlIGZyZXNoZXN0XG4gICAgICAgICAgICAgICAga2V5cy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICAgICAgICAgICAgICAvLyBwcnVuZSBvbGRlc3QgZW50cnlcbiAgICAgICAgICAgICAgICBpZiAobWF4ICYmIGtleXMuc2l6ZSA+IHBhcnNlSW50KG1heCwgMTApKSB7XG4gICAgICAgICAgICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXlzLnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXZvaWQgdm5vZGUgYmVpbmcgdW5tb3VudGVkXG4gICAgICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gMjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovO1xuICAgICAgICAgICAgY3VycmVudCA9IHZub2RlO1xuICAgICAgICAgICAgcmV0dXJuIGlzU3VzcGVuc2UocmF3Vk5vZGUudHlwZSkgPyByYXdWTm9kZSA6IHZub2RlO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2Vcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXG5jb25zdCBLZWVwQWxpdmUgPSBLZWVwQWxpdmVJbXBsO1xuZnVuY3Rpb24gbWF0Y2hlcyhwYXR0ZXJuLCBuYW1lKSB7XG4gICAgaWYgKGlzQXJyYXkocGF0dGVybikpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4uc29tZSgocCkgPT4gbWF0Y2hlcyhwLCBuYW1lKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU3RyaW5nKHBhdHRlcm4pKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KCcsJykuaW5jbHVkZXMobmFtZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gb25BY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiIC8qIExpZmVjeWNsZUhvb2tzLkFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9uRGVhY3RpdmF0ZWQoaG9vaywgdGFyZ2V0KSB7XG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiAvKiBMaWZlY3ljbGVIb29rcy5ERUFDVElWQVRFRCAqLywgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCB0eXBlLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICAvLyBjYWNoZSB0aGUgZGVhY3RpdmF0ZSBicmFuY2ggY2hlY2sgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWVcbiAgICAvLyBob29rIGNhbiBiZSBwcm9wZXJseSBkZWR1cGVkIGJ5IHRoZSBzY2hlZHVsZXIuIFwiX193ZGNcIiBzdGFuZHMgZm9yIFwid2l0aFxuICAgIC8vIGRlYWN0aXZhdGlvbiBjaGVja1wiLlxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fFxuICAgICAgICAoaG9vay5fX3dkYyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIG9ubHkgZmlyZSB0aGUgaG9vayBpZiB0aGUgdGFyZ2V0IGluc3RhbmNlIGlzIE5PVCBpbiBhIGRlYWN0aXZhdGVkIGJyYW5jaC5cbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5pc0RlYWN0aXZhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhvb2soKTtcbiAgICAgICAgfSk7XG4gICAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcbiAgICAvLyBJbiBhZGRpdGlvbiB0byByZWdpc3RlcmluZyBpdCBvbiB0aGUgdGFyZ2V0IGluc3RhbmNlLCB3ZSB3YWxrIHVwIHRoZSBwYXJlbnRcbiAgICAvLyBjaGFpbiBhbmQgcmVnaXN0ZXIgaXQgb24gYWxsIGFuY2VzdG9yIGluc3RhbmNlcyB0aGF0IGFyZSBrZWVwLWFsaXZlIHJvb3RzLlxuICAgIC8vIFRoaXMgYXZvaWRzIHRoZSBuZWVkIHRvIHdhbGsgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZSB3aGVuIGludm9raW5nIHRoZXNlXG4gICAgLy8gaG9va3MsIGFuZCBtb3JlIGltcG9ydGFudGx5LCBhdm9pZHMgdGhlIG5lZWQgdG8gdHJhY2sgY2hpbGQgY29tcG9uZW50cyBpblxuICAgIC8vIGFycmF5cy5cbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0LnBhcmVudDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpbmplY3RUb0tlZXBBbGl2ZVJvb3Qod3JhcHBlZEhvb2ssIHR5cGUsIHRhcmdldCwgY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpbmplY3RUb0tlZXBBbGl2ZVJvb3QoaG9vaywgdHlwZSwgdGFyZ2V0LCBrZWVwQWxpdmVSb290KSB7XG4gICAgLy8gaW5qZWN0SG9vayB3cmFwcyB0aGUgb3JpZ2luYWwgZm9yIGVycm9yIGhhbmRsaW5nLCBzbyBtYWtlIHN1cmUgdG8gcmVtb3ZlXG4gICAgLy8gdGhlIHdyYXBwZWQgdmVyc2lvbi5cbiAgICBjb25zdCBpbmplY3RlZCA9IGluamVjdEhvb2sodHlwZSwgaG9vaywga2VlcEFsaXZlUm9vdCwgdHJ1ZSAvKiBwcmVwZW5kICovKTtcbiAgICBvblVubW91bnRlZCgoKSA9PiB7XG4gICAgICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XG4gICAgfSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XG4gICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH4yNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi87XG4gICAgdm5vZGUuc2hhcGVGbGFnICY9IH41MTIgLyogU2hhcGVGbGFncy5DT01QT05FTlRfS0VQVF9BTElWRSAqLztcbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcbiAgICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8gPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcbn1cblxuZnVuY3Rpb24gaW5qZWN0SG9vayh0eXBlLCBob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UsIHByZXBlbmQgPSBmYWxzZSkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcbiAgICAgICAgLy8gY2FjaGUgdGhlIGVycm9yIGhhbmRsaW5nIHdyYXBwZXIgZm9yIGluamVjdGVkIGhvb2tzIHNvIHRoZSBzYW1lIGhvb2tcbiAgICAgICAgLy8gY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dlaFwiIHN0YW5kcyBmb3IgXCJ3aXRoIGVycm9yXG4gICAgICAgIC8vIGhhbmRsaW5nXCIuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dlaCB8fFxuICAgICAgICAgICAgKGhvb2suX193ZWggPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3VycmVudEluc3RhbmNlIGR1cmluZyBob29rIGludm9jYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBhc3N1bWVzIHRoZSBob29rIGRvZXMgbm90IHN5bmNocm9ub3VzbHkgdHJpZ2dlciBvdGhlciBob29rcywgd2hpY2hcbiAgICAgICAgICAgICAgICAvLyBjYW4gb25seSBiZSBmYWxzZSB3aGVuIHRoZSB1c2VyIGRvZXMgc29tZXRoaW5nIHJlYWxseSBmdW5reS5cbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCB0YXJnZXQsIHR5cGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgICAgIGhvb2tzLnVuc2hpZnQod3JhcHBlZEhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9va3MucHVzaCh3cmFwcGVkSG9vayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyYXBwZWRIb29rO1xuICAgIH1cbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sICcnKSk7XG4gICAgICAgIHdhcm4oYCR7YXBpTmFtZX0gaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBgICtcbiAgICAgICAgICAgIGBhc3NvY2lhdGVkIHdpdGguIGAgK1xuICAgICAgICAgICAgYExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICtcbiAgICAgICAgICAgIChgIElmIHlvdSBhcmUgdXNpbmcgYXN5bmMgc2V0dXAoKSwgbWFrZSBzdXJlIHRvIHJlZ2lzdGVyIGxpZmVjeWNsZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGhvb2tzIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQgc3RhdGVtZW50LmBcbiAgICAgICAgICAgICAgICApKTtcbiAgICB9XG59XG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4gXG4vLyBwb3N0LWNyZWF0ZSBsaWZlY3ljbGUgcmVnaXN0cmF0aW9ucyBhcmUgbm9vcHMgZHVyaW5nIFNTUiAoZXhjZXB0IGZvciBzZXJ2ZXJQcmVmZXRjaClcbighaXNJblNTUkNvbXBvbmVudFNldHVwIHx8IGxpZmVjeWNsZSA9PT0gXCJzcFwiIC8qIExpZmVjeWNsZUhvb2tzLlNFUlZFUl9QUkVGRVRDSCAqLykgJiZcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgKC4uLmFyZ3MpID0+IGhvb2soLi4uYXJncyksIHRhcmdldCk7XG5jb25zdCBvbkJlZm9yZU1vdW50ID0gY3JlYXRlSG9vayhcImJtXCIgLyogTGlmZWN5Y2xlSG9va3MuQkVGT1JFX01PVU5UICovKTtcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIgLyogTGlmZWN5Y2xlSG9va3MuTU9VTlRFRCAqLyk7XG5jb25zdCBvbkJlZm9yZVVwZGF0ZSA9IGNyZWF0ZUhvb2soXCJidVwiIC8qIExpZmVjeWNsZUhvb2tzLkJFRk9SRV9VUERBVEUgKi8pO1xuY29uc3Qgb25VcGRhdGVkID0gY3JlYXRlSG9vayhcInVcIiAvKiBMaWZlY3ljbGVIb29rcy5VUERBVEVEICovKTtcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXCJidW1cIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfVU5NT1VOVCAqLyk7XG5jb25zdCBvblVubW91bnRlZCA9IGNyZWF0ZUhvb2soXCJ1bVwiIC8qIExpZmVjeWNsZUhvb2tzLlVOTU9VTlRFRCAqLyk7XG5jb25zdCBvblNlcnZlclByZWZldGNoID0gY3JlYXRlSG9vayhcInNwXCIgLyogTGlmZWN5Y2xlSG9va3MuU0VSVkVSX1BSRUZFVENIICovKTtcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUklHR0VSRUQgKi8pO1xuY29uc3Qgb25SZW5kZXJUcmFja2VkID0gY3JlYXRlSG9vayhcInJ0Y1wiIC8qIExpZmVjeWNsZUhvb2tzLlJFTkRFUl9UUkFDS0VEICovKTtcbmZ1bmN0aW9uIG9uRXJyb3JDYXB0dXJlZChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgICBpbmplY3RIb29rKFwiZWNcIiAvKiBMaWZlY3ljbGVIb29rcy5FUlJPUl9DQVBUVVJFRCAqLywgaG9vaywgdGFyZ2V0KTtcbn1cblxuLyoqXG5SdW50aW1lIGhlbHBlciBmb3IgYXBwbHlpbmcgZGlyZWN0aXZlcyB0byBhIHZub2RlLiBFeGFtcGxlIHVzYWdlOlxuXG5jb25zdCBjb21wID0gcmVzb2x2ZUNvbXBvbmVudCgnY29tcCcpXG5jb25zdCBmb28gPSByZXNvbHZlRGlyZWN0aXZlKCdmb28nKVxuY29uc3QgYmFyID0gcmVzb2x2ZURpcmVjdGl2ZSgnYmFyJylcblxucmV0dXJuIHdpdGhEaXJlY3RpdmVzKGgoY29tcCksIFtcbiAgW2ZvbywgdGhpcy54XSxcbiAgW2JhciwgdGhpcy55XVxuXSlcbiovXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xuICAgIGlmIChpc0J1aWx0SW5EaXJlY3RpdmUobmFtZSkpIHtcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBkaXJlY3RpdmUgaWRzIGFzIGN1c3RvbSBkaXJlY3RpdmUgaWQ6ICcgKyBuYW1lKTtcbiAgICB9XG59XG4vKipcbiAqIEFkZHMgZGlyZWN0aXZlcyB0byBhIFZOb2RlLlxuICovXG5mdW5jdGlvbiB3aXRoRGlyZWN0aXZlcyh2bm9kZSwgZGlyZWN0aXZlcykge1xuICAgIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHdpdGhEaXJlY3RpdmVzIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHJlbmRlciBmdW5jdGlvbnMuYCk7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICB9XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRFeHBvc2VQcm94eShpbnRlcm5hbEluc3RhbmNlKSB8fFxuICAgICAgICBpbnRlcm5hbEluc3RhbmNlLnByb3h5O1xuICAgIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycyB8fCAodm5vZGUuZGlycyA9IFtdKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IFtkaXIsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyA9IEVNUFRZX09CSl0gPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICBpZiAoZGlyKSB7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXIpKSB7XG4gICAgICAgICAgICAgICAgZGlyID0ge1xuICAgICAgICAgICAgICAgICAgICBtb3VudGVkOiBkaXIsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IGRpclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlyLmRlZXApIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkaXIsXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBhcmcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzO1xuICAgIGNvbnN0IG9sZEJpbmRpbmdzID0gcHJldlZOb2RlICYmIHByZXZWTm9kZS5kaXJzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xuICAgICAgICBpZiAob2xkQmluZGluZ3MpIHtcbiAgICAgICAgICAgIGJpbmRpbmcub2xkVmFsdWUgPSBvbGRCaW5kaW5nc1tpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaG9vayA9IGJpbmRpbmcuZGlyW25hbWVdO1xuICAgICAgICBpZiAoaG9vaykge1xuICAgICAgICAgICAgLy8gZGlzYWJsZSB0cmFja2luZyBpbnNpZGUgYWxsIGxpZmVjeWNsZSBob29rc1xuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBjYW4gcG90ZW50aWFsbHkgYmUgY2FsbGVkIGluc2lkZSBlZmZlY3RzLlxuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDggLyogRXJyb3JDb2Rlcy5ESVJFQ1RJVkVfSE9PSyAqLywgW1xuICAgICAgICAgICAgICAgIHZub2RlLmVsLFxuICAgICAgICAgICAgICAgIGJpbmRpbmcsXG4gICAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgICAgcHJldlZOb2RlXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgQ09NUE9ORU5UUyA9ICdjb21wb25lbnRzJztcbmNvbnN0IERJUkVDVElWRVMgPSAnZGlyZWN0aXZlcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQobmFtZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBuYW1lLCB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UpIHx8IG5hbWU7XG59XG5jb25zdCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UID0gU3ltYm9sKCk7XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGlmIChpc1N0cmluZyhjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgY29tcG9uZW50LCBmYWxzZSkgfHwgY29tcG9uZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaW52YWxpZCB0eXBlcyB3aWxsIGZhbGx0aHJvdWdoIHRvIGNyZWF0ZVZOb2RlIGFuZCByYWlzZSB3YXJuaW5nXG4gICAgICAgIHJldHVybiAoY29tcG9uZW50IHx8IE5VTExfRFlOQU1JQ19DT01QT05FTlQpO1xuICAgIH1cbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChESVJFQ1RJVkVTLCBuYW1lKTtcbn1cbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRJbnN0YW5jZTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgLy8gZXhwbGljaXQgc2VsZiBuYW1lIGhhcyBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgIGlmICh0eXBlID09PSBDT01QT05FTlRTKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmTmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50LCBmYWxzZSAvKiBkbyBub3QgaW5jbHVkZSBpbmZlcnJlZCBuYW1lIHRvIGF2b2lkIGJyZWFraW5nIGV4aXN0aW5nIGNvZGUgKi8pO1xuICAgICAgICAgICAgaWYgKHNlbGZOYW1lICYmXG4gICAgICAgICAgICAgICAgKHNlbGZOYW1lID09PSBuYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYW1lbGl6ZShuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmTmFtZSA9PT0gY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBcbiAgICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXG4gICAgICAgIC8vIGNoZWNrIGluc3RhbmNlW3R5cGVdIGZpcnN0IHdoaWNoIGlzIHJlc29sdmVkIGZvciBvcHRpb25zIEFQSVxuICAgICAgICByZXNvbHZlKGluc3RhbmNlW3R5cGVdIHx8IENvbXBvbmVudFt0eXBlXSwgbmFtZSkgfHxcbiAgICAgICAgICAgIC8vIGdsb2JhbCByZWdpc3RyYXRpb25cbiAgICAgICAgICAgIHJlc29sdmUoaW5zdGFuY2UuYXBwQ29udGV4dFt0eXBlXSwgbmFtZSk7XG4gICAgICAgIGlmICghcmVzICYmIG1heWJlU2VsZlJlZmVyZW5jZSkge1xuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gaW1wbGljaXQgc2VsZi1yZWZlcmVuY2VcbiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHR5cGUgPT09IENPTVBPTkVOVFNcbiAgICAgICAgICAgICAgICA/IGBcXG5JZiB0aGlzIGlzIGEgbmF0aXZlIGN1c3RvbSBlbGVtZW50LCBtYWtlIHN1cmUgdG8gZXhjbHVkZSBpdCBmcm9tIGAgK1xuICAgICAgICAgICAgICAgICAgICBgY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYFxuICAgICAgICAgICAgICAgIDogYGA7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R5cGUuc2xpY2UoMCwgLTEpfTogJHtuYW1lfSR7ZXh0cmF9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYHJlc29sdmUke2NhcGl0YWxpemUodHlwZS5zbGljZSgwLCAtMSkpfSBgICtcbiAgICAgICAgICAgIGBjYW4gb25seSBiZSB1c2VkIGluIHJlbmRlcigpIG9yIHNldHVwKCkuYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZShyZWdpc3RyeSwgbmFtZSkge1xuICAgIHJldHVybiAocmVnaXN0cnkgJiZcbiAgICAgICAgKHJlZ2lzdHJ5W25hbWVdIHx8XG4gICAgICAgICAgICByZWdpc3RyeVtjYW1lbGl6ZShuYW1lKV0gfHxcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSkpO1xufVxuXG4vKipcbiAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvblxuICovXG5mdW5jdGlvbiByZW5kZXJMaXN0KHNvdXJjZSwgcmVuZGVySXRlbSwgY2FjaGUsIGluZGV4KSB7XG4gICAgbGV0IHJldDtcbiAgICBjb25zdCBjYWNoZWQgPSAoY2FjaGUgJiYgY2FjaGVbaW5kZXhdKTtcbiAgICBpZiAoaXNBcnJheShzb3VyY2UpIHx8IGlzU3RyaW5nKHNvdXJjZSkpIHtcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oc291cmNlW2ldLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIHYtZm9yIHJhbmdlIGV4cGVjdCBhbiBpbnRlZ2VyIHZhbHVlIGJ1dCBnb3QgJHtzb3VyY2V9LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZTsgaSsrKSB7XG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKGkgKyAxLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKSB7XG4gICAgICAgICAgICByZXQgPSBBcnJheS5mcm9tKHNvdXJjZSwgKGl0ZW0sIGkpID0+IHJlbmRlckl0ZW0oaXRlbSwgaSwgdW5kZWZpbmVkLCBjYWNoZWQgJiYgY2FjaGVkW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXQgPSBbXTtcbiAgICB9XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlW2luZGV4XSA9IHJldDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgY3JlYXRpbmcgZHluYW1pYyBzbG90cyBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVNsb3RzKHNsb3RzLCBkeW5hbWljU2xvdHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNTbG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzbG90ID0gZHluYW1pY1Nsb3RzW2ldO1xuICAgICAgICAvLyBhcnJheSBvZiBkeW5hbWljIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWZvcj1cIi4uLlwiICNbLi4uXT5cbiAgICAgICAgaWYgKGlzQXJyYXkoc2xvdCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2xvdC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNsb3QpIHtcbiAgICAgICAgICAgIC8vIGNvbmRpdGlvbmFsIHNpbmdsZSBzbG90IGdlbmVyYXRlZCBieSA8dGVtcGxhdGUgdi1pZj1cIi4uLlwiICNmb28+XG4gICAgICAgICAgICBzbG90c1tzbG90Lm5hbWVdID0gc2xvdC5rZXlcbiAgICAgICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHNsb3QuZm4oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBicmFuY2gga2V5IHNvIGVhY2ggY29uZGl0aW9uYWwgYnJhbmNoIGlzIGNvbnNpZGVyZWQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5rZXkgPSBzbG90LmtleTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBzbG90LmZuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzbG90cztcbn1cblxuLyoqXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIGA8c2xvdC8+YFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgXG4vLyB0aGlzIGlzIG5vdCBhIHVzZXItZmFjaW5nIGZ1bmN0aW9uLCBzbyB0aGUgZmFsbGJhY2sgaXMgYWx3YXlzIGdlbmVyYXRlZCBieVxuLy8gdGhlIGNvbXBpbGVyIGFuZCBndWFyYW50ZWVkIHRvIGJlIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGFuIGFycmF5XG5mYWxsYmFjaywgbm9TbG90dGVkKSB7XG4gICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5pc0NFIHx8XG4gICAgICAgIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmXG4gICAgICAgICAgICBpc0FzeW5jV3JhcHBlcihjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50KSAmJlxuICAgICAgICAgICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudC5pc0NFKSkge1xuICAgICAgICBpZiAobmFtZSAhPT0gJ2RlZmF1bHQnKVxuICAgICAgICAgICAgcHJvcHMubmFtZSA9IG5hbWU7XG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSgnc2xvdCcsIHByb3BzLCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKTtcbiAgICB9XG4gICAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNsb3QgJiYgc2xvdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdhcm4oYFNTUi1vcHRpbWl6ZWQgc2xvdCBmdW5jdGlvbiBkZXRlY3RlZCBpbiBhIG5vbi1TU1Itb3B0aW1pemVkIHJlbmRlciBgICtcbiAgICAgICAgICAgIGBmdW5jdGlvbi4gWW91IG5lZWQgdG8gbWFyayB0aGlzIGNvbXBvbmVudCB3aXRoICRkeW5hbWljLXNsb3RzIGluIHRoZSBgICtcbiAgICAgICAgICAgIGBwYXJlbnQgdGVtcGxhdGUuYCk7XG4gICAgICAgIHNsb3QgPSAoKSA9PiBbXTtcbiAgICB9XG4gICAgLy8gYSBjb21waWxlZCBzbG90IGRpc2FibGVzIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHQgdG8gYXZvaWQgbWFudWFsXG4gICAgLy8gaW52b2NhdGlvbiBpbnRlcmZlcmluZyB3aXRoIHRlbXBsYXRlLWJhc2VkIGJsb2NrIHRyYWNraW5nLCBidXQgaW5cbiAgICAvLyBgcmVuZGVyU2xvdGAgd2UgY2FuIGJlIHN1cmUgdGhhdCBpdCdzIHRlbXBsYXRlLWJhc2VkIHNvIHdlIGNhbiBmb3JjZVxuICAgIC8vIGVuYWJsZSBpdC5cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSBmYWxzZTtcbiAgICB9XG4gICAgb3BlbkJsb2NrKCk7XG4gICAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XG4gICAgY29uc3QgcmVuZGVyZWQgPSBjcmVhdGVCbG9jayhGcmFnbWVudCwge1xuICAgICAgICBrZXk6IHByb3BzLmtleSB8fFxuICAgICAgICAgICAgLy8gc2xvdCBjb250ZW50IGFycmF5IG9mIGEgZHluYW1pYyBjb25kaXRpb25hbCBzbG90IG1heSBoYXZlIGEgYnJhbmNoXG4gICAgICAgICAgICAvLyBrZXkgYXR0YWNoZWQgaW4gdGhlIGBjcmVhdGVTbG90c2AgaGVscGVyLCByZXNwZWN0IHRoYXRcbiAgICAgICAgICAgICh2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5KSB8fFxuICAgICAgICAgICAgYF8ke25hbWV9YFxuICAgIH0sIHZhbGlkU2xvdENvbnRlbnQgfHwgKGZhbGxiYWNrID8gZmFsbGJhY2soKSA6IFtdKSwgdmFsaWRTbG90Q29udGVudCAmJiBzbG90cy5fID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi9cbiAgICAgICAgPyA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqL1xuICAgICAgICA6IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLyk7XG4gICAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xuICAgICAgICByZW5kZXJlZC5zbG90U2NvcGVJZHMgPSBbcmVuZGVyZWQuc2NvcGVJZCArICctcyddO1xuICAgIH1cbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgICAgIHNsb3QuX2QgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyZWQ7XG59XG5mdW5jdGlvbiBlbnN1cmVWYWxpZFZOb2RlKHZub2Rlcykge1xuICAgIHJldHVybiB2bm9kZXMuc29tZShjaGlsZCA9PiB7XG4gICAgICAgIGlmICghaXNWTm9kZShjaGlsZCkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCAmJlxuICAgICAgICAgICAgIWVuc3VyZVZhbGlkVk5vZGUoY2hpbGQuY2hpbGRyZW4pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KVxuICAgICAgICA/IHZub2Rlc1xuICAgICAgICA6IG51bGw7XG59XG5cbi8qKlxuICogRm9yIHByZWZpeGluZyBrZXlzIGluIHYtb249XCJvYmpcIiB3aXRoIFwib25cIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdG9IYW5kbGVycyhvYmosIHByZXNlcnZlQ2FzZUlmTmVjZXNzYXJ5KSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNPYmplY3Qob2JqKSkge1xuICAgICAgICB3YXJuKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSlcbiAgICAgICAgICAgID8gYG9uOiR7a2V5fWBcbiAgICAgICAgICAgIDogdG9IYW5kbGVyS2V5KGtleSldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogIzI0MzcgSW4gVnVlIDMsIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBkbyBub3QgaGF2ZSBhIHB1YmxpYyBpbnN0YW5jZSBwcm94eSBidXRcbiAqIHRoZXkgZXhpc3QgaW4gdGhlIGludGVybmFsIHBhcmVudCBjaGFpbi4gRm9yIGNvZGUgdGhhdCByZWxpZXMgb24gdHJhdmVyc2luZ1xuICogcHVibGljICRwYXJlbnQgY2hhaW5zLCBza2lwIGZ1bmN0aW9uYWwgb25lcyBhbmQgZ28gdG8gdGhlIHBhcmVudCBpbnN0ZWFkLlxuICovXG5jb25zdCBnZXRQdWJsaWNJbnN0YW5jZSA9IChpKSA9PiB7XG4gICAgaWYgKCFpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoaXNTdGF0ZWZ1bENvbXBvbmVudChpKSlcbiAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KGkpIHx8IGkucHJveHk7XG4gICAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gXG4vLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuLy8gZHVlIHRvIHR5cGUgYW5ub3RhdGlvblxuLyojX19QVVJFX18qLyBleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwge1xuICAgICQ6IGkgPT4gaSxcbiAgICAkZWw6IGkgPT4gaS52bm9kZS5lbCxcbiAgICAkZGF0YTogaSA9PiBpLmRhdGEsXG4gICAgJHByb3BzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzKSxcbiAgICAkYXR0cnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLmF0dHJzKSA6IGkuYXR0cnMpLFxuICAgICRzbG90czogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuc2xvdHMpIDogaS5zbG90cyksXG4gICAgJHJlZnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzKSxcbiAgICAkcGFyZW50OiBpID0+IGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KSxcbiAgICAkcm9vdDogaSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRlbWl0OiBpID0+IGkuZW1pdCxcbiAgICAkb3B0aW9uczogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IHJlc29sdmVNZXJnZWRPcHRpb25zKGkpIDogaS50eXBlKSxcbiAgICAkZm9yY2VVcGRhdGU6IGkgPT4gaS5mIHx8IChpLmYgPSAoKSA9PiBxdWV1ZUpvYihpLnVwZGF0ZSkpLFxuICAgICRuZXh0VGljazogaSA9PiBpLm4gfHwgKGkubiA9IG5leHRUaWNrLmJpbmQoaS5wcm94eSkpLFxuICAgICR3YXRjaDogaSA9PiAoX19WVUVfT1BUSU9OU19BUElfXyA/IGluc3RhbmNlV2F0Y2guYmluZChpKSA6IE5PT1ApXG59KTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcmVmaXggPSAoa2V5KSA9PiBrZXkgPT09ICdfJyB8fCBrZXkgPT09ICckJztcbmNvbnN0IGhhc1NldHVwQmluZGluZyA9IChzdGF0ZSwga2V5KSA9PiBzdGF0ZSAhPT0gRU1QVFlfT0JKICYmICFzdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiYgaGFzT3duKHN0YXRlLCBrZXkpO1xuY29uc3QgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0ge1xuICAgIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSwgZGF0YSwgcHJvcHMsIGFjY2Vzc0NhY2hlLCB0eXBlLCBhcHBDb250ZXh0IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgLy8gZm9yIGludGVybmFsIGZvcm1hdHRlcnMgdG8ga25vdyB0aGF0IHRoaXMgaXMgYSBWdWUgaW5zdGFuY2VcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgPT09ICdfX2lzVnVlJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGF0YSAvIHByb3BzIC8gY3R4XG4gICAgICAgIC8vIFRoaXMgZ2V0dGVyIGdldHMgY2FsbGVkIGZvciBldmVyeSBwcm9wZXJ0eSBhY2Nlc3Mgb24gdGhlIHJlbmRlciBjb250ZXh0XG4gICAgICAgIC8vIGR1cmluZyByZW5kZXIgYW5kIGlzIGEgbWFqb3IgaG90c3BvdC4gVGhlIG1vc3QgZXhwZW5zaXZlIHBhcnQgb2YgdGhpc1xuICAgICAgICAvLyBpcyB0aGUgbXVsdGlwbGUgaGFzT3duKCkgY2FsbHMuIEl0J3MgbXVjaCBmYXN0ZXIgdG8gZG8gYSBzaW1wbGUgcHJvcGVydHlcbiAgICAgICAgLy8gYWNjZXNzIG9uIGEgcGxhaW4gb2JqZWN0LCBzbyB3ZSB1c2UgYW4gYWNjZXNzQ2FjaGUgb2JqZWN0ICh3aXRoIG51bGxcbiAgICAgICAgLy8gcHJvdG90eXBlKSB0byBtZW1vaXplIHdoYXQgYWNjZXNzIHR5cGUgYSBrZXkgY29ycmVzcG9uZHMgdG8uXG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBBY2Nlc3NUeXBlcy5EQVRBICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBBY2Nlc3NUeXBlcy5QUk9QUyAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0OiBqdXN0IGZhbGx0aHJvdWdoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMSAvKiBBY2Nlc3NUeXBlcy5TRVRVUCAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDIgLyogQWNjZXNzVHlwZXMuREFUQSAqLztcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAvLyBvbmx5IGNhY2hlIG90aGVyIHByb3BlcnRpZXMgd2hlbiBpbnN0YW5jZSBoYXMgZGVjbGFyZWQgKHRodXMgc3RhYmxlKVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIChub3JtYWxpemVkUHJvcHMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pICYmXG4gICAgICAgICAgICAgICAgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAzIC8qIEFjY2Vzc1R5cGVzLlBST1BTICovO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIEFjY2Vzc1R5cGVzLkNPTlRFWFQgKi87XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9fVlVFX09QVElPTlNfQVBJX18gfHwgc2hvdWxkQ2FjaGVBY2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBBY2Nlc3NUeXBlcy5PVEhFUiAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XG4gICAgICAgIGxldCBjc3NNb2R1bGUsIGdsb2JhbFByb3BlcnRpZXM7XG4gICAgICAgIC8vIHB1YmxpYyAkeHh4IHByb3BlcnRpZXNcbiAgICAgICAgaWYgKHB1YmxpY0dldHRlcikge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJyRhdHRycycpIHtcbiAgICAgICAgICAgICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiAvKiBUcmFja09wVHlwZXMuR0VUICovLCBrZXkpO1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXG4gICAgICAgIChjc3NNb2R1bGUgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiZcbiAgICAgICAgICAgIChjc3NNb2R1bGUgPSBjc3NNb2R1bGVba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjc3NNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3R4ICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGN0eCwga2V5KSkge1xuICAgICAgICAgICAgLy8gdXNlciBtYXkgc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGB0aGlzYCB0aGF0IHN0YXJ0IHdpdGggYCRgXG4gICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBBY2Nlc3NUeXBlcy5DT05URVhUICovO1xuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAvLyBnbG9iYWwgcHJvcGVydGllc1xuICAgICAgICAoKGdsb2JhbFByb3BlcnRpZXMgPSBhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSxcbiAgICAgICAgICAgIGhhc093bihnbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKSkge1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgJiZcbiAgICAgICAgICAgICghaXNTdHJpbmcoa2V5KSB8fFxuICAgICAgICAgICAgICAgIC8vICMxMDkxIGF2b2lkIGludGVybmFsIGlzUmVmL2lzVk5vZGUgY2hlY2tzIG9uIGNvbXBvbmVudCBpbnN0YW5jZSBsZWFkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gaW5maW5pdGUgd2FybmluZyBsb29wXG4gICAgICAgICAgICAgICAga2V5LmluZGV4T2YoJ19fdicpICE9PSAwKSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBpc1Jlc2VydmVkUHJlZml4KGtleVswXSkgJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KGtleSl9IG11c3QgYmUgYWNjZXNzZWQgdmlhICRkYXRhIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggYSByZXNlcnZlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNoYXJhY3RlciAoXCIkXCIgb3IgXCJfXCIpIGFuZCBpcyBub3QgcHJveGllZCBvbiB0aGUgcmVuZGVyIGNvbnRleHQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0YW5jZSA9PT0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSB3YXMgYWNjZXNzZWQgZHVyaW5nIHJlbmRlciBgICtcbiAgICAgICAgICAgICAgICAgICAgYGJ1dCBpcyBub3QgZGVmaW5lZCBvbiBpbnN0YW5jZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0KHsgXzogaW5zdGFuY2UgfSwga2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB7IGRhdGEsIHNldHVwU3RhdGUsIGN0eCB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmIChoYXNTZXR1cEJpbmRpbmcoc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgc2V0dXBTdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwICYmXG4gICAgICAgICAgICBoYXNPd24oc2V0dXBTdGF0ZSwga2V5KSkge1xuICAgICAgICAgICAgd2FybihgQ2Fubm90IG11dGF0ZSA8c2NyaXB0IHNldHVwPiBiaW5kaW5nIFwiJHtrZXl9XCIgZnJvbSBPcHRpb25zIEFQSS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGluc3RhbmNlLnByb3BzLCBrZXkpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHJvcCBcIiR7a2V5fVwiLiBQcm9wcyBhcmUgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleVswXSA9PT0gJyQnICYmIGtleS5zbGljZSgxKSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHVibGljIHByb3BlcnR5IFwiJHtrZXl9XCIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUHJvcGVydGllcyBzdGFydGluZyB3aXRoICQgYXJlIHJlc2VydmVkIGFuZCByZWFkb25seS5gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh7IF86IHsgZGF0YSwgc2V0dXBTdGF0ZSwgYWNjZXNzQ2FjaGUsIGN0eCwgYXBwQ29udGV4dCwgcHJvcHNPcHRpb25zIH0gfSwga2V5KSB7XG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XG4gICAgICAgIHJldHVybiAoISFhY2Nlc3NDYWNoZVtrZXldIHx8XG4gICAgICAgICAgICAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkgfHxcbiAgICAgICAgICAgICgobm9ybWFsaXplZFByb3BzID0gcHJvcHNPcHRpb25zWzBdKSAmJiBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpKSB8fFxuICAgICAgICAgICAgaGFzT3duKGN0eCwga2V5KSB8fFxuICAgICAgICAgICAgaGFzT3duKHB1YmxpY1Byb3BlcnRpZXNNYXAsIGtleSkgfHxcbiAgICAgICAgICAgIGhhc093bihhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKTtcbiAgICB9LFxuICAgIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkYXRlIGtleSBjYWNoZSBvZiBhIGdldHRlciBiYXNlZCBwcm9wZXJ0eSAjNTQxN1xuICAgICAgICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGRlc2NyaXB0b3IsICd2YWx1ZScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldCh0YXJnZXQsIGtleSwgZGVzY3JpcHRvci52YWx1ZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbn07XG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFmYWxzZSkge1xuICAgIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgICAgICB3YXJuKGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gYCArXG4gICAgICAgICAgICBgVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYCk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycywge1xuICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAvLyBmYXN0IHBhdGggZm9yIHVuc2NvcGFibGVzIHdoZW4gdXNpbmcgYHdpdGhgIGJsb2NrXG4gICAgICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuZ2V0KHRhcmdldCwga2V5LCB0YXJnZXQpO1xuICAgIH0sXG4gICAgaGFzKF8sIGtleSkge1xuICAgICAgICBjb25zdCBoYXMgPSBrZXlbMF0gIT09ICdfJyAmJiAhaXNHbG9iYWxseVdoaXRlbGlzdGVkKGtleSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIF8gd2hpY2ggaXMgYSByZXNlcnZlZCBwcmVmaXggZm9yIFZ1ZSBpbnRlcm5hbHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhcztcbiAgICB9XG59KTtcbi8vIGRldiBvbmx5XG4vLyBJbiBkZXYgbW9kZSwgdGhlIHByb3h5IHRhcmdldCBleHBvc2VzIHRoZSBzYW1lIHByb3BlcnRpZXMgYXMgc2VlbiBvbiBgdGhpc2Bcbi8vIGZvciBlYXNpZXIgY29uc29sZSBpbnNwZWN0aW9uLiBJbiBwcm9kIG1vZGUgaXQgd2lsbCBiZSBhbiBlbXB0eSBvYmplY3Qgc29cbi8vIHRoZXNlIHByb3BlcnRpZXMgZGVmaW5pdGlvbnMgY2FuIGJlIHNraXBwZWQuXG5mdW5jdGlvbiBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgLy8gZXhwb3NlIGludGVybmFsIGluc3RhbmNlIGZvciBwcm94eSBoYW5kbGVyc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBfYCwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlXG4gICAgfSk7XG4gICAgLy8gZXhwb3NlIHB1YmxpYyBwcm9wZXJ0aWVzXG4gICAgT2JqZWN0LmtleXMocHVibGljUHJvcGVydGllc01hcCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpLFxuICAgICAgICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgLy8gYnV0IG5lZWRlZCB0byBwcmV2ZW50IHNldCBlcnJvcnNcbiAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgY29uc3QgeyBjdHgsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xuICAgIGlmIChwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocHJvcHNPcHRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgICAgICAgICAgc2V0OiBOT09QXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gZGV2IG9ubHlcbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSB9ID0gaW5zdGFuY2U7XG4gICAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gc2hvdWxkIG5vdCBzdGFydCB3aXRoIFwiJFwiIG9yIFwiX1wiIGAgK1xuICAgICAgICAgICAgICAgICAgICBgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gc2V0dXBTdGF0ZVtrZXldLFxuICAgICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuICh0eXBlLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKGNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgIHdhcm4oYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB0eXBlO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmxldCBzaG91bGRDYWNoZUFjY2VzcyA9IHRydWU7XG5mdW5jdGlvbiBhcHBseU9wdGlvbnMoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcbiAgICBjb25zdCBjdHggPSBpbnN0YW5jZS5jdHg7XG4gICAgLy8gZG8gbm90IGNhY2hlIHByb3BlcnR5IGFjY2VzcyBvbiBwdWJsaWMgcHJveHkgZHVyaW5nIHN0YXRlIGluaXRpYWxpemF0aW9uXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgICAvLyBjYWxsIGJlZm9yZUNyZWF0ZSBmaXJzdCBiZWZvcmUgYWNjZXNzaW5nIG90aGVyIG9wdGlvbnMgc2luY2VcbiAgICAvLyB0aGUgaG9vayBtYXkgbXV0YXRlIHJlc29sdmVkIG9wdGlvbnMgKCMyNzkxKVxuICAgIGlmIChvcHRpb25zLmJlZm9yZUNyZWF0ZSkge1xuICAgICAgICBjYWxsSG9vayhvcHRpb25zLmJlZm9yZUNyZWF0ZSwgaW5zdGFuY2UsIFwiYmNcIiAvKiBMaWZlY3ljbGVIb29rcy5CRUZPUkVfQ1JFQVRFICovKTtcbiAgICB9XG4gICAgY29uc3QgeyBcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLCBjb21wdXRlZDogY29tcHV0ZWRPcHRpb25zLCBtZXRob2RzLCB3YXRjaDogd2F0Y2hPcHRpb25zLCBwcm92aWRlOiBwcm92aWRlT3B0aW9ucywgaW5qZWN0OiBpbmplY3RPcHRpb25zLCBcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLCBiZWZvcmVNb3VudCwgbW91bnRlZCwgYmVmb3JlVXBkYXRlLCB1cGRhdGVkLCBhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkLCBiZWZvcmVEZXN0cm95LCBiZWZvcmVVbm1vdW50LCBkZXN0cm95ZWQsIHVubW91bnRlZCwgcmVuZGVyLCByZW5kZXJUcmFja2VkLCByZW5kZXJUcmlnZ2VyZWQsIGVycm9yQ2FwdHVyZWQsIHNlcnZlclByZWZldGNoLCBcbiAgICAvLyBwdWJsaWMgQVBJXG4gICAgZXhwb3NlLCBpbmhlcml0QXR0cnMsIFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsIGRpcmVjdGl2ZXMsIGZpbHRlcnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IFtwcm9wc09wdGlvbnNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xuICAgICAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJQcm9wc1wiIC8qIE9wdGlvblR5cGVzLlBST1BTICovLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgaW5pdGlhbGl6YXRpb24gb3JkZXIgKHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBWdWUgMik6XG4gICAgLy8gLSBwcm9wcyAoYWxyZWFkeSBkb25lIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbilcbiAgICAvLyAtIGluamVjdFxuICAgIC8vIC0gbWV0aG9kc1xuICAgIC8vIC0gZGF0YSAoZGVmZXJyZWQgc2luY2UgaXQgcmVsaWVzIG9uIGB0aGlzYCBhY2Nlc3MpXG4gICAgLy8gLSBjb21wdXRlZFxuICAgIC8vIC0gd2F0Y2ggKGRlZmVycmVkIHNpbmNlIGl0IHJlbGllcyBvbiBgdGhpc2AgYWNjZXNzKVxuICAgIGlmIChpbmplY3RPcHRpb25zKSB7XG4gICAgICAgIHJlc29sdmVJbmplY3Rpb25zKGluamVjdE9wdGlvbnMsIGN0eCwgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy51bndyYXBJbmplY3RlZFJlZik7XG4gICAgfVxuICAgIGlmIChtZXRob2RzKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihtZXRob2RIYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIEluIGRldiBtb2RlLCB3ZSB1c2UgdGhlIGBjcmVhdGVSZW5kZXJDb250ZXh0YCBmdW5jdGlvbiB0byBkZWZpbmVcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIHRvIHRoZSBwcm94eSB0YXJnZXQsIGFuZCB0aG9zZSBhcmUgcmVhZC1vbmx5IGJ1dFxuICAgICAgICAgICAgICAgIC8vIHJlY29uZmlndXJhYmxlLCBzbyBpdCBuZWVkcyB0byBiZSByZWRlZmluZWQgaGVyZVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4W2tleV0gPSBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiTWV0aG9kc1wiIC8qIE9wdGlvblR5cGVzLk1FVEhPRFMgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTWV0aG9kIFwiJHtrZXl9XCIgaGFzIHR5cGUgXCIke3R5cGVvZiBtZXRob2RIYW5kbGVyfVwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChkYXRhT3B0aW9ucykge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGRhdGFPcHRpb25zKSkge1xuICAgICAgICAgICAgd2FybihgVGhlIGRhdGEgb3B0aW9uIG11c3QgYmUgYSBmdW5jdGlvbi4gYCArXG4gICAgICAgICAgICAgICAgYFBsYWluIG9iamVjdCB1c2FnZSBpcyBubyBsb25nZXIgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzUHJvbWlzZShkYXRhKSkge1xuICAgICAgICAgICAgd2FybihgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGAgK1xuICAgICAgICAgICAgICAgIGBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGAgK1xuICAgICAgICAgICAgICAgIGBhc3luYyBzZXR1cCgpICsgPFN1c3BlbnNlPi5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgZGF0YSgpIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGF0YSA9IHJlYWN0aXZlKGRhdGEpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiRGF0YVwiIC8qIE9wdGlvblR5cGVzLkRBVEEgKi8sIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZSBkYXRhIG9uIGN0eCBkdXJpbmcgZGV2XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByZWZpeChrZXlbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGRhdGFba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHN0YXRlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlIGF0IHRoaXMgcG9pbnQgLSBzdGFydCBjYWNoaW5nIGFjY2Vzc1xuICAgIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgICBpZiAoY29tcHV0ZWRPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICAgICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdClcbiAgICAgICAgICAgICAgICA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgOiBpc0Z1bmN0aW9uKG9wdC5nZXQpXG4gICAgICAgICAgICAgICAgICAgID8gb3B0LmdldC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXG4gICAgICAgICAgICAgICAgICAgIDogTk9PUDtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgICAgICAgICAgd2FybihgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpXG4gICAgICAgICAgICAgICAgPyBvcHQuc2V0LmJpbmQocHVibGljVGhpcylcbiAgICAgICAgICAgICAgICA6IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFdyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiBOT09QO1xuICAgICAgICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgICAgICAgICBnZXQsXG4gICAgICAgICAgICAgICAgc2V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gYy52YWx1ZSxcbiAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGMudmFsdWUgPSB2KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiQ29tcHV0ZWRcIiAvKiBPcHRpb25UeXBlcy5DT01QVVRFRCAqLywga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHdhdGNoT3B0aW9ucykge1xuICAgICAgICAgICAgY3JlYXRlV2F0Y2hlcih3YXRjaE9wdGlvbnNba2V5XSwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGlzRnVuY3Rpb24ocHJvdmlkZU9wdGlvbnMpXG4gICAgICAgICAgICA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcylcbiAgICAgICAgICAgIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgICAgIFJlZmxlY3Qub3duS2V5cyhwcm92aWRlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgICAgY2FsbEhvb2soY3JlYXRlZCwgaW5zdGFuY2UsIFwiY1wiIC8qIExpZmVjeWNsZUhvb2tzLkNSRUFURUQgKi8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgICAgICAgIGhvb2suZm9yRWFjaChfaG9vayA9PiByZWdpc3RlcihfaG9vay5iaW5kKHB1YmxpY1RoaXMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9vaykge1xuICAgICAgICAgICAgcmVnaXN0ZXIoaG9vay5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVNb3VudCwgYmVmb3JlTW91bnQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVwZGF0ZSwgYmVmb3JlVXBkYXRlKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25VcGRhdGVkLCB1cGRhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRGVhY3RpdmF0ZWQsIGRlYWN0aXZhdGVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25FcnJvckNhcHR1cmVkLCBlcnJvckNhcHR1cmVkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmlnZ2VyZWQsIHJlbmRlclRyaWdnZXJlZCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVW5tb3VudCwgYmVmb3JlVW5tb3VudCk7XG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblNlcnZlclByZWZldGNoLCBzZXJ2ZXJQcmVmZXRjaCk7XG4gICAgaWYgKGlzQXJyYXkoZXhwb3NlKSkge1xuICAgICAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZXhwb3NlZCA9IGluc3RhbmNlLmV4cG9zZWQgfHwgKGluc3RhbmNlLmV4cG9zZWQgPSB7fSk7XG4gICAgICAgICAgICBleHBvc2UuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdmFsID0+IChwdWJsaWNUaGlzW2tleV0gPSB2YWwpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIG9wdGlvbnMgdGhhdCBhcmUgaGFuZGxlZCB3aGVuIGNyZWF0aW5nIHRoZSBpbnN0YW5jZSBidXQgYWxzbyBuZWVkIHRvIGJlXG4gICAgLy8gYXBwbGllZCBmcm9tIG1peGluc1xuICAgIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgICAgIGluc3RhbmNlLnJlbmRlciA9IHJlbmRlcjtcbiAgICB9XG4gICAgaWYgKGluaGVyaXRBdHRycyAhPSBudWxsKSB7XG4gICAgICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgICB9XG4gICAgLy8gYXNzZXQgb3B0aW9ucy5cbiAgICBpZiAoY29tcG9uZW50cylcbiAgICAgICAgaW5zdGFuY2UuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gICAgaWYgKGRpcmVjdGl2ZXMpXG4gICAgICAgIGluc3RhbmNlLmRpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QLCB1bndyYXBSZWYgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KGluamVjdE9wdGlvbnMpKSB7XG4gICAgICAgIGluamVjdE9wdGlvbnMgPSBub3JtYWxpemVJbmplY3QoaW5qZWN0T3B0aW9ucyk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gaW5qZWN0T3B0aW9uc1trZXldO1xuICAgICAgICBsZXQgaW5qZWN0ZWQ7XG4gICAgICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIG9wdCkge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSwgb3B0LmRlZmF1bHQsIHRydWUgLyogdHJlYXQgZGVmYXVsdCBmdW5jdGlvbiBhcyBmYWN0b3J5ICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZihpbmplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gcmVtb3ZlIHRoZSBjaGVjayBpbiAzLjNcbiAgICAgICAgICAgIGlmICh1bndyYXBSZWYpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHYgPT4gKGluamVjdGVkLnZhbHVlID0gdilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgaW5qZWN0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyBhIHJlZiBhbmQgd2lsbCBiZSBhdXRvLXVud3JhcHBlZCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhbmQgbm8gbG9uZ2VyIG5lZWRzIFxcYC52YWx1ZVxcYCBpbiB0aGUgbmV4dCBtaW5vciByZWxlYXNlLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUbyBvcHQtaW4gdG8gdGhlIG5ldyBiZWhhdmlvciBub3csIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHNldCBcXGBhcHAuY29uZmlnLnVud3JhcEluamVjdGVkUmVmID0gdHJ1ZVxcYCAodGhpcyBjb25maWcgaXMgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgdGVtcG9yYXJ5IGFuZCB3aWxsIG5vdCBiZSBuZWVkZWQgaW4gdGhlIGZ1dHVyZS4pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkluamVjdFwiIC8qIE9wdGlvblR5cGVzLklOSkVDVCAqLywga2V5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGxIb29rKGhvb2ssIGluc3RhbmNlLCB0eXBlKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaXNBcnJheShob29rKVxuICAgICAgICA/IGhvb2subWFwKGggPT4gaC5iaW5kKGluc3RhbmNlLnByb3h5KSlcbiAgICAgICAgOiBob29rLmJpbmQoaW5zdGFuY2UucHJveHkpLCBpbnN0YW5jZSwgdHlwZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVXYXRjaGVyKHJhdywgY3R4LCBwdWJsaWNUaGlzLCBrZXkpIHtcbiAgICBjb25zdCBnZXR0ZXIgPSBrZXkuaW5jbHVkZXMoJy4nKVxuICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KVxuICAgICAgICA6ICgpID0+IHB1YmxpY1RoaXNba2V5XTtcbiAgICBpZiAoaXNTdHJpbmcocmF3KSkge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhd31cImAsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QocmF3KSkge1xuICAgICAgICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgICAgICAgICByYXcuZm9yRWFjaChyID0+IGNyZWF0ZVdhdGNoZXIociwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBpc0Z1bmN0aW9uKHJhdy5oYW5kbGVyKVxuICAgICAgICAgICAgICAgID8gcmF3LmhhbmRsZXIuYmluZChwdWJsaWNUaGlzKVxuICAgICAgICAgICAgICAgIDogY3R4W3Jhdy5oYW5kbGVyXTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyLCByYXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBoYW5kbGVyIHNwZWNpZmllZCBieSBrZXkgXCIke3Jhdy5oYW5kbGVyfVwiYCwgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggb3B0aW9uOiBcIiR7a2V5fVwiYCwgcmF3KTtcbiAgICB9XG59XG4vKipcbiAqIFJlc29sdmUgbWVyZ2VkIG9wdGlvbnMgYW5kIGNhY2hlIGl0IG9uIHRoZSBjb21wb25lbnQuXG4gKiBUaGlzIGlzIGRvbmUgb25seSBvbmNlIHBlci1jb21wb25lbnQgc2luY2UgdGhlIG1lcmdpbmcgZG9lcyBub3QgaW52b2x2ZVxuICogaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJhc2UgPSBpbnN0YW5jZS50eXBlO1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gYmFzZTtcbiAgICBjb25zdCB7IG1peGluczogZ2xvYmFsTWl4aW5zLCBvcHRpb25zQ2FjaGU6IGNhY2hlLCBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH0gfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGJhc2UpO1xuICAgIGxldCByZXNvbHZlZDtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJlc29sdmVkID0gY2FjaGVkO1xuICAgIH1cbiAgICBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xuICAgICAgICB7XG4gICAgICAgICAgICByZXNvbHZlZCA9IGJhc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlc29sdmVkID0ge307XG4gICAgICAgIGlmIChnbG9iYWxNaXhpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBnbG9iYWxNaXhpbnMuZm9yRWFjaChtID0+IG1lcmdlT3B0aW9ucyhyZXNvbHZlZCwgbSwgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBiYXNlLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QoYmFzZSkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGJhc2UsIHJlc29sdmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRvLCBmcm9tLCBzdHJhdHMsIGFzTWl4aW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcbiAgICBpZiAoZXh0ZW5kc09wdGlvbnMpIHtcbiAgICAgICAgbWVyZ2VPcHRpb25zKHRvLCBleHRlbmRzT3B0aW9ucywgc3RyYXRzLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKG1peGlucykge1xuICAgICAgICBtaXhpbnMuZm9yRWFjaCgobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBzdHJhdHMsIHRydWUpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBpZiAoYXNNaXhpbiAmJiBrZXkgPT09ICdleHBvc2UnKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBcImV4cG9zZVwiIG9wdGlvbiBpcyBpZ25vcmVkIHdoZW4gZGVjbGFyZWQgaW4gbWl4aW5zIG9yIGV4dGVuZHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgSXQgc2hvdWxkIG9ubHkgYmUgZGVjbGFyZWQgaW4gdGhlIGJhc2UgY29tcG9uZW50IGl0c2VsZi5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmF0ID0gaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0c1trZXldIHx8IChzdHJhdHMgJiYgc3RyYXRzW2tleV0pO1xuICAgICAgICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG59XG5jb25zdCBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzID0ge1xuICAgIGRhdGE6IG1lcmdlRGF0YUZuLFxuICAgIHByb3BzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgZW1pdHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyBvYmplY3RzXG4gICAgbWV0aG9kczogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gICAgLy8gbGlmZWN5Y2xlXG4gICAgYmVmb3JlQ3JlYXRlOiBtZXJnZUFzQXJyYXksXG4gICAgY3JlYXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXG4gICAgbW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGJlZm9yZVVwZGF0ZTogbWVyZ2VBc0FycmF5LFxuICAgIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcbiAgICBiZWZvcmVEZXN0cm95OiBtZXJnZUFzQXJyYXksXG4gICAgYmVmb3JlVW5tb3VudDogbWVyZ2VBc0FycmF5LFxuICAgIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxuICAgIHVubW91bnRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICAgIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXG4gICAgZXJyb3JDYXB0dXJlZDogbWVyZ2VBc0FycmF5LFxuICAgIHNlcnZlclByZWZldGNoOiBtZXJnZUFzQXJyYXksXG4gICAgLy8gYXNzZXRzXG4gICAgY29tcG9uZW50czogbWVyZ2VPYmplY3RPcHRpb25zLFxuICAgIGRpcmVjdGl2ZXM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgICAvLyB3YXRjaFxuICAgIHdhdGNoOiBtZXJnZVdhdGNoT3B0aW9ucyxcbiAgICAvLyBwcm92aWRlIC8gaW5qZWN0XG4gICAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXG4gICAgaW5qZWN0OiBtZXJnZUluamVjdFxufTtcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XG4gICAgaWYgKCFmcm9tKSB7XG4gICAgICAgIHJldHVybiB0bztcbiAgICB9XG4gICAgaWYgKCF0bykge1xuICAgICAgICByZXR1cm4gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgICAgcmV0dXJuIChleHRlbmQpKGlzRnVuY3Rpb24odG8pID8gdG8uY2FsbCh0aGlzLCB0aGlzKSA6IHRvLCBpc0Z1bmN0aW9uKGZyb20pID8gZnJvbS5jYWxsKHRoaXMsIHRoaXMpIDogZnJvbSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlSW5qZWN0KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0KHJhdykge1xuICAgIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICByZXR1cm4gcmF3O1xufVxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XG4gICAgcmV0dXJuIHRvID8gWy4uLm5ldyBTZXQoW10uY29uY2F0KHRvLCBmcm9tKSldIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xuICAgIHJldHVybiB0byA/IGV4dGVuZChleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pLCBmcm9tKSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xuICAgIGlmICghdG8pXG4gICAgICAgIHJldHVybiBmcm9tO1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIGNvbnN0IG1lcmdlZCA9IGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuICAgICAgICBtZXJnZWRba2V5XSA9IG1lcmdlQXNBcnJheSh0b1trZXldLCBmcm9tW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBpbml0UHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBpc1N0YXRlZnVsLCAvLyByZXN1bHQgb2YgYml0d2lzZSBmbGFnIGNvbXBhcmlzb25cbmlzU1NSID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xuICAgIGNvbnN0IGF0dHJzID0ge307XG4gICAgZGVmKGF0dHJzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XG4gICAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKTtcbiAgICAvLyBlbnN1cmUgYWxsIGRlY2xhcmVkIHByb3Aga2V5cyBhcmUgcHJlc2VudFxuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHZhbGlkYXRpb25cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gICAgfVxuICAgIGlmIChpc1N0YXRlZnVsKSB7XG4gICAgICAgIC8vIHN0YXRlZnVsXG4gICAgICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWluc3RhbmNlLnR5cGUucHJvcHMpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gb3B0aW9uYWwgcHJvcHMsIHByb3BzID09PSBhdHRyc1xuICAgICAgICAgICAgaW5zdGFuY2UucHJvcHMgPSBhdHRycztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gZGVjbGFyZWQgcHJvcHNcbiAgICAgICAgICAgIGluc3RhbmNlLnByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UuYXR0cnMgPSBhdHRycztcbn1cbmZ1bmN0aW9uIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSB7XG4gICAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZS50eXBlLl9faG1ySWQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCByYXdQcmV2UHJvcHMsIG9wdGltaXplZCkge1xuICAgIGNvbnN0IHsgcHJvcHMsIGF0dHJzLCB2bm9kZTogeyBwYXRjaEZsYWcgfSB9ID0gaW5zdGFuY2U7XG4gICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICAgIGNvbnN0IFtvcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKFxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XG4gICAgLy8gLSAjMTk0MiBpZiBobXIgaXMgZW5hYmxlZCB3aXRoIHNmYyBjb21wb25lbnRcbiAgICAvLyAtIHZpdGUjODcyIG5vbi1zZmMgY29tcG9uZW50IHVzZWQgYnkgc2ZjIGNvbXBvbmVudFxuICAgICEoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSW5IbXJDb250ZXh0KGluc3RhbmNlKSkgJiZcbiAgICAgICAgKG9wdGltaXplZCB8fCBwYXRjaEZsYWcgPiAwKSAmJlxuICAgICAgICAhKHBhdGNoRmxhZyAmIDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqLykpIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDggLyogUGF0Y2hGbGFncy5QUk9QUyAqLykge1xuICAgICAgICAgICAgLy8gQ29tcGlsZXItZ2VuZXJhdGVkIHByb3BzICYgbm8ga2V5cyBjaGFuZ2UsIGp1c3Qgc2V0IHRoZSB1cGRhdGVkXG4gICAgICAgICAgICAvLyB0aGUgcHJvcHMuXG4gICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gaW5zdGFuY2Uudm5vZGUuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBpZiB0aGUgcHJvcCBrZXkgaXMgYSBkZWNsYXJlZCBlbWl0IGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgaWYgKGlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUFJPUFMgZmxhZyBndWFyYW50ZWVzIHJhd1Byb3BzIHRvIGJlIG5vbi1udWxsXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dHIgLyBwcm9wcyBzZXBhcmF0aW9uIHdhcyBkb25lIG9uIGluaXQgYW5kIHdpbGwgYmUgY29uc2lzdGVudFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIGNvZGUgcGF0aCwgc28ganVzdCBjaGVjayBpZiBhdHRycyBoYXZlIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKGF0dHJzLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbWVsaXplZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGNhbWVsaXplZEtleSwgdmFsdWUsIGluc3RhbmNlLCBmYWxzZSAvKiBpc0Fic2VudCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZnVsbCBwcm9wcyB1cGRhdGUuXG4gICAgICAgIGlmIChzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpKSB7XG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluIGNhc2Ugb2YgZHluYW1pYyBwcm9wcywgY2hlY2sgaWYgd2UgbmVlZCB0byBkZWxldGUga2V5cyBmcm9tXG4gICAgICAgIC8vIHRoZSBwcm9wcyBvYmplY3RcbiAgICAgICAgbGV0IGtlYmFiS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdDdXJyZW50UHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghcmF3UHJvcHMgfHxcbiAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgKCFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGUgb3JpZ2luYWwgcHJvcHMgd2FzIHBhc3NlZCBpbiBhcyBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxuICAgICAgICAgICAgICAgICAgICAoKGtlYmFiS2V5ID0gaHlwaGVuYXRlKGtleSkpID09PSBrZXkgfHwgIWhhc093bihyYXdQcm9wcywga2ViYWJLZXkpKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBrZWJhYi1jYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3UHJldlByb3BzW2tlYmFiS2V5XSAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIHVuZGVmaW5lZCwgaW5zdGFuY2UsIHRydWUgLyogaXNBYnNlbnQgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW4gdGhlIGNhc2Ugb2YgZnVuY3Rpb25hbCBjb21wb25lbnQgdy9vIHByb3BzIGRlY2xhcmF0aW9uLCBwcm9wcyBhbmRcbiAgICAgICAgLy8gYXR0cnMgcG9pbnQgdG8gdGhlIHNhbWUgb2JqZWN0IHNvIGl0IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiB1cGRhdGVkLlxuICAgICAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJhd1Byb3BzIHx8XG4gICAgICAgICAgICAgICAgICAgICghaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIWZhbHNlICkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyB0cmlnZ2VyIHVwZGF0ZXMgZm9yICRhdHRycyBpbiBjYXNlIGl0J3MgdXNlZCBpbiBjb21wb25lbnQgc2xvdHNcbiAgICBpZiAoaGFzQXR0cnNDaGFuZ2VkKSB7XG4gICAgICAgIHRyaWdnZXIoaW5zdGFuY2UsIFwic2V0XCIgLyogVHJpZ2dlck9wVHlwZXMuU0VUICovLCAnJGF0dHJzJyk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcbiAgICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBsZXQgaGFzQXR0cnNDaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IHJhd0Nhc3RWYWx1ZXM7XG4gICAgaWYgKHJhd1Byb3BzKSB7XG4gICAgICAgIGZvciAobGV0IGtleSBpbiByYXdQcm9wcykge1xuICAgICAgICAgICAgLy8ga2V5LCByZWYgYXJlIHJlc2VydmVkIGFuZCBuZXZlciBwYXNzZWQgZG93blxuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcbiAgICAgICAgICAgIC8vIHByb3Agb3B0aW9uIG5hbWVzIGFyZSBjYW1lbGl6ZWQgZHVyaW5nIG5vcm1hbGl6YXRpb24sIHNvIHRvIHN1cHBvcnRcbiAgICAgICAgICAgIC8vIGtlYmFiIC0+IGNhbWVsIGNvbnZlcnNpb24gaGVyZSB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBrZXkuXG4gICAgICAgICAgICBsZXQgY2FtZWxLZXk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBoYXNPd24ob3B0aW9ucywgKGNhbWVsS2V5ID0gY2FtZWxpemUoa2V5KSkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZWVkQ2FzdEtleXMgfHwgIW5lZWRDYXN0S2V5cy5pbmNsdWRlcyhjYW1lbEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAocmF3Q2FzdFZhbHVlcyB8fCAocmF3Q2FzdFZhbHVlcyA9IHt9KSlbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBhdHRycykgfHwgdmFsdWUgIT09IGF0dHJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVlZENhc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgICAgY29uc3QgY2FzdFZhbHVlcyA9IHJhd0Nhc3RWYWx1ZXMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIGNhc3RWYWx1ZXNba2V5XSwgaW5zdGFuY2UsICFoYXNPd24oY2FzdFZhbHVlcywga2V5KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhhc0F0dHJzQ2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xuICAgIGNvbnN0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICBpZiAob3B0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgaGFzRGVmYXVsdCA9IGhhc093bihvcHQsICdkZWZhdWx0Jyk7XG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKG9wdC50eXBlICE9PSBGdW5jdGlvbiAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldID0gZGVmYXVsdFZhbHVlLmNhbGwobnVsbCwgcHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGJvb2xlYW4gY2FzdGluZ1xuICAgICAgICBpZiAob3B0WzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dKSB7XG4gICAgICAgICAgICBpZiAoaXNBYnNlbnQgJiYgIWhhc0RlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3B0WzEgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3RUcnVlICovXSAmJlxuICAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LnByb3BzQ2FjaGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgY29uc3QgcmF3ID0gY29tcC5wcm9wcztcbiAgICBjb25zdCBub3JtYWxpemVkID0ge307XG4gICAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XG4gICAgLy8gYXBwbHkgbWl4aW4vZXh0ZW5kcyBwcm9wc1xuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kUHJvcHMgPSAocmF3KSA9PiB7XG4gICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IFtwcm9wcywga2V5c10gPSBub3JtYWxpemVQcm9wc09wdGlvbnMocmF3LCBhcHBDb250ZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBwcm9wcyk7XG4gICAgICAgICAgICBpZiAoa2V5cylcbiAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgICAgICAgZXh0ZW5kUHJvcHMoY29tcC5leHRlbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVNUFRZX0FSUjtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNTdHJpbmcocmF3W2ldKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKHJhd1tpXSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBFTVBUWV9PQko7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmF3KSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzT2JqZWN0KHJhdykpIHtcbiAgICAgICAgICAgIHdhcm4oYGludmFsaWQgcHJvcHMgb3B0aW9uc2AsIHJhdyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3KSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZVByb3BOYW1lKG5vcm1hbGl6ZWRLZXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IChub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID1cbiAgICAgICAgICAgICAgICAgICAgaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSA/IHsgdHlwZTogb3B0IH0gOiBPYmplY3QuYXNzaWduKHt9LCBvcHQpKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib29sZWFuSW5kZXggPSBnZXRUeXBlSW5kZXgoQm9vbGVhbiwgcHJvcC50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wWzAgLyogQm9vbGVhbkZsYWdzLnNob3VsZENhc3QgKi9dID0gYm9vbGVhbkluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgICAgIHByb3BbMSAvKiBCb29sZWFuRmxhZ3Muc2hvdWxkQ2FzdFRydWUgKi9dID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0luZGV4IDwgMCB8fCBib29sZWFuSW5kZXggPCBzdHJpbmdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb3AgbmVlZHMgYm9vbGVhbiBjYXN0aW5nIG9yIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xIHx8IGhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaChub3JtYWxpemVkS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXMgPSBbbm9ybWFsaXplZCwgbmVlZENhc3RLZXlzXTtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgICAgY2FjaGUuc2V0KGNvbXAsIHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BOYW1lKGtleSkge1xuICAgIGlmIChrZXlbMF0gIT09ICckJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm4oYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIHVzZSBmdW5jdGlvbiBzdHJpbmcgbmFtZSB0byBjaGVjayB0eXBlIGNvbnN0cnVjdG9yc1xuLy8gc28gdGhhdCBpdCB3b3JrcyBhY3Jvc3Mgdm1zIC8gaWZyYW1lcy5cbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xuICAgIGNvbnN0IG1hdGNoID0gY3RvciAmJiBjdG9yLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqKGZ1bmN0aW9ufGNsYXNzKSAoXFx3KykvKTtcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsyXSA6IGN0b3IgPT09IG51bGwgPyAnbnVsbCcgOiAnJztcbn1cbmZ1bmN0aW9uIGlzU2FtZVR5cGUoYSwgYikge1xuICAgIHJldHVybiBnZXRUeXBlKGEpID09PSBnZXRUeXBlKGIpO1xufVxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcbiAgICBpZiAoaXNBcnJheShleHBlY3RlZFR5cGVzKSkge1xuICAgICAgICByZXR1cm4gZXhwZWN0ZWRUeXBlcy5maW5kSW5kZXgodCA9PiBpc1NhbWVUeXBlKHQsIHR5cGUpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihleHBlY3RlZFR5cGVzKSkge1xuICAgICAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcbiAgICBjb25zdCByZXNvbHZlZFZhbHVlcyA9IHRvUmF3KHByb3BzKTtcbiAgICBjb25zdCBvcHRpb25zID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgaWYgKG9wdCA9PSBudWxsKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHZhbGlkYXRlUHJvcChrZXksIHJlc29sdmVkVmFsdWVzW2tleV0sIG9wdCwgIWhhc093bihyYXdQcm9wcywga2V5KSAmJiAhaGFzT3duKHJhd1Byb3BzLCBoeXBoZW5hdGUoa2V5KSkpO1xuICAgIH1cbn1cbi8qKlxuICogZGV2IG9ubHlcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVQcm9wKG5hbWUsIHZhbHVlLCBwcm9wLCBpc0Fic2VudCkge1xuICAgIGNvbnN0IHsgdHlwZSwgcmVxdWlyZWQsIHZhbGlkYXRvciB9ID0gcHJvcDtcbiAgICAvLyByZXF1aXJlZCFcbiAgICBpZiAocmVxdWlyZWQgJiYgaXNBYnNlbnQpIHtcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiBcIicgKyBuYW1lICsgJ1wiJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbWlzc2luZyBidXQgb3B0aW9uYWxcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHR5cGUgY2hlY2tcbiAgICBpZiAodHlwZSAhPSBudWxsICYmIHR5cGUgIT09IHRydWUpIHtcbiAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBpc0FycmF5KHR5cGUpID8gdHlwZSA6IFt0eXBlXTtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICAgICAgICAvLyB2YWx1ZSBpcyB2YWxpZCBhcyBsb25nIGFzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIHR5cGVzIG1hdGNoXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoICYmICFpc1ZhbGlkOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsaWQsIGV4cGVjdGVkVHlwZSB9ID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZXNbaV0pO1xuICAgICAgICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGV4cGVjdGVkVHlwZSB8fCAnJyk7XG4gICAgICAgICAgICBpc1ZhbGlkID0gdmFsaWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB3YXJuKGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGN1c3RvbSB2YWxpZGF0b3JcbiAgICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nKTtcbiAgICB9XG59XG5jb25zdCBpc1NpbXBsZVR5cGUgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ1N0cmluZyxOdW1iZXIsQm9vbGVhbixGdW5jdGlvbixTeW1ib2wsQmlnSW50Jyk7XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcbiAgICBsZXQgdmFsaWQ7XG4gICAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcbiAgICBpZiAoaXNTaW1wbGVUeXBlKGV4cGVjdGVkVHlwZSkpIHtcbiAgICAgICAgY29uc3QgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgLy8gZm9yIHByaW1pdGl2ZSB3cmFwcGVyIG9iamVjdHNcbiAgICAgICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0Jykge1xuICAgICAgICB2YWxpZCA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnQXJyYXknKSB7XG4gICAgICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ251bGwnKSB7XG4gICAgICAgIHZhbGlkID0gdmFsdWUgPT09IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQsXG4gICAgICAgIGV4cGVjdGVkVHlwZVxuICAgIH07XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xuICAgIGxldCBtZXNzYWdlID0gYEludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCIke25hbWV9XCIuYCArXG4gICAgICAgIGAgRXhwZWN0ZWQgJHtleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcgfCAnKX1gO1xuICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGV4cGVjdGVkVHlwZXNbMF07XG4gICAgY29uc3QgcmVjZWl2ZWRUeXBlID0gdG9SYXdUeXBlKHZhbHVlKTtcbiAgICBjb25zdCBleHBlY3RlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgZXhwZWN0ZWRUeXBlKTtcbiAgICBjb25zdCByZWNlaXZlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgcmVjZWl2ZWRUeXBlKTtcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWVcbiAgICBpZiAoZXhwZWN0ZWRUeXBlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgaXNFeHBsaWNhYmxlKGV4cGVjdGVkVHlwZSkgJiZcbiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHtcbiAgICAgICAgbWVzc2FnZSArPSBgIHdpdGggdmFsdWUgJHtleHBlY3RlZFZhbHVlfWA7XG4gICAgfVxuICAgIG1lc3NhZ2UgKz0gYCwgZ290ICR7cmVjZWl2ZWRUeXBlfSBgO1xuICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gc3BlY2lmeSByZWNlaXZlZCB2YWx1ZVxuICAgIGlmIChpc0V4cGxpY2FibGUocmVjZWl2ZWRUeXBlKSkge1xuICAgICAgICBtZXNzYWdlICs9IGB3aXRoIHZhbHVlICR7cmVjZWl2ZWRWYWx1ZX0uYDtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG4vKipcbiAqIGRldiBvbmx5XG4gKi9cbmZ1bmN0aW9uIHN0eWxlVmFsdWUodmFsdWUsIHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PT0gJ1N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSAnTnVtYmVyJykge1xuICAgICAgICByZXR1cm4gYCR7TnVtYmVyKHZhbHVlKX1gO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfWA7XG4gICAgfVxufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBpc0V4cGxpY2FibGUodHlwZSkge1xuICAgIGNvbnN0IGV4cGxpY2l0VHlwZXMgPSBbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddO1xuICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZWxlbSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW0pO1xufVxuLyoqXG4gKiBkZXYgb25seVxuICovXG5mdW5jdGlvbiBpc0Jvb2xlYW4oLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzLnNvbWUoZWxlbSA9PiBlbGVtLnRvTG93ZXJDYXNlKCkgPT09ICdib29sZWFuJyk7XG59XG5cbmNvbnN0IGlzSW50ZXJuYWxLZXkgPSAoa2V5KSA9PiBrZXlbMF0gPT09ICdfJyB8fCBrZXkgPT09ICckc3RhYmxlJztcbmNvbnN0IG5vcm1hbGl6ZVNsb3RWYWx1ZSA9ICh2YWx1ZSkgPT4gaXNBcnJheSh2YWx1ZSlcbiAgICA/IHZhbHVlLm1hcChub3JtYWxpemVWTm9kZSlcbiAgICA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xuY29uc3Qgbm9ybWFsaXplU2xvdCA9IChrZXksIHJhd1Nsb3QsIGN0eCkgPT4ge1xuICAgIGlmIChyYXdTbG90Ll9uKSB7XG4gICAgICAgIC8vIGFscmVhZHkgbm9ybWFsaXplZCAtICM1MzUzXG4gICAgICAgIHJldHVybiByYXdTbG90O1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gd2l0aEN0eCgoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGN1cnJlbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgd2FybihgU2xvdCBcIiR7a2V5fVwiIGludm9rZWQgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIGZ1bmN0aW9uOiBgICtcbiAgICAgICAgICAgICAgICBgdGhpcyB3aWxsIG5vdCB0cmFjayBkZXBlbmRlbmNpZXMgdXNlZCBpbiB0aGUgc2xvdC4gYCArXG4gICAgICAgICAgICAgICAgYEludm9rZSB0aGUgc2xvdCBmdW5jdGlvbiBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3JtYWxpemVTbG90VmFsdWUocmF3U2xvdCguLi5hcmdzKSk7XG4gICAgfSwgY3R4KTtcbiAgICBub3JtYWxpemVkLl9jID0gZmFsc2U7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuY29uc3Qgbm9ybWFsaXplT2JqZWN0U2xvdHMgPSAocmF3U2xvdHMsIHNsb3RzLCBpbnN0YW5jZSkgPT4ge1xuICAgIGNvbnN0IGN0eCA9IHJhd1Nsb3RzLl9jdHg7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmF3U2xvdHMpIHtcbiAgICAgICAgaWYgKGlzSW50ZXJuYWxLZXkoa2V5KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1Nsb3RzW2tleV07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgc2xvdHNba2V5XSA9IG5vcm1hbGl6ZVNsb3Qoa2V5LCB2YWx1ZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgIShmYWxzZSApKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBzbG90IFwiJHtrZXl9XCIuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IG5vcm1hbGl6ZVZOb2RlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAhaXNLZWVwQWxpdmUoaW5zdGFuY2Uudm5vZGUpICYmXG4gICAgICAgICEoZmFsc2UgKSkge1xuICAgICAgICB3YXJuKGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gYCArXG4gICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTbG90VmFsdWUoY2hpbGRyZW4pO1xuICAgIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xufTtcbmNvbnN0IGluaXRTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4pID0+IHtcbiAgICBpZiAoaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgMzIgLyogU2hhcGVGbGFncy5TTE9UU19DSElMRFJFTiAqLykge1xuICAgICAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgIC8vIHVzZXJzIGNhbiBnZXQgdGhlIHNoYWxsb3cgcmVhZG9ubHkgdmVyc2lvbiBvZiB0aGUgc2xvdHMgb2JqZWN0IHRocm91Z2ggYHRoaXMuJHNsb3RzYCxcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBhdm9pZCB0aGUgcHJveHkgb2JqZWN0IHBvbGx1dGluZyB0aGUgc2xvdHMgb2YgdGhlIGludGVybmFsIGluc3RhbmNlXG4gICAgICAgICAgICBpbnN0YW5jZS5zbG90cyA9IHRvUmF3KGNoaWxkcmVuKTtcbiAgICAgICAgICAgIC8vIG1ha2UgY29tcGlsZXIgbWFya2VyIG5vbi1lbnVtZXJhYmxlXG4gICAgICAgICAgICBkZWYoY2hpbGRyZW4sICdfJywgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgKGluc3RhbmNlLnNsb3RzID0ge30pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB7fTtcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVmKGluc3RhbmNlLnNsb3RzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XG59O1xuY29uc3QgdXBkYXRlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCB7IHZub2RlLCBzbG90cyB9ID0gaW5zdGFuY2U7XG4gICAgbGV0IG5lZWREZWxldGlvbkNoZWNrID0gdHJ1ZTtcbiAgICBsZXQgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0gRU1QVFlfT0JKO1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAzMiAvKiBTaGFwZUZsYWdzLlNMT1RTX0NISUxEUkVOICovKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgLy8gY29tcGlsZWQgc2xvdHMuXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBQYXJlbnQgd2FzIEhNUiB1cGRhdGVkIHNvIHNsb3QgY29udGVudCBtYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHVwZGF0ZSBzbG90cyBhbmQgbWFyayBpbnN0YW5jZSBmb3IgaG1yIGFzIHdlbGxcbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGltaXplZCAmJiB0eXBlID09PSAxIC8qIFNsb3RGbGFncy5TVEFCTEUgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlZCBBTkQgc3RhYmxlLlxuICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlLCBhbmQgc2tpcCBzdGFsZSBzbG90cyByZW1vdmFsLlxuICAgICAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlZCBidXQgZHluYW1pYyAodi1pZi92LWZvciBvbiBzbG90cykgLSB1cGRhdGUgc2xvdHMsIGJ1dCBza2lwXG4gICAgICAgICAgICAgICAgLy8gbm9ybWFsaXphdGlvbi5cbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAvLyAjMjg5M1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gcmVuZGVyaW5nIHRoZSBvcHRpbWl6ZWQgc2xvdHMgYnkgbWFudWFsbHkgd3JpdHRlbiByZW5kZXIgZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBkZWxldGUgdGhlIGBzbG90cy5fYCBmbGFnIGlmIG5lY2Vzc2FyeSB0byBtYWtlIHN1YnNlcXVlbnQgdXBkYXRlcyByZWxpYWJsZSxcbiAgICAgICAgICAgICAgICAvLyBpLmUuIGxldCB0aGUgYHJlbmRlclNsb3RgIGNyZWF0ZSB0aGUgYmFpbGVkIEZyYWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzbG90cy5fO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gIWNoaWxkcmVuLiRzdGFibGU7XG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IGNoaWxkcmVuO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgICAgICAvLyBub24gc2xvdCBvYmplY3QgY2hpbGRyZW4gKGRpcmVjdCB2YWx1ZSkgcGFzc2VkIHRvIGEgY29tcG9uZW50XG4gICAgICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgICAgICAgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0geyBkZWZhdWx0OiAxIH07XG4gICAgfVxuICAgIC8vIGRlbGV0ZSBzdGFsZSBzbG90c1xuICAgIGlmIChuZWVkRGVsZXRpb25DaGVjaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICAgICAgaWYgKCFpc0ludGVybmFsS2V5KGtleSkgJiYgIShrZXkgaW4gZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzbG90c1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gY3JlYXRlQXBwQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcHA6IG51bGwsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgaXNOYXRpdmVUYWc6IE5PLFxuICAgICAgICAgICAgcGVyZm9ybWFuY2U6IGZhbHNlLFxuICAgICAgICAgICAgZ2xvYmFsUHJvcGVydGllczoge30sXG4gICAgICAgICAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IHt9LFxuICAgICAgICAgICAgZXJyb3JIYW5kbGVyOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB3YXJuSGFuZGxlcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7fVxuICAgICAgICB9LFxuICAgICAgICBtaXhpbnM6IFtdLFxuICAgICAgICBjb21wb25lbnRzOiB7fSxcbiAgICAgICAgZGlyZWN0aXZlczoge30sXG4gICAgICAgIHByb3ZpZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgICBvcHRpb25zQ2FjaGU6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgIHByb3BzQ2FjaGU6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgIGVtaXRzQ2FjaGU6IG5ldyBXZWFrTWFwKClcbiAgICB9O1xufVxubGV0IHVpZCQxID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZUFwcEFQSShyZW5kZXIsIGh5ZHJhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQXBwKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyA9IG51bGwpIHtcbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKHJvb3RDb21wb25lbnQpKSB7XG4gICAgICAgICAgICByb290Q29tcG9uZW50ID0gT2JqZWN0LmFzc2lnbih7fSwgcm9vdENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvb3RQcm9wcyAhPSBudWxsICYmICFpc09iamVjdChyb290UHJvcHMpKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2Fybihgcm9vdCBwcm9wcyBwYXNzZWQgdG8gYXBwLm1vdW50KCkgbXVzdCBiZSBhbiBvYmplY3QuYCk7XG4gICAgICAgICAgICByb290UHJvcHMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XG4gICAgICAgIGNvbnN0IGluc3RhbGxlZFBsdWdpbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGxldCBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgYXBwID0gKGNvbnRleHQuYXBwID0ge1xuICAgICAgICAgICAgX3VpZDogdWlkJDErKyxcbiAgICAgICAgICAgIF9jb21wb25lbnQ6IHJvb3RDb21wb25lbnQsXG4gICAgICAgICAgICBfcHJvcHM6IHJvb3RQcm9wcyxcbiAgICAgICAgICAgIF9jb250YWluZXI6IG51bGwsXG4gICAgICAgICAgICBfY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIF9pbnN0YW5jZTogbnVsbCxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbmZpZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgY29uZmlnKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYGFwcC5jb25maWcgY2Fubm90IGJlIHJlcGxhY2VkLiBNb2RpZnkgaW5kaXZpZHVhbCBvcHRpb25zIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZShwbHVnaW4sIC4uLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgUGx1Z2luIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwbHVnaW4gJiYgaXNGdW5jdGlvbihwbHVnaW4uaW5zdGFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmluc3RhbGwoYXBwLCAuLi5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihwbHVnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbihhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQSBwbHVnaW4gbXVzdCBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgd2l0aCBhbiBcImluc3RhbGxcIiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBmdW5jdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaXhpbihtaXhpbikge1xuICAgICAgICAgICAgICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dC5taXhpbnMuaW5jbHVkZXMobWl4aW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1peGlucy5wdXNoKG1peGluKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGluIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1peGluLm5hbWUgPyBgOiAke21peGluLm5hbWV9YCA6ICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGlucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYnVpbGRzIHN1cHBvcnRpbmcgT3B0aW9ucyBBUEknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29udGV4dC5jb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21wb25lbnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV0gPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VudChyb290Q29udGFpbmVyLCBpc0h5ZHJhdGUsIGlzU1ZHKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU1NzFcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiByb290Q29udGFpbmVyLl9fdnVlX2FwcF9fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFwcCBpbnN0YW5jZSBtb3VudGVkIG9uIHRoZSBob3N0IGNvbnRhaW5lci5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgIElmIHlvdSB3YW50IHRvIG1vdW50IGFub3RoZXIgYXBwIG9uIHRoZSBzYW1lIGhvc3QgY29udGFpbmVyLGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAgeW91IG5lZWQgdG8gdW5tb3VudCB0aGUgcHJldmlvdXMgYXBwIGJ5IGNhbGxpbmcgXFxgYXBwLnVubW91bnQoKVxcYCBmaXJzdC5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGFwcCBjb250ZXh0IG9uIHRoZSByb290IFZOb2RlLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgc2V0IG9uIHRoZSByb290IGluc3RhbmNlIG9uIGluaXRpYWwgbW91bnQuXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAvLyBITVIgcm9vdCByZWxvYWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZWxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKGNsb25lVk5vZGUodm5vZGUpLCByb290Q29udGFpbmVyLCBpc1NWRyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZSh2bm9kZSwgcm9vdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIodm5vZGUsIHJvb3RDb250YWluZXIsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhcHAuX2NvbnRhaW5lciA9IHJvb3RDb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQXBwIGhhcyBhbHJlYWR5IGJlZW4gbW91bnRlZC5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJZiB5b3Ugd2FudCB0byByZW1vdW50IHRoZSBzYW1lIGFwcCwgbW92ZSB5b3VyIGFwcCBjcmVhdGlvbiBsb2dpYyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgbW91bnQgLSBlLmcuIFxcYGNvbnN0IGNyZWF0ZU15QXBwID0gKCkgPT4gY3JlYXRlQXBwKEFwcClcXGBgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5tb3VudCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcHAuX2NvbnRhaW5lci5fX3Z1ZV9hcHBfXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEFwcCBhbHJlYWR5IHByb3ZpZGVzIHByb3BlcnR5IHdpdGgga2V5IFwiJHtTdHJpbmcoa2V5KX1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgSXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgdmFsdWUuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQucHJvdmlkZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgIH07XG59XG5cbi8qKlxuICogRnVuY3Rpb24gZm9yIGhhbmRsaW5nIGEgdGVtcGxhdGUgcmVmXG4gKi9cbmZ1bmN0aW9uIHNldFJlZihyYXdSZWYsIG9sZFJhd1JlZiwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCBpc1VubW91bnQgPSBmYWxzZSkge1xuICAgIGlmIChpc0FycmF5KHJhd1JlZikpIHtcbiAgICAgICAgcmF3UmVmLmZvckVhY2goKHIsIGkpID0+IHNldFJlZihyLCBvbGRSYXdSZWYgJiYgKGlzQXJyYXkob2xkUmF3UmVmKSA/IG9sZFJhd1JlZltpXSA6IG9sZFJhd1JlZiksIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSAmJiAhaXNVbm1vdW50KSB7XG4gICAgICAgIC8vIHdoZW4gbW91bnRpbmcgYXN5bmMgY29tcG9uZW50cywgbm90aGluZyBuZWVkcyB0byBiZSBkb25lLFxuICAgICAgICAvLyBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSByZWYgaXMgZm9yd2FyZGVkIHRvIGlubmVyIGNvbXBvbmVudFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlZlZhbHVlID0gdm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTaGFwZUZsYWdzLlNUQVRFRlVMX0NPTVBPTkVOVCAqL1xuICAgICAgICA/IGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5XG4gICAgICAgIDogdm5vZGUuZWw7XG4gICAgY29uc3QgdmFsdWUgPSBpc1VubW91bnQgPyBudWxsIDogcmVmVmFsdWU7XG4gICAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhb3duZXIpIHtcbiAgICAgICAgd2FybihgTWlzc2luZyByZWYgb3duZXIgY29udGV4dC4gcmVmIGNhbm5vdCBiZSB1c2VkIG9uIGhvaXN0ZWQgdm5vZGVzLiBgICtcbiAgICAgICAgICAgIGBBIHZub2RlIHdpdGggcmVmIG11c3QgYmUgY3JlYXRlZCBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbi5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XG4gICAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IChvd25lci5yZWZzID0ge30pIDogb3duZXIucmVmcztcbiAgICBjb25zdCBzZXR1cFN0YXRlID0gb3duZXIuc2V0dXBTdGF0ZTtcbiAgICAvLyBkeW5hbWljIHJlZiBjaGFuZ2VkLiB1bnNldCBvbGQgcmVmXG4gICAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhvbGRSZWYpKSB7XG4gICAgICAgICAgICByZWZzW29sZFJlZl0gPSBudWxsO1xuICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCBvbGRSZWYpKSB7XG4gICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtvbGRSZWZdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlZihvbGRSZWYpKSB7XG4gICAgICAgICAgICBvbGRSZWYudmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKHJlZiwgb3duZXIsIDEyIC8qIEVycm9yQ29kZXMuRlVOQ1RJT05fUkVGICovLCBbdmFsdWUsIHJlZnNdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XG4gICAgICAgIGNvbnN0IF9pc1JlZiA9IGlzUmVmKHJlZik7XG4gICAgICAgIGlmIChfaXNTdHJpbmcgfHwgX2lzUmVmKSB7XG4gICAgICAgICAgICBjb25zdCBkb1NldCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBfaXNTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaGFzT3duKHNldHVwU3RhdGUsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldHVwU3RhdGVbcmVmXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVmc1tyZWZdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlZi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVW5tb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheShleGlzdGluZykgJiYgcmVtb3ZlKGV4aXN0aW5nLCByZWZWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwU3RhdGVbcmVmXSA9IHJlZnNbcmVmXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gW3JlZlZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnB1c2gocmVmVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCByZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfaXNSZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNbcmF3UmVmLmtdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIHJlZiB0eXBlOicsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBkb1NldC5pZCA9IC0xO1xuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkb1NldCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9TZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6JywgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBoYXNNaXNtYXRjaCA9IGZhbHNlO1xuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiAvc3ZnLy50ZXN0KGNvbnRhaW5lci5uYW1lc3BhY2VVUkkpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSAnZm9yZWlnbk9iamVjdCc7XG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLztcbi8vIE5vdGU6IGh5ZHJhdGlvbiBpcyBET00tc3BlY2lmaWNcbi8vIEJ1dCB3ZSBoYXZlIHRvIHBsYWNlIGl0IGluIGNvcmUgZHVlIHRvIHRpZ2h0IGNvdXBsaW5nIHdpdGggY29yZSAtIHNwbGl0dGluZ1xuLy8gaXQgb3V0IGNyZWF0ZXMgYSB0b24gb2YgdW5uZWNlc3NhcnkgY29tcGxleGl0eS5cbi8vIEh5ZHJhdGlvbiBhbHNvIGRlcGVuZHMgb24gc29tZSByZW5kZXJlciBpbnRlcm5hbCBsb2dpYyB3aGljaCBuZWVkcyB0byBiZVxuLy8gcGFzc2VkIGluIHZpYSBhcmd1bWVudHMuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMocmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7IG10OiBtb3VudENvbXBvbmVudCwgcDogcGF0Y2gsIG86IHsgcGF0Y2hQcm9wLCBjcmVhdGVUZXh0LCBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcmVtb3ZlLCBpbnNlcnQsIGNyZWF0ZUNvbW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gICAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGlmICghY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBoeWRyYXRlIGV4aXN0aW5nIG1hcmt1cCBidXQgY29udGFpbmVyIGlzIGVtcHR5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFBlcmZvcm1pbmcgZnVsbCBtb3VudCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhc01pc21hdGNoID0gZmFsc2U7XG4gICAgICAgIGh5ZHJhdGVOb2RlKGNvbnRhaW5lci5maXJzdENoaWxkLCB2bm9kZSwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICAgICAgaWYgKGhhc01pc21hdGNoICYmICFmYWxzZSkge1xuICAgICAgICAgICAgLy8gdGhpcyBlcnJvciBzaG91bGQgc2hvdyB1cCBpbiBwcm9kdWN0aW9uXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBIeWRyYXRpb24gY29tcGxldGVkIGJ1dCBjb250YWlucyBtaXNtYXRjaGVzLmApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlTm9kZSA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgICAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSAnWyc7XG4gICAgICAgIGNvbnN0IG9uTWlzbWF0Y2ggPSAoKSA9PiBoYW5kbGVNaXNtYXRjaChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50U3RhcnQpO1xuICAgICAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnLCBwYXRjaEZsYWcgfSA9IHZub2RlO1xuICAgICAgICBsZXQgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgIHZub2RlLmVsID0gbm9kZTtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHROb2RlID0gbnVsbDtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFRleHQ6XG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gIzU3MjggZW1wdHkgdGV4dCBub2RlIGluc2lkZSBhIHNsb3QgY2FuIGNhdXNlIGh5ZHJhdGlvbiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNlcnZlciByZW5kZXJlZCBIVE1MIHdvbid0IGNvbnRhaW4gYSB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoJycpKSwgcGFyZW50Tm9kZShub2RlKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IG1pc21hdGNoOmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBDbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKX1gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbi0gU2VydmVyOiAke0pTT04uc3RyaW5naWZ5KHZub2RlLmNoaWxkcmVuKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIERPTU5vZGVUeXBlcy5DT01NRU5UICovIHx8IGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XG4gICAgICAgICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbnRpcmUgdGVtcGxhdGUgaXMgc3RhdGljIGJ1dCBTU1JlZCBhcyBhIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlID09PSAxIC8qIERPTU5vZGVUeXBlcy5FTEVNRU5UICovIHx8IGRvbVR5cGUgPT09IDMgLyogRE9NTm9kZVR5cGVzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGFuY2hvciwgYWRvcHQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0aWMgdm5vZGUgaGFzIGl0cyBjb250ZW50IHN0cmlwcGVkIGR1cmluZyBidWlsZCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRvcHQgaXQgZnJvbSB0aGUgc2VydmVyLXJlbmRlcmVkIEhUTUwuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lZWRUb0Fkb3B0Q29udGVudCA9ICF2bm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuc3RhdGljQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRUb0Fkb3B0Q29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiArPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5vdXRlckhUTUxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV4dE5vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSB2bm9kZS5zdGF0aWNDb3VudCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0ZyYWdtZW50U3RhcnQgPyBuZXh0U2libGluZyhuZXh0Tm9kZSkgOiBuZXh0Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZyYWdtZW50OlxuICAgICAgICAgICAgICAgIGlmICghaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRnJhZ21lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMSAvKiBET01Ob2RlVHlwZXMuRUxFTUVOVCAqLyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUVsZW1lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gc2V0dGluZyB1cCB0aGUgcmVuZGVyIGVmZmVjdCwgaWYgdGhlIGluaXRpYWwgdm5vZGUgYWxyZWFkeVxuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgLmVsIHNldCwgdGhlIGNvbXBvbmVudCB3aWxsIHBlcmZvcm0gaHlkcmF0aW9uIGluc3RlYWQgb2YgbW91bnRcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gaXRzIHN1Yi10cmVlLlxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q29tcG9uZW50KHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgYmUgYXN5bmMsIHNvIGluIHRoZSBjYXNlIG9mIGZyYWdtZW50cyB3ZSBjYW5ub3QgcmVseVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBjb21wb25lbnQncyByZW5kZXJlZCBvdXRwdXQgdG8gZGV0ZXJtaW5lIHRoZSBlbmQgb2YgdGhlIGZyYWdtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQsIHdlIGRvIGEgbG9va2FoZWFkIHRvIGZpbmQgdGhlIGVuZCBhbmNob3Igbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBpc0ZyYWdtZW50U3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbG9jYXRlQ2xvc2luZ0FzeW5jQW5jaG9yKG5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyAjNDI5MyB0ZWxlcG9ydCBhcyBjb21wb25lbnQgcm9vdFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dE5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29tbWVudChuZXh0Tm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlLmRhdGEgPT09ICd0ZWxlcG9ydCBlbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5leHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAjMzc4N1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBjb21wb25lbnQgaXMgYXN5bmMsIGl0IG1heSBnZXQgbW92ZWQgLyB1bm1vdW50ZWQgYmVmb3JlIGl0c1xuICAgICAgICAgICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaXMgbG9hZGVkLCBzbyB3ZSBuZWVkIHRvIGdpdmUgaXQgYSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSB0aGF0IG1hdGNoZXMgaXRzIGFkb3B0ZWQgRE9NLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ViVHJlZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID0gY3JlYXRlVk5vZGUoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRyZWUuYW5jaG9yID0gbmV4dE5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgPyBjcmVhdGVUZXh0Vk5vZGUoJycpIDogY3JlYXRlVk5vZGUoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5lbCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSA9IHN1YlRyZWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gOCAvKiBET01Ob2RlVHlwZXMuQ09NTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlQ2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihwYXJlbnROb2RlKG5vZGUpKSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIEhvc3RWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbnVsbCwgcGFyZW50U3VzcGVuc2UsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfTtcbiAgICBjb25zdCBoeWRyYXRlRWxlbWVudCA9IChlbCwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcGF0Y2hGbGFnLCBzaGFwZUZsYWcsIGRpcnMgfSA9IHZub2RlO1xuICAgICAgICAvLyAjNDAwNiBmb3IgZm9ybSBlbGVtZW50cyB3aXRoIG5vbi1zdHJpbmcgdi1tb2RlbCB2YWx1ZSBiaW5kaW5nc1xuICAgICAgICAvLyBlLmcuIDxvcHRpb24gOnZhbHVlPVwib2JqXCI+LCA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgOnRydWUtdmFsdWU9XCIxXCI+XG4gICAgICAgIGNvbnN0IGZvcmNlUGF0Y2hWYWx1ZSA9ICh0eXBlID09PSAnaW5wdXQnICYmIGRpcnMpIHx8IHR5cGUgPT09ICdvcHRpb24nO1xuICAgICAgICAvLyBza2lwIHByb3BzICYgY2hpbGRyZW4gaWYgdGhpcyBpcyBob2lzdGVkIHN0YXRpYyBub2Rlc1xuICAgICAgICAvLyAjNTQwNSBpbiBkZXYsIGFsd2F5cyBoeWRyYXRlIGNoaWxkcmVuIGZvciBITVJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBmb3JjZVBhdGNoVmFsdWUgfHwgcGF0Y2hGbGFnICE9PSAtMSAvKiBQYXRjaEZsYWdzLkhPSVNURUQgKi8pIHtcbiAgICAgICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZVBhdGNoVmFsdWUgfHxcbiAgICAgICAgICAgICAgICAgICAgIW9wdGltaXplZCB8fFxuICAgICAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiAoMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovIHwgMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm9yY2VQYXRjaFZhbHVlICYmIGtleS5lbmRzV2l0aCgndmFsdWUnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBmYWxzZSwgdW5kZWZpbmVkLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoIGZvciBjbGljayBsaXN0ZW5lcnMgKHdoaWNoIGlzIG1vc3Qgb2Z0ZW4pIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGluZyB0aHJvdWdoIHByb3BzLlxuICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsICdvbkNsaWNrJywgbnVsbCwgcHJvcHMub25DbGljaywgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2bm9kZSAvIGRpcmVjdGl2ZSBob29rc1xuICAgICAgICAgICAgbGV0IHZub2RlSG9va3M7XG4gICAgICAgICAgICBpZiAoKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpIHx8IGRpcnMpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZub2RlSG9va3MgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGlsZHJlblxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8gJiZcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XG4gICAgICAgICAgICAgICAgIShwcm9wcyAmJiAocHJvcHMuaW5uZXJIVE1MIHx8IHByb3BzLnRleHRDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihlbC5maXJzdENoaWxkLCB2bm9kZSwgZWwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBpbiA8JHt2bm9kZS50eXBlfT46IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBtb3JlIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTU1JlZCBET00gY29udGFpbnMgbW9yZSBub2RlcyB0aGFuIGl0IHNob3VsZC4gUmVtb3ZlIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUoY3VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIGlmIChlbC50ZXh0Q29udGVudCAhPT0gdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYEh5ZHJhdGlvbiB0ZXh0IGNvbnRlbnQgbWlzbWF0Y2ggaW4gPCR7dm5vZGUudHlwZX0+OlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIENsaWVudDogJHtlbC50ZXh0Q29udGVudH1cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLSBTZXJ2ZXI6ICR7dm5vZGUuY2hpbGRyZW59YCk7XG4gICAgICAgICAgICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbC5uZXh0U2libGluZztcbiAgICB9O1xuICAgIGNvbnN0IGh5ZHJhdGVDaGlsZHJlbiA9IChub2RlLCBwYXJlbnRWTm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50Vk5vZGUuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGwgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZub2RlID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlbltpXVxuICAgICAgICAgICAgICAgIDogKGNoaWxkcmVuW2ldID0gbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGh5ZHJhdGVOb2RlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2bm9kZS50eXBlID09PSBUZXh0ICYmICF2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggaW4gPCR7Y29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+OiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB0aGUgU1NSZWQgRE9NIGRpZG4ndCBjb250YWluIGVub3VnaCBub2Rlcy4gTW91bnQgdGhlIG1pc3Npbmcgb25lcy5cbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IHZub2RlO1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciA9IG5leHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IGRpZG4ndCBoeWRyYXRlIHN1Y2Nlc3NmdWxseSwgc2luY2Ugd2UgZGlkbid0IGdldCBhIGVuZCBhbmNob3JcbiAgICAgICAgICAgIC8vIGJhY2suIFRoaXMgc2hvdWxkIGhhdmUgbGVkIHRvIG5vZGUvY2hpbGRyZW4gbWlzbWF0Y2ggd2FybmluZ3MuXG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgYW5jaG9yIGlzIG1pc3NpbmcsIHdlIG5lZWQgdG8gY3JlYXRlIG9uZSBhbmQgaW5zZXJ0IGl0XG4gICAgICAgICAgICBpbnNlcnQoKHZub2RlLmFuY2hvciA9IGNyZWF0ZUNvbW1lbnQoYF1gKSksIGNvbnRhaW5lciwgbmV4dCk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xuICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XFxuLSBDbGllbnQgdm5vZGU6YCwgdm5vZGUudHlwZSwgYFxcbi0gU2VydmVyIHJlbmRlcmVkIERPTTpgLCBub2RlLCBub2RlLm5vZGVUeXBlID09PSAzIC8qIERPTU5vZGVUeXBlcy5URVhUICovXG4gICAgICAgICAgICAgICAgPyBgKHRleHQpYFxuICAgICAgICAgICAgICAgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snXG4gICAgICAgICAgICAgICAgICAgID8gYChzdGFydCBvZiBmcmFnbWVudClgXG4gICAgICAgICAgICAgICAgICAgIDogYGApO1xuICAgICAgICB2bm9kZS5lbCA9IG51bGw7XG4gICAgICAgIGlmIChpc0ZyYWdtZW50KSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhjZXNzaXZlIGZyYWdtZW50IG5vZGVzXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSk7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKG5leHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgcmVtb3ZlKG5vZGUpO1xuICAgICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyLCBuZXh0LCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICAgIGNvbnN0IGxvY2F0ZUNsb3NpbmdBc3luY0FuY2hvciA9IChub2RlKSA9PiB7XG4gICAgICAgIGxldCBtYXRjaCA9IDA7XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSAnWycpXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoKys7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gJ10nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuICAgIHJldHVybiBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbmxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmZ1bmN0aW9uIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHBlcmYubWFyayhgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YCk7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzUGVyZlN0YXJ0KGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVuZE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICBjb25zdCBzdGFydFRhZyA9IGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gO1xuICAgICAgICBjb25zdCBlbmRUYWcgPSBzdGFydFRhZyArIGA6ZW5kYDtcbiAgICAgICAgcGVyZi5tYXJrKGVuZFRhZyk7XG4gICAgICAgIHBlcmYubWVhc3VyZShgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9PiAke3R5cGV9YCwgc3RhcnRUYWcsIGVuZFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgaWYgKHN1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgb25seSBjYWxsZWQgaW4gZXNtLWJ1bmRsZXIgYnVpbGRzLlxuICogSXQgaXMgY2FsbGVkIHdoZW4gYSByZW5kZXJlciBpcyBjcmVhdGVkLCBpbiBgYmFzZUNyZWF0ZVJlbmRlcmVyYCBzbyB0aGF0XG4gKiBpbXBvcnRpbmcgcnVudGltZS1jb3JlIGlzIHNpZGUtZWZmZWN0cyBmcmVlLlxuICpcbiAqIGlzdGFuYnVsLWlnbm9yZS1uZXh0XG4gKi9cbmZ1bmN0aW9uIGluaXRGZWF0dXJlRmxhZ3MoKSB7XG4gICAgY29uc3QgbmVlZFdhcm4gPSBbXTtcbiAgICBpZiAodHlwZW9mIF9fVlVFX09QVElPTlNfQVBJX18gIT09ICdib29sZWFuJykge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfT1BUSU9OU19BUElfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfUFJPRF9ERVZUT09MU19fID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG11bHRpID0gbmVlZFdhcm4ubGVuZ3RoID4gMTtcbiAgICAgICAgY29uc29sZS53YXJuKGBGZWF0dXJlIGZsYWcke211bHRpID8gYHNgIDogYGB9ICR7bmVlZFdhcm4uam9pbignLCAnKX0gJHttdWx0aSA/IGBhcmVgIDogYGlzYH0gbm90IGV4cGxpY2l0bHkgZGVmaW5lZC4gWW91IGFyZSBydW5uaW5nIHRoZSBlc20tYnVuZGxlciBidWlsZCBvZiBWdWUsIGAgK1xuICAgICAgICAgICAgYHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgYCArXG4gICAgICAgICAgICBgdmlhIHRoZSBidW5kbGVyIGNvbmZpZyBpbiBvcmRlciB0byBnZXQgYmV0dGVyIHRyZWUtc2hha2luZyBpbiB0aGUgYCArXG4gICAgICAgICAgICBgcHJvZHVjdGlvbiBidW5kbGUuXFxuXFxuYCArXG4gICAgICAgICAgICBgRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gKTtcbiAgICB9XG59XG5cbmNvbnN0IHF1ZXVlUG9zdFJlbmRlckVmZmVjdCA9IHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlXG4gICAgO1xuLyoqXG4gKiBUaGUgY3JlYXRlUmVuZGVyZXIgZnVuY3Rpb24gYWNjZXB0cyB0d28gZ2VuZXJpYyBhcmd1bWVudHM6XG4gKiBIb3N0Tm9kZSBhbmQgSG9zdEVsZW1lbnQsIGNvcnJlc3BvbmRpbmcgdG8gTm9kZSBhbmQgRWxlbWVudCB0eXBlcyBpbiB0aGVcbiAqIGhvc3QgZW52aXJvbm1lbnQuIEZvciBleGFtcGxlLCBmb3IgcnVudGltZS1kb20sIEhvc3ROb2RlIHdvdWxkIGJlIHRoZSBET01cbiAqIGBOb2RlYCBpbnRlcmZhY2UgYW5kIEhvc3RFbGVtZW50IHdvdWxkIGJlIHRoZSBET00gYEVsZW1lbnRgIGludGVyZmFjZS5cbiAqXG4gKiBDdXN0b20gcmVuZGVyZXJzIGNhbiBwYXNzIGluIHRoZSBwbGF0Zm9ybSBzcGVjaWZpYyB0eXBlcyBsaWtlIHRoaXM6XG4gKlxuICogYGBgIGpzXG4gKiBjb25zdCB7IHJlbmRlciwgY3JlYXRlQXBwIH0gPSBjcmVhdGVSZW5kZXJlcjxOb2RlLCBFbGVtZW50Pih7XG4gKiAgIHBhdGNoUHJvcCxcbiAqICAgLi4ubm9kZU9wc1xuICogfSlcbiAqIGBgYFxuICovXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zKTtcbn1cbi8vIFNlcGFyYXRlIEFQSSBmb3IgY3JlYXRpbmcgaHlkcmF0aW9uLWVuYWJsZWQgcmVuZGVyZXIuXG4vLyBIeWRyYXRpb24gbG9naWMgaXMgb25seSB1c2VkIHdoZW4gY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBtYWtpbmcgaXRcbi8vIHRyZWUtc2hha2FibGUuXG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMpO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GbnMpIHtcbiAgICAvLyBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyBjaGVja1xuICAgIHtcbiAgICAgICAgaW5pdEZlYXR1cmVGbGFncygpO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRHbG9iYWxUaGlzKCk7XG4gICAgdGFyZ2V0Ll9fVlVFX18gPSB0cnVlO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIHNldERldnRvb2xzSG9vayh0YXJnZXQuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXywgdGFyZ2V0KTtcbiAgICB9XG4gICAgY29uc3QgeyBpbnNlcnQ6IGhvc3RJbnNlcnQsIHJlbW92ZTogaG9zdFJlbW92ZSwgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLCBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCwgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LCBzZXRUZXh0OiBob3N0U2V0VGV4dCwgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCwgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCwgaW5zZXJ0U3RhdGljQ29udGVudDogaG9zdEluc2VydFN0YXRpY0NvbnRlbnQgfSA9IG9wdGlvbnM7XG4gICAgLy8gTm90ZTogZnVuY3Rpb25zIGluc2lkZSB0aGlzIGNsb3N1cmUgc2hvdWxkIHVzZSBgY29uc3QgeHh4ID0gKCkgPT4ge31gXG4gICAgLy8gc3R5bGUgaW4gb3JkZXIgdG8gcHJldmVudCBiZWluZyBpbmxpbmVkIGJ5IG1pbmlmaWVycy5cbiAgICBjb25zdCBwYXRjaCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yID0gbnVsbCwgcGFyZW50Q29tcG9uZW50ID0gbnVsbCwgcGFyZW50U3VzcGVuc2UgPSBudWxsLCBpc1NWRyA9IGZhbHNlLCBzbG90U2NvcGVJZHMgPSBudWxsLCBvcHRpbWl6ZWQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZyA/IGZhbHNlIDogISFuMi5keW5hbWljQ2hpbGRyZW4pID0+IHtcbiAgICAgICAgaWYgKG4xID09PSBuMikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBhdGNoaW5nICYgbm90IHNhbWUgdHlwZSwgdW5tb3VudCBvbGQgdHJlZVxuICAgICAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBnZXROZXh0SG9zdE5vZGUobjEpO1xuICAgICAgICAgICAgdW5tb3VudChuMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICBuMSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG4yLnBhdGNoRmxhZyA9PT0gLTIgLyogUGF0Y2hGbGFncy5CQUlMICovKSB7XG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUZXh0OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NUZXh0KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICAgICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICAgICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0ZyYWdtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLykge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRWxlbWVudChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgICAgICAgICB0eXBlLnByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCByZWZcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZVRleHQobjIuY2hpbGRyZW4pKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZWwgPSAobjIuZWwgPSBuMS5lbCk7XG4gICAgICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaG9zdFNldFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0NvbW1lbnROb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoKG4yLmVsID0gaG9zdENyZWF0ZUNvbW1lbnQobjIuY2hpbGRyZW4gfHwgJycpKSwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhlcmUncyBubyBzdXBwb3J0IGZvciBkeW5hbWljIGNvbW1lbnRzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudFN0YXRpY05vZGUgPSAobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRykgPT4ge1xuICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBuMi5lbCwgbjIuYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldiAvIEhNUiBvbmx5XG4gICAgICovXG4gICAgY29uc3QgcGF0Y2hTdGF0aWNOb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBpc1NWRykgPT4ge1xuICAgICAgICAvLyBzdGF0aWMgbm9kZXMgYXJlIG9ubHkgcGF0Y2hlZCBkdXJpbmcgZGV2IGZvciBITVJcbiAgICAgICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gaG9zdE5leHRTaWJsaW5nKG4xLmFuY2hvcik7XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUobjEpO1xuICAgICAgICAgICAgW24yLmVsLCBuMi5hbmNob3JdID0gaG9zdEluc2VydFN0YXRpY0NvbnRlbnQobjIuY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdEluc2VydChhbmNob3IsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICAgICAgICBlbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgbjIudHlwZSA9PT0gJ3N2Zyc7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtb3VudEVsZW1lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF0Y2hFbGVtZW50KG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGxldCBlbDtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBkaXJzIH0gPSB2bm9kZTtcbiAgICAgICAgZWwgPSB2bm9kZS5lbCA9IGhvc3RDcmVhdGVFbGVtZW50KHZub2RlLnR5cGUsIGlzU1ZHLCBwcm9wcyAmJiBwcm9wcy5pcywgcHJvcHMpO1xuICAgICAgICAvLyBtb3VudCBjaGlsZHJlbiBmaXJzdCwgc2luY2Ugc29tZSBwcm9wcyBtYXkgcmVseSBvbiBjaGlsZCBjb250ZW50XG4gICAgICAgIC8vIGJlaW5nIGFscmVhZHkgcmVuZGVyZWQsIGUuZy4gYDxzZWxlY3QgdmFsdWU+YFxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgdm5vZGUuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4odm5vZGUuY2hpbGRyZW4sIGVsLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyAmJiB0eXBlICE9PSAnZm9yZWlnbk9iamVjdCcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNjb3BlSWRcbiAgICAgICAgc2V0U2NvcGVJZChlbCwgdm5vZGUsIHZub2RlLnNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgLy8gcHJvcHNcbiAgICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICd2YWx1ZScgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBpc1NWRywgdm5vZGUuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTcGVjaWFsIGNhc2UgZm9yIHNldHRpbmcgdmFsdWUgb24gRE9NIGVsZW1lbnRzOlxuICAgICAgICAgICAgICogLSBpdCBjYW4gYmUgb3JkZXItc2Vuc2l0aXZlIChlLmcuIHNob3VsZCBiZSBzZXQgKmFmdGVyKiBtaW4vbWF4LCAjMjMyNSwgIzQwMjQpXG4gICAgICAgICAgICAgKiAtIGl0IG5lZWRzIHRvIGJlIGZvcmNlZCAoIzE0NzEpXG4gICAgICAgICAgICAgKiAjMjM1MyBwcm9wb3NlcyBhZGRpbmcgYW5vdGhlciByZW5kZXJlciBvcHRpb24gdG8gY29uZmlndXJlIHRoaXMsIGJ1dFxuICAgICAgICAgICAgICogdGhlIHByb3BlcnRpZXMgYWZmZWN0cyBhcmUgc28gZmluaXRlIGl0IGlzIHdvcnRoIHNwZWNpYWwgY2FzaW5nIGl0XG4gICAgICAgICAgICAgKiBoZXJlIHRvIHJlZHVjZSB0aGUgY29tcGxleGl0eS4gKFNwZWNpYWwgY2FzaW5nIGl0IGFsc28gc2hvdWxkIG5vdFxuICAgICAgICAgICAgICogYWZmZWN0IG5vbi1ET00gcmVuZGVyZXJzKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoJ3ZhbHVlJyBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsICd2YWx1ZScsIG51bGwsIHByb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xuICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Zub2RlJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2bm9kZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdfX3Z1ZVBhcmVudENvbXBvbmVudCcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlycykge1xuICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlTW91bnQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAjMTU4MyBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2Ugbm90IHJlc29sdmVkIGNhc2UsIGVudGVyIGhvb2sgc2hvdWxkIGNhbGwgd2hlbiBzdXNwZW5zZSByZXNvbHZlZFxuICAgICAgICAvLyAjMTY4OSBGb3IgaW5zaWRlIHN1c3BlbnNlICsgc3VzcGVuc2UgcmVzb2x2ZWQgY2FzZSwganVzdCBjYWxsIGl0XG4gICAgICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gKCFwYXJlbnRTdXNwZW5zZSB8fCAocGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpKSAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbiAmJlxuICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkO1xuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICB9XG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHxcbiAgICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIHx8XG4gICAgICAgICAgICBkaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ21vdW50ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIGlmIChzY29wZUlkKSB7XG4gICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2NvcGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2xvdFNjb3BlSWRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnID4gMCAmJlxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCAvKiBQYXRjaEZsYWdzLkRFVl9ST09UX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgc3ViVHJlZSA9XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclNpbmdsZVJvb3Qoc3ViVHJlZS5jaGlsZHJlbikgfHwgc3ViVHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2bm9kZSA9PT0gc3ViVHJlZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gcGFyZW50Q29tcG9uZW50LnZub2RlO1xuICAgICAgICAgICAgICAgIHNldFNjb3BlSWQoZWwsIHBhcmVudFZOb2RlLCBwYXJlbnRWTm9kZS5zY29wZUlkLCBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudC5wYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gKGNoaWxkcmVuW2ldID0gb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjaGlsZHJlbltpXSlcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGNoaWxkcmVuW2ldKSk7XG4gICAgICAgICAgICBwYXRjaChudWxsLCBjaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIGRpcnMgfSA9IG4yO1xuICAgICAgICAvLyAjMTQyNiB0YWtlIHRoZSBvbGQgdm5vZGUncyBwYXRjaCBmbGFnIGludG8gYWNjb3VudCBzaW5jZSB1c2VyIG1heSBjbG9uZSBhXG4gICAgICAgIC8vIGNvbXBpbGVyLWdlbmVyYXRlZCB2bm9kZSwgd2hpY2ggZGUtb3B0cyB0byBGVUxMX1BST1BTXG4gICAgICAgIHBhdGNoRmxhZyB8PSBuMS5wYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi87XG4gICAgICAgIGNvbnN0IG9sZFByb3BzID0gbjEucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgICAgICBjb25zdCBuZXdQcm9wcyA9IG4yLnByb3BzIHx8IEVNUFRZX09CSjtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgLy8gZGlzYWJsZSByZWN1cnNlIGluIGJlZm9yZVVwZGF0ZSBob29rc1xuICAgICAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIGZhbHNlKTtcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCwgZm9yY2UgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyZUNoaWxkcmVuU1ZHID0gaXNTVkcgJiYgbjIudHlwZSAhPT0gJ2ZvcmVpZ25PYmplY3QnO1xuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBhcmVDaGlsZHJlblNWRywgc2xvdFNjb3BlSWRzKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgICAgICAgLy8gZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgZWwsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGFyZUNoaWxkcmVuU1ZHLCBzbG90U2NvcGVJZHMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgICAgICAgLy8gdGhlIHByZXNlbmNlIG9mIGEgcGF0Y2hGbGFnIG1lYW5zIHRoaXMgZWxlbWVudCdzIHJlbmRlciBjb2RlIHdhc1xuICAgICAgICAgICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBjb21waWxlciBhbmQgY2FuIHRha2UgdGhlIGZhc3QgcGF0aC5cbiAgICAgICAgICAgIC8vIGluIHRoaXMgcGF0aCBvbGQgbm9kZSBhbmQgbmV3IG5vZGUgYXJlIGd1YXJhbnRlZWQgdG8gaGF2ZSB0aGUgc2FtZSBzaGFwZVxuICAgICAgICAgICAgLy8gKGkuZS4gYXQgdGhlIGV4YWN0IHNhbWUgcG9zaXRpb24gaW4gdGhlIHNvdXJjZSB0ZW1wbGF0ZSlcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxNiAvKiBQYXRjaEZsYWdzLkZVTExfUFJPUFMgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50IHByb3BzIGNvbnRhaW4gZHluYW1pYyBrZXlzLCBmdWxsIGRpZmYgbmVlZGVkXG4gICAgICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY2xhc3NcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBkeW5hbWljIGNsYXNzIGJpbmRpbmdzLlxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAyIC8qIFBhdGNoRmxhZ3MuQ0xBU1MgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFByb3BzLmNsYXNzICE9PSBuZXdQcm9wcy5jbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ2NsYXNzJywgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdHlsZVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgc3R5bGUgYmluZGluZ3NcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgNCAvKiBQYXRjaEZsYWdzLlNUWUxFICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsICdzdHlsZScsIG9sZFByb3BzLnN0eWxlLCBuZXdQcm9wcy5zdHlsZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwcm9wc1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgcHJvcC9hdHRyIGJpbmRpbmdzXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgdGhhbiBjbGFzcyBhbmQgc3R5bGUuIFRoZSBrZXlzIG9mIGR5bmFtaWMgcHJvcC9hdHRycyBhcmUgc2F2ZWQgZm9yXG4gICAgICAgICAgICAgICAgLy8gZmFzdGVyIGl0ZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBOb3RlIGR5bmFtaWMga2V5cyBsaWtlIDpbZm9vXT1cImJhclwiIHdpbGwgY2F1c2UgdGhpcyBvcHRpbWl6YXRpb24gdG9cbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBhbmQgZ28gdGhyb3VnaCBhIGZ1bGwgZGlmZiBiZWNhdXNlIHdlIG5lZWQgdG8gdW5zZXQgdGhlIG9sZCBrZXlcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgOCAvKiBQYXRjaEZsYWdzLlBST1BTICovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBmbGFnIGlzIHByZXNlbnQgdGhlbiBkeW5hbWljUHJvcHMgbXVzdCBiZSBub24tbnVsbFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIzE0NzEgZm9yY2UgcGF0Y2ggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBwcmV2IHx8IGtleSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIG4xLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGV4dFxuICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgb25seSBkeW5hbWljIHRleHQgY2hpbGRyZW4uXG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMSAvKiBQYXRjaEZsYWdzLlRFWFQgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobjEuY2hpbGRyZW4gIT09IG4yLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkICYmIGR5bmFtaWNDaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyB1bm9wdGltaXplZCwgZnVsbCBkaWZmXG4gICAgICAgICAgICBwYXRjaFByb3BzKGVsLCBuMiwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlVXBkYXRlZCkgfHwgZGlycykge1xuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgJ3VwZGF0ZWQnKTtcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gVGhlIGZhc3QgcGF0aCBmb3IgYmxvY2tzLlxuICAgIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFZOb2RlID0gb2xkQ2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb250YWluZXIgKHBhcmVudCBlbGVtZW50KSBmb3IgdGhlIHBhdGNoLlxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gXG4gICAgICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcbiAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgbm90IGhhdmUgYSBtb3VudGVkIGVsZW1lbnRcbiAgICAgICAgICAgIG9sZFZOb2RlLmVsICYmXG4gICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgRnJhZ21lbnQgaXRzZWxmIHNvIGl0IGNhbiBtb3ZlIGl0cyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICAob2xkVk5vZGUudHlwZSA9PT0gRnJhZ21lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggYWxzbyByZXF1aXJlcyB0aGUgY29ycmVjdCBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICFpc1NhbWVWTm9kZVR5cGUob2xkVk5vZGUsIG5ld1ZOb2RlKSB8fFxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxuICAgICAgICAgICAgICAgICAgICBvbGRWTm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLyB8IDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pKVxuICAgICAgICAgICAgICAgID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpXG4gICAgICAgICAgICAgICAgOiAvLyBJbiBvdGhlciBjYXNlcywgdGhlIHBhcmVudCBjb250YWluZXIgaXMgbm90IGFjdHVhbGx5IHVzZWQgc28gd2VcbiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBwYXNzIHRoZSBibG9jayBlbGVtZW50IGhlcmUgdG8gYXZvaWQgYSBET00gcGFyZW50Tm9kZSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lcjtcbiAgICAgICAgICAgIHBhdGNoKG9sZFZOb2RlLCBuZXdWTm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcGF0Y2hQcm9wcyA9IChlbCwgdm5vZGUsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpID0+IHtcbiAgICAgICAgaWYgKG9sZFByb3BzICE9PSBuZXdQcm9wcykge1xuICAgICAgICAgICAgaWYgKG9sZFByb3BzICE9PSBFTVBUWV9PQkopIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcm9wKGtleSkgJiYgIShrZXkgaW4gbmV3UHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIG9sZFByb3BzW2tleV0sIG51bGwsIGlzU1ZHLCB2bm9kZS5jaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgLy8gZW1wdHkgc3RyaW5nIGlzIG5vdCB2YWxpZCBwcm9wXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgICAgIC8vIGRlZmVyIHBhdGNoaW5nIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT09IHByZXYgJiYga2V5ICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndmFsdWUnIGluIG5ld1Byb3BzKSB7XG4gICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ3ZhbHVlJywgb2xkUHJvcHMudmFsdWUsIG5ld1Byb3BzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0ZyYWdtZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBmcmFnbWVudFN0YXJ0QW5jaG9yID0gKG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xID8gbjEuYW5jaG9yIDogaG9zdENyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IG4yO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAvLyAjNTUyMyBkZXYgcm9vdCBmcmFnbWVudCBtYXkgaW5oZXJpdCBkaXJlY3RpdmVzXG4gICAgICAgICAgICAoaXNIbXJVcGRhdGluZyB8fCBwYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8pKSB7XG4gICAgICAgICAgICAvLyBITVIgdXBkYXRlZCAvIERldiByb290IGZyYWdtZW50ICh3LyBjb21tZW50cyksIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgc2xvdCBmcmFnbWVudCB3aXRoIDpzbG90dGVkIHNjb3BlIGlkc1xuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xuICAgICAgICAgICAgICAgID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcylcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIC8vIGEgZnJhZ21lbnQgY2FuIG9ubHkgaGF2ZSBhcnJheSBjaGlsZHJlblxuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBhcmUgZWl0aGVyIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIsIG9yIGltcGxpY2l0bHkgY3JlYXRlZFxuICAgICAgICAgICAgLy8gZnJvbSBhcnJheXMuXG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLyAmJlxuICAgICAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMyNzE1IHRoZSBwcmV2aW91cyBmcmFnbWVudCBjb3VsZCd2ZSBiZWVuIGEgQkFJTGVkIG9uZSBhcyBhIHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vIG9mIHJlbmRlclNsb3QoKSB3aXRoIG5vIHZhbGlkIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgLy8gYSBzdGFibGUgZnJhZ21lbnQgKHRlbXBsYXRlIHJvb3Qgb3IgPHRlbXBsYXRlIHYtZm9yPikgZG9lc24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggY2hpbGRyZW4gb3JkZXIsIGJ1dCBpdCBtYXkgY29udGFpbiBkeW5hbWljQ2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgICAgICAgbjIua2V5ICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudENvbXBvbmVudCAmJiBuMiA9PT0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlIC8qIHNoYWxsb3cgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGtleWVkIC8gdW5rZXllZCwgb3IgbWFudWFsIGZyYWdtZW50cy5cbiAgICAgICAgICAgICAgICAvLyBmb3Iga2V5ZWQgJiB1bmtleWVkLCBzaW5jZSB0aGV5IGFyZSBjb21waWxlciBnZW5lcmF0ZWQgZnJvbSB2LWZvcixcbiAgICAgICAgICAgICAgICAvLyBlYWNoIGNoaWxkIGlzIGd1YXJhbnRlZWQgdG8gYmUgYSBibG9jayBzbyB0aGUgZnJhZ21lbnQgd2lsbCBuZXZlclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgZHluYW1pY0NoaWxkcmVuLlxuICAgICAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBjb250YWluZXIsIGZyYWdtZW50RW5kQW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwcm9jZXNzQ29tcG9uZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobjIuc2hhcGVGbGFnICYgNTEyIC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi8pIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG9wdGltaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3VudENvbXBvbmVudChuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoaW5pdGlhbFZOb2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICAgICAgICByZWdpc3RlckhNUihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluamVjdCByZW5kZXJlciBpbnRlcm5hbHMgZm9yIGtlZXBBbGl2ZVxuICAgICAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc29sdmUgcHJvcHMgYW5kIHNsb3RzIGZvciBzZXR1cCBjb250ZXh0XG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCgpIGlzIGFzeW5jLiBUaGlzIGNvbXBvbmVudCByZWxpZXMgb24gYXN5bmMgbG9naWMgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgLy8gYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5yZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QpO1xuICAgICAgICAgICAgLy8gR2l2ZSBpdCBhIHBsYWNlaG9sZGVyIGlmIHRoaXMgaXMgbm90IGh5ZHJhdGlvblxuICAgICAgICAgICAgLy8gVE9ETyBoYW5kbGUgc2VsZi1kZWZpbmVkIGZhbGxiYWNrXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxWTm9kZS5lbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KSk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG51bGwsIHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSAobjEsIG4yLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSAobjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50KTtcbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZUNvbXBvbmVudChuMSwgbjIsIG9wdGltaXplZCkpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCAmJlxuICAgICAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgJiBzdGlsbCBwZW5kaW5nIC0ganVzdCB1cGRhdGUgcHJvcHMgYW5kIHNsb3RzXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNvbXBvbmVudCdzIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyIGlzbid0IHNldC11cCB5ZXRcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChuMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBub3JtYWwgdXBkYXRlXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubmV4dCA9IG4yO1xuICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBhbHNvIHF1ZXVlZCwgcmVtb3ZlIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gZG91YmxlIHVwZGF0aW5nIHRoZSBzYW1lIGNoaWxkIGNvbXBvbmVudCBpbiB0aGUgc2FtZSBmbHVzaC5cbiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlSm9iKGluc3RhbmNlLnVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UudXBkYXRlIGlzIHRoZSByZWFjdGl2ZSBlZmZlY3QuXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBubyB1cGRhdGUgbmVlZGVkLiBqdXN0IGNvcHkgb3ZlciBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2V0dXBSZW5kZXJFZmZlY3QgPSAoaW5zdGFuY2UsIGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFVwZGF0ZUZuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBibSwgbSwgcGFyZW50IH0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FzeW5jV3JhcHBlclZOb2RlID0gaXNBc3luY1dyYXBwZXIoaW5pdGlhbFZOb2RlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQgaG9va1xuICAgICAgICAgICAgICAgIGlmIChibSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVCZWZvcmVNb3VudFxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIGluaXRpYWxWTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChlbCAmJiBoeWRyYXRlTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBoYXMgYWRvcHRlZCBob3N0IG5vZGUgLSBwZXJmb3JtIGh5ZHJhdGlvbiBpbnN0ZWFkIG9mIG1vdW50LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoeWRyYXRlU3ViVHJlZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaHlkcmF0ZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZU5vZGUoZWwsIGluc3RhbmNlLnN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGh5ZHJhdGVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyVk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogd2UgYXJlIG1vdmluZyB0aGUgcmVuZGVyIGNhbGwgaW50byBhbiBhc3luYyBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIG1lYW5zIGl0IHdvbid0IHRyYWNrIGRlcGVuZGVuY2llcyAtIGJ1dCBpdCdzIG9rIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGl0IHdpbGwgbmV2ZXIgbmVlZCB0byBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiAhaW5zdGFuY2UuaXNVbm1vdW50ZWQgJiYgaHlkcmF0ZVN1YlRyZWUoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlU3ViVHJlZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gKGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZOb2RlLmVsID0gc3ViVHJlZS5lbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnRlZCBob29rXG4gICAgICAgICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZU1vdW50ZWRcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29wZWRJbml0aWFsVk5vZGUgPSBpbml0aWFsVk5vZGU7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWN0aXZhdGVkIGhvb2sgZm9yIGtlZXAtYWxpdmUgcm9vdHMuXG4gICAgICAgICAgICAgICAgLy8gIzE3NDIgYWN0aXZhdGVkIGhvb2sgbXVzdCBiZSBhY2Nlc3NlZCBhZnRlciBmaXJzdCByZW5kZXJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgaG9vayBtYXkgYmUgaW5qZWN0ZWQgYnkgYSBjaGlsZCBrZWVwLWFsaXZlXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWTm9kZS5zaGFwZUZsYWcgJiAyNTYgLyogU2hhcGVGbGFncy5DT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgKHBhcmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBc3luY1dyYXBwZXIocGFyZW50LnZub2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnZub2RlLnNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoaW5zdGFuY2UuYSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAjMjQ1ODogZGVmZXJlbmNlIG1vdW50LW9ubHkgb2JqZWN0IHBhcmFtZXRlcnMgdG8gcHJldmVudCBtZW1sZWFrc1xuICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZSA9IGNvbnRhaW5lciA9IGFuY2hvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnRcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRyaWdnZXJlZCBieSBtdXRhdGlvbiBvZiBjb21wb25lbnQncyBvd24gc3RhdGUgKG5leHQ6IG51bGwpXG4gICAgICAgICAgICAgICAgLy8gT1IgcGFyZW50IGNhbGxpbmcgcHJvY2Vzc0NvbXBvbmVudCAobmV4dDogVk5vZGUpXG4gICAgICAgICAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIGxldCBvcmlnaW5OZXh0ID0gbmV4dDtcbiAgICAgICAgICAgICAgICBsZXQgdm5vZGVIb29rO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG5leHQgfHwgaW5zdGFuY2Uudm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEaXNhbGxvdyBjb21wb25lbnQgZWZmZWN0IHJlY3Vyc2lvbiBkdXJpbmcgcHJlLWxpZmVjeWNsZSBob29rcy5cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gdm5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZVVwZGF0ZSBob29rXG4gICAgICAgICAgICAgICAgaWYgKGJ1KSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZUJlZm9yZVVwZGF0ZVxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAvLyByZW5kZXJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2VHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IG5leHRUcmVlO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGF0Y2gocHJldlRyZWUsIG5leHRUcmVlLCBcbiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgdGVsZXBvcnRcbiAgICAgICAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksIFxuICAgICAgICAgICAgICAgIC8vIGFuY2hvciBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSBmcmFnbWVudFxuICAgICAgICAgICAgICAgIGdldE5leHRIb3N0Tm9kZShwcmV2VHJlZSksIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luTmV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLXRyaWdnZXJlZCB1cGRhdGUuIEluIGNhc2Ugb2YgSE9DLCB1cGRhdGUgcGFyZW50IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBlbC4gSE9DIGlzIGluZGljYXRlZCBieSBwYXJlbnQgaW5zdGFuY2UncyBzdWJUcmVlIHBvaW50aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGNoaWxkIGNvbXBvbmVudCdzIHZub2RlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgbmV4dFRyZWUuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVkIGhvb2tcbiAgICAgICAgICAgICAgICBpZiAodSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvblZub2RlVXBkYXRlZFxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVVcGRhdGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBuZXh0LCB2bm9kZSksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gY3JlYXRlIHJlYWN0aXZlIGVmZmVjdCBmb3IgcmVuZGVyaW5nXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IChpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4sICgpID0+IHF1ZXVlSm9iKHVwZGF0ZSksIGluc3RhbmNlLnNjb3BlIC8vIHRyYWNrIGl0IGluIGNvbXBvbmVudCdzIGVmZmVjdCBzY29wZVxuICAgICAgICApKTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKGluc3RhbmNlLnVwZGF0ZSA9ICgpID0+IGVmZmVjdC5ydW4oKSk7XG4gICAgICAgIHVwZGF0ZS5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgLy8gYWxsb3dSZWN1cnNlXG4gICAgICAgIC8vICMxODAxLCAjMjA0MyBjb21wb25lbnQgcmVuZGVyIGVmZmVjdHMgc2hvdWxkIGFsbG93IHJlY3Vyc2l2ZSB1cGRhdGVzXG4gICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0Y1xuICAgICAgICAgICAgICAgID8gZSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gaW5zdGFuY2UucnRnXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0ZywgZSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICAgICAgICAgIHVwZGF0ZS5vd25lckluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCk7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIgPSAoaW5zdGFuY2UsIG5leHRWTm9kZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgICAgIG5leHRWTm9kZS5jb21wb25lbnQgPSBpbnN0YW5jZTtcbiAgICAgICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XG4gICAgICAgIGluc3RhbmNlLnZub2RlID0gbmV4dFZOb2RlO1xuICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbnVsbDtcbiAgICAgICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xuICAgICAgICB1cGRhdGVTbG90cyhpbnN0YW5jZSwgbmV4dFZOb2RlLmNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgIC8vIHByb3BzIHVwZGF0ZSBtYXkgaGF2ZSB0cmlnZ2VyZWQgcHJlLWZsdXNoIHdhdGNoZXJzLlxuICAgICAgICAvLyBmbHVzaCB0aGVtIGJlZm9yZSB0aGUgcmVuZGVyIHVwZGF0ZS5cbiAgICAgICAgZmx1c2hQcmVGbHVzaENicygpO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XG4gICAgICAgIGNvbnN0IGMxID0gbjEgJiYgbjEuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHByZXZTaGFwZUZsYWcgPSBuMSA/IG4xLnNoYXBlRmxhZyA6IDA7XG4gICAgICAgIGNvbnN0IGMyID0gbjIuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHsgcGF0Y2hGbGFnLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgICAgICAvLyBmYXN0IHBhdGhcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDApIHtcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxMjggLyogUGF0Y2hGbGFncy5LRVlFRF9GUkFHTUVOVCAqLykge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgY291bGQgYmUgZWl0aGVyIGZ1bGx5LWtleWVkIG9yIG1peGVkIChzb21lIGtleWVkIHNvbWUgbm90KVxuICAgICAgICAgICAgICAgIC8vIHByZXNlbmNlIG9mIHBhdGNoRmxhZyBtZWFucyBjaGlsZHJlbiBhcmUgZ3VhcmFudGVlZCB0byBiZSBhcnJheXNcbiAgICAgICAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSB7XG4gICAgICAgICAgICAgICAgLy8gdW5rZXllZFxuICAgICAgICAgICAgICAgIHBhdGNoVW5rZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNoaWxkcmVuIGhhcyAzIHBvc3NpYmlsaXRpZXM6IHRleHQsIGFycmF5IG9yIG5vIGNoaWxkcmVuLlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIC8vIHRleHQgY2hpbGRyZW4gZmFzdCBwYXRoXG4gICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMyICE9PSBjMSkge1xuICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIGMyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgICAgIC8vIHByZXYgY2hpbGRyZW4gd2FzIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIGFycmF5cywgY2Fubm90IGFzc3VtZSBhbnl0aGluZywgZG8gZnVsbCBkaWZmXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbmV3IGNoaWxkcmVuLCBqdXN0IHVubW91bnQgb2xkXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgdGV4dCBPUiBudWxsXG4gICAgICAgICAgICAgICAgLy8gbmV3IGNoaWxkcmVuIGlzIGFycmF5IE9SIG51bGxcbiAgICAgICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDggLyogU2hhcGVGbGFncy5URVhUX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbW91bnQgbmV3IGlmIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwYXRjaFVua2V5ZWRDaGlsZHJlbiA9IChjMSwgYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgICAgYzEgPSBjMSB8fCBFTVBUWV9BUlI7XG4gICAgICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xuICAgICAgICBjb25zdCBvbGRMZW5ndGggPSBjMS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IGMyLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbW1vbkxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIHBhdGNoKGMxW2ldLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkXG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsIGZhbHNlLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbW91bnQgbmV3XG4gICAgICAgICAgICBtb3VudENoaWxkcmVuKGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBjb21tb25MZW5ndGgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBjYW4gYmUgYWxsLWtleWVkIG9yIG1peGVkXG4gICAgY29uc3QgcGF0Y2hLZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IGwyID0gYzIubGVuZ3RoO1xuICAgICAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxOyAvLyBwcmV2IGVuZGluZyBpbmRleFxuICAgICAgICBsZXQgZTIgPSBsMiAtIDE7IC8vIG5leHQgZW5kaW5nIGluZGV4XG4gICAgICAgIC8vIDEuIHN5bmMgZnJvbSBzdGFydFxuICAgICAgICAvLyAoYSBiKSBjXG4gICAgICAgIC8vIChhIGIpIGQgZVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2ldO1xuICAgICAgICAgICAgY29uc3QgbjIgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcbiAgICAgICAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICAgICAgICAgIHBhdGNoKG4xLCBuMiwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMi4gc3luYyBmcm9tIGVuZFxuICAgICAgICAvLyBhIChiIGMpXG4gICAgICAgIC8vIGQgZSAoYiBjKVxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2UxXTtcbiAgICAgICAgICAgIGNvbnN0IG4yID0gKGMyW2UyXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKVxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbZTJdKSk7XG4gICAgICAgICAgICBpZiAoaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZTEtLTtcbiAgICAgICAgICAgIGUyLS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gY29tbW9uIHNlcXVlbmNlICsgbW91bnRcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyBpID0gMiwgZTEgPSAxLCBlMiA9IDJcbiAgICAgICAgLy8gKGEgYilcbiAgICAgICAgLy8gYyAoYSBiKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAtMSwgZTIgPSAwXG4gICAgICAgIGlmIChpID4gZTEpIHtcbiAgICAgICAgICAgIGlmIChpIDw9IGUyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFBvcyA9IGUyICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8PSBlMikge1xuICAgICAgICAgICAgICAgICAgICBwYXRjaChudWxsLCAoYzJbaV0gPSBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSksIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDQuIGNvbW1vbiBzZXF1ZW5jZSArIHVubW91bnRcbiAgICAgICAgLy8gKGEgYikgY1xuICAgICAgICAvLyAoYSBiKVxuICAgICAgICAvLyBpID0gMiwgZTEgPSAyLCBlMiA9IDFcbiAgICAgICAgLy8gYSAoYiBjKVxuICAgICAgICAvLyAoYiBjKVxuICAgICAgICAvLyBpID0gMCwgZTEgPSAwLCBlMiA9IC0xXG4gICAgICAgIGVsc2UgaWYgKGkgPiBlMikge1xuICAgICAgICAgICAgd2hpbGUgKGkgPD0gZTEpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gNS4gdW5rbm93biBzZXF1ZW5jZVxuICAgICAgICAvLyBbaSAuLi4gZTEgKyAxXTogYSBiIFtjIGQgZV0gZiBnXG4gICAgICAgIC8vIFtpIC4uLiBlMiArIDFdOiBhIGIgW2UgZCBjIGhdIGYgZ1xuICAgICAgICAvLyBpID0gMiwgZTEgPSA0LCBlMiA9IDVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzMSA9IGk7IC8vIHByZXYgc3RhcnRpbmcgaW5kZXhcbiAgICAgICAgICAgIGNvbnN0IHMyID0gaTsgLy8gbmV4dCBzdGFydGluZyBpbmRleFxuICAgICAgICAgICAgLy8gNS4xIGJ1aWxkIGtleTppbmRleCBtYXAgZm9yIG5ld0NoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChpID0gczI7IGkgPD0gZTI7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IChjMltpXSA9IG9wdGltaXplZFxuICAgICAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxuICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleVRvTmV3SW5kZXhNYXAuaGFzKG5leHRDaGlsZC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEdXBsaWNhdGUga2V5cyBmb3VuZCBkdXJpbmcgdXBkYXRlOmAsIEpTT04uc3RyaW5naWZ5KG5leHRDaGlsZC5rZXkpLCBgTWFrZSBzdXJlIGtleXMgYXJlIHVuaXF1ZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBrZXlUb05ld0luZGV4TWFwLnNldChuZXh0Q2hpbGQua2V5LCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyA1LjIgbG9vcCB0aHJvdWdoIG9sZCBjaGlsZHJlbiBsZWZ0IHRvIGJlIHBhdGNoZWQgYW5kIHRyeSB0byBwYXRjaFxuICAgICAgICAgICAgLy8gbWF0Y2hpbmcgbm9kZXMgJiByZW1vdmUgbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnRcbiAgICAgICAgICAgIGxldCBqO1xuICAgICAgICAgICAgbGV0IHBhdGNoZWQgPSAwO1xuICAgICAgICAgICAgY29uc3QgdG9CZVBhdGNoZWQgPSBlMiAtIHMyICsgMTtcbiAgICAgICAgICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gdXNlZCB0byB0cmFjayB3aGV0aGVyIGFueSBub2RlIGhhcyBtb3ZlZFxuICAgICAgICAgICAgbGV0IG1heE5ld0luZGV4U29GYXIgPSAwO1xuICAgICAgICAgICAgLy8gd29ya3MgYXMgTWFwPG5ld0luZGV4LCBvbGRJbmRleD5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBvbGRJbmRleCBpcyBvZmZzZXQgYnkgKzFcbiAgICAgICAgICAgIC8vIGFuZCBvbGRJbmRleCA9IDAgaXMgYSBzcGVjaWFsIHZhbHVlIGluZGljYXRpbmcgdGhlIG5ldyBub2RlIGhhc1xuICAgICAgICAgICAgLy8gbm8gY29ycmVzcG9uZGluZyBvbGQgbm9kZS5cbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGRldGVybWluaW5nIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlXG4gICAgICAgICAgICBjb25zdCBuZXdJbmRleFRvT2xkSW5kZXhNYXAgPSBuZXcgQXJyYXkodG9CZVBhdGNoZWQpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRvQmVQYXRjaGVkOyBpKyspXG4gICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IHMxOyBpIDw9IGUxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2Q2hpbGQgPSBjMVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlZCA+PSB0b0JlUGF0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGwgbmV3IGNoaWxkcmVuIGhhdmUgYmVlbiBwYXRjaGVkIHNvIHRoaXMgY2FuIG9ubHkgYmUgYSByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQocHJldkNoaWxkLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0ga2V5VG9OZXdJbmRleE1hcC5nZXQocHJldkNoaWxkLmtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXktbGVzcyBub2RlLCB0cnkgdG8gbG9jYXRlIGEga2V5LWxlc3Mgbm9kZSBvZiB0aGUgc2FtZSB0eXBlXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IHMyOyBqIDw9IGUyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaiAtIHMyXSA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZShwcmV2Q2hpbGQsIGMyW2pdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdJbmRleFRvT2xkSW5kZXhNYXBbbmV3SW5kZXggLSBzMl0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IG1heE5ld0luZGV4U29GYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heE5ld0luZGV4U29GYXIgPSBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRjaChwcmV2Q2hpbGQsIGMyW25ld0luZGV4XSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgICAgICBwYXRjaGVkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gNS4zIG1vdmUgYW5kIG1vdW50XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBsb25nZXN0IHN0YWJsZSBzdWJzZXF1ZW5jZSBvbmx5IHdoZW4gbm9kZXMgaGF2ZSBtb3ZlZFxuICAgICAgICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZFxuICAgICAgICAgICAgICAgID8gZ2V0U2VxdWVuY2UobmV3SW5kZXhUb09sZEluZGV4TWFwKVxuICAgICAgICAgICAgICAgIDogRU1QVFlfQVJSO1xuICAgICAgICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAvLyBsb29waW5nIGJhY2t3YXJkcyBzbyB0aGF0IHdlIGNhbiB1c2UgbGFzdCBwYXRjaGVkIG5vZGUgYXMgYW5jaG9yXG4gICAgICAgICAgICBmb3IgKGkgPSB0b0JlUGF0Y2hlZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGMyW25leHRJbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dEluZGV4ICsgMSA8IGwyID8gYzJbbmV4dEluZGV4ICsgMV0uZWwgOiBwYXJlbnRBbmNob3I7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXdcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV4dENoaWxkLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpZjpcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3RhYmxlIHN1YnNlcXVlbmNlIChlLmcuIGEgcmV2ZXJzZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gT1IgY3VycmVudCBub2RlIGlzIG5vdCBhbW9uZyB0aGUgc3RhYmxlIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyIC8qIE1vdmVUeXBlLlJFT1JERVIgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtb3ZlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUsIHBhcmVudFN1c3BlbnNlID0gbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIG1vdmUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICB2bm9kZS5zdXNwZW5zZS5tb3ZlKGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbW92ZShjaGlsZHJlbltpXSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhvc3RJbnNlcnQodm5vZGUuYW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaW5nbGUgbm9kZXNcbiAgICAgICAgY29uc3QgbmVlZFRyYW5zaXRpb24gPSBtb3ZlVHlwZSAhPT0gMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovICYmXG4gICAgICAgICAgICBzaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJlxuICAgICAgICAgICAgdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKG5lZWRUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogTW92ZVR5cGUuRU5URVIgKi8pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKGVsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyTGVhdmUgJiYgYWZ0ZXJMZWF2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudCA9ICh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcmVmLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBzaGFwZUZsYWcsIHBhdGNoRmxhZywgZGlycyB9ID0gdm5vZGU7XG4gICAgICAgIC8vIHVuc2V0IHJlZlxuICAgICAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDI1NiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykge1xuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaG91bGRJbnZva2VEaXJzID0gc2hhcGVGbGFnICYgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8gJiYgZGlycztcbiAgICAgICAgY29uc3Qgc2hvdWxkSW52b2tlVm5vZGVIb29rID0gIWlzQXN5bmNXcmFwcGVyKHZub2RlKTtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJlxuICAgICAgICAgICAgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVVbm1vdW50KSkge1xuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuc3VzcGVuc2UudW5tb3VudChwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVW5tb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgICAgICB2bm9kZS50eXBlLnJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgb3B0aW1pemVkLCBpbnRlcm5hbHMsIGRvUmVtb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGR5bmFtaWNDaGlsZHJlbiAmJlxuICAgICAgICAgICAgICAgIC8vICMxMTUzOiBmYXN0IHBhdGggc2hvdWxkIG5vdCBiZSB0YWtlbiBmb3Igbm9uLXN0YWJsZSAodi1mb3IpIGZyYWdtZW50c1xuICAgICAgICAgICAgICAgICh0eXBlICE9PSBGcmFnbWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAvKiBQYXRjaEZsYWdzLlNUQUJMRV9GUkFHTUVOVCAqLykpKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFzdCBwYXRoIGZvciBibG9jayBub2Rlczogb25seSBuZWVkIHRvIHVubW91bnQgZHluYW1pYyBjaGlsZHJlbi5cbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oZHluYW1pY0NoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgodHlwZSA9PT0gRnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJlxuICAgICAgICAgICAgICAgICAgICAoMTI4IC8qIFBhdGNoRmxhZ3MuS0VZRURfRlJBR01FTlQgKi8gfCAyNTYgLyogUGF0Y2hGbGFncy5VTktFWUVEX0ZSQUdNRU5UICovKSkgfHxcbiAgICAgICAgICAgICAgICAoIW9wdGltaXplZCAmJiBzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSkge1xuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgICAgICAgICByZW1vdmUodm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkpIHx8XG4gICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICAgICAgICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmXG4gICAgICAgICAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ3VubW91bnRlZCcpO1xuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmUgPSB2bm9kZSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgZWwsIGFuY2hvciwgdHJhbnNpdGlvbiB9ID0gdm5vZGU7XG4gICAgICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyA+IDAgJiZcbiAgICAgICAgICAgICAgICB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4IC8qIFBhdGNoRmxhZ3MuREVWX1JPT1RfRlJBR01FTlQgKi8gJiZcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UmVtb3ZlKGNoaWxkLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZShjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyYWdtZW50KGVsLCBhbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0aWMpIHtcbiAgICAgICAgICAgIHJlbW92ZVN0YXRpY05vZGUodm5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmFmdGVyTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovICYmXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXG4gICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgICAgICBjb25zdCBwZXJmb3JtTGVhdmUgPSAoKSA9PiBsZWF2ZShlbCwgcGVyZm9ybVJlbW92ZSk7XG4gICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xuICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlcmZvcm1SZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICAgICAgLy8gRm9yIGZyYWdtZW50cywgZGlyZWN0bHkgcmVtb3ZlIGFsbCBjb250YWluZWQgRE9NIG5vZGVzLlxuICAgICAgICAvLyAoZnJhZ21lbnQgY2hpbGQgbm9kZXMgY2Fubm90IGhhdmUgdHJhbnNpdGlvbilcbiAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgIHdoaWxlIChjdXIgIT09IGVuZCkge1xuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhjdXIpO1xuICAgICAgICAgICAgaG9zdFJlbW92ZShjdXIpO1xuICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBob3N0UmVtb3ZlKGVuZCk7XG4gICAgfTtcbiAgICBjb25zdCB1bm1vdW50Q29tcG9uZW50ID0gKGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS50eXBlLl9faG1ySWQpIHtcbiAgICAgICAgICAgIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYnVtLCBzY29wZSwgdXBkYXRlLCBzdWJUcmVlLCB1bSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIC8vIGJlZm9yZVVubW91bnQgaG9va1xuICAgICAgICBpZiAoYnVtKSB7XG4gICAgICAgICAgICBpbnZva2VBcnJheUZucyhidW0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0b3AgZWZmZWN0cyBpbiBjb21wb25lbnQgc2NvcGVcbiAgICAgICAgc2NvcGUuc3RvcCgpO1xuICAgICAgICAvLyB1cGRhdGUgbWF5IGJlIG51bGwgaWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBpdHMgYXN5bmNcbiAgICAgICAgLy8gc2V0dXAgaGFzIHJlc29sdmVkLlxuICAgICAgICBpZiAodXBkYXRlKSB7XG4gICAgICAgICAgICAvLyBzbyB0aGF0IHNjaGVkdWxlciB3aWxsIG5vIGxvbmdlciBpbnZva2UgaXRcbiAgICAgICAgICAgIHVwZGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHVubW91bnQoc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdW5tb3VudGVkIGhvb2tcbiAgICAgICAgaWYgKHVtKSB7XG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgaW5zdGFuY2UuaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIC8vIEEgY29tcG9uZW50IHdpdGggYXN5bmMgZGVwIGluc2lkZSBhIHBlbmRpbmcgc3VzcGVuc2UgaXMgdW5tb3VudGVkIGJlZm9yZVxuICAgICAgICAvLyBpdHMgYXN5bmMgZGVwIHJlc29sdmVzLiBUaGlzIHNob3VsZCByZW1vdmUgdGhlIGRlcCBmcm9tIHRoZSBzdXNwZW5zZSwgYW5kXG4gICAgICAgIC8vIGNhdXNlIHRoZSBzdXNwZW5zZSB0byByZXNvbHZlIGltbWVkaWF0ZWx5IGlmIHRoYXQgd2FzIHRoZSBsYXN0IGRlcC5cbiAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmXG4gICAgICAgICAgICAhcGFyZW50U3VzcGVuc2UuaXNVbm1vdW50ZWQgJiZcbiAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jRGVwICYmXG4gICAgICAgICAgICAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCAmJlxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VzcGVuc2VJZCA9PT0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzLS07XG4gICAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5tb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSwgc3RhcnQgPSAwKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB1bm1vdW50KGNoaWxkcmVuW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSwgb3B0aW1pemVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZ2V0TmV4dEhvc3ROb2RlID0gdm5vZGUgPT4ge1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVCAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGdldE5leHRIb3N0Tm9kZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTaGFwZUZsYWdzLlNVU1BFTlNFICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdm5vZGUuc3VzcGVuc2UubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob3N0TmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciB8fCB2bm9kZS5lbCkpO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyID0gKHZub2RlLCBjb250YWluZXIsIGlzU1ZHKSA9PiB7XG4gICAgICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xuICAgICAgICAgICAgICAgIHVubW91bnQoY29udGFpbmVyLl92bm9kZSwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRjaChjb250YWluZXIuX3Zub2RlIHx8IG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIG51bGwsIG51bGwsIGlzU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICB9O1xuICAgIGNvbnN0IGludGVybmFscyA9IHtcbiAgICAgICAgcDogcGF0Y2gsXG4gICAgICAgIHVtOiB1bm1vdW50LFxuICAgICAgICBtOiBtb3ZlLFxuICAgICAgICByOiByZW1vdmUsXG4gICAgICAgIG10OiBtb3VudENvbXBvbmVudCxcbiAgICAgICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgICAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcbiAgICAgICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxuICAgICAgICBvOiBvcHRpb25zXG4gICAgfTtcbiAgICBsZXQgaHlkcmF0ZTtcbiAgICBsZXQgaHlkcmF0ZU5vZGU7XG4gICAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgICAgICBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdID0gY3JlYXRlSHlkcmF0aW9uRm5zKGludGVybmFscyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcixcbiAgICAgICAgaHlkcmF0ZSxcbiAgICAgICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVSZWN1cnNlKHsgZWZmZWN0LCB1cGRhdGUgfSwgYWxsb3dlZCkge1xuICAgIGVmZmVjdC5hbGxvd1JlY3Vyc2UgPSB1cGRhdGUuYWxsb3dSZWN1cnNlID0gYWxsb3dlZDtcbn1cbi8qKlxuICogIzExNTZcbiAqIFdoZW4gYSBjb21wb25lbnQgaXMgSE1SLWVuYWJsZWQsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHN0YXRpYyBub2Rlc1xuICogaW5zaWRlIGEgYmxvY2sgYWxzbyBpbmhlcml0IHRoZSBET00gZWxlbWVudCBmcm9tIHRoZSBwcmV2aW91cyB0cmVlIHNvIHRoYXRcbiAqIEhNUiB1cGRhdGVzICh3aGljaCBhcmUgZnVsbCB1cGRhdGVzKSBjYW4gcmV0cmlldmUgdGhlIGVsZW1lbnQgZm9yIHBhdGNoaW5nLlxuICpcbiAqICMyMDgwXG4gKiBJbnNpZGUga2V5ZWQgYHRlbXBsYXRlYCBmcmFnbWVudCBzdGF0aWMgY2hpbGRyZW4sIGlmIGEgZnJhZ21lbnQgaXMgbW92ZWQsXG4gKiB0aGUgY2hpbGRyZW4gd2lsbCBhbHdheXMgYmUgbW92ZWQuIFRoZXJlZm9yZSwgaW4gb3JkZXIgdG8gZW5zdXJlIGNvcnJlY3QgbW92ZVxuICogcG9zaXRpb24sIGVsIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBwcmV2aW91cyBub2Rlcy5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHNoYWxsb3cgPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoMSA9IG4xLmNoaWxkcmVuO1xuICAgIGNvbnN0IGNoMiA9IG4yLmNoaWxkcmVuO1xuICAgIGlmIChpc0FycmF5KGNoMSkgJiYgaXNBcnJheShjaDIpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2gxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgY2FsbGVkIGluIHRoZSBvcHRpbWl6ZWQgcGF0aCBzbyBhcnJheSBjaGlsZHJlbiBhcmVcbiAgICAgICAgICAgIC8vIGd1YXJhbnRlZWQgdG8gYmUgdm5vZGVzXG4gICAgICAgICAgICBjb25zdCBjMSA9IGNoMVtpXTtcbiAgICAgICAgICAgIGxldCBjMiA9IGNoMltpXTtcbiAgICAgICAgICAgIGlmIChjMi5zaGFwZUZsYWcgJiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLyAmJiAhYzIuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMyLnBhdGNoRmxhZyA8PSAwIHx8IGMyLnBhdGNoRmxhZyA9PT0gMzIgLyogUGF0Y2hGbGFncy5IWURSQVRFX0VWRU5UUyAqLykge1xuICAgICAgICAgICAgICAgICAgICBjMiA9IGNoMltpXSA9IGNsb25lSWZNb3VudGVkKGNoMltpXSk7XG4gICAgICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2hhbGxvdylcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihjMSwgYzIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gIzY4NTIgYWxzbyBpbmhlcml0IGZvciB0ZXh0IG5vZGVzXG4gICAgICAgICAgICBpZiAoYzIudHlwZSA9PT0gVGV4dCkge1xuICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhbHNvIGluaGVyaXQgZm9yIGNvbW1lbnQgbm9kZXMsIGJ1dCBub3QgcGxhY2Vob2xkZXJzIChlLmcuIHYtaWYgd2hpY2hcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUgcmVjZWl2ZWQgLmVsIGR1cmluZyBibG9jayBwYXRjaClcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9uZ2VzdF9pbmNyZWFzaW5nX3N1YnNlcXVlbmNlXG5mdW5jdGlvbiBnZXRTZXF1ZW5jZShhcnIpIHtcbiAgICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gWzBdO1xuICAgIGxldCBpLCBqLCB1LCB2LCBjO1xuICAgIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgICAgIGlmIChhcnJJICE9PSAwKSB7XG4gICAgICAgICAgICBqID0gcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChhcnJbal0gPCBhcnJJKSB7XG4gICAgICAgICAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1ID0gMDtcbiAgICAgICAgICAgIHYgPSByZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHdoaWxlICh1IDwgdikge1xuICAgICAgICAgICAgICAgIGMgPSAodSArIHYpID4+IDE7XG4gICAgICAgICAgICAgICAgaWYgKGFycltyZXN1bHRbY11dIDwgYXJySSkge1xuICAgICAgICAgICAgICAgICAgICB1ID0gYyArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ID0gYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgICAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRbdV0gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHUgPSByZXN1bHQubGVuZ3RoO1xuICAgIHYgPSByZXN1bHRbdSAtIDFdO1xuICAgIHdoaWxlICh1LS0gPiAwKSB7XG4gICAgICAgIHJlc3VsdFt1XSA9IHY7XG4gICAgICAgIHYgPSBwW3ZdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBpc1RlbGVwb3J0ID0gKHR5cGUpID0+IHR5cGUuX19pc1RlbGVwb3J0O1xuY29uc3QgaXNUZWxlcG9ydERpc2FibGVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGlzYWJsZWQgfHwgcHJvcHMuZGlzYWJsZWQgPT09ICcnKTtcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5jb25zdCByZXNvbHZlVGFyZ2V0ID0gKHByb3BzLCBzZWxlY3QpID0+IHtcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IHByb3BzICYmIHByb3BzLnRvO1xuICAgIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcbiAgICAgICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIHdhcm4oYEN1cnJlbnQgcmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJpbmcgdGFyZ2V0IGZvciBUZWxlcG9ydHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgKG1pc3NpbmcgcXVlcnlTZWxlY3RvciByZW5kZXJlciBvcHRpb24pYCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbG9jYXRlIFRlbGVwb3J0IHRhcmdldCB3aXRoIHNlbGVjdG9yIFwiJHt0YXJnZXRTZWxlY3Rvcn1cIi4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgTm90ZSB0aGUgdGFyZ2V0IGVsZW1lbnQgbXVzdCBleGlzdCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIC0gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgaS5lLiB0aGUgdGFyZ2V0IGNhbm5vdCBiZSByZW5kZXJlZCBieSB0aGUgY29tcG9uZW50IGl0c2VsZiwgYW5kIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYGlkZWFsbHkgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhlIGVudGlyZSBWdWUgY29tcG9uZW50IHRyZWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgd2FybihgSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQ6ICR7dGFyZ2V0U2VsZWN0b3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xuICAgIH1cbn07XG5jb25zdCBUZWxlcG9ydEltcGwgPSB7XG4gICAgX19pc1RlbGVwb3J0OiB0cnVlLFxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpIHtcbiAgICAgICAgY29uc3QgeyBtYzogbW91bnRDaGlsZHJlbiwgcGM6IHBhdGNoQ2hpbGRyZW4sIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLCBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9IH0gPSBpbnRlcm5hbHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4yLnByb3BzKTtcbiAgICAgICAgbGV0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuIH0gPSBuMjtcbiAgICAgICAgLy8gIzMzMDJcbiAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gaW5zZXJ0IGFuY2hvcnMgaW4gdGhlIG1haW4gdmlld1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAobjIuZWwgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNvbW1lbnQoJ3RlbGVwb3J0IHN0YXJ0JylcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZVRleHQoJycpKTtcbiAgICAgICAgICAgIGNvbnN0IG1haW5BbmNob3IgPSAobjIuYW5jaG9yID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVDb21tZW50KCd0ZWxlcG9ydCBlbmQnKVxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xuICAgICAgICAgICAgaW5zZXJ0KHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBjcmVhdGVUZXh0KCcnKSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0KHRhcmdldEFuY2hvciwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAvLyAjMjY1MiB3ZSBjb3VsZCBiZSB0ZWxlcG9ydGluZyBmcm9tIGEgbm9uLVNWRyB0cmVlIGludG8gYW4gU1ZHIHRyZWVcbiAgICAgICAgICAgICAgICBpc1NWRyA9IGlzU1ZHIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gbW91bnQ6JywgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtb3VudCA9IChjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRlbGVwb3J0ICphbHdheXMqIGhhcyBBcnJheSBjaGlsZHJlbi4gVGhpcyBpcyBlbmZvcmNlZCBpbiBib3RoIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVyIGFuZCB2bm9kZSBjaGlsZHJlbiBub3JtYWxpemF0aW9uLlxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgbW91bnQodGFyZ2V0LCB0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGNvbnRlbnRcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgICAgICBjb25zdCBtYWluQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xLmFuY2hvcik7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gbjEudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IChuMi50YXJnZXRBbmNob3IgPSBuMS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggd2hlbiB0aGUgdGVsZXBvcnQgaGFwcGVucyB0byBiZSBhIGJsb2NrIHJvb3RcbiAgICAgICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGN1cnJlbnRDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaW4gYmxvY2sgdHJlZSBtb2RlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCByb290LWxldmVsIG5vZGVzXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIHRlbGVwb3J0IGluaGVyaXQgcHJldmlvdXMgRE9NIHJlZmVyZW5jZXMgc28gdGhhdCB0aGV5IGNhblxuICAgICAgICAgICAgICAgIC8vIGJlIG1vdmVkIGluIGZ1dHVyZSBwYXRjaGVzLlxuICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgY3VycmVudENvbnRhaW5lciwgY3VycmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3YXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGVkIC0+IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaW50byBtYWluIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIGNvbnRhaW5lciwgbWFpbkFuY2hvciwgaW50ZXJuYWxzLCAxIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRPR0dMRSAqLyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGFyZ2V0IGNoYW5nZWRcbiAgICAgICAgICAgICAgICBpZiAoKG4yLnByb3BzICYmIG4yLnByb3BzLnRvKSAhPT0gKG4xLnByb3BzICYmIG4xLnByb3BzLnRvKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgbmV4dFRhcmdldCwgbnVsbCwgaW50ZXJuYWxzLCAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOicsIHRhcmdldCwgYCgke3R5cGVvZiB0YXJnZXR9KWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkIC0+IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBpbnRvIHRlbGVwb3J0IHRhcmdldFxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIHRhcmdldCwgdGFyZ2V0QW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVGVsZXBvcnRNb3ZlVHlwZXMuVE9HR0xFICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQ3NzVmFycyhuMik7XG4gICAgfSxcbiAgICByZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGFuY2hvciwgdGFyZ2V0QW5jaG9yLCB0YXJnZXQsIHByb3BzIH0gPSB2bm9kZTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZSh0YXJnZXRBbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFuIHVubW91bnRlZCB0ZWxlcG9ydCBzaG91bGQgYWx3YXlzIHJlbW92ZSBpdHMgY2hpbGRyZW4gaWYgbm90IGRpc2FibGVkXG4gICAgICAgIGlmIChkb1JlbW92ZSB8fCAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoY2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsICEhY2hpbGQuZHluYW1pY0NoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1vdmU6IG1vdmVUZWxlcG9ydCxcbiAgICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlJFT1JERVIgKi8pIHtcbiAgICAvLyBtb3ZlIHRhcmdldCBhbmNob3IgaWYgdGhpcyBpcyBhIHRhcmdldCBjaGFuZ2UuXG4gICAgaWYgKG1vdmVUeXBlID09PSAwIC8qIFRlbGVwb3J0TW92ZVR5cGVzLlRBUkdFVF9DSEFOR0UgKi8pIHtcbiAgICAgICAgaW5zZXJ0KHZub2RlLnRhcmdldEFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbiAgICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgICBjb25zdCBpc1Jlb3JkZXIgPSBtb3ZlVHlwZSA9PT0gMiAvKiBUZWxlcG9ydE1vdmVUeXBlcy5SRU9SREVSICovO1xuICAgIC8vIG1vdmUgbWFpbiB2aWV3IGFuY2hvciBpZiB0aGlzIGlzIGEgcmUtb3JkZXIuXG4gICAgaWYgKGlzUmVvcmRlcikge1xuICAgICAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgICB9XG4gICAgLy8gaWYgdGhpcyBpcyBhIHJlLW9yZGVyIGFuZCB0ZWxlcG9ydCBpcyBlbmFibGVkIChjb250ZW50IGlzIGluIHRhcmdldClcbiAgICAvLyBkbyBub3QgbW92ZSBjaGlsZHJlbi4gU28gdGhlIG9wcG9zaXRlIGlzOiBvbmx5IG1vdmUgY2hpbGRyZW4gaWYgdGhpc1xuICAgIC8vIGlzIG5vdCBhIHJlb3JkZXIsIG9yIHRoZSB0ZWxlcG9ydCBpcyBkaXNhYmxlZFxuICAgIGlmICghaXNSZW9yZGVyIHx8IGlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcbiAgICAgICAgLy8gVGVsZXBvcnQgaGFzIGVpdGhlciBBcnJheSBjaGlsZHJlbiBvciBubyBjaGlsZHJlbi5cbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIFNoYXBlRmxhZ3MuQVJSQVlfQ0hJTERSRU4gKi8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgMiAvKiBNb3ZlVHlwZS5SRU9SREVSICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtb3ZlIG1haW4gdmlldyBhbmNob3IgaWYgdGhpcyBpcyBhIHJlLW9yZGVyLlxuICAgIGlmIChpc1Jlb3JkZXIpIHtcbiAgICAgICAgaW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciB9IH0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICAgIGNvbnN0IHRhcmdldCA9ICh2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZub2RlLnByb3BzLCBxdWVyeVNlbGVjdG9yKSk7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgICAvLyBpZiBtdWx0aXBsZSB0ZWxlcG9ydHMgcmVuZGVyZWQgdG8gdGhlIHNhbWUgdGFyZ2V0IGVsZW1lbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gcGljayB1cCBmcm9tIHdoZXJlIHRoZSBsYXN0IHRlbGVwb3J0IGZpbmlzaGVkIGluc3RlYWQgb2YgdGhlIGZpcnN0IG5vZGVcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldC5fbHBhIHx8IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLykge1xuICAgICAgICAgICAgaWYgKGlzVGVsZXBvcnREaXNhYmxlZCh2bm9kZS5wcm9wcykpIHtcbiAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBwYXJlbnROb2RlKG5vZGUpLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XG4gICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgICAgICAgIC8vIGxvb2thaGVhZCB1bnRpbCB3ZSBmaW5kIHRoZSB0YXJnZXQgYW5jaG9yXG4gICAgICAgICAgICAgICAgLy8gd2UgY2Fubm90IHJlbHkgb24gcmV0dXJuIHZhbHVlIG9mIGh5ZHJhdGVDaGlsZHJlbigpIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgICAgICAvLyBjb3VsZCBiZSBuZXN0ZWQgdGVsZXBvcnRzXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldEFuY2hvciA9IHRhcmdldE5vZGU7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3IgPSBuZXh0U2libGluZyh0YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0QW5jaG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFuY2hvci5kYXRhID09PSAndGVsZXBvcnQgYW5jaG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Ll9scGEgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHlkcmF0ZUNoaWxkcmVuKHRhcmdldE5vZGUsIHZub2RlLCB0YXJnZXQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVDc3NWYXJzKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlLmFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS5hbmNob3IpO1xufVxuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSkge1xuICAgIC8vIHByZXNlbmNlIG9mIC51dCBtZXRob2QgaW5kaWNhdGVzIG93bmVyIGNvbXBvbmVudCB1c2VzIGNzcyB2YXJzLlxuICAgIC8vIGNvZGUgcGF0aCBoZXJlIGNhbiBhc3N1bWUgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gICAgaWYgKGN0eCAmJiBjdHgudXQpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB2bm9kZS5jaGlsZHJlblswXS5lbDtcbiAgICAgICAgd2hpbGUgKG5vZGUgIT09IHZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpXG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1vd25lcicsIGN0eC51aWQpO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnV0KCk7XG4gICAgfVxufVxuXG5jb25zdCBGcmFnbWVudCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnRnJhZ21lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFRleHQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ1RleHQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IENvbW1lbnQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ0NvbW1lbnQnIDogdW5kZWZpbmVkKTtcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnU3RhdGljJyA6IHVuZGVmaW5lZCk7XG4vLyBTaW5jZSB2LWlmIGFuZCB2LWZvciBhcmUgdGhlIHR3byBwb3NzaWJsZSB3YXlzIG5vZGUgc3RydWN0dXJlIGNhbiBkeW5hbWljYWxseVxuLy8gY2hhbmdlLCBvbmNlIHdlIGNvbnNpZGVyIHYtaWYgYnJhbmNoZXMgYW5kIGVhY2ggdi1mb3IgZnJhZ21lbnQgYSBibG9jaywgd2Vcbi8vIGNhbiBkaXZpZGUgYSB0ZW1wbGF0ZSBpbnRvIG5lc3RlZCBibG9ja3MsIGFuZCB3aXRoaW4gZWFjaCBibG9jayB0aGUgbm9kZVxuLy8gc3RydWN0dXJlIHdvdWxkIGJlIHN0YWJsZS4gVGhpcyBhbGxvd3MgdXMgdG8gc2tpcCBtb3N0IGNoaWxkcmVuIGRpZmZpbmdcbi8vIGFuZCBvbmx5IHdvcnJ5IGFib3V0IHRoZSBkeW5hbWljIG5vZGVzIChpbmRpY2F0ZWQgYnkgcGF0Y2ggZmxhZ3MpLlxuY29uc3QgYmxvY2tTdGFjayA9IFtdO1xubGV0IGN1cnJlbnRCbG9jayA9IG51bGw7XG4vKipcbiAqIE9wZW4gYSBibG9jay5cbiAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGBjcmVhdGVCbG9ja2AuIEl0IGNhbm5vdCBiZSBwYXJ0IG9mIGBjcmVhdGVCbG9ja2BcbiAqIGJlY2F1c2UgdGhlIGNoaWxkcmVuIG9mIHRoZSBibG9jayBhcmUgZXZhbHVhdGVkIGJlZm9yZSBgY3JlYXRlQmxvY2tgIGl0c2VsZlxuICogaXMgY2FsbGVkLiBUaGUgZ2VuZXJhdGVkIGNvZGUgdHlwaWNhbGx5IGxvb2tzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBqc1xuICogZnVuY3Rpb24gcmVuZGVyKCkge1xuICogICByZXR1cm4gKG9wZW5CbG9jaygpLGNyZWF0ZUJsb2NrKCdkaXYnLCBudWxsLCBbLi4uXSkpXG4gKiB9XG4gKiBgYGBcbiAqIGRpc2FibGVUcmFja2luZyBpcyB0cnVlIHdoZW4gY3JlYXRpbmcgYSB2LWZvciBmcmFnbWVudCBibG9jaywgc2luY2UgYSB2LWZvclxuICogZnJhZ21lbnQgYWx3YXlzIGRpZmZzIGl0cyBjaGlsZHJlbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBvcGVuQmxvY2soZGlzYWJsZVRyYWNraW5nID0gZmFsc2UpIHtcbiAgICBibG9ja1N0YWNrLnB1c2goKGN1cnJlbnRCbG9jayA9IGRpc2FibGVUcmFja2luZyA/IG51bGwgOiBbXSkpO1xufVxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcbiAgICBibG9ja1N0YWNrLnBvcCgpO1xuICAgIGN1cnJlbnRCbG9jayA9IGJsb2NrU3RhY2tbYmxvY2tTdGFjay5sZW5ndGggLSAxXSB8fCBudWxsO1xufVxuLy8gV2hldGhlciB3ZSBzaG91bGQgYmUgdHJhY2tpbmcgZHluYW1pYyBjaGlsZCBub2RlcyBpbnNpZGUgYSBibG9jay5cbi8vIE9ubHkgdHJhY2tzIHdoZW4gdGhpcyB2YWx1ZSBpcyA+IDBcbi8vIFdlIGFyZSBub3QgdXNpbmcgYSBzaW1wbGUgYm9vbGVhbiBiZWNhdXNlIHRoaXMgdmFsdWUgbWF5IG5lZWQgdG8gYmVcbi8vIGluY3JlbWVudGVkL2RlY3JlbWVudGVkIGJ5IG5lc3RlZCB1c2FnZSBvZiB2LW9uY2UgKHNlZSBiZWxvdylcbmxldCBpc0Jsb2NrVHJlZUVuYWJsZWQgPSAxO1xuLyoqXG4gKiBCbG9jayB0cmFja2luZyBzb21ldGltZXMgbmVlZHMgdG8gYmUgZGlzYWJsZWQsIGZvciBleGFtcGxlIGR1cmluZyB0aGVcbiAqIGNyZWF0aW9uIG9mIGEgdHJlZSB0aGF0IG5lZWRzIHRvIGJlIGNhY2hlZCBieSB2LW9uY2UuIFRoZSBjb21waWxlciBnZW5lcmF0ZXNcbiAqIGNvZGUgbGlrZSB0aGlzOlxuICpcbiAqIGBgYCBqc1xuICogX2NhY2hlWzFdIHx8IChcbiAqICAgc2V0QmxvY2tUcmFja2luZygtMSksXG4gKiAgIF9jYWNoZVsxXSA9IGNyZWF0ZVZOb2RlKC4uLiksXG4gKiAgIHNldEJsb2NrVHJhY2tpbmcoMSksXG4gKiAgIF9jYWNoZVsxXVxuICogKVxuICogYGBgXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0QmxvY2tUcmFja2luZyh2YWx1ZSkge1xuICAgIGlzQmxvY2tUcmVlRW5hYmxlZCArPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldHVwQmxvY2sodm5vZGUpIHtcbiAgICAvLyBzYXZlIGN1cnJlbnQgYmxvY2sgY2hpbGRyZW4gb24gdGhlIGJsb2NrIHZub2RlXG4gICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID1cbiAgICAgICAgaXNCbG9ja1RyZWVFbmFibGVkID4gMCA/IGN1cnJlbnRCbG9jayB8fCBFTVBUWV9BUlIgOiBudWxsO1xuICAgIC8vIGNsb3NlIGJsb2NrXG4gICAgY2xvc2VCbG9jaygpO1xuICAgIC8vIGEgYmxvY2sgaXMgYWx3YXlzIGdvaW5nIHRvIGJlIHBhdGNoZWQsIHNvIHRyYWNrIGl0IGFzIGEgY2hpbGQgb2YgaXRzXG4gICAgLy8gcGFyZW50IGJsb2NrXG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XG4gICAgcmV0dXJuIHNldHVwQmxvY2soY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgdHJ1ZSAvKiBpc0Jsb2NrICovKSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIGJsb2NrIHJvb3Qgdm5vZGUuIFRha2VzIHRoZSBzYW1lIGV4YWN0IGFyZ3VtZW50cyBhcyBgY3JlYXRlVk5vZGVgLlxuICogQSBibG9jayByb290IGtlZXBzIHRyYWNrIG9mIGR5bmFtaWMgbm9kZXMgd2l0aGluIHRoZSBibG9jayBpbiB0aGVcbiAqIGBkeW5hbWljQ2hpbGRyZW5gIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcbiAgICByZXR1cm4gc2V0dXBCbG9jayhjcmVhdGVWTm9kZSh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzLCB0cnVlIC8qIGlzQmxvY2s6IHByZXZlbnQgYSBibG9jayBmcm9tIHRyYWNraW5nIGl0c2VsZiAqLykpO1xufVxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA/IHZhbHVlLl9fdl9pc1ZOb2RlID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICBuMi5zaGFwZUZsYWcgJiA2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UICovICYmXG4gICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5oYXMobjIudHlwZSkpIHtcbiAgICAgICAgLy8gIzcwNDIsIGVuc3VyZSB0aGUgdm5vZGUgYmVpbmcgdW5tb3VudGVkIGR1cmluZyBITVJcbiAgICAgICAgLy8gYml0d2lzZSBvcGVyYXRpb25zIHRvIHJlbW92ZSBrZWVwIGFsaXZlIGZsYWdzXG4gICAgICAgIG4xLnNoYXBlRmxhZyAmPSB+MjU2IC8qIFNoYXBlRmxhZ3MuQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovO1xuICAgICAgICBuMi5zaGFwZUZsYWcgJj0gfjUxMiAvKiBTaGFwZUZsYWdzLkNPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xuICAgICAgICAvLyBITVIgb25seTogaWYgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBob3QtdXBkYXRlZCwgZm9yY2UgYSByZWxvYWQuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG4vKipcbiAqIEludGVybmFsIEFQSSBmb3IgcmVnaXN0ZXJpbmcgYW4gYXJndW1lbnRzIHRyYW5zZm9ybSBmb3IgY3JlYXRlVk5vZGVcbiAqIHVzZWQgZm9yIGNyZWF0aW5nIHN0dWJzIGluIHRoZSB0ZXN0LXV0aWxzXG4gKiBJdCBpcyAqaW50ZXJuYWwqIGJ1dCBuZWVkcyB0byBiZSBleHBvc2VkIGZvciB0ZXN0LXV0aWxzIHRvIHBpY2sgdXAgcHJvcGVyXG4gKiB0eXBpbmdzXG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybVZOb2RlQXJncyh0cmFuc2Zvcm1lcikge1xuICAgIHZub2RlQXJnc1RyYW5zZm9ybWVyID0gdHJhbnNmb3JtZXI7XG59XG5jb25zdCBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtID0gKC4uLmFyZ3MpID0+IHtcbiAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKC4uLih2bm9kZUFyZ3NUcmFuc2Zvcm1lclxuICAgICAgICA/IHZub2RlQXJnc1RyYW5zZm9ybWVyKGFyZ3MsIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSlcbiAgICAgICAgOiBhcmdzKSk7XG59O1xuY29uc3QgSW50ZXJuYWxPYmplY3RLZXkgPSBgX192SW50ZXJuYWxgO1xuY29uc3Qgbm9ybWFsaXplS2V5ID0gKHsga2V5IH0pID0+IGtleSAhPSBudWxsID8ga2V5IDogbnVsbDtcbmNvbnN0IG5vcm1hbGl6ZVJlZiA9ICh7IHJlZiwgcmVmX2tleSwgcmVmX2ZvciB9KSA9PiB7XG4gICAgcmV0dXJuIChyZWYgIT0gbnVsbFxuICAgICAgICA/IGlzU3RyaW5nKHJlZikgfHwgaXNSZWYocmVmKSB8fCBpc0Z1bmN0aW9uKHJlZilcbiAgICAgICAgICAgID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH1cbiAgICAgICAgICAgIDogcmVmXG4gICAgICAgIDogbnVsbCk7XG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzID0gbnVsbCwgY2hpbGRyZW4gPSBudWxsLCBwYXRjaEZsYWcgPSAwLCBkeW5hbWljUHJvcHMgPSBudWxsLCBzaGFwZUZsYWcgPSB0eXBlID09PSBGcmFnbWVudCA/IDAgOiAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqLywgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHZub2RlID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBrZXk6IHByb3BzICYmIG5vcm1hbGl6ZUtleShwcm9wcyksXG4gICAgICAgIHJlZjogcHJvcHMgJiYgbm9ybWFsaXplUmVmKHByb3BzKSxcbiAgICAgICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgICAgIHNsb3RTY29wZUlkczogbnVsbCxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICAgICAgc3VzcGVuc2U6IG51bGwsXG4gICAgICAgIHNzQ29udGVudDogbnVsbCxcbiAgICAgICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICAgICAgZGlyczogbnVsbCxcbiAgICAgICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICAgICAgZWw6IG51bGwsXG4gICAgICAgIGFuY2hvcjogbnVsbCxcbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgICAgIHN0YXRpY0NvdW50OiAwLFxuICAgICAgICBzaGFwZUZsYWcsXG4gICAgICAgIHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzLFxuICAgICAgICBkeW5hbWljQ2hpbGRyZW46IG51bGwsXG4gICAgICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgICAgIGN0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlXG4gICAgfTtcbiAgICBpZiAobmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24pIHtcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICAgICAgLy8gbm9ybWFsaXplIHN1c3BlbnNlIGNoaWxkcmVuXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU2hhcGVGbGFncy5TVVNQRU5TRSAqLykge1xuICAgICAgICAgICAgdHlwZS5ub3JtYWxpemUodm5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIC8vIGNvbXBpbGVkIGVsZW1lbnQgdm5vZGUgLSBpZiBjaGlsZHJlbiBpcyBwYXNzZWQsIG9ubHkgcG9zc2libGUgdHlwZXMgYXJlXG4gICAgICAgIC8vIHN0cmluZyBvciBBcnJheS5cbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKVxuICAgICAgICAgICAgPyA4IC8qIFNoYXBlRmxhZ3MuVEVYVF9DSElMRFJFTiAqL1xuICAgICAgICAgICAgOiAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovO1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSBrZXlcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHZub2RlLmtleSAhPT0gdm5vZGUua2V5KSB7XG4gICAgICAgIHdhcm4oYFZOb2RlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGtleSAoTmFOKS4gVk5vZGUgdHlwZTpgLCB2bm9kZS50eXBlKTtcbiAgICB9XG4gICAgLy8gdHJhY2sgdm5vZGUgZm9yIGJsb2NrIHRyZWVcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJlxuICAgICAgICAvLyBhdm9pZCBhIGJsb2NrIG5vZGUgZnJvbSB0cmFja2luZyBpdHNlbGZcbiAgICAgICAgIWlzQmxvY2tOb2RlICYmXG4gICAgICAgIC8vIGhhcyBjdXJyZW50IHBhcmVudCBibG9ja1xuICAgICAgICBjdXJyZW50QmxvY2sgJiZcbiAgICAgICAgLy8gcHJlc2VuY2Ugb2YgYSBwYXRjaCBmbGFnIGluZGljYXRlcyB0aGlzIG5vZGUgbmVlZHMgcGF0Y2hpbmcgb24gdXBkYXRlcy5cbiAgICAgICAgLy8gY29tcG9uZW50IG5vZGVzIGFsc28gc2hvdWxkIGFsd2F5cyBiZSBwYXRjaGVkLCBiZWNhdXNlIGV2ZW4gaWYgdGhlXG4gICAgICAgIC8vIGNvbXBvbmVudCBkb2Vzbid0IG5lZWQgdG8gdXBkYXRlLCBpdCBuZWVkcyB0byBwZXJzaXN0IHRoZSBpbnN0YW5jZSBvbiB0b1xuICAgICAgICAvLyB0aGUgbmV4dCB2bm9kZSBzbyB0aGF0IGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWQgbGF0ZXIuXG4gICAgICAgICh2bm9kZS5wYXRjaEZsYWcgPiAwIHx8IHNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pICYmXG4gICAgICAgIC8vIHRoZSBFVkVOVFMgZmxhZyBpcyBvbmx5IGZvciBoeWRyYXRpb24gYW5kIGlmIGl0IGlzIHRoZSBvbmx5IGZsYWcsIHRoZVxuICAgICAgICAvLyB2bm9kZSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgZHluYW1pYyBkdWUgdG8gaGFuZGxlciBjYWNoaW5nLlxuICAgICAgICB2bm9kZS5wYXRjaEZsYWcgIT09IDMyIC8qIFBhdGNoRmxhZ3MuSFlEUkFURV9FVkVOVFMgKi8pIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdm5vZGU7XG59XG5jb25zdCBjcmVhdGVWTm9kZSA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtIDogX2NyZWF0ZVZOb2RlKTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICAgIGlmICghdHlwZSB8fCB0eXBlID09PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXR5cGUpIHtcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgICAgICB9XG4gICAgICAgIHR5cGUgPSBDb21tZW50O1xuICAgIH1cbiAgICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgICAgICAvLyBjcmVhdGVWTm9kZSByZWNlaXZpbmcgYW4gZXhpc3Rpbmcgdm5vZGUuIFRoaXMgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgICAgIC8vIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIi8+XG4gICAgICAgIC8vICMyMDc4IG1ha2Ugc3VyZSB0byBtZXJnZSByZWZzIGR1cmluZyB0aGUgY2xvbmUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZyBpdFxuICAgICAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHR5cGUsIHByb3BzLCB0cnVlIC8qIG1lcmdlUmVmOiB0cnVlICovKTtcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiAhaXNCbG9ja05vZGUgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoY2xvbmVkLnNoYXBlRmxhZyAmIDYgLyogU2hhcGVGbGFncy5DT01QT05FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50QmxvY2tbY3VycmVudEJsb2NrLmluZGV4T2YodHlwZSldID0gY2xvbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2xvbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9uZWQucGF0Y2hGbGFnIHw9IC0yIC8qIFBhdGNoRmxhZ3MuQkFJTCAqLztcbiAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG4gICAgLy8gY2xhc3MgY29tcG9uZW50IG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcbiAgICAgICAgdHlwZSA9IHR5cGUuX192Y2NPcHRzO1xuICAgIH1cbiAgICAvLyBjbGFzcyAmIHN0eWxlIG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKHByb3BzKSB7XG4gICAgICAgIC8vIGZvciByZWFjdGl2ZSBvciBwcm94eSBvYmplY3RzLCB3ZSBuZWVkIHRvIGNsb25lIGl0IHRvIGVuYWJsZSBtdXRhdGlvbi5cbiAgICAgICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xuICAgICAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgICAgICAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICAgICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09iamVjdChzdHlsZSkpIHtcbiAgICAgICAgICAgIC8vIHJlYWN0aXZlIHN0YXRlIG9iamVjdHMgbmVlZCB0byBiZSBjbG9uZWQgc2luY2UgdGhleSBhcmUgbGlrZWx5IHRvIGJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkXG4gICAgICAgICAgICBpZiAoaXNQcm94eShzdHlsZSkgJiYgIWlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSBleHRlbmQoe30sIHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb3BzLnN0eWxlID0gbm9ybWFsaXplU3R5bGUoc3R5bGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVuY29kZSB0aGUgdm5vZGUgdHlwZSBpbmZvcm1hdGlvbiBpbnRvIGEgYml0bWFwXG4gICAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSlcbiAgICAgICAgPyAxIC8qIFNoYXBlRmxhZ3MuRUxFTUVOVCAqL1xuICAgICAgICA6IGlzU3VzcGVuc2UodHlwZSlcbiAgICAgICAgICAgID8gMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi9cbiAgICAgICAgICAgIDogaXNUZWxlcG9ydCh0eXBlKVxuICAgICAgICAgICAgICAgID8gNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqL1xuICAgICAgICAgICAgICAgIDogaXNPYmplY3QodHlwZSlcbiAgICAgICAgICAgICAgICAgICAgPyA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovXG4gICAgICAgICAgICAgICAgICAgIDogaXNGdW5jdGlvbih0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAyIC8qIFNoYXBlRmxhZ3MuRlVOQ1RJT05BTF9DT01QT05FTlQgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNoYXBlRmxhZyAmIDQgLyogU2hhcGVGbGFncy5TVEFURUZVTF9DT01QT05FTlQgKi8gJiYgaXNQcm94eSh0eXBlKSkge1xuICAgICAgICB0eXBlID0gdG9SYXcodHlwZSk7XG4gICAgICAgIHdhcm4oYFZ1ZSByZWNlaXZlZCBhIENvbXBvbmVudCB3aGljaCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gYCArXG4gICAgICAgICAgICBgbGVhZCB0byB1bm5lY2Vzc2FyeSBwZXJmb3JtYW5jZSBvdmVyaGVhZCwgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGJ5IGAgK1xuICAgICAgICAgICAgYG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBgICtcbiAgICAgICAgICAgIGBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLCBgXFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgaXNCbG9ja05vZGUsIHRydWUpO1xufVxuZnVuY3Rpb24gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGlzUHJveHkocHJvcHMpIHx8IEludGVybmFsT2JqZWN0S2V5IGluIHByb3BzXG4gICAgICAgID8gZXh0ZW5kKHt9LCBwcm9wcylcbiAgICAgICAgOiBwcm9wcztcbn1cbmZ1bmN0aW9uIGNsb25lVk5vZGUodm5vZGUsIGV4dHJhUHJvcHMsIG1lcmdlUmVmID0gZmFsc2UpIHtcbiAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgTk9UIHVzaW5nIHNwcmVhZCBvciBleHRlbmQgdG8gYXZvaWQgdGhlIHJ1bnRpbWVcbiAgICAvLyBrZXkgZW51bWVyYXRpb24gY29zdC5cbiAgICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gZXh0cmFQcm9wcyA/IG1lcmdlUHJvcHMocHJvcHMgfHwge30sIGV4dHJhUHJvcHMpIDogcHJvcHM7XG4gICAgY29uc3QgY2xvbmVkID0ge1xuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICAgICAgX192X3NraXA6IHRydWUsXG4gICAgICAgIHR5cGU6IHZub2RlLnR5cGUsXG4gICAgICAgIHByb3BzOiBtZXJnZWRQcm9wcyxcbiAgICAgICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxuICAgICAgICByZWY6IGV4dHJhUHJvcHMgJiYgZXh0cmFQcm9wcy5yZWZcbiAgICAgICAgICAgID8gLy8gIzIwNzggaW4gdGhlIGNhc2Ugb2YgPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiIHJlZj1cImV4dHJhXCIvPlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlZnMgc28gdGhlIHNpbmdsZSB2bm9kZSBjYW4gYmUgc2V0IG9uIG11bHRpcGxlIHJlZnNcbiAgICAgICAgICAgICAgICBtZXJnZVJlZiAmJiByZWZcbiAgICAgICAgICAgICAgICAgICAgPyBpc0FycmF5KHJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVmLmNvbmNhdChub3JtYWxpemVSZWYoZXh0cmFQcm9wcykpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtyZWYsIG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKV1cbiAgICAgICAgICAgICAgICAgICAgOiBub3JtYWxpemVSZWYoZXh0cmFQcm9wcylcbiAgICAgICAgICAgIDogcmVmLFxuICAgICAgICBzY29wZUlkOiB2bm9kZS5zY29wZUlkLFxuICAgICAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcbiAgICAgICAgY2hpbGRyZW46IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXRjaEZsYWcgPT09IC0xIC8qIFBhdGNoRmxhZ3MuSE9JU1RFRCAqLyAmJiBpc0FycmF5KGNoaWxkcmVuKVxuICAgICAgICAgICAgPyBjaGlsZHJlbi5tYXAoZGVlcENsb25lVk5vZGUpXG4gICAgICAgICAgICA6IGNoaWxkcmVuLFxuICAgICAgICB0YXJnZXQ6IHZub2RlLnRhcmdldCxcbiAgICAgICAgdGFyZ2V0QW5jaG9yOiB2bm9kZS50YXJnZXRBbmNob3IsXG4gICAgICAgIHN0YXRpY0NvdW50OiB2bm9kZS5zdGF0aWNDb3VudCxcbiAgICAgICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXG4gICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgd2l0aCBleHRyYSBwcm9wcywgd2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgaXRzXG4gICAgICAgIC8vIGV4aXN0aW5nIHBhdGNoIGZsYWcgdG8gYmUgcmVsaWFibGUgYW5kIG5lZWQgdG8gYWRkIHRoZSBGVUxMX1BST1BTIGZsYWcuXG4gICAgICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cbiAgICAgICAgLy8gZmFzdCBwYXRocyBvbmx5LlxuICAgICAgICBwYXRjaEZsYWc6IGV4dHJhUHJvcHMgJiYgdm5vZGUudHlwZSAhPT0gRnJhZ21lbnRcbiAgICAgICAgICAgID8gcGF0Y2hGbGFnID09PSAtMSAvLyBob2lzdGVkIG5vZGVcbiAgICAgICAgICAgICAgICA/IDE2IC8qIFBhdGNoRmxhZ3MuRlVMTF9QUk9QUyAqL1xuICAgICAgICAgICAgICAgIDogcGF0Y2hGbGFnIHwgMTYgLyogUGF0Y2hGbGFncy5GVUxMX1BST1BTICovXG4gICAgICAgICAgICA6IHBhdGNoRmxhZyxcbiAgICAgICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBhcHBDb250ZXh0OiB2bm9kZS5hcHBDb250ZXh0LFxuICAgICAgICBkaXJzOiB2bm9kZS5kaXJzLFxuICAgICAgICB0cmFuc2l0aW9uOiB2bm9kZS50cmFuc2l0aW9uLFxuICAgICAgICAvLyBUaGVzZSBzaG91bGQgdGVjaG5pY2FsbHkgb25seSBiZSBub24tbnVsbCBvbiBtb3VudGVkIFZOb2Rlcy4gSG93ZXZlcixcbiAgICAgICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XG4gICAgICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcbiAgICAgICAgLy8gdGhleSB3aWxsIHNpbXBseSBiZSBvdmVyd3JpdHRlbi5cbiAgICAgICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcbiAgICAgICAgc3NDb250ZW50OiB2bm9kZS5zc0NvbnRlbnQgJiYgY2xvbmVWTm9kZSh2bm9kZS5zc0NvbnRlbnQpLFxuICAgICAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXG4gICAgICAgIGVsOiB2bm9kZS5lbCxcbiAgICAgICAgYW5jaG9yOiB2bm9kZS5hbmNob3IsXG4gICAgICAgIGN0eDogdm5vZGUuY3R4LFxuICAgICAgICBjZTogdm5vZGUuY2VcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZWQ7XG59XG4vKipcbiAqIERldiBvbmx5LCBmb3IgSE1SIG9mIGhvaXN0ZWQgdm5vZGVzIHJldXNlZCBpbiB2LWZvclxuICogaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlL2lzc3Vlcy8yMDIyXG4gKi9cbmZ1bmN0aW9uIGRlZXBDbG9uZVZOb2RlKHZub2RlKSB7XG4gICAgY29uc3QgY2xvbmVkID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gICAgaWYgKGlzQXJyYXkodm5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICAgIGNsb25lZC5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBjbG9uZWQ7XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSh0ZXh0ID0gJyAnLCBmbGFnID0gMCkge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCB0ZXh0LCBmbGFnKTtcbn1cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RhdGljVk5vZGUoY29udGVudCwgbnVtYmVyT2ZOb2Rlcykge1xuICAgIC8vIEEgc3RhdGljIHZub2RlIGNhbiBjb250YWluIG11bHRpcGxlIHN0cmluZ2lmaWVkIGVsZW1lbnRzLCBhbmQgdGhlIG51bWJlclxuICAgIC8vIG9mIGVsZW1lbnRzIGlzIG5lY2Vzc2FyeSBmb3IgaHlkcmF0aW9uLlxuICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUoU3RhdGljLCBudWxsLCBjb250ZW50KTtcbiAgICB2bm9kZS5zdGF0aWNDb3VudCA9IG51bWJlck9mTm9kZXM7XG4gICAgcmV0dXJuIHZub2RlO1xufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVDb21tZW50Vk5vZGUodGV4dCA9ICcnLCBcbi8vIHdoZW4gdXNlZCBhcyB0aGUgdi1lbHNlIGJyYW5jaCwgdGhlIGNvbW1lbnQgbm9kZSBtdXN0IGJlIGNyZWF0ZWQgYXMgYVxuLy8gYmxvY2sgdG8gZW5zdXJlIGNvcnJlY3QgdXBkYXRlcy5cbmFzQmxvY2sgPSBmYWxzZSkge1xuICAgIHJldHVybiBhc0Jsb2NrXG4gICAgICAgID8gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhDb21tZW50LCBudWxsLCB0ZXh0KSlcbiAgICAgICAgOiBjcmVhdGVWTm9kZShDb21tZW50LCBudWxsLCB0ZXh0KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZOb2RlKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkID09IG51bGwgfHwgdHlwZW9mIGNoaWxkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgLy8gZW1wdHkgcGxhY2Vob2xkZXJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KGNoaWxkKSkge1xuICAgICAgICAvLyBmcmFnbWVudFxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoRnJhZ21lbnQsIG51bGwsIFxuICAgICAgICAvLyAjMzY2NiwgYXZvaWQgcmVmZXJlbmNlIHBvbGx1dGlvbiB3aGVuIHJldXNpbmcgdm5vZGVcbiAgICAgICAgY2hpbGQuc2xpY2UoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gYWxyZWFkeSB2bm9kZSwgdGhpcyBzaG91bGQgYmUgdGhlIG1vc3QgY29tbW9uIHNpbmNlIGNvbXBpbGVkIHRlbXBsYXRlc1xuICAgICAgICAvLyBhbHdheXMgcHJvZHVjZSBhbGwtdm5vZGUgY2hpbGRyZW4gYXJyYXlzXG4gICAgICAgIHJldHVybiBjbG9uZUlmTW91bnRlZChjaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzdHJpbmdzIGFuZCBudW1iZXJzXG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCBTdHJpbmcoY2hpbGQpKTtcbiAgICB9XG59XG4vLyBvcHRpbWl6ZWQgbm9ybWFsaXphdGlvbiBmb3IgdGVtcGxhdGUtY29tcGlsZWQgcmVuZGVyIGZuc1xuZnVuY3Rpb24gY2xvbmVJZk1vdW50ZWQoY2hpbGQpIHtcbiAgICByZXR1cm4gKGNoaWxkLmVsID09PSBudWxsICYmIGNoaWxkLnBhdGNoRmxhZyAhPT0gLTEgLyogUGF0Y2hGbGFncy5IT0lTVEVEICovKSB8fFxuICAgICAgICBjaGlsZC5tZW1vXG4gICAgICAgID8gY2hpbGRcbiAgICAgICAgOiBjbG9uZVZOb2RlKGNoaWxkKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbikge1xuICAgIGxldCB0eXBlID0gMDtcbiAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gdm5vZGU7XG4gICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICB0eXBlID0gMTYgLyogU2hhcGVGbGFncy5BUlJBWV9DSElMRFJFTiAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgKDEgLyogU2hhcGVGbGFncy5FTEVNRU5UICovIHwgNjQgLyogU2hhcGVGbGFncy5URUxFUE9SVCAqLykpIHtcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBzbG90IHRvIHBsYWluIGNoaWxkcmVuIGZvciBwbGFpbiBlbGVtZW50IGFuZCBUZWxlcG9ydFxuICAgICAgICAgICAgY29uc3Qgc2xvdCA9IGNoaWxkcmVuLmRlZmF1bHQ7XG4gICAgICAgICAgICBpZiAoc2xvdCkge1xuICAgICAgICAgICAgICAgIC8vIF9jIG1hcmtlciBpcyBhZGRlZCBieSB3aXRoQ3R4KCkgaW5kaWNhdGluZyB0aGlzIGlzIGEgY29tcGlsZWQgc2xvdFxuICAgICAgICAgICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIHNsb3QoKSk7XG4gICAgICAgICAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi87XG4gICAgICAgICAgICBjb25zdCBzbG90RmxhZyA9IGNoaWxkcmVuLl87XG4gICAgICAgICAgICBpZiAoIXNsb3RGbGFnICYmICEoSW50ZXJuYWxPYmplY3RLZXkgaW4gY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uX2N0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNsb3RGbGFnID09PSAzIC8qIFNsb3RGbGFncy5GT1JXQVJERUQgKi8gJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gYSBjaGlsZCBjb21wb25lbnQgcmVjZWl2ZXMgZm9yd2FyZGVkIHNsb3RzIGZyb20gdGhlIHBhcmVudC5cbiAgICAgICAgICAgICAgICAvLyBpdHMgc2xvdCB0eXBlIGlzIGRldGVybWluZWQgYnkgaXRzIHBhcmVudCdzIHNsb3QgdHlwZS5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnNsb3RzLl8gPT09IDEgLyogU2xvdEZsYWdzLlNUQUJMRSAqLykge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5fID0gMSAvKiBTbG90RmxhZ3MuU1RBQkxFICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4uXyA9IDIgLyogU2xvdEZsYWdzLkRZTkFNSUMgKi87XG4gICAgICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyB8PSAxMDI0IC8qIFBhdGNoRmxhZ3MuRFlOQU1JQ19TTE9UUyAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihjaGlsZHJlbikpIHtcbiAgICAgICAgY2hpbGRyZW4gPSB7IGRlZmF1bHQ6IGNoaWxkcmVuLCBfY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfTtcbiAgICAgICAgdHlwZSA9IDMyIC8qIFNoYXBlRmxhZ3MuU0xPVFNfQ0hJTERSRU4gKi87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjaGlsZHJlbiA9IFN0cmluZyhjaGlsZHJlbik7XG4gICAgICAgIC8vIGZvcmNlIHRlbGVwb3J0IGNoaWxkcmVuIHRvIGFycmF5IHNvIGl0IGNhbiBiZSBtb3ZlZCBhcm91bmRcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFNoYXBlRmxhZ3MuVEVMRVBPUlQgKi8pIHtcbiAgICAgICAgICAgIHR5cGUgPSAxNiAvKiBTaGFwZUZsYWdzLkFSUkFZX0NISUxEUkVOICovO1xuICAgICAgICAgICAgY2hpbGRyZW4gPSBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gOCAvKiBTaGFwZUZsYWdzLlRFWFRfQ0hJTERSRU4gKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgdm5vZGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICB2bm9kZS5zaGFwZUZsYWcgfD0gdHlwZTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0b01lcmdlID0gYXJnc1tpXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdG9NZXJnZSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICAgIGlmIChyZXQuY2xhc3MgIT09IHRvTWVyZ2UuY2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LmNsYXNzID0gbm9ybWFsaXplQ2xhc3MoW3JldC5jbGFzcywgdG9NZXJnZS5jbGFzc10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgICAgIHJldC5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKFtyZXQuc3R5bGUsIHRvTWVyZ2Uuc3R5bGVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmV0W2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0b01lcmdlW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGluY29taW5nICYmXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nICE9PSBpbmNvbWluZyAmJlxuICAgICAgICAgICAgICAgICAgICAhKGlzQXJyYXkoZXhpc3RpbmcpICYmIGV4aXN0aW5nLmluY2x1ZGVzKGluY29taW5nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0W2tleV0gPSBleGlzdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGluY29taW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNvbWluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSB0b01lcmdlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIGludm9rZVZOb2RlSG9vayhob29rLCBpbnN0YW5jZSwgdm5vZGUsIHByZXZWTm9kZSA9IG51bGwpIHtcbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgNyAvKiBFcnJvckNvZGVzLlZOT0RFX0hPT0sgKi8sIFtcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHByZXZWTm9kZVxuICAgIF0pO1xufVxuXG5jb25zdCBlbXB0eUFwcENvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XG5sZXQgdWlkID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XG4gICAgY29uc3QgdHlwZSA9IHZub2RlLnR5cGU7XG4gICAgLy8gaW5oZXJpdCBwYXJlbnQgYXBwIGNvbnRleHQgLSBvciAtIGlmIHJvb3QsIGFkb3B0IGZyb20gcm9vdCB2bm9kZVxuICAgIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICAgIHVpZDogdWlkKyssXG4gICAgICAgIHZub2RlLFxuICAgICAgICB0eXBlLFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIGFwcENvbnRleHQsXG4gICAgICAgIHJvb3Q6IG51bGwsXG4gICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgIHN1YlRyZWU6IG51bGwsXG4gICAgICAgIGVmZmVjdDogbnVsbCxcbiAgICAgICAgdXBkYXRlOiBudWxsLFxuICAgICAgICBzY29wZTogbmV3IEVmZmVjdFNjb3BlKHRydWUgLyogZGV0YWNoZWQgKi8pLFxuICAgICAgICByZW5kZXI6IG51bGwsXG4gICAgICAgIHByb3h5OiBudWxsLFxuICAgICAgICBleHBvc2VkOiBudWxsLFxuICAgICAgICBleHBvc2VQcm94eTogbnVsbCxcbiAgICAgICAgd2l0aFByb3h5OiBudWxsLFxuICAgICAgICBwcm92aWRlczogcGFyZW50ID8gcGFyZW50LnByb3ZpZGVzIDogT2JqZWN0LmNyZWF0ZShhcHBDb250ZXh0LnByb3ZpZGVzKSxcbiAgICAgICAgYWNjZXNzQ2FjaGU6IG51bGwsXG4gICAgICAgIHJlbmRlckNhY2hlOiBbXSxcbiAgICAgICAgLy8gbG9jYWwgcmVzb2x2ZWQgYXNzZXRzXG4gICAgICAgIGNvbXBvbmVudHM6IG51bGwsXG4gICAgICAgIGRpcmVjdGl2ZXM6IG51bGwsXG4gICAgICAgIC8vIHJlc29sdmVkIHByb3BzIGFuZCBlbWl0cyBvcHRpb25zXG4gICAgICAgIHByb3BzT3B0aW9uczogbm9ybWFsaXplUHJvcHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgICAgICBlbWl0c09wdGlvbnM6IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICAgICAgLy8gZW1pdFxuICAgICAgICBlbWl0OiBudWxsLFxuICAgICAgICBlbWl0dGVkOiBudWxsLFxuICAgICAgICAvLyBwcm9wcyBkZWZhdWx0IHZhbHVlXG4gICAgICAgIHByb3BzRGVmYXVsdHM6IEVNUFRZX09CSixcbiAgICAgICAgLy8gaW5oZXJpdEF0dHJzXG4gICAgICAgIGluaGVyaXRBdHRyczogdHlwZS5pbmhlcml0QXR0cnMsXG4gICAgICAgIC8vIHN0YXRlXG4gICAgICAgIGN0eDogRU1QVFlfT0JKLFxuICAgICAgICBkYXRhOiBFTVBUWV9PQkosXG4gICAgICAgIHByb3BzOiBFTVBUWV9PQkosXG4gICAgICAgIGF0dHJzOiBFTVBUWV9PQkosXG4gICAgICAgIHNsb3RzOiBFTVBUWV9PQkosXG4gICAgICAgIHJlZnM6IEVNUFRZX09CSixcbiAgICAgICAgc2V0dXBTdGF0ZTogRU1QVFlfT0JKLFxuICAgICAgICBzZXR1cENvbnRleHQ6IG51bGwsXG4gICAgICAgIC8vIHN1c3BlbnNlIHJlbGF0ZWRcbiAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgIHN1c3BlbnNlSWQ6IHN1c3BlbnNlID8gc3VzcGVuc2UucGVuZGluZ0lkIDogMCxcbiAgICAgICAgYXN5bmNEZXA6IG51bGwsXG4gICAgICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxuICAgICAgICAvLyBsaWZlY3ljbGUgaG9va3NcbiAgICAgICAgLy8gbm90IHVzaW5nIGVudW1zIGhlcmUgYmVjYXVzZSBpdCByZXN1bHRzIGluIGNvbXB1dGVkIHByb3BlcnRpZXNcbiAgICAgICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICAgICAgaXNVbm1vdW50ZWQ6IGZhbHNlLFxuICAgICAgICBpc0RlYWN0aXZhdGVkOiBmYWxzZSxcbiAgICAgICAgYmM6IG51bGwsXG4gICAgICAgIGM6IG51bGwsXG4gICAgICAgIGJtOiBudWxsLFxuICAgICAgICBtOiBudWxsLFxuICAgICAgICBidTogbnVsbCxcbiAgICAgICAgdTogbnVsbCxcbiAgICAgICAgdW06IG51bGwsXG4gICAgICAgIGJ1bTogbnVsbCxcbiAgICAgICAgZGE6IG51bGwsXG4gICAgICAgIGE6IG51bGwsXG4gICAgICAgIHJ0ZzogbnVsbCxcbiAgICAgICAgcnRjOiBudWxsLFxuICAgICAgICBlYzogbnVsbCxcbiAgICAgICAgc3A6IG51bGxcbiAgICB9O1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgaW5zdGFuY2UuY3R4ID0gY3JlYXRlRGV2UmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpbnN0YW5jZS5jdHggPSB7IF86IGluc3RhbmNlIH07XG4gICAgfVxuICAgIGluc3RhbmNlLnJvb3QgPSBwYXJlbnQgPyBwYXJlbnQucm9vdCA6IGluc3RhbmNlO1xuICAgIGluc3RhbmNlLmVtaXQgPSBlbWl0LmJpbmQobnVsbCwgaW5zdGFuY2UpO1xuICAgIC8vIGFwcGx5IGN1c3RvbSBlbGVtZW50IHNwZWNpYWwgaGFuZGxpbmdcbiAgICBpZiAodm5vZGUuY2UpIHtcbiAgICAgICAgdm5vZGUuY2UoaW5zdGFuY2UpO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IGdldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG5jb25zdCBzZXRDdXJyZW50SW5zdGFuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgICBjdXJyZW50SW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICBpbnN0YW5jZS5zY29wZS5vbigpO1xufTtcbmNvbnN0IHVuc2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4ge1xuICAgIGN1cnJlbnRJbnN0YW5jZSAmJiBjdXJyZW50SW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gICAgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbn07XG5jb25zdCBpc0J1aWx0SW5UYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ3Nsb3QsY29tcG9uZW50Jyk7XG5mdW5jdGlvbiB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZSwgY29uZmlnKSB7XG4gICAgY29uc3QgYXBwSXNOYXRpdmVUYWcgPSBjb25maWcuaXNOYXRpdmVUYWcgfHwgTk87XG4gICAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBhcHBJc05hdGl2ZVRhZyhuYW1lKSkge1xuICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50IGlkOiAnICsgbmFtZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSkge1xuICAgIHJldHVybiBpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNoYXBlRmxhZ3MuU1RBVEVGVUxfQ09NUE9ORU5UICovO1xufVxubGV0IGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xuZnVuY3Rpb24gc2V0dXBDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSID0gZmFsc2UpIHtcbiAgICBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBpc1NTUjtcbiAgICBjb25zdCB7IHByb3BzLCBjaGlsZHJlbiB9ID0gaW5zdGFuY2Uudm5vZGU7XG4gICAgY29uc3QgaXNTdGF0ZWZ1bCA9IGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpO1xuICAgIGluaXRQcm9wcyhpbnN0YW5jZSwgcHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSKTtcbiAgICBpbml0U2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgICBjb25zdCBzZXR1cFJlc3VsdCA9IGlzU3RhdGVmdWxcbiAgICAgICAgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaXNJblNTUkNvbXBvbmVudFNldHVwID0gZmFsc2U7XG4gICAgcmV0dXJuIHNldHVwUmVzdWx0O1xufVxuZnVuY3Rpb24gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGlmIChDb21wb25lbnQubmFtZSkge1xuICAgICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKENvbXBvbmVudC5uYW1lLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5jb21wb25lbnRzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZXNbaV0sIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoQ29tcG9uZW50LmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmRpcmVjdGl2ZXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21waWxlck9wdGlvbnMgJiYgaXNSdW50aW1lT25seSgpKSB7XG4gICAgICAgICAgICB3YXJuKGBcImNvbXBpbGVyT3B0aW9uc1wiIGlzIG9ubHkgc3VwcG9ydGVkIHdoZW4gdXNpbmcgYSBidWlsZCBvZiBWdWUgdGhhdCBgICtcbiAgICAgICAgICAgICAgICBgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIuIFNpbmNlIHlvdSBhcmUgdXNpbmcgYSBydW50aW1lLW9ubHkgYCArXG4gICAgICAgICAgICAgICAgYGJ1aWxkLCB0aGUgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB5b3VyIGJ1aWxkIHRvb2wgY29uZmlnIGluc3RlYWQuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gMC4gY3JlYXRlIHJlbmRlciBwcm94eSBwcm9wZXJ0eSBhY2Nlc3MgY2FjaGVcbiAgICBpbnN0YW5jZS5hY2Nlc3NDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgLy8gMS4gY3JlYXRlIHB1YmxpYyBpbnN0YW5jZSAvIHJlbmRlciBwcm94eVxuICAgIC8vIGFsc28gbWFyayBpdCByYXcgc28gaXQncyBuZXZlciBvYnNlcnZlZFxuICAgIGluc3RhbmNlLnByb3h5ID0gbWFya1JhdyhuZXcgUHJveHkoaW5zdGFuY2UuY3R4LCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMpKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcbiAgICB9XG4gICAgLy8gMi4gY2FsbCBzZXR1cCgpXG4gICAgY29uc3QgeyBzZXR1cCB9ID0gQ29tcG9uZW50O1xuICAgIGlmIChzZXR1cCkge1xuICAgICAgICBjb25zdCBzZXR1cENvbnRleHQgPSAoaW5zdGFuY2Uuc2V0dXBDb250ZXh0ID1cbiAgICAgICAgICAgIHNldHVwLmxlbmd0aCA+IDEgPyBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIDogbnVsbCk7XG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc2V0dXAsIGluc3RhbmNlLCAwIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi8sIFsocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2UucHJvcHMpIDogaW5zdGFuY2UucHJvcHMsIHNldHVwQ29udGV4dF0pO1xuICAgICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChpc1Byb21pc2Uoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgICAgICBzZXR1cFJlc3VsdC50aGVuKHVuc2V0Q3VycmVudEluc3RhbmNlLCB1bnNldEN1cnJlbnRJbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoaXNTU1IpIHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIHByb21pc2Ugc28gc2VydmVyLXJlbmRlcmVyIGNhbiB3YWl0IG9uIGl0XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNvbHZlZFJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgcmVzb2x2ZWRSZXN1bHQsIGlzU1NSKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGluc3RhbmNlLCAwIC8qIEVycm9yQ29kZXMuU0VUVVBfRlVOQ1RJT04gKi8pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgc2V0dXAgcmV0dXJuZWQgUHJvbWlzZS5cbiAgICAgICAgICAgICAgICAvLyBiYWlsIGhlcmUgYW5kIHdhaXQgZm9yIHJlLWVudHJ5LlxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jRGVwID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaW5zdGFuY2Uuc3VzcGVuc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IChfYSA9IENvbXBvbmVudC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnQW5vbnltb3VzJztcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IDwke25hbWV9Pjogc2V0dXAgZnVuY3Rpb24gcmV0dXJuZWQgYSBwcm9taXNlLCBidXQgbm8gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgPFN1c3BlbnNlPiBib3VuZGFyeSB3YXMgZm91bmQgaW4gdGhlIHBhcmVudCBjb21wb25lbnQgdHJlZS4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgQSBjb21wb25lbnQgd2l0aCBhc3luYyBzZXR1cCgpIG11c3QgYmUgbmVzdGVkIGluIGEgPFN1c3BlbnNlPiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbiBvcmRlciB0byBiZSByZW5kZXJlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGFuIGlubGluZSByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcbiAgICAgICAgICAgIC8vIHdoZW4gdGhlIGZ1bmN0aW9uJ3MgbmFtZSBpcyBgc3NyUmVuZGVyYCAoY29tcGlsZWQgYnkgU0ZDIGlubGluZSBtb2RlKSxcbiAgICAgICAgICAgIC8vIHNldCBpdCBhcyBzc3JSZW5kZXIgaW5zdGVhZC5cbiAgICAgICAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNWTm9kZShzZXR1cFJlc3VsdCkpIHtcbiAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gYCArXG4gICAgICAgICAgICAgICAgYHJldHVybiBhIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGJpbmRpbmdzLlxuICAgICAgICAvLyBhc3N1bWluZyBhIHJlbmRlciBmdW5jdGlvbiBjb21waWxlZCBmcm9tIHRlbXBsYXRlIGlzIHByZXNlbnQuXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5zZXR1cFN0YXRlID0gcHJveHlSZWZzKHNldHVwUmVzdWx0KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNldHVwUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2Fybihgc2V0dXAoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4gUmVjZWl2ZWQ6ICR7c2V0dXBSZXN1bHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygc2V0dXBSZXN1bHR9YCk7XG4gICAgfVxuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG59XG5sZXQgY29tcGlsZTtcbmxldCBpbnN0YWxsV2l0aFByb3h5O1xuLyoqXG4gKiBGb3IgcnVudGltZS1kb20gdG8gcmVnaXN0ZXIgdGhlIGNvbXBpbGVyLlxuICogTm90ZSB0aGUgZXhwb3J0ZWQgbWV0aG9kIHVzZXMgYW55IHRvIGF2b2lkIGQudHMgcmVseWluZyBvbiB0aGUgY29tcGlsZXIgdHlwZXMuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XG4gICAgY29tcGlsZSA9IF9jb21waWxlO1xuICAgIGluc3RhbGxXaXRoUHJveHkgPSBpID0+IHtcbiAgICAgICAgaWYgKGkucmVuZGVyLl9yYykge1xuICAgICAgICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLy8gZGV2IG9ubHlcbmNvbnN0IGlzUnVudGltZU9ubHkgPSAoKSA9PiAhY29tcGlsZTtcbmZ1bmN0aW9uIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUiwgc2tpcE9wdGlvbnMpIHtcbiAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICAgIC8vIHRlbXBsYXRlIC8gcmVuZGVyIGZ1bmN0aW9uIG5vcm1hbGl6YXRpb25cbiAgICAvLyBjb3VsZCBiZSBhbHJlYWR5IHNldCB3aGVuIHJldHVybmVkIGZyb20gc2V0dXAoKVxuICAgIGlmICghaW5zdGFuY2UucmVuZGVyKSB7XG4gICAgICAgIC8vIG9ubHkgZG8gb24tdGhlLWZseSBjb21waWxlIGlmIG5vdCBpbiBTU1IgLSBTU1Igb24tdGhlLWZseSBjb21waWxhdGlvblxuICAgICAgICAvLyBpcyBkb25lIGJ5IHNlcnZlci1yZW5kZXJlclxuICAgICAgICBpZiAoIWlzU1NSICYmIGNvbXBpbGUgJiYgIUNvbXBvbmVudC5yZW5kZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gQ29tcG9uZW50LnRlbXBsYXRlIHx8XG4gICAgICAgICAgICAgICAgcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpLnRlbXBsYXRlO1xuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNDdXN0b21FbGVtZW50LCBjb21waWxlck9wdGlvbnMgfSA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGVsaW1pdGVycywgY29tcGlsZXJPcHRpb25zOiBjb21wb25lbnRDb21waWxlck9wdGlvbnMgfSA9IENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbXBpbGVyT3B0aW9ucyA9IGV4dGVuZChleHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBpc0N1c3RvbUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGltaXRlcnNcbiAgICAgICAgICAgICAgICB9LCBjb21waWxlck9wdGlvbnMpLCBjb21wb25lbnRDb21waWxlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIENvbXBvbmVudC5yZW5kZXIgPSBjb21waWxlKHRlbXBsYXRlLCBmaW5hbENvbXBpbGVyT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5yZW5kZXIgPSAoQ29tcG9uZW50LnJlbmRlciB8fCBOT09QKTtcbiAgICAgICAgLy8gZm9yIHJ1bnRpbWUtY29tcGlsZWQgcmVuZGVyIGZ1bmN0aW9ucyB1c2luZyBgd2l0aGAgYmxvY2tzLCB0aGUgcmVuZGVyXG4gICAgICAgIC8vIHByb3h5IHVzZWQgbmVlZHMgYSBkaWZmZXJlbnQgYGhhc2AgaGFuZGxlciB3aGljaCBpcyBtb3JlIHBlcmZvcm1hbnQgYW5kXG4gICAgICAgIC8vIGFsc28gb25seSBhbGxvd3MgYSB3aGl0ZWxpc3Qgb2YgZ2xvYmFscyB0byBmYWxsdGhyb3VnaC5cbiAgICAgICAgaWYgKGluc3RhbGxXaXRoUHJveHkpIHtcbiAgICAgICAgICAgIGluc3RhbGxXaXRoUHJveHkoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHN1cHBvcnQgZm9yIDIueCBvcHRpb25zXG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIShmYWxzZSApKSB7XG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgICAgYXBwbHlPcHRpb25zKGluc3RhbmNlKTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICAvLyB3YXJuIG1pc3NpbmcgdGVtcGxhdGUvcmVuZGVyXG4gICAgLy8gdGhlIHJ1bnRpbWUgY29tcGlsYXRpb24gb2YgdGVtcGxhdGUgaW4gU1NSIGlzIGRvbmUgYnkgc2VydmVyLXJlbmRlclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIUNvbXBvbmVudC5yZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QICYmICFpc1NTUikge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFjb21waWxlICYmIENvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IHByb3ZpZGVkIHRlbXBsYXRlIG9wdGlvbiBidXQgYCArXG4gICAgICAgICAgICAgICAgYHJ1bnRpbWUgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJ1aWxkIG9mIFZ1ZS5gICtcbiAgICAgICAgICAgICAgICAoYCBDb25maWd1cmUgeW91ciBidW5kbGVyIHRvIGFsaWFzIFwidnVlXCIgdG8gXCJ2dWUvZGlzdC92dWUuZXNtLWJ1bmRsZXIuanNcIi5gXG4gICAgICAgICAgICAgICAgICAgICkgLyogc2hvdWxkIG5vdCBoYXBwZW4gKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGlzIG1pc3NpbmcgdGVtcGxhdGUgb3IgcmVuZGVyIGZ1bmN0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlQXR0cnNQcm94eShpbnN0YW5jZSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLywgJyRhdHRycycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoKSB7XG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGVQcm9wZXJ0eSgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogVHJhY2tPcFR5cGVzLkdFVCAqLywgJyRhdHRycycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBleHBvc2UgPSBleHBvc2VkID0+IHtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmV4cG9zZWQpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBleHBvc2UoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZSBwZXIgc2V0dXAoKS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBvc2VkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXhwb3NlZFR5cGUgPSB0eXBlb2YgZXhwb3NlZDtcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3NlZFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KGV4cG9zZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvc2VkVHlwZSA9ICdhcnJheSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWYoZXhwb3NlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9zZWRUeXBlID0gJ3JlZic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9zZWRUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBleHBvc2UoKSBzaG91bGQgYmUgcGFzc2VkIGEgcGxhaW4gb2JqZWN0LCByZWNlaXZlZCAke2V4cG9zZWRUeXBlfS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFuY2UuZXhwb3NlZCA9IGV4cG9zZWQgfHwge307XG4gICAgfTtcbiAgICBsZXQgYXR0cnM7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAvLyBXZSB1c2UgZ2V0dGVycyBpbiBkZXYgaW4gY2FzZSBsaWJzIGxpa2UgdGVzdC11dGlscyBvdmVyd3JpdGUgaW5zdGFuY2VcbiAgICAgICAgLy8gcHJvcGVydGllcyAob3ZlcndyaXRlcyBzaG91bGQgbm90IGJlIGRvbmUgaW4gcHJvZClcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRycyB8fCAoYXR0cnMgPSBjcmVhdGVBdHRyc1Byb3h5KGluc3RhbmNlKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHNsb3RzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2Uuc2xvdHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBlbWl0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV4cG9zZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXQgYXR0cnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbG90czogaW5zdGFuY2Uuc2xvdHMsXG4gICAgICAgICAgICBlbWl0OiBpbnN0YW5jZS5lbWl0LFxuICAgICAgICAgICAgZXhwb3NlXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RXhwb3NlUHJveHkoaW5zdGFuY2UpIHtcbiAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICByZXR1cm4gKGluc3RhbmNlLmV4cG9zZVByb3h5IHx8XG4gICAgICAgICAgICAoaW5zdGFuY2UuZXhwb3NlUHJveHkgPSBuZXcgUHJveHkocHJveHlSZWZzKG1hcmtSYXcoaW5zdGFuY2UuZXhwb3NlZCkpLCB7XG4gICAgICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXModGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleSBpbiB0YXJnZXQgfHwga2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpKTtcbiAgICB9XG59XG5jb25zdCBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXSkoXFx3KS9nO1xuY29uc3QgY2xhc3NpZnkgPSAoc3RyKSA9PiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCBjID0+IGMudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvWy1fXS9nLCAnJyk7XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCwgaW5jbHVkZUluZmVycmVkID0gdHJ1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKENvbXBvbmVudClcbiAgICAgICAgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWVcbiAgICAgICAgOiBDb21wb25lbnQubmFtZSB8fCAoaW5jbHVkZUluZmVycmVkICYmIENvbXBvbmVudC5fX25hbWUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCwgaXNSb290ID0gZmFsc2UpIHtcbiAgICBsZXQgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcbiAgICBpZiAoIW5hbWUgJiYgQ29tcG9uZW50Ll9fZmlsZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IENvbXBvbmVudC5fX2ZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwuXFx3KyQvKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBuYW1lID0gbWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuYW1lICYmIGluc3RhbmNlICYmIGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgICAvLyB0cnkgdG8gaW5mZXIgdGhlIG5hbWUgYmFzZWQgb24gcmV2ZXJzZSByZXNvbHV0aW9uXG4gICAgICAgIGNvbnN0IGluZmVyRnJvbVJlZ2lzdHJ5ID0gKHJlZ2lzdHJ5KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZWdpc3RyeSkge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG5hbWUgPVxuICAgICAgICAgICAgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuY29tcG9uZW50cyB8fFxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHMpIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lID8gY2xhc3NpZnkobmFtZSkgOiBpc1Jvb3QgPyBgQXBwYCA6IGBBbm9ueW1vdXNgO1xufVxuZnVuY3Rpb24gaXNDbGFzc0NvbXBvbmVudCh2YWx1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiAnX192Y2NPcHRzJyBpbiB2YWx1ZTtcbn1cblxuY29uc3QgY29tcHV0ZWQgPSAoKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zKSA9PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xufSk7XG5cbi8vIGRldiBvbmx5XG5jb25zdCB3YXJuUnVudGltZVVzYWdlID0gKG1ldGhvZCkgPT4gd2FybihgJHttZXRob2R9KCkgaXMgYSBjb21waWxlci1oaW50IGhlbHBlciB0aGF0IGlzIG9ubHkgdXNhYmxlIGluc2lkZSBgICtcbiAgICBgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGAgK1xuICAgIGBjb21waWxlZCBhd2F5IGFuZCBwYXNzaW5nIGl0IGF0IHJ1bnRpbWUgaGFzIG5vIGVmZmVjdC5gKTtcbi8vIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZVByb3BzYCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLy8gaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIGRlZmluZUVtaXRzKCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFZ1ZSBgPHNjcmlwdCBzZXR1cD5gIGNvbXBpbGVyIG1hY3JvIGZvciBkZWNsYXJpbmcgYSBjb21wb25lbnQncyBleHBvc2VkXG4gKiBpbnN0YW5jZSBwcm9wZXJ0aWVzIHdoZW4gaXQgaXMgYWNjZXNzZWQgYnkgYSBwYXJlbnQgY29tcG9uZW50IHZpYSB0ZW1wbGF0ZVxuICogcmVmcy5cbiAqXG4gKiBgPHNjcmlwdCBzZXR1cD5gIGNvbXBvbmVudHMgYXJlIGNsb3NlZCBieSBkZWZhdWx0IC0gaS5lLiB2YXJpYWJsZXMgaW5zaWRlXG4gKiB0aGUgYDxzY3JpcHQgc2V0dXA+YCBzY29wZSBpcyBub3QgZXhwb3NlZCB0byBwYXJlbnQgdW5sZXNzIGV4cGxpY2l0bHkgZXhwb3NlZFxuICogdmlhIGBkZWZpbmVFeHBvc2VgLlxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlXG4gKiBvdXRwdXQgYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiBkZWZpbmVFeHBvc2UoZXhwb3NlZCkge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gICAgfVxufVxuLyoqXG4gKiBWdWUgYDxzY3JpcHQgc2V0dXA+YCBjb21waWxlciBtYWNybyBmb3IgcHJvdmlkaW5nIHByb3BzIGRlZmF1bHQgdmFsdWVzIHdoZW5cbiAqIHVzaW5nIHR5cGUtYmFzZWQgYGRlZmluZVByb3BzYCBkZWNsYXJhdGlvbi5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBgdHNcbiAqIHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczx7XG4gKiAgIHNpemU/OiBudW1iZXJcbiAqICAgbGFiZWxzPzogc3RyaW5nW11cbiAqIH0+KCksIHtcbiAqICAgc2l6ZTogMyxcbiAqICAgbGFiZWxzOiAoKSA9PiBbJ2RlZmF1bHQgbGFiZWwnXVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlIG91dHB1dFxuICogYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxuICovXG5mdW5jdGlvbiB3aXRoRGVmYXVsdHMocHJvcHMsIGRlZmF1bHRzKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGB3aXRoRGVmYXVsdHNgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB1c2VTbG90cygpIHtcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLnNsb3RzO1xufVxuZnVuY3Rpb24gdXNlQXR0cnMoKSB7XG4gICAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gICAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWkpIHtcbiAgICAgICAgd2FybihgdXNlQ29udGV4dCgpIGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBpbnN0YW5jZS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGkuc2V0dXBDb250ZXh0IHx8IChpLnNldHVwQ29udGV4dCA9IGNyZWF0ZVNldHVwQ29udGV4dChpKSk7XG59XG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBtZXJnaW5nIGRlZmF1bHQgZGVjbGFyYXRpb25zLiBJbXBvcnRlZCBieSBjb21waWxlZCBjb2RlXG4gKiBvbmx5LlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xuICAgIGNvbnN0IHByb3BzID0gaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3LnJlZHVjZSgobm9ybWFsaXplZCwgcCkgPT4gKChub3JtYWxpemVkW3BdID0ge30pLCBub3JtYWxpemVkKSwge30pXG4gICAgICAgIDogcmF3O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHsgdHlwZTogb3B0LCBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHQuZGVmYXVsdCA9IGRlZmF1bHRzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9wc1trZXldID0geyBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wcztcbn1cbi8qKlxuICogVXNlZCB0byBjcmVhdGUgYSBwcm94eSBmb3IgdGhlIHJlc3QgZWxlbWVudCB3aGVuIGRlc3RydWN0dXJpbmcgcHJvcHMgd2l0aFxuICogZGVmaW5lUHJvcHMoKS5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKCFleGNsdWRlZEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG4vKipcbiAqIGA8c2NyaXB0IHNldHVwPmAgaGVscGVyIGZvciBwZXJzaXN0aW5nIHRoZSBjdXJyZW50IGluc3RhbmNlIGNvbnRleHQgb3ZlclxuICogYXN5bmMvYXdhaXQgZmxvd3MuXG4gKlxuICogYEB2dWUvY29tcGlsZXItc2ZjYCBjb252ZXJ0cyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB4ID0gYXdhaXQgZm9vKClcbiAqIGBgYFxuICpcbiAqIGludG86XG4gKlxuICogYGBgdHNcbiAqIGxldCBfX3RlbXAsIF9fcmVzdG9yZVxuICogY29uc3QgeCA9ICgoW19fdGVtcCwgX19yZXN0b3JlXSA9IHdpdGhBc3luY0NvbnRleHQoKCkgPT4gZm9vKCkpKSxfX3RlbXA9YXdhaXQgX190ZW1wLF9fcmVzdG9yZSgpLF9fdGVtcClcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHdpdGhBc3luY0NvbnRleHQoZ2V0QXdhaXRhYmxlKSB7XG4gICAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY3R4KSB7XG4gICAgICAgIHdhcm4oYHdpdGhBc3luY0NvbnRleHQgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGN1cnJlbnQgaW5zdGFuY2UuIGAgK1xuICAgICAgICAgICAgYFRoaXMgaXMgbGlrZWx5IGEgYnVnLmApO1xuICAgIH1cbiAgICBsZXQgYXdhaXRhYmxlID0gZ2V0QXdhaXRhYmxlKCk7XG4gICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICAgICAgYXdhaXRhYmxlID0gYXdhaXRhYmxlLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN0eCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIFthd2FpdGFibGUsICgpID0+IHNldEN1cnJlbnRJbnN0YW5jZShjdHgpXTtcbn1cblxuLy8gQWN0dWFsIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBoKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pIHtcbiAgICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobCA9PT0gMikge1xuICAgICAgICBpZiAoaXNPYmplY3QocHJvcHNPckNoaWxkcmVuKSAmJiAhaXNBcnJheShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAvLyBzaW5nbGUgdm5vZGUgd2l0aG91dCBwcm9wc1xuICAgICAgICAgICAgaWYgKGlzVk5vZGUocHJvcHNPckNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9wcyB3aXRob3V0IGNoaWxkcmVuXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9taXQgcHJvcHNcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBwcm9wc09yQ2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobCA+IDMpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsID09PSAzICYmIGlzVk5vZGUoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pO1xuICAgIH1cbn1cblxuY29uc3Qgc3NyQ29udGV4dEtleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBgc3NyQ29udGV4dGAgOiBgYCk7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICAgIHtcbiAgICAgICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgU2VydmVyIHJlbmRlcmluZyBjb250ZXh0IG5vdCBwcm92aWRlZC4gTWFrZSBzdXJlIHRvIG9ubHkgY2FsbCBgICtcbiAgICAgICAgICAgICAgICAgICAgYHVzZVNTUkNvbnRleHQoKSBjb25kaXRpb25hbGx5IGluIHRoZSBzZXJ2ZXIgYnVpbGQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogUmVhY3RpdmVGbGFncy5JU19TSEFMTE9XICovXSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21Gb3JtYXR0ZXIoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2dWVTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojM2JhNzc2JyB9O1xuICAgIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMwYjFiYzknIH07XG4gICAgY29uc3Qgc3RyaW5nU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6I2I2MmUyNCcgfTtcbiAgICBjb25zdCBrZXl3b3JkU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzlkMjg4YycgfTtcbiAgICAvLyBjdXN0b20gZm9ybWF0dGVyIGZvciBDaHJvbWVcbiAgICAvLyBodHRwczovL3d3dy5tYXR0emV1bmVydC5jb20vMjAxNi8wMi8xOS9jdXN0b20tY2hyb21lLWRldnRvb2xzLW9iamVjdC1mb3JtYXR0ZXJzLmh0bWxcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSB7XG4gICAgICAgIGhlYWRlcihvYmopIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYWxzbyBmb3JtYXQgQ29tcG9uZW50UHVibGljSW5zdGFuY2UgJiBjdHguc2xvdHMvYXR0cnMgaW4gc2V0dXBcbiAgICAgICAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGl2JywgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWYob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXG4gICAgICAgICAgICAgICAgICAgICc8JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUob2JqLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgYD5gXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gJ1NoYWxsb3dSZWFjdGl2ZScgOiAnUmVhY3RpdmUnXSxcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZShvYmopLFxuICAgICAgICAgICAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyAnU2hhbGxvd1JlYWRvbmx5JyA6ICdSZWFkb25seSddLFxuICAgICAgICAgICAgICAgICAgICAnPCcsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgICAgICAgICAgICc+J1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzQm9keShvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHkob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqICYmIG9iai5fX2lzVnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRJbnN0YW5jZShvYmouJClcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBibG9ja3MgPSBbXTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUucHJvcHMgJiYgaW5zdGFuY2UucHJvcHMpIHtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ3Byb3BzJywgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLnNldHVwU3RhdGUgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnc2V0dXAnLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RhbmNlLmRhdGEgIT09IEVNUFRZX09CSikge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnZGF0YScsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2NvbXB1dGVkJyk7XG4gICAgICAgIGlmIChjb21wdXRlZCkge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnY29tcHV0ZWQnLCBjb21wdXRlZCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluamVjdGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsICdpbmplY3QnKTtcbiAgICAgICAgaWYgKGluamVjdGVkKSB7XG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdpbmplY3RlZCcsIGluamVjdGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzLnB1c2goW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZToga2V5d29yZFN0eWxlLnN0eWxlICsgJztvcGFjaXR5OjAuNjYnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnJCAoaW50ZXJuYWwpOiAnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgWydvYmplY3QnLCB7IG9iamVjdDogaW5zdGFuY2UgfV1cbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBibG9ja3M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlQmxvY2sodHlwZSwgdGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0YXJnZXQpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHt9XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IHN0eWxlOiAnbGluZS1oZWlnaHQ6MS4yNWVtO21hcmdpbi1ib3R0b206MC42ZW0nIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiM0NzY1ODInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6MS4yNWVtJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCBrZXl3b3JkU3R5bGUsIGtleSArICc6ICddLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHYsIGFzUmF3ID0gdHJ1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgbnVtYmVyU3R5bGUsIHZdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHN0cmluZ1N0eWxlLCBKU09OLnN0cmluZ2lmeSh2KV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIGtleXdvcmRTdHlsZSwgdl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ29iamVjdCcsIHsgb2JqZWN0OiBhc1JhdyA/IHRvUmF3KHYpIDogdiB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBleHRyYWN0S2V5cyhpbnN0YW5jZSwgdHlwZSkge1xuICAgICAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oQ29tcCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UuY3R4KSB7XG4gICAgICAgICAgICBpZiAoaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSkge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBDb21wW3R5cGVdO1xuICAgICAgICBpZiAoKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpKSB8fFxuICAgICAgICAgICAgKGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDb21wLm1peGlucyAmJiBDb21wLm1peGlucy5zb21lKG0gPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdlblJlZkZsYWcodikge1xuICAgICAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICAgICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2LmVmZmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGBDb21wdXRlZFJlZmA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBSZWZgO1xuICAgIH1cbiAgICBpZiAod2luZG93LmRldnRvb2xzRm9ybWF0dGVycykge1xuICAgICAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMgPSBbZm9ybWF0dGVyXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdpdGhNZW1vKG1lbW8sIHJlbmRlciwgY2FjaGUsIGluZGV4KSB7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICAgIGlmIChjYWNoZWQgJiYgaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJldCA9IHJlbmRlcigpO1xuICAgIC8vIHNoYWxsb3cgY2xvbmVcbiAgICByZXQubWVtbyA9IG1lbW8uc2xpY2UoKTtcbiAgICByZXR1cm4gKGNhY2hlW2luZGV4XSA9IHJldCk7XG59XG5mdW5jdGlvbiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykge1xuICAgIGNvbnN0IHByZXYgPSBjYWNoZWQubWVtbztcbiAgICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gbGV0IHBhcmVudCBibG9jayB0cmFjayBpdCB3aGVuIHJldHVybmluZyBjYWNoZWRcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIENvcmUgQVBJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgdmVyc2lvbiA9IFwiMy4yLjQ3XCI7XG5jb25zdCBfc3NyVXRpbHMgPSB7XG4gICAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gICAgc2V0dXBDb21wb25lbnQsXG4gICAgcmVuZGVyQ29tcG9uZW50Um9vdCxcbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gICAgaXNWTm9kZSxcbiAgICBub3JtYWxpemVWTm9kZVxufTtcbi8qKlxuICogU1NSIHV0aWxzIGZvciBcXEB2dWUvc2VydmVyLXJlbmRlcmVyLiBPbmx5IGV4cG9zZWQgaW4gc3NyLXBvc3NpYmxlIGJ1aWxkcy5cbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBzc3JVdGlscyA9IChfc3NyVXRpbHMgKTtcbi8qKlxuICogQGludGVybmFsIG9ubHkgZXhwb3NlZCBpbiBjb21wYXQgYnVpbGRzXG4gKi9cbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xuLyoqXG4gKiBAaW50ZXJuYWwgb25seSBleHBvc2VkIGluIGNvbXBhdCBidWlsZHMuXG4gKi9cbmNvbnN0IGNvbXBhdFV0aWxzID0gKG51bGwpO1xuXG5leHBvcnQgeyBCYXNlVHJhbnNpdGlvbiwgQ29tbWVudCwgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGFzc2VydE51bWJlciwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGNhbGxXaXRoRXJyb3JIYW5kbGluZywgY2xvbmVWTm9kZSwgY29tcGF0VXRpbHMsIGNvbXB1dGVkLCBjcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUJhc2VWTm9kZSBhcyBjcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyLCBjcmVhdGVQcm9wc1Jlc3RQcm94eSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZVNsb3RzLCBjcmVhdGVTdGF0aWNWTm9kZSwgY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVWTm9kZSwgZGVmaW5lQXN5bmNDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgZGVmaW5lRW1pdHMsIGRlZmluZUV4cG9zZSwgZGVmaW5lUHJvcHMsIGRldnRvb2xzLCBnZXRDdXJyZW50SW5zdGFuY2UsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgZ3VhcmRSZWFjdGl2ZVByb3BzLCBoLCBoYW5kbGVFcnJvciwgaW5pdEN1c3RvbUZvcm1hdHRlciwgaW5qZWN0LCBpc01lbW9TYW1lLCBpc1J1bnRpbWVPbmx5LCBpc1ZOb2RlLCBtZXJnZURlZmF1bHRzLCBtZXJnZVByb3BzLCBuZXh0VGljaywgb25BY3RpdmF0ZWQsIG9uQmVmb3JlTW91bnQsIG9uQmVmb3JlVW5tb3VudCwgb25CZWZvcmVVcGRhdGUsIG9uRGVhY3RpdmF0ZWQsIG9uRXJyb3JDYXB0dXJlZCwgb25Nb3VudGVkLCBvblJlbmRlclRyYWNrZWQsIG9uUmVuZGVyVHJpZ2dlcmVkLCBvblNlcnZlclByZWZldGNoLCBvblVubW91bnRlZCwgb25VcGRhdGVkLCBvcGVuQmxvY2ssIHBvcFNjb3BlSWQsIHByb3ZpZGUsIHB1c2hTY29wZUlkLCBxdWV1ZVBvc3RGbHVzaENiLCByZWdpc3RlclJ1bnRpbWVDb21waWxlciwgcmVuZGVyTGlzdCwgcmVuZGVyU2xvdCwgcmVzb2x2ZUNvbXBvbmVudCwgcmVzb2x2ZURpcmVjdGl2ZSwgcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQsIHJlc29sdmVGaWx0ZXIsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MsIHNldEJsb2NrVHJhY2tpbmcsIHNldERldnRvb2xzSG9vaywgc2V0VHJhbnNpdGlvbkhvb2tzLCBzc3JDb250ZXh0S2V5LCBzc3JVdGlscywgdG9IYW5kbGVycywgdHJhbnNmb3JtVk5vZGVBcmdzLCB1c2VBdHRycywgdXNlU1NSQ29udGV4dCwgdXNlU2xvdHMsIHVzZVRyYW5zaXRpb25TdGF0ZSwgdmVyc2lvbiwgd2Fybiwgd2F0Y2gsIHdhdGNoRWZmZWN0LCB3YXRjaFBvc3RFZmZlY3QsIHdhdGNoU3luY0VmZmVjdCwgd2l0aEFzeW5jQ29udGV4dCwgd2l0aEN0eCwgd2l0aERlZmF1bHRzLCB3aXRoRGlyZWN0aXZlcywgd2l0aE1lbW8sIHdpdGhTY29wZUlkIH07XG4iLCJpbXBvcnQgeyB3YXJuLCBjYW1lbGl6ZSwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGRlZmluZUNvbXBvbmVudCwgbmV4dFRpY2ssIGNyZWF0ZVZOb2RlLCBnZXRDdXJyZW50SW5zdGFuY2UsIHdhdGNoUG9zdEVmZmVjdCwgb25Nb3VudGVkLCBvblVubW91bnRlZCwgRnJhZ21lbnQsIFN0YXRpYywgaCwgQmFzZVRyYW5zaXRpb24sIGFzc2VydE51bWJlciwgdXNlVHJhbnNpdGlvblN0YXRlLCBvblVwZGF0ZWQsIHRvUmF3LCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIHNldFRyYW5zaXRpb25Ib29rcywgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgaXNSdW50aW1lT25seSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuZXhwb3J0ICogZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGh5cGhlbmF0ZSwgY2FwaXRhbGl6ZSwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNPbiwgaXNNb2RlbExpc3RlbmVyLCBpc0Z1bmN0aW9uLCBjYW1lbGl6ZSBhcyBjYW1lbGl6ZSQxLCB0b051bWJlciwgZXh0ZW5kLCBFTVBUWV9PQkosIGlzT2JqZWN0LCBsb29zZVRvTnVtYmVyLCBsb29zZUluZGV4T2YsIGlzU2V0LCBsb29zZUVxdWFsLCBpbnZva2VBcnJheUZucywgaXNIVE1MVGFnLCBpc1NWR1RhZyB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuY29uc3Qgc3ZnTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuY29uc3QgZG9jID0gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudCA6IG51bGwpO1xuY29uc3QgdGVtcGxhdGVDb250YWluZXIgPSBkb2MgJiYgLyojX19QVVJFX18qLyBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbmNvbnN0IG5vZGVPcHMgPSB7XG4gICAgaW5zZXJ0OiAoY2hpbGQsIHBhcmVudCwgYW5jaG9yKSA9PiB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGFuY2hvciB8fCBudWxsKTtcbiAgICB9LFxuICAgIHJlbW92ZTogY2hpbGQgPT4ge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVFbGVtZW50OiAodGFnLCBpc1NWRywgaXMsIHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gaXNTVkdcbiAgICAgICAgICAgID8gZG9jLmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgdGFnKVxuICAgICAgICAgICAgOiBkb2MuY3JlYXRlRWxlbWVudCh0YWcsIGlzID8geyBpcyB9IDogdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKHRhZyA9PT0gJ3NlbGVjdCcgJiYgcHJvcHMgJiYgcHJvcHMubXVsdGlwbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdtdWx0aXBsZScsIHByb3BzLm11bHRpcGxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfSxcbiAgICBjcmVhdGVUZXh0OiB0ZXh0ID0+IGRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSxcbiAgICBjcmVhdGVDb21tZW50OiB0ZXh0ID0+IGRvYy5jcmVhdGVDb21tZW50KHRleHQpLFxuICAgIHNldFRleHQ6IChub2RlLCB0ZXh0KSA9PiB7XG4gICAgICAgIG5vZGUubm9kZVZhbHVlID0gdGV4dDtcbiAgICB9LFxuICAgIHNldEVsZW1lbnRUZXh0OiAoZWwsIHRleHQpID0+IHtcbiAgICAgICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIH0sXG4gICAgcGFyZW50Tm9kZTogbm9kZSA9PiBub2RlLnBhcmVudE5vZGUsXG4gICAgbmV4dFNpYmxpbmc6IG5vZGUgPT4gbm9kZS5uZXh0U2libGluZyxcbiAgICBxdWVyeVNlbGVjdG9yOiBzZWxlY3RvciA9PiBkb2MucXVlcnlTZWxlY3RvcihzZWxlY3RvciksXG4gICAgc2V0U2NvcGVJZChlbCwgaWQpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGlkLCAnJyk7XG4gICAgfSxcbiAgICAvLyBfX1VOU0FGRV9fXG4gICAgLy8gUmVhc29uOiBpbm5lckhUTUwuXG4gICAgLy8gU3RhdGljIGNvbnRlbnQgaGVyZSBjYW4gb25seSBjb21lIGZyb20gY29tcGlsZWQgdGVtcGxhdGVzLlxuICAgIC8vIEFzIGxvbmcgYXMgdGhlIHVzZXIgb25seSB1c2VzIHRydXN0ZWQgdGVtcGxhdGVzLCB0aGlzIGlzIHNhZmUuXG4gICAgaW5zZXJ0U3RhdGljQ29udGVudChjb250ZW50LCBwYXJlbnQsIGFuY2hvciwgaXNTVkcsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgLy8gPHBhcmVudD4gYmVmb3JlIHwgZmlyc3QgLi4uIGxhc3QgfCBhbmNob3IgPC9wYXJlbnQ+XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IGFuY2hvciA/IGFuY2hvci5wcmV2aW91c1NpYmxpbmcgOiBwYXJlbnQubGFzdENoaWxkO1xuICAgICAgICAvLyAjNTMwOCBjYW4gb25seSB0YWtlIGNhY2hlZCBwYXRoIGlmOlxuICAgICAgICAvLyAtIGhhcyBhIHNpbmdsZSByb290IG5vZGVcbiAgICAgICAgLy8gLSBuZXh0U2libGluZyBpbmZvIGlzIHN0aWxsIGF2YWlsYWJsZVxuICAgICAgICBpZiAoc3RhcnQgJiYgKHN0YXJ0ID09PSBlbmQgfHwgc3RhcnQubmV4dFNpYmxpbmcpKSB7XG4gICAgICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShzdGFydC5jbG9uZU5vZGUodHJ1ZSksIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSBlbmQgfHwgIShzdGFydCA9IHN0YXJ0Lm5leHRTaWJsaW5nKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBmcmVzaCBpbnNlcnRcbiAgICAgICAgICAgIHRlbXBsYXRlQ29udGFpbmVyLmlubmVySFRNTCA9IGlzU1ZHID8gYDxzdmc+JHtjb250ZW50fTwvc3ZnPmAgOiBjb250ZW50O1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNvbnRhaW5lci5jb250ZW50O1xuICAgICAgICAgICAgaWYgKGlzU1ZHKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG91dGVyIHN2ZyB3cmFwcGVyXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRlbXBsYXRlLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHdyYXBwZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZCh3cmFwcGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUodGVtcGxhdGUsIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC8vIGZpcnN0XG4gICAgICAgICAgICBiZWZvcmUgPyBiZWZvcmUubmV4dFNpYmxpbmcgOiBwYXJlbnQuZmlyc3RDaGlsZCxcbiAgICAgICAgICAgIC8vIGxhc3RcbiAgICAgICAgICAgIGFuY2hvciA/IGFuY2hvci5wcmV2aW91c1NpYmxpbmcgOiBwYXJlbnQubGFzdENoaWxkXG4gICAgICAgIF07XG4gICAgfVxufTtcblxuLy8gY29tcGlsZXIgc2hvdWxkIG5vcm1hbGl6ZSBjbGFzcyArIDpjbGFzcyBiaW5kaW5ncyBvbiB0aGUgc2FtZSBlbGVtZW50XG4vLyBpbnRvIGEgc2luZ2xlIGJpbmRpbmcgWydzdGF0aWNDbGFzcycsIGR5bmFtaWNdXG5mdW5jdGlvbiBwYXRjaENsYXNzKGVsLCB2YWx1ZSwgaXNTVkcpIHtcbiAgICAvLyBkaXJlY3RseSBzZXR0aW5nIGNsYXNzTmFtZSBzaG91bGQgYmUgZmFzdGVyIHRoYW4gc2V0QXR0cmlidXRlIGluIHRoZW9yeVxuICAgIC8vIGlmIHRoaXMgaXMgYW4gZWxlbWVudCBkdXJpbmcgYSB0cmFuc2l0aW9uLCB0YWtlIHRoZSB0ZW1wb3JhcnkgdHJhbnNpdGlvblxuICAgIC8vIGNsYXNzZXMgaW50byBhY2NvdW50LlxuICAgIGNvbnN0IHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3Z0YztcbiAgICBpZiAodHJhbnNpdGlvbkNsYXNzZXMpIHtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgPyBbdmFsdWUsIC4uLnRyYW5zaXRpb25DbGFzc2VzXSA6IFsuLi50cmFuc2l0aW9uQ2xhc3Nlc10pLmpvaW4oJyAnKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1NWRykge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gdmFsdWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYXRjaFN0eWxlKGVsLCBwcmV2LCBuZXh0KSB7XG4gICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICBjb25zdCBpc0Nzc1N0cmluZyA9IGlzU3RyaW5nKG5leHQpO1xuICAgIGlmIChuZXh0ICYmICFpc0Nzc1N0cmluZykge1xuICAgICAgICBpZiAocHJldiAmJiAhaXNTdHJpbmcocHJldikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXh0KSB7XG4gICAgICAgICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCBuZXh0W2tleV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjdXJyZW50RGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XG4gICAgICAgIGlmIChpc0Nzc1N0cmluZykge1xuICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5jc3NUZXh0ID0gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmV2KSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5kaWNhdGVzIHRoYXQgdGhlIGBkaXNwbGF5YCBvZiB0aGUgZWxlbWVudCBpcyBjb250cm9sbGVkIGJ5IGB2LXNob3dgLFxuICAgICAgICAvLyBzbyB3ZSBhbHdheXMga2VlcCB0aGUgY3VycmVudCBgZGlzcGxheWAgdmFsdWUgcmVnYXJkbGVzcyBvZiB0aGUgYHN0eWxlYFxuICAgICAgICAvLyB2YWx1ZSwgdGh1cyBoYW5kaW5nIG92ZXIgY29udHJvbCB0byBgdi1zaG93YC5cbiAgICAgICAgaWYgKCdfdm9kJyBpbiBlbCkge1xuICAgICAgICAgICAgc3R5bGUuZGlzcGxheSA9IGN1cnJlbnREaXNwbGF5O1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3Qgc2VtaWNvbG9uUkUgPSAvW15cXFxcXTtcXHMqJC87XG5jb25zdCBpbXBvcnRhbnRSRSA9IC9cXHMqIWltcG9ydGFudCQvO1xuZnVuY3Rpb24gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHZhbCkge1xuICAgIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsLmZvckVhY2godiA9PiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKVxuICAgICAgICAgICAgdmFsID0gJyc7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGlmIChzZW1pY29sb25SRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgICAgICAgICB3YXJuKGBVbmV4cGVjdGVkIHNlbWljb2xvbiBhdCB0aGUgZW5kIG9mICcke25hbWV9JyBzdHlsZSB2YWx1ZTogJyR7dmFsfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCctLScpKSB7XG4gICAgICAgICAgICAvLyBjdXN0b20gcHJvcGVydHkgZGVmaW5pdGlvblxuICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeGVkID0gYXV0b1ByZWZpeChzdHlsZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7XG4gICAgICAgICAgICAgICAgLy8gIWltcG9ydGFudFxuICAgICAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KGh5cGhlbmF0ZShwcmVmaXhlZCksIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCAnJyksICdpbXBvcnRhbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlW3ByZWZpeGVkXSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IHByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5jb25zdCBwcmVmaXhDYWNoZSA9IHt9O1xuZnVuY3Rpb24gYXV0b1ByZWZpeChzdHlsZSwgcmF3TmFtZSkge1xuICAgIGNvbnN0IGNhY2hlZCA9IHByZWZpeENhY2hlW3Jhd05hbWVdO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgbGV0IG5hbWUgPSBjYW1lbGl6ZShyYXdOYW1lKTtcbiAgICBpZiAobmFtZSAhPT0gJ2ZpbHRlcicgJiYgbmFtZSBpbiBzdHlsZSkge1xuICAgICAgICByZXR1cm4gKHByZWZpeENhY2hlW3Jhd05hbWVdID0gbmFtZSk7XG4gICAgfVxuICAgIG5hbWUgPSBjYXBpdGFsaXplKG5hbWUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJlZml4ZWQgPSBwcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgICAgIGlmIChwcmVmaXhlZCBpbiBzdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIChwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IHByZWZpeGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmF3TmFtZTtcbn1cblxuY29uc3QgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbmZ1bmN0aW9uIHBhdGNoQXR0cihlbCwga2V5LCB2YWx1ZSwgaXNTVkcsIGluc3RhbmNlKSB7XG4gICAgaWYgKGlzU1ZHICYmIGtleS5zdGFydHNXaXRoKCd4bGluazonKSkge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywga2V5LnNsaWNlKDYsIGtleS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBub3RlIHdlIGFyZSBvbmx5IGNoZWNraW5nIGJvb2xlYW4gYXR0cmlidXRlcyB0aGF0IGRvbid0IGhhdmUgYVxuICAgICAgICAvLyBjb3JyZXNwb25kaW5nIGRvbSBwcm9wIG9mIHRoZSBzYW1lIG5hbWUgaGVyZS5cbiAgICAgICAgY29uc3QgaXNCb29sZWFuID0gaXNTcGVjaWFsQm9vbGVhbkF0dHIoa2V5KTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGlzQm9vbGVhbiAmJiAhaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSkpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgaXNCb29sZWFuID8gJycgOiB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIF9fVU5TQUZFX19cbi8vIGZ1bmN0aW9ucy4gVGhlIHVzZXIgaXMgcmVzcG9uc2libGUgZm9yIHVzaW5nIHRoZW0gd2l0aCBvbmx5IHRydXN0ZWQgY29udGVudC5cbmZ1bmN0aW9uIHBhdGNoRE9NUHJvcChlbCwga2V5LCB2YWx1ZSwgXG4vLyB0aGUgZm9sbG93aW5nIGFyZ3MgYXJlIHBhc3NlZCBvbmx5IGR1ZSB0byBwb3RlbnRpYWwgaW5uZXJIVE1ML3RleHRDb250ZW50XG4vLyBvdmVycmlkaW5nIGV4aXN0aW5nIFZOb2RlcywgaW4gd2hpY2ggY2FzZSB0aGUgb2xkIHRyZWUgbXVzdCBiZSBwcm9wZXJseVxuLy8gdW5tb3VudGVkLlxucHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pIHtcbiAgICBpZiAoa2V5ID09PSAnaW5uZXJIVE1MJyB8fCBrZXkgPT09ICd0ZXh0Q29udGVudCcpIHtcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbikge1xuICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuKHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxba2V5XSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09ICd2YWx1ZScgJiZcbiAgICAgICAgZWwudGFnTmFtZSAhPT0gJ1BST0dSRVNTJyAmJlxuICAgICAgICAvLyBjdXN0b20gZWxlbWVudHMgbWF5IHVzZSBfdmFsdWUgaW50ZXJuYWxseVxuICAgICAgICAhZWwudGFnTmFtZS5pbmNsdWRlcygnLScpKSB7XG4gICAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIF92YWx1ZSBhcyB3ZWxsIHNpbmNlXG4gICAgICAgIC8vIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmUgc3RyaW5naWZpZWQuXG4gICAgICAgIGVsLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICBpZiAoZWwudmFsdWUgIT09IG5ld1ZhbHVlIHx8XG4gICAgICAgICAgICAvLyAjNDk1NjogYWx3YXlzIHNldCBmb3IgT1BUSU9OIGVsZW1lbnRzIGJlY2F1c2UgaXRzIHZhbHVlIGZhbGxzIGJhY2sgdG9cbiAgICAgICAgICAgIC8vIHRleHRDb250ZW50IGlmIG5vIHZhbHVlIGF0dHJpYnV0ZSBpcyBwcmVzZW50LiBBbmQgc2V0dGluZyAudmFsdWUgZm9yXG4gICAgICAgICAgICAvLyBPUFRJT04gaGFzIG5vIHNpZGUgZWZmZWN0XG4gICAgICAgICAgICBlbC50YWdOYW1lID09PSAnT1BUSU9OJykge1xuICAgICAgICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbmVlZFJlbW92ZSA9IGZhbHNlO1xuICAgIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIGVsW2tleV07XG4gICAgICAgIGlmICh0eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIC8vIGUuZy4gPHNlbGVjdCBtdWx0aXBsZT4gY29tcGlsZXMgdG8geyBtdWx0aXBsZTogJycgfVxuICAgICAgICAgICAgdmFsdWUgPSBpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09IG51bGwgJiYgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIGUuZy4gPGRpdiA6aWQ9XCJudWxsXCI+XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIGUuZy4gPGltZyA6d2lkdGg9XCJudWxsXCI+XG4gICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzb21lIHByb3BlcnRpZXMgcGVyZm9ybSB2YWx1ZSB2YWxpZGF0aW9uIGFuZCB0aHJvdyxcbiAgICAvLyBzb21lIHByb3BlcnRpZXMgaGFzIGdldHRlciwgbm8gc2V0dGVyLCB3aWxsIGVycm9yIGluICd1c2Ugc3RyaWN0J1xuICAgIC8vIGVnLiA8c2VsZWN0IDp0eXBlPVwibnVsbFwiPjwvc2VsZWN0PiA8c2VsZWN0IDp3aWxsVmFsaWRhdGU9XCJudWxsXCI+PC9zZWxlY3Q+XG4gICAgdHJ5IHtcbiAgICAgICAgZWxba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBkbyBub3Qgd2FybiBpZiB2YWx1ZSBpcyBhdXRvLWNvZXJjZWQgZnJvbSBudWxsaXNoIHZhbHVlc1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFuZWVkUmVtb3ZlKSB7XG4gICAgICAgICAgICB3YXJuKGBGYWlsZWQgc2V0dGluZyBwcm9wIFwiJHtrZXl9XCIgb24gPCR7ZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpfT46IGAgK1xuICAgICAgICAgICAgICAgIGB2YWx1ZSAke3ZhbHVlfSBpcyBpbnZhbGlkLmAsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5lZWRSZW1vdmUgJiYgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcGF0Y2hFdmVudChlbCwgcmF3TmFtZSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGluc3RhbmNlID0gbnVsbCkge1xuICAgIC8vIHZlaSA9IHZ1ZSBldmVudCBpbnZva2Vyc1xuICAgIGNvbnN0IGludm9rZXJzID0gZWwuX3ZlaSB8fCAoZWwuX3ZlaSA9IHt9KTtcbiAgICBjb25zdCBleGlzdGluZ0ludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXTtcbiAgICBpZiAobmV4dFZhbHVlICYmIGV4aXN0aW5nSW52b2tlcikge1xuICAgICAgICAvLyBwYXRjaFxuICAgICAgICBleGlzdGluZ0ludm9rZXIudmFsdWUgPSBuZXh0VmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBbbmFtZSwgb3B0aW9uc10gPSBwYXJzZU5hbWUocmF3TmFtZSk7XG4gICAgICAgIGlmIChuZXh0VmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGFkZFxuICAgICAgICAgICAgY29uc3QgaW52b2tlciA9IChpbnZva2Vyc1tyYXdOYW1lXSA9IGNyZWF0ZUludm9rZXIobmV4dFZhbHVlLCBpbnN0YW5jZSkpO1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgaW52b2tlciwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdJbnZva2VyKSB7XG4gICAgICAgICAgICAvLyByZW1vdmVcbiAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIG5hbWUsIGV4aXN0aW5nSW52b2tlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpbnZva2Vyc1tyYXdOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IG9wdGlvbnNNb2RpZmllclJFID0gLyg/Ok9uY2V8UGFzc2l2ZXxDYXB0dXJlKSQvO1xuZnVuY3Rpb24gcGFyc2VOYW1lKG5hbWUpIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAob3B0aW9uc01vZGlmaWVyUkUudGVzdChuYW1lKSkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIGxldCBtO1xuICAgICAgICB3aGlsZSAoKG0gPSBuYW1lLm1hdGNoKG9wdGlvbnNNb2RpZmllclJFKSkpIHtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIG5hbWUubGVuZ3RoIC0gbVswXS5sZW5ndGgpO1xuICAgICAgICAgICAgb3B0aW9uc1ttWzBdLnRvTG93ZXJDYXNlKCldID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBldmVudCA9IG5hbWVbMl0gPT09ICc6JyA/IG5hbWUuc2xpY2UoMykgOiBoeXBoZW5hdGUobmFtZS5zbGljZSgyKSk7XG4gICAgcmV0dXJuIFtldmVudCwgb3B0aW9uc107XG59XG4vLyBUbyBhdm9pZCB0aGUgb3ZlcmhlYWQgb2YgcmVwZWF0ZWRseSBjYWxsaW5nIERhdGUubm93KCksIHdlIGNhY2hlXG4vLyBhbmQgdXNlIHRoZSBzYW1lIHRpbWVzdGFtcCBmb3IgYWxsIGV2ZW50IGxpc3RlbmVycyBhdHRhY2hlZCBpbiB0aGUgc2FtZSB0aWNrLlxubGV0IGNhY2hlZE5vdyA9IDA7XG5jb25zdCBwID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IGdldE5vdyA9ICgpID0+IGNhY2hlZE5vdyB8fCAocC50aGVuKCgpID0+IChjYWNoZWROb3cgPSAwKSksIChjYWNoZWROb3cgPSBEYXRlLm5vdygpKSk7XG5mdW5jdGlvbiBjcmVhdGVJbnZva2VyKGluaXRpYWxWYWx1ZSwgaW5zdGFuY2UpIHtcbiAgICBjb25zdCBpbnZva2VyID0gKGUpID0+IHtcbiAgICAgICAgLy8gYXN5bmMgZWRnZSBjYXNlIHZ1ZWpzL3Z1ZSM2NTY2XG4gICAgICAgIC8vIGlubmVyIGNsaWNrIGV2ZW50IHRyaWdnZXJzIHBhdGNoLCBldmVudCBoYW5kbGVyXG4gICAgICAgIC8vIGF0dGFjaGVkIHRvIG91dGVyIGVsZW1lbnQgZHVyaW5nIHBhdGNoLCBhbmQgdHJpZ2dlcmVkIGFnYWluLiBUaGlzXG4gICAgICAgIC8vIGhhcHBlbnMgYmVjYXVzZSBicm93c2VycyBmaXJlIG1pY3JvdGFzayB0aWNrcyBiZXR3ZWVuIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAgICAvLyB0aGlzIG5vIGxvbmdlciBoYXBwZW5zIGZvciB0ZW1wbGF0ZXMgaW4gVnVlIDMsIGJ1dCBjb3VsZCBzdGlsbCBiZVxuICAgICAgICAvLyB0aGVvcmV0aWNhbGx5IHBvc3NpYmxlIGZvciBoYW5kLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucy5cbiAgICAgICAgLy8gdGhlIHNvbHV0aW9uOiB3ZSBzYXZlIHRoZSB0aW1lc3RhbXAgd2hlbiBhIGhhbmRsZXIgaXMgYXR0YWNoZWQsXG4gICAgICAgIC8vIGFuZCBhbHNvIGF0dGFjaCB0aGUgdGltZXN0YW1wIHRvIGFueSBldmVudCB0aGF0IHdhcyBoYW5kbGVkIGJ5IHZ1ZVxuICAgICAgICAvLyBmb3IgdGhlIGZpcnN0IHRpbWUgKHRvIGF2b2lkIGluY29uc2lzdGVudCBldmVudCB0aW1lc3RhbXAgaW1wbGVtZW50YXRpb25zXG4gICAgICAgIC8vIG9yIGV2ZW50cyBmaXJlZCBmcm9tIGlmcmFtZXMsIGUuZy4gIzI1MTMpXG4gICAgICAgIC8vIFRoZSBoYW5kbGVyIHdvdWxkIG9ubHkgZmlyZSBpZiB0aGUgZXZlbnQgcGFzc2VkIHRvIGl0IHdhcyBmaXJlZFxuICAgICAgICAvLyBBRlRFUiBpdCB3YXMgYXR0YWNoZWQuXG4gICAgICAgIGlmICghZS5fdnRzKSB7XG4gICAgICAgICAgICBlLl92dHMgPSBEYXRlLm5vdygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUuX3Z0cyA8PSBpbnZva2VyLmF0dGFjaGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcocGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgaW52b2tlci52YWx1ZSksIGluc3RhbmNlLCA1IC8qIEVycm9yQ29kZXMuTkFUSVZFX0VWRU5UX0hBTkRMRVIgKi8sIFtlXSk7XG4gICAgfTtcbiAgICBpbnZva2VyLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIGludm9rZXIuYXR0YWNoZWQgPSBnZXROb3coKTtcbiAgICByZXR1cm4gaW52b2tlcjtcbn1cbmZ1bmN0aW9uIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU3RvcCA9IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIG9yaWdpbmFsU3RvcC5jYWxsKGUpO1xuICAgICAgICAgICAgZS5fc3RvcHBlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoZm4gPT4gKGUpID0+ICFlLl9zdG9wcGVkICYmIGZuICYmIGZuKGUpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5cbmNvbnN0IG5hdGl2ZU9uUkUgPSAvXm9uW2Etel0vO1xuY29uc3QgcGF0Y2hQcm9wID0gKGVsLCBrZXksIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBpc1NWRyA9IGZhbHNlLCBwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbikgPT4ge1xuICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgcGF0Y2hDbGFzcyhlbCwgbmV4dFZhbHVlLCBpc1NWRyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICBwYXRjaFN0eWxlKGVsLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAvLyBpZ25vcmUgdi1tb2RlbCBsaXN0ZW5lcnNcbiAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgICAgICAgcGF0Y2hFdmVudChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChrZXlbMF0gPT09ICcuJ1xuICAgICAgICA/ICgoa2V5ID0ga2V5LnNsaWNlKDEpKSwgdHJ1ZSlcbiAgICAgICAgOiBrZXlbMF0gPT09ICdeJ1xuICAgICAgICAgICAgPyAoKGtleSA9IGtleS5zbGljZSgxKSksIGZhbHNlKVxuICAgICAgICAgICAgOiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRykpIHtcbiAgICAgICAgcGF0Y2hET01Qcm9wKGVsLCBrZXksIG5leHRWYWx1ZSwgcHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciA8aW5wdXQgdi1tb2RlbCB0eXBlPVwiY2hlY2tib3hcIj4gd2l0aFxuICAgICAgICAvLyA6dHJ1ZS12YWx1ZSAmIDpmYWxzZS12YWx1ZVxuICAgICAgICAvLyBzdG9yZSB2YWx1ZSBhcyBkb20gcHJvcGVydGllcyBzaW5jZSBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlXG4gICAgICAgIC8vIHN0cmluZ2lmaWVkLlxuICAgICAgICBpZiAoa2V5ID09PSAndHJ1ZS12YWx1ZScpIHtcbiAgICAgICAgICAgIGVsLl90cnVlVmFsdWUgPSBuZXh0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnZmFsc2UtdmFsdWUnKSB7XG4gICAgICAgICAgICBlbC5fZmFsc2VWYWx1ZSA9IG5leHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaEF0dHIoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRyk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNob3VsZFNldEFzUHJvcChlbCwga2V5LCB2YWx1ZSwgaXNTVkcpIHtcbiAgICBpZiAoaXNTVkcpIHtcbiAgICAgICAgLy8gbW9zdCBrZXlzIG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZSBvbiBzdmcgZWxlbWVudHMgdG8gd29ya1xuICAgICAgICAvLyAuLi5leGNlcHQgaW5uZXJIVE1MICYgdGV4dENvbnRlbnRcbiAgICAgICAgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgfHwga2V5ID09PSAndGV4dENvbnRlbnQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBvciBuYXRpdmUgb25jbGljayB3aXRoIGZ1bmN0aW9uIHZhbHVlc1xuICAgICAgICBpZiAoa2V5IGluIGVsICYmIG5hdGl2ZU9uUkUudGVzdChrZXkpICYmIGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHRoZXNlIGFyZSBlbnVtZXJhdGVkIGF0dHJzLCBob3dldmVyIHRoZWlyIGNvcnJlc3BvbmRpbmcgRE9NIHByb3BlcnRpZXNcbiAgICAvLyBhcmUgYWN0dWFsbHkgYm9vbGVhbnMgLSB0aGlzIGxlYWRzIHRvIHNldHRpbmcgaXQgd2l0aCBhIHN0cmluZyBcImZhbHNlXCJcbiAgICAvLyB2YWx1ZSBsZWFkaW5nIGl0IHRvIGJlIGNvZXJjZWQgdG8gYHRydWVgLCBzbyB3ZSBuZWVkIHRvIGFsd2F5cyB0cmVhdFxuICAgIC8vIHRoZW0gYXMgYXR0cmlidXRlcy5cbiAgICAvLyBOb3RlIHRoYXQgYGNvbnRlbnRFZGl0YWJsZWAgZG9lc24ndCBoYXZlIHRoaXMgcHJvYmxlbTogaXRzIERPTVxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gZW51bWVyYXRlZCBzdHJpbmcgdmFsdWVzLlxuICAgIGlmIChrZXkgPT09ICdzcGVsbGNoZWNrJyB8fCBrZXkgPT09ICdkcmFnZ2FibGUnIHx8IGtleSA9PT0gJ3RyYW5zbGF0ZScpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyAjMTc4NywgIzI4NDAgZm9ybSBwcm9wZXJ0eSBvbiBmb3JtIGVsZW1lbnRzIGlzIHJlYWRvbmx5IGFuZCBtdXN0IGJlIHNldCBhc1xuICAgIC8vIGF0dHJpYnV0ZS5cbiAgICBpZiAoa2V5ID09PSAnZm9ybScpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyAjMTUyNiA8aW5wdXQgbGlzdD4gbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlXG4gICAgaWYgKGtleSA9PT0gJ2xpc3QnICYmIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyAjMjc2NiA8dGV4dGFyZWEgdHlwZT4gbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlXG4gICAgaWYgKGtleSA9PT0gJ3R5cGUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBuYXRpdmUgb25jbGljayB3aXRoIHN0cmluZyB2YWx1ZSwgbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlXG4gICAgaWYgKG5hdGl2ZU9uUkUudGVzdChrZXkpICYmIGlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBrZXkgaW4gZWw7XG59XG5cbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkcmF0ZSkge1xuICAgIGNvbnN0IENvbXAgPSBkZWZpbmVDb21wb25lbnQob3B0aW9ucyk7XG4gICAgY2xhc3MgVnVlQ3VzdG9tRWxlbWVudCBleHRlbmRzIFZ1ZUVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3Rvcihpbml0aWFsUHJvcHMpIHtcbiAgICAgICAgICAgIHN1cGVyKENvbXAsIGluaXRpYWxQcm9wcywgaHlkcmF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgVnVlQ3VzdG9tRWxlbWVudC5kZWYgPSBDb21wO1xuICAgIHJldHVybiBWdWVDdXN0b21FbGVtZW50O1xufVxuY29uc3QgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCA9ICgob3B0aW9ucykgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gZGVmaW5lQ3VzdG9tRWxlbWVudChvcHRpb25zLCBoeWRyYXRlKTtcbn0pO1xuY29uc3QgQmFzZUNsYXNzID0gKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBIVE1MRWxlbWVudCA6IGNsYXNzIHtcbn0pO1xuY2xhc3MgVnVlRWxlbWVudCBleHRlbmRzIEJhc2VDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoX2RlZiwgX3Byb3BzID0ge30sIGh5ZHJhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fZGVmID0gX2RlZjtcbiAgICAgICAgdGhpcy5fcHJvcHMgPSBfcHJvcHM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX251bWJlclByb3BzID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCAmJiBoeWRyYXRlKSB7XG4gICAgICAgICAgICBoeWRyYXRlKHRoaXMuX2NyZWF0ZVZOb2RlKCksIHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYEN1c3RvbSBlbGVtZW50IGhhcyBwcmUtcmVuZGVyZWQgZGVjbGFyYXRpdmUgc2hhZG93IHJvb3QgYnV0IGlzIG5vdCBgICtcbiAgICAgICAgICAgICAgICAgICAgYGRlZmluZWQgYXMgaHlkcmF0YWJsZS4gVXNlIFxcYGRlZmluZVNTUkN1c3RvbUVsZW1lbnRcXGAuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBmb3Igc3luYyBjb21wb25lbnQgZGVmcyB3ZSBjYW4gaW1tZWRpYXRlbHkgcmVzb2x2ZSBwcm9wc1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVQcm9wcyh0aGlzLl9kZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVEZWYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyKG51bGwsIHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcmVzb2x2ZSBpbm5lciBjb21wb25lbnQgZGVmaW5pdGlvbiAoaGFuZGxlIHBvc3NpYmxlIGFzeW5jIGNvbXBvbmVudClcbiAgICAgKi9cbiAgICBfcmVzb2x2ZURlZigpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAvLyBzZXQgaW5pdGlhbCBhdHRyc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fc2V0QXR0cih0aGlzLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2F0Y2ggZnV0dXJlIGF0dHIgY2hhbmdlc1xuICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEF0dHIobS5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkub2JzZXJ2ZSh0aGlzLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IHJlc29sdmUgPSAoZGVmLCBpc0FzeW5jID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMsIHN0eWxlcyB9ID0gZGVmO1xuICAgICAgICAgICAgLy8gY2FzdCBOdW1iZXItdHlwZSBwcm9wcyBzZXQgYmVmb3JlIHJlc29sdmVcbiAgICAgICAgICAgIGxldCBudW1iZXJQcm9wcztcbiAgICAgICAgICAgIGlmIChwcm9wcyAmJiAhaXNBcnJheShwcm9wcykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHQgPSBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0ID09PSBOdW1iZXIgfHwgKG9wdCAmJiBvcHQudHlwZSA9PT0gTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB0b051bWJlcih0aGlzLl9wcm9wc1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIChudW1iZXJQcm9wcyB8fCAobnVtYmVyUHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpKSlbY2FtZWxpemUkMShrZXkpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bWJlclByb3BzO1xuICAgICAgICAgICAgaWYgKGlzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICAvLyBkZWZpbmluZyBnZXR0ZXIvc2V0dGVycyBvbiBwcm90b3R5cGVcbiAgICAgICAgICAgICAgICAvLyBmb3Igc3luYyBkZWZzLCB0aGlzIGFscmVhZHkgaGFwcGVuZWQgaW4gdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKGRlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhcHBseSBDU1NcbiAgICAgICAgICAgIHRoaXMuX2FwcGx5U3R5bGVzKHN0eWxlcyk7XG4gICAgICAgICAgICAvLyBpbml0aWFsIHJlbmRlclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFzeW5jRGVmID0gdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXI7XG4gICAgICAgIGlmIChhc3luY0RlZikge1xuICAgICAgICAgICAgYXN5bmNEZWYoKS50aGVuKGRlZiA9PiByZXNvbHZlKGRlZiwgdHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLl9kZWYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZXNvbHZlUHJvcHMoZGVmKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvcHMgfSA9IGRlZjtcbiAgICAgICAgY29uc3QgZGVjbGFyZWRQcm9wS2V5cyA9IGlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBPYmplY3Qua2V5cyhwcm9wcyB8fCB7fSk7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBwcm9wcyBzZXQgcHJlLXVwZ3JhZGUgb3IgY29ubmVjdFxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzKSkge1xuICAgICAgICAgICAgaWYgKGtleVswXSAhPT0gJ18nICYmIGRlY2xhcmVkUHJvcEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB0aGlzW2tleV0sIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBkZWZpbmluZyBnZXR0ZXIvc2V0dGVycyBvbiBwcm90b3R5cGVcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZGVjbGFyZWRQcm9wS2V5cy5tYXAoY2FtZWxpemUkMSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRQcm9wKGtleSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXRBdHRyKGtleSkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShrZXkpO1xuICAgICAgICBjb25zdCBjYW1lbEtleSA9IGNhbWVsaXplJDEoa2V5KTtcbiAgICAgICAgaWYgKHRoaXMuX251bWJlclByb3BzICYmIHRoaXMuX251bWJlclByb3BzW2NhbWVsS2V5XSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0UHJvcChjYW1lbEtleSwgdmFsdWUsIGZhbHNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2dldFByb3Aoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wc1trZXldO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfc2V0UHJvcChrZXksIHZhbCwgc2hvdWxkUmVmbGVjdCA9IHRydWUsIHNob3VsZFVwZGF0ZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKHZhbCAhPT0gdGhpcy5fcHJvcHNba2V5XSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUgJiYgdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlZmxlY3RcbiAgICAgICAgICAgIGlmIChzaG91bGRSZWZsZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgdmFsICsgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3VwZGF0ZSgpIHtcbiAgICAgICAgcmVuZGVyKHRoaXMuX2NyZWF0ZVZOb2RlKCksIHRoaXMuc2hhZG93Um9vdCk7XG4gICAgfVxuICAgIF9jcmVhdGVWTm9kZSgpIHtcbiAgICAgICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZSh0aGlzLl9kZWYsIGV4dGVuZCh7fSwgdGhpcy5fcHJvcHMpKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgICAgICAgdm5vZGUuY2UgPSBpbnN0YW5jZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0NFID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBITVJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNlUmVsb2FkID0gbmV3U3R5bGVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyByZXNldCBzdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdHlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMuZm9yRWFjaChzID0+IHRoaXMuc2hhZG93Um9vdC5yZW1vdmVDaGlsZChzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhuZXdTdHlsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BhdGNoID0gKGV2ZW50LCBhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogYXJnc1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmNlcHQgZW1pdFxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmVtaXQgPSAoZXZlbnQsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzcGF0Y2ggYm90aCB0aGUgcmF3IGFuZCBoeXBoZW5hdGVkIHZlcnNpb25zIG9mIGFuIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIG1hdGNoIFZ1ZSBiZWhhdmlvclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChldmVudCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoeXBoZW5hdGUoZXZlbnQpICE9PSBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goaHlwaGVuYXRlKGV2ZW50KSwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGxvY2F0ZSBuZWFyZXN0IFZ1ZSBjdXN0b20gZWxlbWVudCBwYXJlbnQgZm9yIHByb3ZpZGUvaW5qZWN0XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgd2hpbGUgKChwYXJlbnQgPVxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgJiYgKHBhcmVudC5wYXJlbnROb2RlIHx8IHBhcmVudC5ob3N0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIFZ1ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudCA9IHBhcmVudC5faW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5wcm92aWRlcyA9IHBhcmVudC5faW5zdGFuY2UucHJvdmlkZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZub2RlO1xuICAgIH1cbiAgICBfYXBwbHlTdHlsZXMoc3R5bGVzKSB7XG4gICAgICAgIGlmIChzdHlsZXMpIHtcbiAgICAgICAgICAgIHN0eWxlcy5mb3JFYWNoKGNzcyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgcy50ZXh0Q29udGVudCA9IGNzcztcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgICAgICAgICAgLy8gcmVjb3JkIGZvciBITVJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLl9zdHlsZXMgfHwgKHRoaXMuX3N0eWxlcyA9IFtdKSkucHVzaChzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdXNlQ3NzTW9kdWxlKG5hbWUgPSAnJHN0eWxlJykge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgdXNlQ3NzTW9kdWxlIG11c3QgYmUgY2FsbGVkIGluc2lkZSBzZXR1cCgpYCk7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBpbnN0YW5jZS50eXBlLl9fY3NzTW9kdWxlcztcbiAgICAgICAgaWYgKCFtb2R1bGVzKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybihgQ3VycmVudCBpbnN0YW5jZSBkb2VzIG5vdCBoYXZlIENTUyBtb2R1bGVzIGluamVjdGVkLmApO1xuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2QgPSBtb2R1bGVzW25hbWVdO1xuICAgICAgICBpZiAoIW1vZCkge1xuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICAgICAgd2FybihgQ3VycmVudCBpbnN0YW5jZSBkb2VzIG5vdCBoYXZlIENTUyBtb2R1bGUgbmFtZWQgXCIke25hbWV9XCIuYCk7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb2Q7XG4gICAgfVxufVxuXG4vKipcbiAqIFJ1bnRpbWUgaGVscGVyIGZvciBTRkMncyBDU1MgdmFyaWFibGUgaW5qZWN0aW9uIGZlYXR1cmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1c2VDc3NWYXJzKGdldHRlcikge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgd2FybihgdXNlQ3NzVmFycyBpcyBjYWxsZWQgd2l0aG91dCBjdXJyZW50IGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlVGVsZXBvcnRzID0gKGluc3RhbmNlLnV0ID0gKHZhcnMgPSBnZXR0ZXIoaW5zdGFuY2UucHJveHkpKSA9PiB7XG4gICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtdi1vd25lcj1cIiR7aW5zdGFuY2UudWlkfVwiXWApKS5mb3JFYWNoKG5vZGUgPT4gc2V0VmFyc09uTm9kZShub2RlLCB2YXJzKSk7XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0VmFycyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmFycyA9IGdldHRlcihpbnN0YW5jZS5wcm94eSk7XG4gICAgICAgIHNldFZhcnNPblZOb2RlKGluc3RhbmNlLnN1YlRyZWUsIHZhcnMpO1xuICAgICAgICB1cGRhdGVUZWxlcG9ydHModmFycyk7XG4gICAgfTtcbiAgICB3YXRjaFBvc3RFZmZlY3Qoc2V0VmFycyk7XG4gICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgY29uc3Qgb2IgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihzZXRWYXJzKTtcbiAgICAgICAgb2Iub2JzZXJ2ZShpbnN0YW5jZS5zdWJUcmVlLmVsLnBhcmVudE5vZGUsIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgICAgICBvblVubW91bnRlZCgoKSA9PiBvYi5kaXNjb25uZWN0KCkpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gc2V0VmFyc09uVk5vZGUodm5vZGUsIHZhcnMpIHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNoYXBlRmxhZ3MuU1VTUEVOU0UgKi8pIHtcbiAgICAgICAgY29uc3Qgc3VzcGVuc2UgPSB2bm9kZS5zdXNwZW5zZTtcbiAgICAgICAgdm5vZGUgPSBzdXNwZW5zZS5hY3RpdmVCcmFuY2g7XG4gICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRWYXJzT25WTm9kZShzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIHZhcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZHJpbGwgZG93biBIT0NzIHVudGlsIGl0J3MgYSBub24tY29tcG9uZW50IHZub2RlXG4gICAgd2hpbGUgKHZub2RlLmNvbXBvbmVudCkge1xuICAgICAgICB2bm9kZSA9IHZub2RlLmNvbXBvbmVudC5zdWJUcmVlO1xuICAgIH1cbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAvKiBTaGFwZUZsYWdzLkVMRU1FTlQgKi8gJiYgdm5vZGUuZWwpIHtcbiAgICAgICAgc2V0VmFyc09uTm9kZSh2bm9kZS5lbCwgdmFycyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goYyA9PiBzZXRWYXJzT25WTm9kZShjLCB2YXJzKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFN0YXRpYykge1xuICAgICAgICBsZXQgeyBlbCwgYW5jaG9yIH0gPSB2bm9kZTtcbiAgICAgICAgd2hpbGUgKGVsKSB7XG4gICAgICAgICAgICBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKTtcbiAgICAgICAgICAgIGlmIChlbCA9PT0gYW5jaG9yKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZWwgPSBlbC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldFZhcnNPbk5vZGUoZWwsIHZhcnMpIHtcbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFycykge1xuICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoYC0tJHtrZXl9YCwgdmFyc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcbmNvbnN0IEFOSU1BVElPTiA9ICdhbmltYXRpb24nO1xuLy8gRE9NIFRyYW5zaXRpb24gaXMgYSBoaWdoZXItb3JkZXItY29tcG9uZW50IGJhc2VkIG9uIHRoZSBwbGF0Zm9ybS1hZ25vc3RpY1xuLy8gYmFzZSBUcmFuc2l0aW9uIGNvbXBvbmVudCwgd2l0aCBET00tc3BlY2lmaWMgbG9naWMuXG5jb25zdCBUcmFuc2l0aW9uID0gKHByb3BzLCB7IHNsb3RzIH0pID0+IGgoQmFzZVRyYW5zaXRpb24sIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocHJvcHMpLCBzbG90cyk7XG5UcmFuc2l0aW9uLmRpc3BsYXlOYW1lID0gJ1RyYW5zaXRpb24nO1xuY29uc3QgRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IHtcbiAgICBuYW1lOiBTdHJpbmcsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNzczoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSxcbiAgICBkdXJhdGlvbjogW1N0cmluZywgTnVtYmVyLCBPYmplY3RdLFxuICAgIGVudGVyRnJvbUNsYXNzOiBTdHJpbmcsXG4gICAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICAgIGVudGVyVG9DbGFzczogU3RyaW5nLFxuICAgIGFwcGVhckZyb21DbGFzczogU3RyaW5nLFxuICAgIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxuICAgIGxlYXZlRnJvbUNsYXNzOiBTdHJpbmcsXG4gICAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLFxuICAgIGxlYXZlVG9DbGFzczogU3RyaW5nXG59O1xuY29uc3QgVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IChUcmFuc2l0aW9uLnByb3BzID1cbiAgICAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgQmFzZVRyYW5zaXRpb24ucHJvcHMsIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKTtcbi8qKlxuICogIzMyMjcgSW5jb21pbmcgaG9va3MgbWF5IGJlIG1lcmdlZCBpbnRvIGFycmF5cyB3aGVuIHdyYXBwaW5nIFRyYW5zaXRpb25cbiAqIHdpdGggY3VzdG9tIEhPQ3MuXG4gKi9cbmNvbnN0IGNhbGxIb29rID0gKGhvb2ssIGFyZ3MgPSBbXSkgPT4ge1xuICAgIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgICAgIGhvb2suZm9yRWFjaChoID0+IGgoLi4uYXJncykpO1xuICAgIH1cbiAgICBlbHNlIGlmIChob29rKSB7XG4gICAgICAgIGhvb2soLi4uYXJncyk7XG4gICAgfVxufTtcbi8qKlxuICogQ2hlY2sgaWYgYSBob29rIGV4cGVjdHMgYSBjYWxsYmFjayAoMm5kIGFyZyksIHdoaWNoIG1lYW5zIHRoZSB1c2VyXG4gKiBpbnRlbmRzIHRvIGV4cGxpY2l0bHkgY29udHJvbCB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uLlxuICovXG5jb25zdCBoYXNFeHBsaWNpdENhbGxiYWNrID0gKGhvb2spID0+IHtcbiAgICByZXR1cm4gaG9va1xuICAgICAgICA/IGlzQXJyYXkoaG9vaylcbiAgICAgICAgICAgID8gaG9vay5zb21lKGggPT4gaC5sZW5ndGggPiAxKVxuICAgICAgICAgICAgOiBob29rLmxlbmd0aCA+IDFcbiAgICAgICAgOiBmYWxzZTtcbn07XG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvblByb3BzKHJhd1Byb3BzKSB7XG4gICAgY29uc3QgYmFzZVByb3BzID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmF3UHJvcHMpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKSB7XG4gICAgICAgICAgICBiYXNlUHJvcHNba2V5XSA9IHJhd1Byb3BzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJhd1Byb3BzLmNzcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGJhc2VQcm9wcztcbiAgICB9XG4gICAgY29uc3QgeyBuYW1lID0gJ3YnLCB0eXBlLCBkdXJhdGlvbiwgZW50ZXJGcm9tQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci1mcm9tYCwgZW50ZXJBY3RpdmVDbGFzcyA9IGAke25hbWV9LWVudGVyLWFjdGl2ZWAsIGVudGVyVG9DbGFzcyA9IGAke25hbWV9LWVudGVyLXRvYCwgYXBwZWFyRnJvbUNsYXNzID0gZW50ZXJGcm9tQ2xhc3MsIGFwcGVhckFjdGl2ZUNsYXNzID0gZW50ZXJBY3RpdmVDbGFzcywgYXBwZWFyVG9DbGFzcyA9IGVudGVyVG9DbGFzcywgbGVhdmVGcm9tQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS1mcm9tYCwgbGVhdmVBY3RpdmVDbGFzcyA9IGAke25hbWV9LWxlYXZlLWFjdGl2ZWAsIGxlYXZlVG9DbGFzcyA9IGAke25hbWV9LWxlYXZlLXRvYCB9ID0gcmF3UHJvcHM7XG4gICAgY29uc3QgZHVyYXRpb25zID0gbm9ybWFsaXplRHVyYXRpb24oZHVyYXRpb24pO1xuICAgIGNvbnN0IGVudGVyRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzBdO1xuICAgIGNvbnN0IGxlYXZlRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzFdO1xuICAgIGNvbnN0IHsgb25CZWZvcmVFbnRlciwgb25FbnRlciwgb25FbnRlckNhbmNlbGxlZCwgb25MZWF2ZSwgb25MZWF2ZUNhbmNlbGxlZCwgb25CZWZvcmVBcHBlYXIgPSBvbkJlZm9yZUVudGVyLCBvbkFwcGVhciA9IG9uRW50ZXIsIG9uQXBwZWFyQ2FuY2VsbGVkID0gb25FbnRlckNhbmNlbGxlZCB9ID0gYmFzZVByb3BzO1xuICAgIGNvbnN0IGZpbmlzaEVudGVyID0gKGVsLCBpc0FwcGVhciwgZG9uZSkgPT4ge1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyVG9DbGFzcyA6IGVudGVyVG9DbGFzcyk7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJBY3RpdmVDbGFzcyA6IGVudGVyQWN0aXZlQ2xhc3MpO1xuICAgICAgICBkb25lICYmIGRvbmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IGZpbmlzaExlYXZlID0gKGVsLCBkb25lKSA9PiB7XG4gICAgICAgIGVsLl9pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICAgICAgZG9uZSAmJiBkb25lKCk7XG4gICAgfTtcbiAgICBjb25zdCBtYWtlRW50ZXJIb29rID0gKGlzQXBwZWFyKSA9PiB7XG4gICAgICAgIHJldHVybiAoZWwsIGRvbmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhvb2sgPSBpc0FwcGVhciA/IG9uQXBwZWFyIDogb25FbnRlcjtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmUgPSAoKSA9PiBmaW5pc2hFbnRlcihlbCwgaXNBcHBlYXIsIGRvbmUpO1xuICAgICAgICAgICAgY2FsbEhvb2soaG9vaywgW2VsLCByZXNvbHZlXSk7XG4gICAgICAgICAgICBuZXh0RnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJGcm9tQ2xhc3MgOiBlbnRlckZyb21DbGFzcyk7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhclRvQ2xhc3MgOiBlbnRlclRvQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhob29rKSkge1xuICAgICAgICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGVudGVyRHVyYXRpb24sIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIGV4dGVuZChiYXNlUHJvcHMsIHtcbiAgICAgICAgb25CZWZvcmVFbnRlcihlbCkge1xuICAgICAgICAgICAgY2FsbEhvb2sob25CZWZvcmVFbnRlciwgW2VsXSk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyRnJvbUNsYXNzKTtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgZW50ZXJBY3RpdmVDbGFzcyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyKGVsKSB7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUFwcGVhciwgW2VsXSk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckZyb21DbGFzcyk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckFjdGl2ZUNsYXNzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FbnRlcjogbWFrZUVudGVySG9vayhmYWxzZSksXG4gICAgICAgIG9uQXBwZWFyOiBtYWtlRW50ZXJIb29rKHRydWUpLFxuICAgICAgICBvbkxlYXZlKGVsLCBkb25lKSB7XG4gICAgICAgICAgICBlbC5faXNMZWF2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmUgPSAoKSA9PiBmaW5pc2hMZWF2ZShlbCwgZG9uZSk7XG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyBzbyAqLWxlYXZlLWZyb20gY2xhc3NlcyBpbW1lZGlhdGVseSB0YWtlIGVmZmVjdCAoIzI1OTMpXG4gICAgICAgICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgIG5leHRGcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbC5faXNMZWF2aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbmNlbGxlZFxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0V4cGxpY2l0Q2FsbGJhY2sob25MZWF2ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBsZWF2ZUR1cmF0aW9uLCByZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uTGVhdmUsIFtlbCwgcmVzb2x2ZV0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkVudGVyQ2FuY2VsbGVkKGVsKSB7XG4gICAgICAgICAgICBmaW5pc2hFbnRlcihlbCwgZmFsc2UpO1xuICAgICAgICAgICAgY2FsbEhvb2sob25FbnRlckNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQXBwZWFyQ2FuY2VsbGVkKGVsKSB7XG4gICAgICAgICAgICBmaW5pc2hFbnRlcihlbCwgdHJ1ZSk7XG4gICAgICAgICAgICBjYWxsSG9vayhvbkFwcGVhckNhbmNlbGxlZCwgW2VsXSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uTGVhdmVDYW5jZWxsZWQoZWwpIHtcbiAgICAgICAgICAgIGZpbmlzaExlYXZlKGVsKTtcbiAgICAgICAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbikge1xuICAgIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc09iamVjdChkdXJhdGlvbikpIHtcbiAgICAgICAgcmV0dXJuIFtOdW1iZXJPZihkdXJhdGlvbi5lbnRlciksIE51bWJlck9mKGR1cmF0aW9uLmxlYXZlKV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gTnVtYmVyT2YoZHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gW24sIG5dO1xuICAgIH1cbn1cbmZ1bmN0aW9uIE51bWJlck9mKHZhbCkge1xuICAgIGNvbnN0IHJlcyA9IHRvTnVtYmVyKHZhbCk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBhc3NlcnROdW1iZXIocmVzLCAnPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uJyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xuICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGVsLmNsYXNzTGlzdC5hZGQoYykpO1xuICAgIChlbC5fdnRjIHx8XG4gICAgICAgIChlbC5fdnRjID0gbmV3IFNldCgpKSkuYWRkKGNscyk7XG59XG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xuICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgIGNvbnN0IHsgX3Z0YyB9ID0gZWw7XG4gICAgaWYgKF92dGMpIHtcbiAgICAgICAgX3Z0Yy5kZWxldGUoY2xzKTtcbiAgICAgICAgaWYgKCFfdnRjLnNpemUpIHtcbiAgICAgICAgICAgIGVsLl92dGMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBuZXh0RnJhbWUoY2IpIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xuICAgIH0pO1xufVxubGV0IGVuZElkID0gMDtcbmZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgZXhwZWN0ZWRUeXBlLCBleHBsaWNpdFRpbWVvdXQsIHJlc29sdmUpIHtcbiAgICBjb25zdCBpZCA9IChlbC5fZW5kSWQgPSArK2VuZElkKTtcbiAgICBjb25zdCByZXNvbHZlSWZOb3RTdGFsZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGlkID09PSBlbC5fZW5kSWQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKGV4cGxpY2l0VGltZW91dCkge1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlSWZOb3RTdGFsZSwgZXhwbGljaXRUaW1lb3V0KTtcbiAgICB9XG4gICAgY29uc3QgeyB0eXBlLCB0aW1lb3V0LCBwcm9wQ291bnQgfSA9IGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjb25zdCBlbmRFdmVudCA9IHR5cGUgKyAnZW5kJztcbiAgICBsZXQgZW5kZWQgPSAwO1xuICAgIGNvbnN0IGVuZCA9ICgpID0+IHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xuICAgICAgICByZXNvbHZlSWZOb3RTdGFsZSgpO1xuICAgIH07XG4gICAgY29uc3Qgb25FbmQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGVsICYmICsrZW5kZWQgPj0gcHJvcENvdW50KSB7XG4gICAgICAgICAgICBlbmQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xuICAgICAgICAgICAgZW5kKCk7XG4gICAgICAgIH1cbiAgICB9LCB0aW1lb3V0ICsgMSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSkge1xuICAgIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgICAvLyBKU0RPTSBtYXkgcmV0dXJuIHVuZGVmaW5lZCBmb3IgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzXG4gICAgY29uc3QgZ2V0U3R5bGVQcm9wZXJ0aWVzID0gKGtleSkgPT4gKHN0eWxlc1trZXldIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCB0cmFuc2l0aW9uRGVsYXlzID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059RGVsYXlgKTtcbiAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059RHVyYXRpb25gKTtcbiAgICBjb25zdCB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XG4gICAgY29uc3QgYW5pbWF0aW9uRGVsYXlzID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke0FOSU1BVElPTn1EZWxheWApO1xuICAgIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtBTklNQVRJT059RHVyYXRpb25gKTtcbiAgICBjb25zdCBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XG4gICAgbGV0IHR5cGUgPSBudWxsO1xuICAgIGxldCB0aW1lb3V0ID0gMDtcbiAgICBsZXQgcHJvcENvdW50ID0gMDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHR5cGUgPSBUUkFOU0lUSU9OO1xuICAgICAgICAgICAgdGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0O1xuICAgICAgICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICB0eXBlID0gQU5JTUFUSU9OO1xuICAgICAgICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7XG4gICAgICAgICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpO1xuICAgICAgICB0eXBlID1cbiAgICAgICAgICAgIHRpbWVvdXQgPiAwXG4gICAgICAgICAgICAgICAgPyB0cmFuc2l0aW9uVGltZW91dCA+IGFuaW1hdGlvblRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgPyBUUkFOU0lUSU9OXG4gICAgICAgICAgICAgICAgICAgIDogQU5JTUFUSU9OXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBwcm9wQ291bnQgPSB0eXBlXG4gICAgICAgICAgICA/IHR5cGUgPT09IFRSQU5TSVRJT05cbiAgICAgICAgICAgICAgICA/IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICA6IDA7XG4gICAgfVxuICAgIGNvbnN0IGhhc1RyYW5zZm9ybSA9IHR5cGUgPT09IFRSQU5TSVRJT04gJiZcbiAgICAgICAgL1xcYih0cmFuc2Zvcm18YWxsKSgsfCQpLy50ZXN0KGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfVByb3BlcnR5YCkudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdGltZW91dCxcbiAgICAgICAgcHJvcENvdW50LFxuICAgICAgICBoYXNUcmFuc2Zvcm1cbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0VGltZW91dChkZWxheXMsIGR1cmF0aW9ucykge1xuICAgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBkZWxheXMgPSBkZWxheXMuY29uY2F0KGRlbGF5cyk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCguLi5kdXJhdGlvbnMubWFwKChkLCBpKSA9PiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pKSk7XG59XG4vLyBPbGQgdmVyc2lvbnMgb2YgQ2hyb21pdW0gKGJlbG93IDYxLjAuMzE2My4xMDApIGZvcm1hdHMgZmxvYXRpbmcgcG9pbnRlclxuLy8gbnVtYmVycyBpbiBhIGxvY2FsZS1kZXBlbmRlbnQgd2F5LCB1c2luZyBhIGNvbW1hIGluc3RlYWQgb2YgYSBkb3QuXG4vLyBJZiBjb21tYSBpcyBub3QgcmVwbGFjZWQgd2l0aCBhIGRvdCwgdGhlIGlucHV0IHdpbGwgYmUgcm91bmRlZCBkb3duXG4vLyAoaS5lLiBhY3RpbmcgYXMgYSBmbG9vciBmdW5jdGlvbikgY2F1c2luZyB1bmV4cGVjdGVkIGJlaGF2aW9yc1xuZnVuY3Rpb24gdG9NcyhzKSB7XG4gICAgcmV0dXJuIE51bWJlcihzLnNsaWNlKDAsIC0xKS5yZXBsYWNlKCcsJywgJy4nKSkgKiAxMDAwO1xufVxuLy8gc3luY2hyb25vdXNseSBmb3JjZSBsYXlvdXQgdG8gcHV0IGVsZW1lbnRzIGludG8gYSBjZXJ0YWluIHN0YXRlXG5mdW5jdGlvbiBmb3JjZVJlZmxvdygpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XG59XG5cbmNvbnN0IHBvc2l0aW9uTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG5ld1Bvc2l0aW9uTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cEltcGwgPSB7XG4gICAgbmFtZTogJ1RyYW5zaXRpb25Hcm91cCcsXG4gICAgcHJvcHM6IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLCB7XG4gICAgICAgIHRhZzogU3RyaW5nLFxuICAgICAgICBtb3ZlQ2xhc3M6IFN0cmluZ1xuICAgIH0pLFxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB1c2VUcmFuc2l0aW9uU3RhdGUoKTtcbiAgICAgICAgbGV0IHByZXZDaGlsZHJlbjtcbiAgICAgICAgbGV0IGNoaWxkcmVuO1xuICAgICAgICBvblVwZGF0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gY2hpbGRyZW4gaXMgZ3VhcmFudGVlZCB0byBleGlzdCBhZnRlciBpbml0aWFsIHJlbmRlclxuICAgICAgICAgICAgaWYgKCFwcmV2Q2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW92ZUNsYXNzID0gcHJvcHMubW92ZUNsYXNzIHx8IGAke3Byb3BzLm5hbWUgfHwgJ3YnfS1tb3ZlYDtcbiAgICAgICAgICAgIGlmICghaGFzQ1NTVHJhbnNmb3JtKHByZXZDaGlsZHJlblswXS5lbCwgaW5zdGFuY2Uudm5vZGUuZWwsIG1vdmVDbGFzcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSBkaXZpZGUgdGhlIHdvcmsgaW50byB0aHJlZSBsb29wcyB0byBhdm9pZCBtaXhpbmcgRE9NIHJlYWRzIGFuZCB3cml0ZXNcbiAgICAgICAgICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLlxuICAgICAgICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuICAgICAgICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pO1xuICAgICAgICAgICAgY29uc3QgbW92ZWRDaGlsZHJlbiA9IHByZXZDaGlsZHJlbi5maWx0ZXIoYXBwbHlUcmFuc2xhdGlvbik7XG4gICAgICAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb25cbiAgICAgICAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICAgICAgICBtb3ZlZENoaWxkcmVuLmZvckVhY2goYyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSBjLmVsO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNiID0gKGVsLl9tb3ZlQ2IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCAhPT0gZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgY2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwuX21vdmVDYiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgY2IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgICAgICAgICBjb25zdCBjc3NUcmFuc2l0aW9uUHJvcHMgPSByZXNvbHZlVHJhbnNpdGlvblByb3BzKHJhd1Byb3BzKTtcbiAgICAgICAgICAgIGxldCB0YWcgPSByYXdQcm9wcy50YWcgfHwgRnJhZ21lbnQ7XG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCA/IGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihzbG90cy5kZWZhdWx0KCkpIDogW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGNoaWxkLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGNoaWxkLCBjc3NUcmFuc2l0aW9uUHJvcHMsIHN0YXRlLCBpbnN0YW5jZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgPFRyYW5zaXRpb25Hcm91cD4gY2hpbGRyZW4gbXVzdCBiZSBrZXllZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJldkNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBwcmV2Q2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhjaGlsZCwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhjaGlsZCwgY3NzVHJhbnNpdGlvblByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25NYXAuc2V0KGNoaWxkLCBjaGlsZC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHRhZywgbnVsbCwgY2hpbGRyZW4pO1xuICAgICAgICB9O1xuICAgIH1cbn07XG4vKipcbiAqIFRyYW5zaXRpb25Hcm91cCBkb2VzIG5vdCBzdXBwb3J0IFwibW9kZVwiIHNvIHdlIG5lZWQgdG8gcmVtb3ZlIGl0IGZyb20gdGhlXG4gKiBwcm9wcyBkZWNsYXJhdGlvbnMsIGJ1dCBkaXJlY3QgZGVsZXRlIG9wZXJhdGlvbiBpcyBjb25zaWRlcmVkIGEgc2lkZSBlZmZlY3RcbiAqIGFuZCB3aWxsIG1ha2UgdGhlIGVudGlyZSB0cmFuc2l0aW9uIGZlYXR1cmUgbm9uLXRyZWUtc2hha2VhYmxlLCBzbyB3ZSBkbyBpdFxuICogaW4gYSBmdW5jdGlvbiBhbmQgbWFyayB0aGUgZnVuY3Rpb24ncyBpbnZvY2F0aW9uIGFzIHB1cmUuXG4gKi9cbmNvbnN0IHJlbW92ZU1vZGUgPSAocHJvcHMpID0+IGRlbGV0ZSBwcm9wcy5tb2RlO1xuLyojX19QVVJFX18qLyByZW1vdmVNb2RlKFRyYW5zaXRpb25Hcm91cEltcGwucHJvcHMpO1xuY29uc3QgVHJhbnNpdGlvbkdyb3VwID0gVHJhbnNpdGlvbkdyb3VwSW1wbDtcbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzKGMpIHtcbiAgICBjb25zdCBlbCA9IGMuZWw7XG4gICAgaWYgKGVsLl9tb3ZlQ2IpIHtcbiAgICAgICAgZWwuX21vdmVDYigpO1xuICAgIH1cbiAgICBpZiAoZWwuX2VudGVyQ2IpIHtcbiAgICAgICAgZWwuX2VudGVyQ2IoKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbihjKSB7XG4gICAgbmV3UG9zaXRpb25NYXAuc2V0KGMsIGMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xufVxuZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKSB7XG4gICAgY29uc3Qgb2xkUG9zID0gcG9zaXRpb25NYXAuZ2V0KGMpO1xuICAgIGNvbnN0IG5ld1BvcyA9IG5ld1Bvc2l0aW9uTWFwLmdldChjKTtcbiAgICBjb25zdCBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XG4gICAgY29uc3QgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgICBpZiAoZHggfHwgZHkpIHtcbiAgICAgICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XG4gICAgICAgIHMudHJhbnNmb3JtID0gcy53ZWJraXRUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7ZHh9cHgsJHtkeX1weClgO1xuICAgICAgICBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwcyc7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XG4gICAgLy8gRGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3ZlIGNsYXNzIGFwcGxpZWQgaGFzXG4gICAgLy8gQ1NTIHRyYW5zaXRpb25zLiBTaW5jZSB0aGUgZWxlbWVudCBtYXkgYmUgaW5zaWRlIGFuIGVudGVyaW5nXG4gICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZVxuICAgIC8vIGFsbCBvdGhlciB0cmFuc2l0aW9uIGNsYXNzZXMgYXBwbGllZCB0byBlbnN1cmUgb25seSB0aGUgbW92ZSBjbGFzc1xuICAgIC8vIGlzIGFwcGxpZWQuXG4gICAgY29uc3QgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcbiAgICBpZiAoZWwuX3Z0Yykge1xuICAgICAgICBlbC5fdnRjLmZvckVhY2goY2xzID0+IHtcbiAgICAgICAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbW92ZUNsYXNzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XG4gICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjb25zdCBjb250YWluZXIgPSAocm9vdC5ub2RlVHlwZSA9PT0gMSA/IHJvb3QgOiByb290LnBhcmVudE5vZGUpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgY29uc3QgeyBoYXNUcmFuc2Zvcm0gfSA9IGdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY2xvbmUpO1xuICAgIHJldHVybiBoYXNUcmFuc2Zvcm07XG59XG5cbmNvbnN0IGdldE1vZGVsQXNzaWduZXIgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCBmbiA9IHZub2RlLnByb3BzWydvblVwZGF0ZTptb2RlbFZhbHVlJ10gfHxcbiAgICAgICAgKGZhbHNlICk7XG4gICAgcmV0dXJuIGlzQXJyYXkoZm4pID8gdmFsdWUgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xufTtcbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydChlKSB7XG4gICAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25FbmQoZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQuY29tcG9zaW5nKSB7XG4gICAgICAgIHRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICB9XG59XG4vLyBXZSBhcmUgZXhwb3J0aW5nIHRoZSB2LW1vZGVsIHJ1bnRpbWUgZGlyZWN0bHkgYXMgdm5vZGUgaG9va3Mgc28gdGhhdCBpdCBjYW5cbi8vIGJlIHRyZWUtc2hha2VuIGluIGNhc2Ugdi1tb2RlbCBpcyBuZXZlciB1c2VkLlxuY29uc3Qgdk1vZGVsVGV4dCA9IHtcbiAgICBjcmVhdGVkKGVsLCB7IG1vZGlmaWVyczogeyBsYXp5LCB0cmltLCBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCAodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSA9PT0gJ251bWJlcicpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBsYXp5ID8gJ2NoYW5nZScgOiAnaW5wdXQnLCBlID0+IHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jb21wb3NpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGRvbVZhbHVlID0gZWwudmFsdWU7XG4gICAgICAgICAgICBpZiAodHJpbSkge1xuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gZG9tVmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhc3RUb051bWJlcikge1xuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gbG9vc2VUb051bWJlcihkb21WYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbC5fYXNzaWduKGRvbVZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0cmltKSB7XG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gZWwudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydCk7XG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY29tcG9zaXRpb25lbmQnLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cbiAgICAgICAgICAgIC8vIHN3aXRjaGluZyBmb2N1cyBiZWZvcmUgY29uZmlybWluZyBjb21wb3NpdGlvbiBjaG9pY2VcbiAgICAgICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWVcbiAgICAgICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyBzZXQgdmFsdWUgb24gbW91bnRlZCBzbyBpdCdzIGFmdGVyIG1pbi9tYXggZm9yIHR5cGU9XCJyYW5nZVwiXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGUoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBsYXp5LCB0cmltLCBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIC8vIGF2b2lkIGNsZWFyaW5nIHVucmVzb2x2ZWQgdGV4dC4gIzIzMDJcbiAgICAgICAgaWYgKGVsLmNvbXBvc2luZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsICYmIGVsLnR5cGUgIT09ICdyYW5nZScpIHtcbiAgICAgICAgICAgIGlmIChsYXp5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyaW0gJiYgZWwudmFsdWUudHJpbSgpID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgobnVtYmVyIHx8IGVsLnR5cGUgPT09ICdudW1iZXInKSAmJlxuICAgICAgICAgICAgICAgIGxvb3NlVG9OdW1iZXIoZWwudmFsdWUpID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICBpZiAoZWwudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IHZNb2RlbENoZWNrYm94ID0ge1xuICAgIC8vICM0MDk2IGFycmF5IGNoZWNrYm94ZXMgbmVlZCB0byBiZSBkZWVwIHRyYXZlcnNlZFxuICAgIGRlZXA6IHRydWUsXG4gICAgY3JlYXRlZChlbCwgXywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsLl9tb2RlbFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFZhbHVlID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGVsLmNoZWNrZWQ7XG4gICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBlbC5fYXNzaWduO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGxvb3NlSW5kZXhPZihtb2RlbFZhbHVlLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkICYmICFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ24obW9kZWxWYWx1ZS5jb25jYXQoZWxlbWVudFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjaGVja2VkICYmIGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gWy4uLm1vZGVsVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ24oZmlsdGVyZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzU2V0KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gbmV3IFNldChtb2RlbFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWQuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWQuZGVsZXRlKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFzc2lnbihjbG9uZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzZXQgaW5pdGlhbCBjaGVja2VkIG9uIG1vdW50IHRvIHdhaXQgZm9yIHRydWUtdmFsdWUvZmFsc2UtdmFsdWVcbiAgICBtb3VudGVkOiBzZXRDaGVja2VkLFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgICAgICBzZXRDaGVja2VkKGVsLCBiaW5kaW5nLCB2bm9kZSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNldENoZWNrZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBnZXRDaGVja2JveFZhbHVlKGVsLCB0cnVlKSk7XG4gICAgfVxufVxuY29uc3Qgdk1vZGVsUmFkaW8gPSB7XG4gICAgY3JlYXRlZChlbCwgeyB2YWx1ZSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBlbC5fYXNzaWduKGdldFZhbHVlKGVsKSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3Qgdk1vZGVsU2VsZWN0ID0ge1xuICAgIC8vIDxzZWxlY3QgbXVsdGlwbGU+IHZhbHVlIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcbiAgICBkZWVwOiB0cnVlLFxuICAgIGNyZWF0ZWQoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgICAgICBjb25zdCBpc1NldE1vZGVsID0gaXNTZXQodmFsdWUpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRWYWwgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyXG4gICAgICAgICAgICAgICAgLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgLm1hcCgobykgPT4gbnVtYmVyID8gbG9vc2VUb051bWJlcihnZXRWYWx1ZShvKSkgOiBnZXRWYWx1ZShvKSk7XG4gICAgICAgICAgICBlbC5fYXNzaWduKGVsLm11bHRpcGxlXG4gICAgICAgICAgICAgICAgPyBpc1NldE1vZGVsXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IFNldChzZWxlY3RlZFZhbClcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxlY3RlZFZhbFxuICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRWYWxbMF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIH0sXG4gICAgLy8gc2V0IHZhbHVlIGluIG1vdW50ZWQgJiB1cGRhdGVkIGJlY2F1c2UgPHNlbGVjdD4gcmVsaWVzIG9uIGl0cyBjaGlsZHJlblxuICAgIC8vIDxvcHRpb24+cy5cbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgICB9LFxuICAgIGJlZm9yZVVwZGF0ZShlbCwgX2JpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICB9LFxuICAgIHVwZGF0ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBzZXRTZWxlY3RlZChlbCwgdmFsdWUpIHtcbiAgICBjb25zdCBpc011bHRpcGxlID0gZWwubXVsdGlwbGU7XG4gICAgaWYgKGlzTXVsdGlwbGUgJiYgIWlzQXJyYXkodmFsdWUpICYmICFpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKGA8c2VsZWN0IG11bHRpcGxlIHYtbW9kZWw+IGV4cGVjdHMgYW4gQXJyYXkgb3IgU2V0IHZhbHVlIGZvciBpdHMgYmluZGluZywgYCArXG4gICAgICAgICAgICAgICAgYGJ1dCBnb3QgJHtPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKX0uYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xuICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IGdldFZhbHVlKG9wdGlvbik7XG4gICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIG9wdGlvblZhbHVlKSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdmFsdWUuaGFzKG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKVxuICAgICAgICAgICAgICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc011bHRpcGxlICYmIGVsLnNlbGVjdGVkSW5kZXggIT09IC0xKSB7XG4gICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICB9XG59XG4vLyByZXRyaWV2ZSByYXcgdmFsdWUgc2V0IHZpYSA6dmFsdWUgYmluZGluZ3NcbmZ1bmN0aW9uIGdldFZhbHVlKGVsKSB7XG4gICAgcmV0dXJuICdfdmFsdWUnIGluIGVsID8gZWwuX3ZhbHVlIDogZWwudmFsdWU7XG59XG4vLyByZXRyaWV2ZSByYXcgdmFsdWUgZm9yIHRydWUtdmFsdWUgYW5kIGZhbHNlLXZhbHVlIHNldCB2aWEgOnRydWUtdmFsdWUgb3IgOmZhbHNlLXZhbHVlIGJpbmRpbmdzXG5mdW5jdGlvbiBnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSB7XG4gICAgY29uc3Qga2V5ID0gY2hlY2tlZCA/ICdfdHJ1ZVZhbHVlJyA6ICdfZmFsc2VWYWx1ZSc7XG4gICAgcmV0dXJuIGtleSBpbiBlbCA/IGVsW2tleV0gOiBjaGVja2VkO1xufVxuY29uc3Qgdk1vZGVsRHluYW1pYyA9IHtcbiAgICBjcmVhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgbnVsbCwgJ2NyZWF0ZWQnKTtcbiAgICB9LFxuICAgIG1vdW50ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCAnbW91bnRlZCcpO1xuICAgIH0sXG4gICAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsICdiZWZvcmVVcGRhdGUnKTtcbiAgICB9LFxuICAgIHVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgJ3VwZGF0ZWQnKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcmVzb2x2ZUR5bmFtaWNNb2RlbCh0YWdOYW1lLCB0eXBlKSB7XG4gICAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgJ1NFTEVDVCc6XG4gICAgICAgICAgICByZXR1cm4gdk1vZGVsU2VsZWN0O1xuICAgICAgICBjYXNlICdURVhUQVJFQSc6XG4gICAgICAgICAgICByZXR1cm4gdk1vZGVsVGV4dDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZNb2RlbENoZWNrYm94O1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZNb2RlbFJhZGlvO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgICAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsIGhvb2spIHtcbiAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChlbC50YWdOYW1lLCB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlKTtcbiAgICBjb25zdCBmbiA9IG1vZGVsVG9Vc2VbaG9va107XG4gICAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xufVxuLy8gU1NSIHZub2RlIHRyYW5zZm9ybXMsIG9ubHkgdXNlZCB3aGVuIHVzZXIgaW5jbHVkZXMgY2xpZW50LW9yaWVudGVkIHJlbmRlclxuLy8gZnVuY3Rpb24gaW4gU1NSXG5mdW5jdGlvbiBpbml0Vk1vZGVsRm9yU1NSKCkge1xuICAgIHZNb2RlbFRleHQuZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9KSA9PiAoeyB2YWx1ZSB9KTtcbiAgICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgICAgIGlmICh2bm9kZS5wcm9wcyAmJiBsb29zZUVxdWFsKHZub2RlLnByb3BzLnZhbHVlLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdk1vZGVsQ2hlY2tib3guZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICh2bm9kZS5wcm9wcyAmJiBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdk1vZGVsRHluYW1pYy5nZXRTU1JQcm9wcyA9IChiaW5kaW5nLCB2bm9kZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZub2RlLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoXG4gICAgICAgIC8vIHJlc29sdmVEeW5hbWljTW9kZWwgZXhwZWN0cyBhbiB1cHBlcmNhc2UgdGFnIG5hbWUsIGJ1dCB2bm9kZS50eXBlIGlzIGxvd2VyY2FzZVxuICAgICAgICB2bm9kZS50eXBlLnRvVXBwZXJDYXNlKCksIHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUpO1xuICAgICAgICBpZiAobW9kZWxUb1VzZS5nZXRTU1JQcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIG1vZGVsVG9Vc2UuZ2V0U1NSUHJvcHMoYmluZGluZywgdm5vZGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3Qgc3lzdGVtTW9kaWZpZXJzID0gWydjdHJsJywgJ3NoaWZ0JywgJ2FsdCcsICdtZXRhJ107XG5jb25zdCBtb2RpZmllckd1YXJkcyA9IHtcbiAgICBzdG9wOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gICAgcHJldmVudDogZSA9PiBlLnByZXZlbnREZWZhdWx0KCksXG4gICAgc2VsZjogZSA9PiBlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0LFxuICAgIGN0cmw6IGUgPT4gIWUuY3RybEtleSxcbiAgICBzaGlmdDogZSA9PiAhZS5zaGlmdEtleSxcbiAgICBhbHQ6IGUgPT4gIWUuYWx0S2V5LFxuICAgIG1ldGE6IGUgPT4gIWUubWV0YUtleSxcbiAgICBsZWZ0OiBlID0+ICdidXR0b24nIGluIGUgJiYgZS5idXR0b24gIT09IDAsXG4gICAgbWlkZGxlOiBlID0+ICdidXR0b24nIGluIGUgJiYgZS5idXR0b24gIT09IDEsXG4gICAgcmlnaHQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcbiAgICBleGFjdDogKGUsIG1vZGlmaWVycykgPT4gc3lzdGVtTW9kaWZpZXJzLnNvbWUobSA9PiBlW2Ake219S2V5YF0gJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhtKSlcbn07XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHdpdGhNb2RpZmllcnMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xuICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gbW9kaWZpZXJHdWFyZHNbbW9kaWZpZXJzW2ldXTtcbiAgICAgICAgICAgIGlmIChndWFyZCAmJiBndWFyZChldmVudCwgbW9kaWZpZXJzKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuKGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9O1xufTtcbi8vIEtlcHQgZm9yIDIueCBjb21wYXQuXG4vLyBOb3RlOiBJRTExIGNvbXBhdCBmb3IgYHNwYWNlYmFyYCBhbmQgYGRlbGAgaXMgcmVtb3ZlZCBmb3Igbm93LlxuY29uc3Qga2V5TmFtZXMgPSB7XG4gICAgZXNjOiAnZXNjYXBlJyxcbiAgICBzcGFjZTogJyAnLFxuICAgIHVwOiAnYXJyb3ctdXAnLFxuICAgIGxlZnQ6ICdhcnJvdy1sZWZ0JyxcbiAgICByaWdodDogJ2Fycm93LXJpZ2h0JyxcbiAgICBkb3duOiAnYXJyb3ctZG93bicsXG4gICAgZGVsZXRlOiAnYmFja3NwYWNlJ1xufTtcbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3Qgd2l0aEtleXMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xuICAgIHJldHVybiAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCEoJ2tleScgaW4gZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnRLZXkgPSBoeXBoZW5hdGUoZXZlbnQua2V5KTtcbiAgICAgICAgaWYgKG1vZGlmaWVycy5zb21lKGsgPT4gayA9PT0gZXZlbnRLZXkgfHwga2V5TmFtZXNba10gPT09IGV2ZW50S2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZuKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG5jb25zdCB2U2hvdyA9IHtcbiAgICBiZWZvcmVNb3VudChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgICAgICBlbC5fdm9kID0gZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICBpZiAodHJhbnNpdGlvbiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB1cGRhdGVkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgICAgICBpZiAoIXZhbHVlID09PSAhb2xkVmFsdWUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgICAgICAgICBzZXREaXNwbGF5KGVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24ubGVhdmUoZWwsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBiZWZvcmVVbm1vdW50KGVsLCB7IHZhbHVlIH0pIHtcbiAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBzZXREaXNwbGF5KGVsLCB2YWx1ZSkge1xuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IGVsLl92b2QgOiAnbm9uZSc7XG59XG4vLyBTU1Igdm5vZGUgdHJhbnNmb3Jtcywgb25seSB1c2VkIHdoZW4gdXNlciBpbmNsdWRlcyBjbGllbnQtb3JpZW50ZWQgcmVuZGVyXG4vLyBmdW5jdGlvbiBpbiBTU1JcbmZ1bmN0aW9uIGluaXRWU2hvd0ZvclNTUigpIHtcbiAgICB2U2hvdy5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+IHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3R5bGU6IHsgZGlzcGxheTogJ25vbmUnIH0gfTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmNvbnN0IHJlbmRlcmVyT3B0aW9ucyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHsgcGF0Y2hQcm9wIH0sIG5vZGVPcHMpO1xuLy8gbGF6eSBjcmVhdGUgdGhlIHJlbmRlcmVyIC0gdGhpcyBtYWtlcyBjb3JlIHJlbmRlcmVyIGxvZ2ljIHRyZWUtc2hha2FibGVcbi8vIGluIGNhc2UgdGhlIHVzZXIgb25seSBpbXBvcnRzIHJlYWN0aXZpdHkgdXRpbGl0aWVzIGZyb20gVnVlLlxubGV0IHJlbmRlcmVyO1xubGV0IGVuYWJsZWRIeWRyYXRpb24gPSBmYWxzZTtcbmZ1bmN0aW9uIGVuc3VyZVJlbmRlcmVyKCkge1xuICAgIHJldHVybiAocmVuZGVyZXIgfHxcbiAgICAgICAgKHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKSkpO1xufVxuZnVuY3Rpb24gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKSB7XG4gICAgcmVuZGVyZXIgPSBlbmFibGVkSHlkcmF0aW9uXG4gICAgICAgID8gcmVuZGVyZXJcbiAgICAgICAgOiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpO1xuICAgIGVuYWJsZWRIeWRyYXRpb24gPSB0cnVlO1xuICAgIHJldHVybiByZW5kZXJlcjtcbn1cbi8vIHVzZSBleHBsaWNpdCB0eXBlIGNhc3RzIGhlcmUgdG8gYXZvaWQgaW1wb3J0KCkgY2FsbHMgaW4gcm9sbGVkLXVwIGQudHNcbmNvbnN0IHJlbmRlciA9ICgoLi4uYXJncykgPT4ge1xuICAgIGVuc3VyZVJlbmRlcmVyKCkucmVuZGVyKC4uLmFyZ3MpO1xufSk7XG5jb25zdCBoeWRyYXRlID0gKCguLi5hcmdzKSA9PiB7XG4gICAgZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5oeWRyYXRlKC4uLmFyZ3MpO1xufSk7XG5jb25zdCBjcmVhdGVBcHAgPSAoKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBhcHAgPSBlbnN1cmVSZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XG4gICAgICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XG4gICAgfVxuICAgIGNvbnN0IHsgbW91bnQgfSA9IGFwcDtcbiAgICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XG4gICAgICAgIGlmICghY29udGFpbmVyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBhcHAuX2NvbXBvbmVudDtcbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGNvbXBvbmVudCkgJiYgIWNvbXBvbmVudC5yZW5kZXIgJiYgIWNvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgLy8gX19VTlNBRkVfX1xuICAgICAgICAgICAgLy8gUmVhc29uOiBwb3RlbnRpYWwgZXhlY3V0aW9uIG9mIEpTIGV4cHJlc3Npb25zIGluIGluLURPTSB0ZW1wbGF0ZS5cbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIG11c3QgbWFrZSBzdXJlIHRoZSBpbi1ET00gdGVtcGxhdGUgaXMgdHJ1c3RlZC4gSWYgaXQnc1xuICAgICAgICAgICAgLy8gcmVuZGVyZWQgYnkgdGhlIHNlcnZlciwgdGhlIHRlbXBsYXRlIHNob3VsZCBub3QgY29udGFpbiBhbnkgdXNlciBkYXRhLlxuICAgICAgICAgICAgY29tcG9uZW50LnRlbXBsYXRlID0gY29udGFpbmVyLmlubmVySFRNTDtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhciBjb250ZW50IGJlZm9yZSBtb3VudGluZ1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gbW91bnQoY29udGFpbmVyLCBmYWxzZSwgY29udGFpbmVyIGluc3RhbmNlb2YgU1ZHRWxlbWVudCk7XG4gICAgICAgIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG4gICAgICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXYtYXBwJywgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm94eTtcbiAgICB9O1xuICAgIHJldHVybiBhcHA7XG59KTtcbmNvbnN0IGNyZWF0ZVNTUkFwcCA9ICgoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGFwcCA9IGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcbiAgICAgICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgICB9XG4gICAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICAgIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIG1vdW50KGNvbnRhaW5lciwgdHJ1ZSwgY29udGFpbmVyIGluc3RhbmNlb2YgU1ZHRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhcHA7XG59KTtcbmZ1bmN0aW9uIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCkge1xuICAgIC8vIEluamVjdCBgaXNOYXRpdmVUYWdgXG4gICAgLy8gdGhpcyBpcyB1c2VkIGZvciBjb21wb25lbnQgbmFtZSB2YWxpZGF0aW9uIChkZXYgb25seSlcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2lzTmF0aXZlVGFnJywge1xuICAgICAgICB2YWx1ZTogKHRhZykgPT4gaXNIVE1MVGFnKHRhZykgfHwgaXNTVkdUYWcodGFnKSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgfSk7XG59XG4vLyBkZXYgb25seVxuZnVuY3Rpb24gaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKSB7XG4gICAgaWYgKGlzUnVudGltZU9ubHkoKSkge1xuICAgICAgICBjb25zdCBpc0N1c3RvbUVsZW1lbnQgPSBhcHAuY29uZmlnLmlzQ3VzdG9tRWxlbWVudDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsICdpc0N1c3RvbUVsZW1lbnQnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzQ3VzdG9tRWxlbWVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoKSB7XG4gICAgICAgICAgICAgICAgd2FybihgVGhlIFxcYGlzQ3VzdG9tRWxlbWVudFxcYCBjb25maWcgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuIFVzZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYFxcYGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnRcXGAgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVyT3B0aW9ucyA9IGFwcC5jb25maWcuY29tcGlsZXJPcHRpb25zO1xuICAgICAgICBjb25zdCBtc2cgPSBgVGhlIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBjb25maWcgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgYCArXG4gICAgICAgICAgICBgYSBidWlsZCBvZiBWdWUuanMgdGhhdCBpbmNsdWRlcyB0aGUgcnVudGltZSBjb21waWxlciAoYWthIFwiZnVsbCBidWlsZFwiKS4gYCArXG4gICAgICAgICAgICBgU2luY2UgeW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkLCBcXGBjb21waWxlck9wdGlvbnNcXGAgYCArXG4gICAgICAgICAgICBgbXVzdCBiZSBwYXNzZWQgdG8gXFxgQHZ1ZS9jb21waWxlci1kb21cXGAgaW4gdGhlIGJ1aWxkIHNldHVwIGluc3RlYWQuXFxuYCArXG4gICAgICAgICAgICBgLSBGb3IgdnVlLWxvYWRlcjogcGFzcyBpdCB2aWEgdnVlLWxvYWRlcidzIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBsb2FkZXIgb3B0aW9uLlxcbmAgK1xuICAgICAgICAgICAgYC0gRm9yIHZ1ZS1jbGk6IHNlZSBodHRwczovL2NsaS52dWVqcy5vcmcvZ3VpZGUvd2VicGFjay5odG1sI21vZGlmeWluZy1vcHRpb25zLW9mLWEtbG9hZGVyXFxuYCArXG4gICAgICAgICAgICBgLSBGb3Igdml0ZTogcGFzcyBpdCB2aWEgQHZpdGVqcy9wbHVnaW4tdnVlIG9wdGlvbnMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdml0ZWpzL3ZpdGUvdHJlZS9tYWluL3BhY2thZ2VzL3BsdWdpbi12dWUjZXhhbXBsZS1mb3ItcGFzc2luZy1vcHRpb25zLXRvLXZ1ZWNvbXBpbGVyLWRvbWA7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnY29tcGlsZXJPcHRpb25zJywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZXJPcHRpb25zO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCgpIHtcbiAgICAgICAgICAgICAgICB3YXJuKG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXIpIHtcbiAgICBpZiAoaXNTdHJpbmcoY29udGFpbmVyKSkge1xuICAgICAgICBjb25zdCByZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXJlcykge1xuICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIG1vdW50IGFwcDogbW91bnQgdGFyZ2V0IHNlbGVjdG9yIFwiJHtjb250YWluZXJ9XCIgcmV0dXJuZWQgbnVsbC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIHdpbmRvdy5TaGFkb3dSb290ICYmXG4gICAgICAgIGNvbnRhaW5lciBpbnN0YW5jZW9mIHdpbmRvdy5TaGFkb3dSb290ICYmXG4gICAgICAgIGNvbnRhaW5lci5tb2RlID09PSAnY2xvc2VkJykge1xuICAgICAgICB3YXJuKGBtb3VudGluZyBvbiBhIFNoYWRvd1Jvb3Qgd2l0aCBcXGB7bW9kZTogXCJjbG9zZWRcIn1cXGAgbWF5IGxlYWQgdG8gdW5wcmVkaWN0YWJsZSBidWdzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb250YWluZXI7XG59XG5sZXQgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IGluaXREaXJlY3RpdmVzRm9yU1NSID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXNzckRpcmVjdGl2ZUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBpbml0Vk1vZGVsRm9yU1NSKCk7XG4gICAgICAgICAgICBpbml0VlNob3dGb3JTU1IoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICA7XG5cbmV4cG9ydCB7IFRyYW5zaXRpb24sIFRyYW5zaXRpb25Hcm91cCwgVnVlRWxlbWVudCwgY3JlYXRlQXBwLCBjcmVhdGVTU1JBcHAsIGRlZmluZUN1c3RvbUVsZW1lbnQsIGRlZmluZVNTUkN1c3RvbUVsZW1lbnQsIGh5ZHJhdGUsIGluaXREaXJlY3RpdmVzRm9yU1NSLCByZW5kZXIsIHVzZUNzc01vZHVsZSwgdXNlQ3NzVmFycywgdk1vZGVsQ2hlY2tib3gsIHZNb2RlbER5bmFtaWMsIHZNb2RlbFJhZGlvLCB2TW9kZWxTZWxlY3QsIHZNb2RlbFRleHQsIHZTaG93LCB3aXRoS2V5cywgd2l0aE1vZGlmaWVycyB9O1xuIiwiZXhwb3J0IGNsYXNzIFVzZXIge1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZXMsIGRvbWFpbl9vcmlnaW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgaGFzIGJlZW4gaW5zdGFudGlhdGVkLlwiKVxyXG4gICAgICAgIHRoaXMuZG9tYWluX29yaWdpbiA9IGRvbWFpbl9vcmlnaW5cclxuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XHJcbiAgICAgICAgdGhpcy5sb2dpbl9lbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5sb2dpbl9wYXNzd29yZCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy51c2VyID0ge307XHJcbiAgICAgICAgdGhpcy5jaGVja2luZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGFzc3dvcmRfYXV0aG9yaXNlZCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5tZmFfYXV0aG9yaXNlZCA9IGZhbHNlXHJcbiAgICAgICAgdGhpcy5sb2dnZWRfaW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1mYV9zZWNyZXRfY29uZmlybWVkID0gZmFsc2VcclxuICAgICAgICB0aGlzLm1mYV9xcl9pbWFnZSA9IFtdXHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IFwiXCJcclxuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5yb2xlX25hbWUgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5pcF9hZGRyZXNzID0gXCIxMjcuMC4wLjFcIlxyXG4gICAgICAgIHRoaXMubWZhX2F1dGhlbnRpY2F0b3JfY29kZSA9IFwiXCJcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkX3Rva2VuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uX2p3dCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X21mYV9qd3RfZnJvbV9sb2NhbF9zdG9yYWdlKGVtYWlsKXtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtZmFfand0X1wiK2VtYWlsKVxyXG4gICAgfVxyXG5cclxuICAgIGdldF9pcF9hZGRyZXNzKCkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFwiaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uXCJcclxuICAgICAgICBmZXRjaCh1cmwpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpX3Jlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlwX2FkZHJlc3MgPSBhcGlfcmVzdWx0LmlwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVbmFibGUgdG8gZ2V0IGlwIGFkZHJlc3MgZnJvbSBhcGksIHNldCBpcF9hZGRyZXNzIHRvIGJlIHNlbGYgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlwX2FkZHJlc3MgPSBcIjEyNy4wLjAuMVwiXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBpX3Jlc2V0X3Bhc3N3b3JkX3JlcXVlc3QoZW1haWwpIHtcclxuXHJcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7fVxyXG4gICAgICAgIHBheWxvYWQuZW1haWwgPSBlbWFpbFxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJcIlxyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArICcvYXBpX3Jlc2V0X3Bhc3N3b3JkX3JlcXVlc3QnXHJcbiAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihhcGlfb2JqZWN0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBpX3Jlc2V0X3Bhc3N3b3JkKGlucHV0KSB7XHJcblxyXG4gICAgICAgIHZhciBwYXlsb2FkID0ge31cclxuICAgICAgICBwYXlsb2FkLnNlc3Npb25fand0ID0gdGhpcy5zZXNzaW9uX2p3dFxyXG4gICAgICAgIHBheWxvYWQuaW5wdXQgPSBpbnB1dFxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJcIlxyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArICcvYXBpX3Jlc2V0X3Bhc3N3b3JkJ1xyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpX29iamVjdCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoYXBpX29iamVjdC5yYz09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlfb2JqZWN0Lm1lc3NhZ2UsIFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoXCIvbG9naW5cIilcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLCBcInRleHQtZGFuZ2VyIGg2XCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrX21mYV9hdXRoZW50aWNhdG9yX2NvZGUoKSB7XHJcblxyXG4gICAgICAgIC8vIHYtbW9kZWwgYWxyZWFkeSB1cGRhdGVkIHRoZSBjb2RlcyBkaXJlY3RseSBpbnRvIHRoaXMgb2JqZWN0XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhc3N3b3JkX2F1dGhvcmlzZWQpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fVxyXG4gICAgICAgICAgICBkYXRhLnNlc3Npb25fand0ID0gdGhpcy5zZXNzaW9uX2p3dFxyXG4gICAgICAgICAgICBkYXRhLmlwX2FkZHJlc3MgPSB0aGlzLmlwX2FkZHJlc3NcclxuICAgICAgICAgICAgZGF0YS5tZmFfYXV0aGVudGljYXRvcl9jb2RlID0gdGhpcy5tZmFfYXV0aGVudGljYXRvcl9jb2RlXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiXCJcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5kb21haW5fb3JpZ2luICsgJy9hcGlfY2hlY2tfbWZhX2F1dGhlbnRpY2F0b3JfY29kZSdcclxuICAgICAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFwaV9vYmplY3QgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIm1mYV9cIiArIHRoaXMuZW1haWwpICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgeyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtZmFfXCIgKyB0aGlzLmVtYWlsLCAgYXBpX29iamVjdC5tZmFfand0KSAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtZmFfXCIgKyB0aGlzLmVtYWlsLCBcIlwiKSAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaV9vYmplY3QubWZhX2p3dCAmJiAoYXBpX29iamVjdC5yYz09MCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZmFfYXV0aG9yaXNlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX3NlY3JldF9jb25maXJtZWQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZF9pbiA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoXCJUaGUgY29kZSBhdXRoZW50aWNhdGVkIGNvcnJlY3RseSBhbmQgeW91IGFyZSBub3cgbG9nZ2VkIGluIFwiLFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYV9hdXRob3Jpc2VkID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VkX2luID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoXCJUaGUgY29kZSBkaWQgbm90IGF1dGhlbnRpY2F0ZSBjb3JyZWN0bHkuIEl0IG1heSBoYXZlIGp1c3QgbWlzc2VkIHRoZSB0aW1lIGV4cGlyeSwgZ2V0IGEgbmV3IGNvZGUgYW5kIHRyeSBhZ2FpblwiLFwidGV4dC1kYW5nZXIgaDZcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJGcm9tQXBpKCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIFRoaXMgcnVucyBhIGNvbnRpbnVvdXMgY3ljbGUgb2YgY2hlY2tpbmcgdGhhdCBsb2dnZWQgaW4gdXNlcnMgYXJlIHN0aWxsIHN1cHBvc2VkIHRvIGJlIFxyXG4gICAgICAgICAgICBsb2dnZWQgaW4gXHJcbiAgICAgICAgICAgIElmIHRoZSBtZmFfc2VjcmV0IG9uIHRlaCBkYiBjaGFuZ2VzLCB0aGVuIHRoZXkgd2lsbCBiZSBsb2dnZWQgb2ZmIFxyXG4gICAgICAgICovXHJcbiAgICAgICAgaWYgKHRoaXMubG9nZ2VkX2luKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge31cclxuICAgICAgICAgICAgZGF0YS5zZXNzaW9uX2p3dCA9IHRoaXMuc2Vzc2lvbl9qd3RcclxuICAgICAgICAgICAgZGF0YS5pcF9hZGRyZXNzID0gdGhpcy5pcF9hZGRyZXNzXHJcbiAgICAgICAgICAgIGRhdGEubWZhX2p3dCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibWZhX1wiICsgdGhpcy5lbWFpbClcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJcIlxyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyAnL2FwaV9nZXRfdXNlcidcclxuICAgICAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFwaV9vYmplY3QgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFwaV9vYmplY3QudXNlci5sb2dnZWRfaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvd01lc3NhZ2UgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nT3V0KHNob3dNZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLy8gdGhpcyBtZXRob2Qgd2lsbCBzZWFyY2ggdGhlIGNvb2tpZXMgYW5kIGxvb2sgZm9yIHRoZSB1c2VybmFtZSwgYW5kIGlmIGl0IGZpbmRzIHRoZSB1c2VybmFtZSBpdCB3aWxsXHJcbiAgICAvLyBmZXRjaCB0aGUgZW5jcnlwdGVkIHBhc3N3b3JkIGJlZm9yZSBkZWNyeXB0aW5nIGl0IGFuZCBjb21wYXJpbmcgaXQgdG8gdGhlIG9uZSBlbnRlcmVkLlxyXG4gICAgLy8gSWYgY29ycmVjdCwgdGhlIHVzZXIgd2lsbCBiZSBsb2dnZWRfaW4gYW5kIHRoZSBqd3Qgd2lsbCBiZSBjcmVhdGVkXHJcbiAgICBsb2dpbigpIHtcclxuICAgICAgICBjb25zdCBtZmFfand0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtZmFfXCIrZW1haWwpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9XHJcbiAgICAgICAgZGF0YS5lbWFpbCA9IHRoaXMubG9naW5fZW1haWxcclxuICAgICAgICBkYXRhLnBhc3N3b3JkID0gdGhpcy5sb2dpbl9wYXNzd29yZFxyXG4gICAgICAgIGRhdGEuaXBfYWRkcmVzcyA9IHRoaXMuaXBfYWRkcmVzc1xyXG4gICAgICAgIGRhdGEubWZhX2p3dCA9IG1mYV9qd3RcclxuICAgICAgICB0aGlzLmxvZ2luX2VtYWlsID0gXCJcIjtcclxuICAgICAgICB0aGlzLmxvZ2luX3Bhc3N3b3JkID0gXCJcIjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5sb2dnZWRfaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKFwiQWxyZWFkeSBsb2dnZWQgaW5cIiwgXCJ0ZXh0LWRhbmdlciBoNlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zdCBsb2dpbl9kZXRhaWxzID0geyBcImVtYWlsXCI6IHRoaXMubG9naW5fZW1haWwsIFwicGFzc3dvcmRcIjogdGhpcy5sb2dpbl9wYXNzd29yZCB9O1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0ID0ge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZmV0Y2goXCIvYXBpX2xvZ2luXCIsIHBvc3QpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpX29iamVjdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25fand0ID0gYXBpX29iamVjdC5zZXNzaW9uX2p3dFxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGFwaV9vYmplY3QucmM9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLCBcInRleHQtc3VjY2VzcyBoNlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhcGlfb2JqZWN0LnVzZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5tZmFfYXV0aG9yaXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZF9pbiA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZmFfYXV0aG9yaXNlZCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZmFfc2VjcmV0X2NvbmZpcm1lZCA9IHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgbm90IG1mYV9hdXRob3Jpc2VkLCB0aGUgdXNlciBuZWVkcyB0byBwcm92aWRlIHRoZSBjb3JyZWN0IGNvZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB2dWUgcGFnZSBvcGVucyB1cCBhIHJlc3BvbnNlIHNlY3Rpb24gdG8gYWxsb3cgdGhhdCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VkX2luID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZmFfYXV0aG9yaXNlZCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX3NlY3JldF9jb25maXJtZWQgPSB1c2VyLm1mYV9zZWNyZXRfY29uZmlybWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWZhX3FyX2ltYWdlID0gYXBpX29iamVjdC5tZmFfcXJfaW1hZ2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIG5vdCBtZmFfYXV0aG9yaXNlZCwgdGhlIHVzZXIgbmVlZHMgdG8gcHJvdmlkZSB0aGUgY29ycmVjdCBjb2Rlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdnVlIHBhZ2Ugb3BlbnMgdXAgYSByZXNwb25zZSBzZWN0aW9uIHRvIGFsbG93IHRoYXQgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9hdXRob3Jpc2VkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gZW1haWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZCA9IHVzZXIuaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gdXNlci5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9sZV9uYW1lID0gdXNlci5yb2xlX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uX2p3dCA9IHVzZXIuc2Vzc2lvbl9qd3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWlsZWRfbG9naW5fc3RyZWFrID0gdXNlci5mYWlsZWRfbG9naW5fc3RyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9hdXRob3Jpc2VkID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZWRfaW4gPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlkID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9sZV9uYW1lID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhaWxlZF9sb2dpbl9zdHJlYWsgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpX29iamVjdC5tZXNzYWdlLCBcInRleHQtZGFuZ2VyIGg2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShcIi9sb2dpblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKFwiL2xvZ2luXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShhcGlfb2JqZWN0Lm1lc3NhZ2UsIFwidGV4dC1kYW5nZXIgaDZcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9O1xyXG5cclxuICAgIGxvZ291dCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluc2lkZSBsb2dvdXQgbWV0aG9kXCIpXHJcbiAgICAgICAgdGhpcy5sb2dnZWRfaW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlc3Npb25fand0ID0gXCJcIlxyXG4gICAgICAgIHRoaXMucm9sZV9uYW1lID0gXCJcIlxyXG4gICAgICAgIHRoaXMuZW1haWwgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5wYXNzd29yZF9hdXRob3Jpc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X3NlY3JldF9hbmRfaW1hZ2Uoc2VjcmV0X2FuZF9pbWFnZSkge1xyXG5cclxuICAgICAgICAvLyB0aGUgc2VjcmV0X2FuZF9pbWFnZSBpcyBzdG9yZWQgaW4gdGhlIHZ1ZSBwYWdlIGFuZCBwYXNzZWQgaW5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9nZ2VkX2luKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge31cclxuICAgICAgICAgICAgZGF0YS5zZXNzaW9uX2p3dCA9IHRoaXMuc2Vzc2lvbl9qd3RcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJcIlxyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyAnL2FwaV9nZXRfc2VjcmV0X2FuZF9pbWFnZSdcclxuICAgICAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGFwaV9vYmplY3QgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpX29iamVjdC5yYz09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoXCJVcyB5b3VyIGF1dGhlbnRpY2F0b3IgYXBwIChmcm9tIEdvb2dsZSBvciBNaWNyb3NvZnQpIHRvIHNjYW4gdGhlIHFyLWNvZGVcIixcInRleHQtc3VjY2VzcyBoNlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNyZXQgPSBhcGlfb2JqZWN0LnNlY3JldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IGFwaV9vYmplY3QuaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5zZWNyZXQgPSBzZWNyZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5pbWFnZSA9IGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKFwiVGhlcmUgd2FzIGEgc2xpZ2h0IHByb2JsZW0sIGlmIHlvdSBjYW4ndCBwcm9jZWVkLCBwbGVhc2UgdHJ5IGFnYWluIGluIDUgbWludXRlc1wiLFwidGV4dC1kYW5nZXIgaDZcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5zZWNyZXQgPSBcIkZhaWxlZCBpbiB1c2VyLmpzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0X2FuZF9pbWFnZS5pbWFnZSA9IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWNyZXRfYW5kX2ltYWdlLnNlY3JldCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICBzZWNyZXRfYW5kX2ltYWdlLmltYWdlID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgfSAgICBcclxuXHJcbiAgICBzZXRsb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgLy8gY2FuIHVzZSB0aGlzIHRvIHJldGFpbiBsb2dnZWQgb24gc3RhdHVzIGFmdGVyIHJlZnJlc2ggXHJcbiAgICAgICAgLy8gdG9kbzogcmV0YWluIGxvZ2dlZCBvbiBzdGF0dXMgYWZ0ZXIgYSByZWZyZXNoXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJcIiwgSlNPTi5zdHJpbmdpZnkoeyBcImxvZ2dlZF9pblwiOiB0aGlzLmxvZ2dlZF9pbiwgcm9sZV9uYW1lOiB0aGlzLnJvbGVfbmFtZSB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBpX3Jlc2V0X3Bhc3N3b3JkKGlucHV0KSB7XHJcblxyXG4gICAgICAgIHZhciBwYXlsb2FkID0ge31cclxuICAgICAgICBwYXlsb2FkLnNlc3Npb25fand0ID0gdGhpcy5zZXNzaW9uX2p3dFxyXG4gICAgICAgIHBheWxvYWQuaW5wdXQgPSBpbnB1dFxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJcIlxyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArICcvYXBpX3Jlc2V0X3Bhc3N3b3JkJ1xyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oYXBpT2JqZWN0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihhcGlPYmplY3QucmM9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpT2JqZWN0Lm1lc3NhZ2UsIFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoXCIvbG9naW5cIilcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoYXBpT2JqZWN0Lm1lc3NhZ2UsIFwidGV4dC1kYW5nZXIgaDZcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNoZWNrX3Rva2VuX3ZhbGlkaXR5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvZ2dlZF9pbikge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlfcGFja2FnZSA9IHsgXCJ0b2tlblwiOiB0aGlzLnNlc3Npb25fand0IH07XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3QgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXBpX3BhY2thZ2UpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBmZXRjaChcIi9hcGlfY2hlY2tfand0XCIsIHBvc3QpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGRhdGEuc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IFwiaW52YWxpZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkX3Rva2VuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUb2tlbiB2YWxpZCwgc3RpbGwgbG9nZ2VkIGluLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKHJlc3BvbnNlLm1lc3NhZ2UsIHJlc3BvbnNlLnR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH0iLCJleHBvcnQgY2xhc3MgVXNlcnMge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXIsIG1lc3NhZ2VzLCBkb21haW5fb3JpZ2luLCByb2xlcykge1xyXG4gICAgY29uc29sZS5sb2coXCJVc2VycyBoYXMgYmVlbiBpbnN0YW50aWF0ZWQuXCIpXHJcbiAgICB0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XHJcbiAgICB0aGlzLnJvbGVzID0gcm9sZXM7XHJcbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgdGhpcy5kb21haW5fb3JpZ2luID0gZG9tYWluX29yaWdpbjtcclxuICAgIHRoaXMudXNlcl9saXN0ID0gW107XHJcbiAgICB0aGlzLm5ld191c2VyID0ge307XHJcbiAgICB0aGlzLm5ld191c2VyLm5hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5uZXdfdXNlci5lbWFpbCA9IFwiXCI7XHJcbiAgICB0aGlzLm5ld191c2VyLnJvbGUgPSBcIlwiO1xyXG4gICAgdGhpcy51c2VyX3RvX2RlbGV0ZSA9IFwiXCI7XHJcbiAgICB0aGlzLnNlbGVjdGVkX3VzZXJzID0gW107XHJcbiAgICB0aGlzLm1vZGVsX25hbWUgPSBcIlVzZXJcIjtcclxuICAgIHRoaXMucm9sZV92YWxpZCA9IFwiXCI7XHJcbiAgICB0aGlzLmVtYWlsX3ZhbGlkID0gXCJcIjtcclxuICAgIHRoaXMubmFtZV92YWxpZCA9IFwiXCI7XHJcbiAgICB0aGlzLnBhc3N3b3JkX3ZhbGlkID0gXCJcIjtcclxuICB9XHJcbiAgYXBpX2NyZWF0ZV91c2VyX2RiKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJpbnNpZGUgYXBpX2NyZWF0ZV91c2VyX2RiXCIpXHJcblxyXG4gICAgLy8gVGFrZSBhIGNvcHkgdGhlbiByZXNldCBvYmplY3QgYXR0cmlidXRlc1xyXG4gICAgdmFyIGNyZWF0ZV9wYWNrYWdlID0gdGhpcy5uZXdfdXNlclxyXG5cclxuICAgIC8vIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm5ld191c2VyKVxyXG4gICAgLy8gZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGtleXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAvLyAgICAgdGhpcy5uZXdfdXNlcltrZXlzW2luZGV4XV0gPSBcIlwiXHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gZ2V0IHRoZSByb2xlIHRoYXQgd2UgbmVlZCBmb3IgYSB1c2VyIFxyXG4gICAgY29uc3Qgcm9sZSA9IHRoaXMucm9sZXMuZ2V0X3JvbGVfZnJvbV9uYW1lKHRoaXMubmV3X3VzZXIucm9sZSk7XHJcbiAgICAvLyBhZGQgYSBmYWtlIGlkIGZpcnN0IHNvIHRoZSByZWFjdGl2aXR5IGNhbiBrZWVwIHRyYWNrIG9mIGl0XHJcbiAgICBjcmVhdGVfcGFja2FnZS5pZCA9IHRoaXMuZ2VuZXJhdGVfdG9rZW4oKVxyXG4gICAgY3JlYXRlX3BhY2thZ2Uucm9sZV9pZCA9IHJvbGUuaWRcclxuICAgIC8vIGZpcnN0IHdlIGhhdmUgdG8gYWRkIHRoZSBwb2dyYW1tZSB0byB0aGUgbG9jYWwgY29weSBcclxuICAgIHRoaXMuc2VsZWN0ZWRfdXNlcnMucHVzaChjcmVhdGVfcGFja2FnZSlcclxuXHJcbiAgICAvLyBjb25zdHJ1Y3QgdGhlIHBheWxvYWQgdG8gZ28gd2l0aCB0aGUgYXBpXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge31cclxuICAgIHBheWxvYWQubW9kZWxfbmFtZSA9IFwiVXNlclwiXHJcbiAgICBwYXlsb2FkLnNlc3Npb25fand0ID0gdGhpcy51c2VyLnNlc3Npb25fand0XHJcbiAgICBwYXlsb2FkLnJvbGUgPSByb2xlXHJcblxyXG4gICAgLy8gdG9kbzogUG9zc2libHkgbm8gbmVlZCBmb3IgZGF0YSBsZXZlbCBcclxuICAgIGNvbnN0IGRhdGEgPSB7fVxyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgdXBkYXRlIHBhY2thZ2UgdGhhdCB3aWxsIGhhdmUgYWxsIHRoZSBmaWVsZHMgaW4gbmVlZGVkIGZvciB0aGUgdXBkYXRlIFxyXG4gICAgLy8gVGhpcyBsaXN0IG9mIGZpZWxkcyBpcyBzcGVjaWZjIHRvIHRoZSBtb2RlbCBcclxuICAgIC8vIHRvZG86IGNvdWxkIGFjdHVhbGx5IGNyZWF0ZSBhIGdlbmVyaWMgdmVyc2lvbiBvZiB0aGUgY2xhc3MgdGhhdCB3b3VsZCBtYW5hZ2UgYWxsIFxyXG4gICAgLy8gdHlwZXMgb2YgcmVtb3RlIGVudGl0eSBcclxuXHJcbiAgICAvLyBwdXQgdGhlIHBhY2thZ2UgaW50byBkYXRhIGFuZCBkYXRhIGludG8gdGhlIHBheWxvYWRcclxuICAgIGRhdGEuY3JlYXRlX3BhY2thZ2UgPSBjcmVhdGVfcGFja2FnZVxyXG4gICAgcGF5bG9hZC5kYXRhID0gZGF0YVxyXG5cclxuICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIC8vICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBteS10b2tlbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArIFwiL2FwaV9jcmVhdGVfdXNlcl9kYlwiXHJcbiAgICBmZXRjaCh1cmwsIHJlcXVlc3Rfb3B0aW9ucylcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuXHJcbiAgICAgICAgaWYgKGRhdGEucmMgPT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShkYXRhLm1lc3NhZ2UsIFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIGdldCB0aGUgdGVtcG9yYXJpbHkgYWRkZWQgaWQgYW5kIHVwZGF0ZSB0aGUgaWQgIFxyXG4gICAgICAgICAgY29uc3QgY3JlYXRlZF9yZWNvcmQgPSBkYXRhLmNyZWF0ZWRfcmVjb3JkXHJcbiAgICAgICAgICBjcmVhdGVfcGFja2FnZS5pZCA9IGNyZWF0ZWRfcmVjb3JkLmlkXHJcbiAgICAgICAgICB0aGlzLnVzZXJfbGlzdC5wdXNoKGNyZWF0ZWRfcmVjb3JkKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoZGF0YS5tZXNzYWdlLCBcInRleHQtZGFuZ2VyIGg2XCIpXHJcbiAgICAgICAgICB0aGlzLnJlbW92ZV9sb2NhbF9zZWxlY3RlZF91c2VyKGNyZWF0ZV9wYWNrYWdlLmlkKVxyXG4gICAgICAgICAgLy8gVGhlIHVwZGF0ZXMgaGF2ZSBub3QgYmVlbiBhcHBsaWVkIHNvIHdlIG5lZWQgdG8gZ2V0IHRoZSBcclxuICAgICAgICAgIC8vIGNvcnJlY3QgdmVyc2lvbiBvZiB0aGUgcmVjb3JkcyBkaXJlY3RseSBmcm9tIHRoZSBkYlxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgfSk7XHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIGRlbGV0ZV91c2VyKHVzZXJfaWQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIGRlbGV0ZV91c2VyIG1ldGhvZFwiKTtcclxuXHJcbiAgICBjb25zdCB1c2VyID0gdGhpcy5nZXRfc2VsZWN0ZWRfdXNlcl9mcm9tX2lkKHVzZXJfaWQpXHJcbiAgICB1c2VyLmlkID0gXCJcIlxyXG5cclxuICAgIGNvbnN0IHBheWxvYWQgPSB7fVxyXG4gICAgcGF5bG9hZC5zZXNzaW9uX2p3dCA9IHRoaXMudXNlci5zZXNzaW9uX2p3dFxyXG4gICAgcGF5bG9hZC5tb2RlbF9uYW1lID0gXCJVc2VyXCJcclxuXHJcbiAgICBjb25zdCBkYXRhID0ge31cclxuXHJcbiAgICBjb25zdCBkZWxldGVfcGFja2FnZSA9IHt9XHJcbiAgICBkZWxldGVfcGFja2FnZS5pZCA9IHVzZXJfaWRcclxuXHJcbiAgICBkYXRhLmRlbGV0ZV9wYWNrYWdlID0gZGVsZXRlX3BhY2thZ2VcclxuXHJcbiAgICBwYXlsb2FkLmRhdGEgPSBkYXRhXHJcbiAgICBjb25zdCByZXF1ZXN0X29wdGlvbnMgPSB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAvLyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbXktdG9rZW4nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmRvbWFpbl9vcmlnaW4gKyBcIi9hcGlfZGVsZXRlX3JlY29yZF9kYlwiXHJcblxyXG4gICAgZmV0Y2godXJsLCByZXF1ZXN0X29wdGlvbnMpXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEucmMgPT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5tZXNzYWdlcy5hZGRfbWVzc2FnZShkYXRhLm1lc3NhZ2UsIFwidGV4dC1zdWNjZXNzIGg2XCIpXHJcbiAgICAgICAgICAvLyBuZWVkIHRvIHJlbW92ZSB0aGUgdXNlciBmcm9tIHRoaXMudXNlcl9saXN0XHJcbiAgICAgICAgICBmb3IgKGxldCB1c2VyX2luZGV4IGluIHRoaXMudXNlcl9saXN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJfbGlzdFt1c2VyX2luZGV4XS5pZCA9PSB1c2VyX2lkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyX2xpc3Quc3BsaWNlKHVzZXJfaW5kZXgsIDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgLy8gVGhlIHVwZGF0ZSB3YXMgcmVqZWN0ZWQgc28gd2UgbmVlZCB0byBnZXQgYSBmcmVzaCBjb3B5IG9mIHRoZSB1c2VyIGRhdGEgXHJcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmFkZF9tZXNzYWdlKGRhdGEubWVzc2FnZSwgXCJ0ZXh0LWRhbmdlciBoNlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgIH0pO1xyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZV90b2tlbih0b2tlbl9sZW5ndGgpIHtcclxuICAgIC8vIGdlbmVyYXRlIGEgdG9rZW4gdGhhdCBpcyByYW5kb21cclxuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUodG9rZW5fbGVuZ3RoKSkge1xyXG4gICAgICB0b2tlbl9sZW5ndGggPSB0b2tlbl9sZW5ndGggKiAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIGRlZmF1bHQgdG8gYSBsZW5ndGggb2YgMTIgaWYgbm90IHBhc3NlZCBvciBub3QgbnVtZXJpY1xyXG4gICAgICB0b2tlbl9sZW5ndGggPSAxMjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkZWZpbmUgdGhlIHVuYW1iaWd1b3VzIGNoYXJhY3RlcnMgb24gdGhlIGtleWJvYXJkIFxyXG4gICAgdmFyIHRva2VuX2NoYXJzID0gXCJhQWJCY0NkRGVFZkZnR2hIakprS21Nbk5wUHFRclJzU3RUdVV2VndXeFh5WXpaMjM0NTY3ODkhJi1fXCI7XHJcblxyXG4gICAgLy8gaW5pdGlhbGlzZSB0aGUgdG9rZW4gdG8gbm90aGluZ1xyXG4gICAgdmFyIHRva2VuID0gXCLCoyExV3dcIlxyXG5cclxuICAgIC8vIGtlZXAgYWRkaW5nIHJhbmRvbSBjaGFyYWN0ZXJzIHVudGlsIGRvbmUgXHJcbiAgICBmb3IgKHZhciB0b2tlbl9pbmRleCA9IDA7IHRva2VuX2luZGV4IDwgdG9rZW5fbGVuZ3RoOyB0b2tlbl9pbmRleCsrKSB7XHJcbiAgICAgIHZhciBjaGFyYWN0ZXJfaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0b2tlbl9jaGFycy5sZW5ndGgpXHJcbiAgICAgIHRva2VuID0gdG9rZW4gKyB0b2tlbl9jaGFyc1tjaGFyYWN0ZXJfaW5kZXhdXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG9rZW5cclxuICB9XHJcblxyXG4gIHJlbW92ZV9sb2NhbF9zZWxlY3RlZF91c2VyKGlkKSB7XHJcbiAgICAvLyBUaGUgdXNlciB3YXMgbm90IGFkZGVkIHNvIHdlIG5lZWQgdG8gcmVtb3ZlIGl0IGZyb20gdGhpcyB0ZW1wb3JhcnkgbGlzdFxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2VsZWN0ZWRfdXNlcnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnNlbGVjdGVkX3VzZXJzW2luZGV4XVxyXG4gICAgICBpZiAodXNlci5pZCA9PSBpZCkge1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGVudHJ5IHRoYXQgbmVlZHMgZGVsZXRpbmcgc28gZG8gaXRcclxuICAgICAgICB0aGlzLnNlbGVjdGVkX3VzZXJzLnNwbGljZShpbmRleCwgMSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBwb3B1bGF0ZV91c2VyX2xpc3QoKSB7XHJcbiAgICAvLyB0aGlzLnVzZXJfbGlzdCA9IFtdO1xyXG4gICAgY29uc29sZS5sb2coXCJpbnNpZGUgcG9wdWxhdGVfdXNlcl9saXN0IG1ldGhvZFwiKTtcclxuICAgIC8vIG5lZWQgdG8gcGluZyB0aGUgZ2V0IHVzZXJzIEFQSSBhbmQgbG9vcCB0aHJvdWdoIGl0XHJcbiAgICBjb25zdCBhcGlfcGFja2FnZSA9IHtcclxuICAgICAgXCJtb2RlbF9uYW1lXCI6IFwiVXNlclwiLFxyXG4gICAgICBcInNlc3Npb25fand0XCI6IHRoaXMudXNlci5zZXNzaW9uX2p3dFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHBvc3QgPSB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLThcIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhcGlfcGFja2FnZSksXHJcbiAgICB9O1xyXG5cclxuICAgIGZldGNoKFwiL2FwaV9nZXRfcmVjb3Jkc19kYlwiLCBwb3N0KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3IoZGF0YS5zdGF0dXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIHRoaXMudXNlcl9saXN0ID0gcmVzcG9uc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGdldF9zZWxlY3RlZF91c2VyX2Zyb21faWQoaWQpIHtcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zZWxlY3RlZF91c2Vycy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgY29uc3Qgc2VsZWN0ZWRfdXNlciA9IHRoaXMuc2VsZWN0ZWRfdXNlcnNbaW5kZXhdXHJcbiAgICAgIGlmIChzZWxlY3RlZF91c2VyLmlkID09IGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkX3VzZXJcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7fVxyXG5cclxuICB9XHJcblxyXG4gIGNoZWNrX25hbWVfdmFsaWQobmFtZSkge1xyXG4gICAgdGhpcy5uYW1lX3ZhbGlkID0gXCJcIjtcclxuICAgIGxldCB2YWxpZCA9IHRydWU7XHJcbiAgICB2YXIgcmVnZXggPSAvXlthLXpBLVpcXHMtXSskLztcclxuICAgIGNvbnN0IGZ1bGxuYW1lX3ZhbGlkID0gcmVnZXgudGVzdChuYW1lKTtcclxuICAgIHJlZ2V4ID0gL15bYS16QS1aXFxzXSskLztcclxuICAgIGNvbnN0IGZpcnN0bmFtZV92YWxpZCA9IHJlZ2V4LnRlc3QobmFtZSk7XHJcbiAgICBpZiAoIShmdWxsbmFtZV92YWxpZCkgJiYgIShmaXJzdG5hbWVfdmFsaWQpKSB7XHJcbiAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsaWQpIHtcclxuICAgICAgdGhpcy5uYW1lX3ZhbGlkID0gXCJpcy12YWxpZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5uYW1lX3ZhbGlkID0gXCJpcy1pbnZhbGlkXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrX2VtYWlsX3ZhbGlkKGVtYWlsKSB7XHJcbiAgICB0aGlzLmVtYWlsX3ZhbGlkID0gXCJcIjtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xyXG4gICAgY29uc3QgdmFsaWQgPSByZWdleC50ZXN0KGVtYWlsKTtcclxuICAgIGlmICh2YWxpZCkge1xyXG4gICAgICB0aGlzLmVtYWlsX3ZhbGlkID0gXCJpcy12YWxpZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbWFpbF92YWxpZCA9IFwiaXMtaW52YWxpZFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tfcm9sZV92YWxpZCgpIHtcclxuICAgIHRoaXMucm9sZV92YWxpZCA9IFwiaXMtdmFsaWRcIjtcclxuICB9XHJcblxyXG4gIGNoZWNrX3Bhc3N3b3JkX3ZhbGlkKHBhc3N3b3JkKSB7XHJcbiAgICB0aGlzLnBhc3N3b3JkX3ZhbGlkID0gXCJcIjtcclxuICAgIGNvbnN0IHZhbGlkID0gdGhpcy5pc19zdHJvbmdfZW5vdWdoKHBhc3N3b3JkKTtcclxuICAgIGlmICh2YWxpZCkge1xyXG4gICAgICB0aGlzLnBhc3N3b3JkX3ZhbGlkID0gXCJpcy12YWxpZFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYXNzd29yZF92YWxpZCA9IFwiaXMtaW52YWxpZFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNfc3Ryb25nX2Vub3VnaChwYXNzd29yZCkge1xyXG4gICAgbGV0IHN0cm9uZ19lbm91Z2ggPSB0cnVlO1xyXG5cclxuICAgIC8vIEF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nXHJcbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA+IDY0KSB7XHJcbiAgICAgIHN0cm9uZ19lbm91Z2ggPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb3VudCB0aGUgb2NjdXJyZWVuY2VzIG9mIGVhY2ggY2hhcmFjdGVyXHJcbiAgICBsZXQgY2hhcmFjdGVyX2RpY3Rpb25hcnkgPSB7fTtcclxuICAgIGZvciAobGV0IGNoYXJhY3RlciBvZiBwYXNzd29yZCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNoYXJhY3Rlcl9kaWN0aW9uYXJ5W2NoYXJhY3Rlcl0gPSBjaGFyYWN0ZXJfZGljdGlvbmFyeVtjaGFyYWN0ZXJdICsgMTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgY2hhcmFjdGVyX2RpY3Rpb25hcnlbY2hhcmFjdGVyXSA9IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBhbnkgY2hhcmFjdGVyIG1ha2VzIHVwIG1vcmUgdGhhbiBoYWxmXHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXIgaW4gY2hhcmFjdGVyX2RpY3Rpb25hcnkpIHtcclxuICAgICAgbGV0IGNvdW50ID0gY2hhcmFjdGVyX2RpY3Rpb25hcnlbY2hhcmFjdGVyXTtcclxuICAgICAgaWYgKGNvdW50IC8gcGFzc3dvcmQubGVuZ3RoID4gMC41KSB7XHJcbiAgICAgICAgc3Ryb25nX2Vub3VnaCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgYXJlbid0IGF0IGxlYXN0IDMgZGlmZmVyZW50IGNoYXJhY3RlcnNcclxuICAgIGlmIChPYmplY3Qua2V5cyhjaGFyYWN0ZXJfZGljdGlvbmFyeSkubGVuZ3RoIDwgMykge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgaXQgaXMgaW4gdGhlIGxpc3Qgb2YgYmFkIHBhc3N3b3Jkc1xyXG5cclxuICAgIGxldCBsZXR0ZXJzID0gW1xyXG4gICAgICBcImFcIixcclxuICAgICAgXCJiXCIsXHJcbiAgICAgIFwiY1wiLFxyXG4gICAgICBcImRcIixcclxuICAgICAgXCJlXCIsXHJcbiAgICAgIFwiZlwiLFxyXG4gICAgICBcImdcIixcclxuICAgICAgXCJoXCIsXHJcbiAgICAgIFwiaVwiLFxyXG4gICAgICBcImpcIixcclxuICAgICAgXCJrXCIsXHJcbiAgICAgIFwibFwiLFxyXG4gICAgICBcIm1cIixcclxuICAgICAgXCJuXCIsXHJcbiAgICAgIFwib1wiLFxyXG4gICAgICBcInBcIixcclxuICAgICAgXCJxXCIsXHJcbiAgICAgIFwiclwiLFxyXG4gICAgICBcInNcIixcclxuICAgICAgXCJ0XCIsXHJcbiAgICAgIFwidVwiLFxyXG4gICAgICBcInZcIixcclxuICAgICAgXCJ3XCIsXHJcbiAgICAgIFwieFwiLFxyXG4gICAgICBcInlcIixcclxuICAgICAgXCJ6XCIsXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIENoZWNrIGl0IGhhcyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGNoYXJhY3RlclxyXG4gICAgbGV0IGhhc191cHBlcl9jYXNlID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXIgb2YgcGFzc3dvcmQpIHtcclxuICAgICAgaWYgKCFsZXR0ZXJzLmluY2x1ZGVzKGNoYXJhY3Rlci50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjaGFyYWN0ZXIgPT09IGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpKSB7XHJcbiAgICAgICAgaGFzX3VwcGVyX2Nhc2UgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhc191cHBlcl9jYXNlKSB7XHJcbiAgICAgIHN0cm9uZ19lbm91Z2ggPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpdCBoYXMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBjaGFyYWN0ZXJcclxuICAgIGxldCBoYXNfbG93ZXJfY2FzZSA9IGZhbHNlO1xyXG4gICAgZm9yIChsZXQgY2hhcmFjdGVyIG9mIHBhc3N3b3JkKSB7XHJcbiAgICAgIGlmICghbGV0dGVycy5pbmNsdWRlcyhjaGFyYWN0ZXIudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hhcmFjdGVyID09PSBjaGFyYWN0ZXIudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgIGhhc19sb3dlcl9jYXNlID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNfbG93ZXJfY2FzZSkge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaXQgaGFzIGF0IGxlYXN0IG9uZSBpbnRlZ2VyXHJcbiAgICBsZXQgaGFzX2ludGVnZXIgPSBmYWxzZTtcclxuICAgIGZvciAobGV0IGNoYXJhY3RlciBvZiBwYXNzd29yZCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNoYXJhY3RlciA9IHBhcnNlSW50KGNoYXJhY3Rlcik7XHJcbiAgICAgICAgaGFzX2ludGVnZXIgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGNhdGNoIHsgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNfaW50ZWdlcikge1xyXG4gICAgICBzdHJvbmdfZW5vdWdoID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWExcGNoNWd0aGRmdyBzaG91bGQgcGFzc1xyXG4gICAgLy8gQWExLS0tLS0gc2hvdWxkIGZhaWwgYXMgdG9vIG1hbnkgcmVwZWF0c1xyXG4gICAgLy8gQWEtYWNieXBnaHQtIHNob3VsZCBmYWlsIGFzIG5vIGRpZ2l0XHJcbiAgICAvLyBhYTFobHJwZHZ3IHNob3VsZCBmYWlsIGFzIG5vIHVwcGVyY2FzZVxyXG4gICAgLy8gQUcxUEhEUkZWU0lOV1Agc2hvdWxkIGZhaWwgYXMgbm8gbG93ZXJjYXNlXHJcbiAgICAvLyBBYTFobHJwIHNob3VsZCBmYWlsIGFzIHRvbyBzaG9ydCBhYTFobHJwZHZ3XHJcblxyXG4gICAgcmV0dXJuIHN0cm9uZ19lbm91Z2g7XHJcbiAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBNZXNzYWdlcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk1lc3NhZ2VzIGhhcyBiZWVuIGluc3RhbnRpYXRlZC5cIilcclxuICAgICAgICB0aGlzLm1lc3NhZ2VfYXJyYXkgPSBbXVxyXG4gICAgICAgIC8vIHRoaXMuY3VycmVudF9tZXNzYWdlID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgYWRkX21lc3NhZ2UobWVzc2FnZSwgdHlwZSkge1xyXG4gICAgICAgIGxldCBtZXNzYWdlX2RpY3QgPSB7fTtcclxuICAgICAgICBtZXNzYWdlX2RpY3QubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgbWVzc2FnZV9kaWN0LnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZV9hcnJheS5wdXNoKG1lc3NhZ2VfZGljdCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZV9hcnJheTtcclxuICAgIH1cclxufSIsIjx0ZW1wbGF0ZT5cclxuPGRpdiBjbGFzcz1cImNvbnRhaW5lciBwb3NpdGlvbi1hYnNvbHV0ZSBib3R0b20tMCBzdGFydC0wXCI+XHJcblxyXG4gICAgPHVsIGNsYXNzPVwibGlzdC1ncm91cCBtYi0zXCI+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIG15LTBcIiA6Y2xhc3M9XCJtZXNzYWdlLnR5cGVcIiB2LWZvcj1cIihtZXNzYWdlLCBpbmRleCkgaW4gdGhpcy5tZXNzYWdlcy5tZXNzYWdlX2FycmF5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7IG1lc3NhZ2UubWVzc2FnZSB9fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tbGlnaHQgYnRuLXNtIG1lLTJcIiBAY2xpY2s9XCJ0aGlzLmRlbGV0ZV9tZXNzYWdlKGluZGV4KVwiPlg8L2J1dHRvbj5cclxuICAgICAgICA8L2xpPlxyXG4gICAgPC91bD5cclxuPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBwcm9wczogW1xyXG4gICAgICAgIFwibWVzc2FnZXNcIlxyXG4gICAgXSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBkZWxldGVfbWVzc2FnZShpbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLm1lc3NhZ2VfYXJyYXkuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtZXNzYWdlX2N5Y2xlKCkge1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIm1lc3NhZ2VfY3ljbGVcIilcclxuICAgICAgICAvLyAgICAgdGhpcy5tZXNzYWdlcy5jdXJyZW50X21lc3NhZ2UgPSB7fTtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMubWVzc2FnZXMubWVzc2FnZV9hcnJheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBmb3IgKGxldCBtZXNzYWdlX2luZGV4IGluIHRoaXMubWVzc2FnZXMubWVzc2FnZV9hcnJheSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuY3VycmVudF9tZXNzYWdlID0gdGhpcy5tZXNzYWdlcy5tZXNzYWdlX2FycmF5W21lc3NhZ2VfaW5kZXhdO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIHNldFRpbWVvdXQodGhpcy5tZXNzYWdlX2N5Y2xlLCAyMDAwKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9LFxyXG59XHJcbjwvc2NyaXB0PiIsImV4cG9ydCBkZWZhdWx0IFwiX19WSVRFX0FTU0VUX181MjE1NzY2YV9fXCIiLCI8dGVtcGxhdGU+XHJcbiAgICAgICAgPG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZXhwYW5kLWxnIG5hdmJhci1saWdodFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcIj5cclxuICAgICAgICAgICAgPHJvdXRlci1saW5rIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgdG89XCIvXCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4uL2Fzc2V0cy9kdF9zcXVhZF9sb2dvLnBuZ1wiIGFsdD1cIkxvZ29cIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6NzVweDtcIj5cclxuICAgICAgICAgICAgPC9yb3V0ZXItbGluaz5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5hdmJhci10b2dnbGVyXCIgdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLWJzLXRhcmdldD1cIiNuYXZiYXJTdXBwb3J0ZWRDb250ZW50XCJcclxuICAgICAgICAgICAgYXJpYS1jb250cm9scz1cIm5hdmJhclN1cHBvcnRlZENvbnRlbnRcIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5hdmlnYXRpb25cIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJuYXZiYXItdG9nZ2xlci1pY29uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbGxhcHNlIG5hdmJhci1jb2xsYXBzZVwiIGlkPVwibmF2YmFyU3VwcG9ydGVkQ29udGVudFwiPlxyXG4gICAgICAgIDx1bCBjbGFzcz1cIm5hdmJhci1uYXYgbWUtYXV0byBtYi0yIG1iLWxnLTBcIj5cclxuICAgIFxyXG4gICAgICAgIDxsaSBjbGFzcz1cIm5hdi1pdGVtXCI+XHJcbiAgICAgICAgICA8Um91dGVyTGluayB0bz1cIi9cIiBjbGFzcz1cIm5hdi1saW5rXCI+SG9tZTwvUm91dGVyTGluaz5cclxuICAgICAgICA8L2xpPlxyXG4gICAgICAgIDxsaSBjbGFzcz1cIm5hdi1pdGVtXCI+XHJcbiAgICAgICAgICA8Um91dGVyTGluayB0bz1cIi9jcnVkXCIgY2xhc3M9XCJuYXYtbGlua1wiXHJcbiAgICAgICAgICAgID5NYW5hZ2UgVXNlcnM8L1JvdXRlckxpbmtcclxuICAgICAgICAgID5cclxuICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleFwiPlxyXG4gICAgICAgICAgPHVsIGNsYXNzPVwibmF2YmFyLW5hdiBtZS1hdXRvIG1iLTIgbWItbGctMFwiPlxyXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJuYXYtaXRlbSBkcm9wZG93blwiIHYtaWY9XCJ1c2VyLmxvZ2dlZF9pblwiIHN0eWxlPVwibWFyZ2luLXJpZ2h0OiA1MHB4XCI+XHJcbiAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGluayBkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiI1wiIGlkPVwibmF2YmFyRHJvcGRvd25cIiByb2xlPVwiYnV0dG9uXCIgZGF0YS1icy10b2dnbGU9XCJkcm9wZG93blwiXHJcbiAgICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgIHt7IHVzZXIubmFtZSB9fSAmbmJzcDsmbmJzcDsmbmJzcDtcclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgPCEtLSBUaGUgc3R5bGUgbWFyZ2luIDAgcmVtb3ZlcyBhbiBlcnJvciBhYm91dCBwb3BvdmVyIHN0dWZmIC0tPlxyXG4gICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiBhcmlhLWxhYmVsbGVkYnk9XCJuYXZiYXJEcm9wZG93blwiIHN0eWxlPVwibWFyZ2luOiAwO1wiPlxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5hdi1saW5rXCIgQGNsaWNrPVwidXNlci5sb2dvdXQoKTtcIj5sb2dvdXQ8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICA8cm91dGVyLWxpbmsgY2xhc3M9XCJuYXYtbGluayBhY3RpdmVcIiB0bz1cIi9wYXNzd29yZHJlc2V0dmlld1wiPkNoYW5nZSBQYXNzd29yZDwvcm91dGVyLWxpbms+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcblxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvbmF2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgcHJvcHM6IFtcclxuICAgICAgICBcInVzZXJcIixcclxuICAgICAgICBcIm1lc3NhZ2VzXCJcclxuICAgIF1cclxufVxyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZT5cclxuLm5hdi1saW5rOmhvdmVyIHtcclxuICBjb2xvcjpsaWdodGdyZXk7XHJcbn1cclxuPC9zdHlsZT4iLCJcclxuY2xhc3MgUm9sZXMge1xyXG4gICAgLy8gY2xhc3MgbWV0aG9kc1xyXG4gICAgY29uc3RydWN0b3IoZG9tYWluX29yaWdpbiwgdXNlcikge1xyXG4gICAgICAgIHRoaXMub2JqZWN0TmFtZSA9IFwiUm9sZXNcIlxyXG4gICAgICAgIHRoaXMubW9kZWxfbmFtZSA9IFwiUm9sZVwiXHJcbiAgICAgICAgdGhpcy5kb21haW5fb3JpZ2luID0gZG9tYWluX29yaWdpblxyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXJcclxuXHJcbiAgICAgICAgdGhpcy5yb2xlcyA9IFtdXHJcblxyXG4gICAgICAgIHRoaXMudGVzdCA9IFwiaGV5IHRoZXJlIGZyb20gUm9sZXNcIlxyXG5cclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldF9yb2xlc19mcm9tX2FwaSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHt9XHJcbiAgICAgICAgcGF5bG9hZC5zZXNzaW9uX2p3dCA9IHRoaXMudXNlci5zZXNzaW9uX2p3dFxyXG4gICAgICAgIHBheWxvYWQubW9kZWxfbmFtZSA9IHRoaXMubW9kZWxfbmFtZVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0ge31cclxuICAgICAgICBwYXlsb2FkLmRhdGEgPSBkYXRhXHJcblxyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZG9tYWluX29yaWdpbiArIFwiL2FwaV9nZXRfcmVjb3Jkc19kYlwiXHJcblxyXG4gICAgICAgIGNvbnN0IGZpbHRlcl9wYWNrYWdlID0ge31cclxuICAgICAgICBmaWx0ZXJfcGFja2FnZS5pc19kZWxldGVkID0gMFxyXG5cclxuICAgICAgICBkYXRhLmZpbHRlcl9wYWNrYWdlID0gZmlsdGVyX3BhY2thZ2VcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluc2lkZSBSb2xlc1wiKVxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3Rfb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAvLyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbXktdG9rZW4nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZldGNoKHVybCwgcmVxdWVzdF9vcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlX3BhY2thZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlX3BhY2thZ2UucmM9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9sZXMgPSByZXNwb25zZV9wYWNrYWdlLnJlY29yZHNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldF9yb2xlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb2xlc1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRfcm9sZV9mcm9tX2lkKGlkKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHJvbGVfaW5kZXggPSAwOyByb2xlX2luZGV4IDwgdGhpcy5yb2xlcy5sZW5ndGg7IHJvbGVfaW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gdGhpcy5yb2xlc1tyb2xlX2luZGV4XVxyXG4gICAgICAgICAgICBpZiAocm9sZS5pZCA9PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvbGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHt9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0X3JvbGVfZnJvbV9uYW1lKG5hbWUpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcm9sZV9pbmRleCA9IDA7IHJvbGVfaW5kZXggPCB0aGlzLnJvbGVzLmxlbmd0aDsgcm9sZV9pbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvbGUgPSB0aGlzLnJvbGVzW3JvbGVfaW5kZXhdXHJcbiAgICAgICAgICAgIGlmIChyb2xlLm5hbWUgPT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvbGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHt9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSb2xlcyIsIjxzY3JpcHQgc2V0dXA+XHJcbjwvc2NyaXB0PlxyXG5cclxuPHRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgIDxOYXZiYXIgOnVzZXI9XCJ1c2VyXCIgOm1lc3NhZ2VzPVwibWVzc2FnZXNcIiA6cm9sZXM9XCJyb2xlc1wiIHYtaWY9XCIodGhpcy51c2VyLmxvZ2dlZF9pbilcIiAvPlxyXG4gICAgPFJvdXRlclZpZXdcclxuICAgIDp1c2Vycz1cInVzZXJzXCJcclxuICAgIDp1c2VyPVwidXNlclwiXHJcbiAgICA6cm9sZXM9XCJyb2xlc1wiXHJcbiAgICA6bWVzc2FnZXM9XCJtZXNzYWdlc1wiXHJcbiAgICAvPlxyXG4gICAgPCEtLSBUaGVzZSBicmVha3Mgc3RvcCB0aGUgYm90dG9tIG9mIHRoZSBwYWdlIGNvbnRlbnQgZnJvbSBkaXNhcGVhcmluZyBiZWhpbmQgdGhlIGZpeGVkIGZvb3RlciAtLT5cclxuICAgIDxkaXY+PGJyPiA8YnI+IDxicj4gPC9kaXY+XHJcbiAgICA8Zm9vdGVyIGNsYXNzPVwiZml4ZWQtYm90dG9tIHRleHQtYmctZGFya1wiIHN0eWxlPVwiei1pbmRleDogOTk5OTsgXCI+XHJcbiAgICAgIDxNZXNzYWdlRGlzcGxheSB2LWJpbmQ6bWVzc2FnZXM9XCJtZXNzYWdlc1wiLz5cclxuICAgICAgPGhyIGNsYXNzPVwibXgtMSBteS0xIFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbFwiPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJteC0zIG15LTEgcHktMCB0ZXh0LXN0YXJ0XCI+XHJcbiAgICAgICAgICAgIEZvciBzdXBwb3J0LCBwbGVhc2UgZW1haWwgdXMgYXQ6IHN1cHBvcnRAdGhlYmlndGVhbS5jby51a1xyXG4gICAgICAgICAgICA8IS0tIElQIEFkZHJlc3M6IHt7IHRoaXMudXNlci5pcF9hZGRyZXNzIH19IC0tPlxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2xcIj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwibXgtMyBteS0xIHB5LTAgdGV4dC1lbmRcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiaWNvbiBiaS1jLWNpcmNsZSBtcy0wIHBzLTBcIiBzdHlsZT1cImZvbnQtc2l6ZTogMS4wcmVtO1wiPjwvaT4gMjAyMyAtIGR0LXNxdWFkIEx0ZCZuYnNwXHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8aHIgY2xhc3M9XCJteC0xIG15LTEgXCI+XHJcbiAgICA8L2Zvb3Rlcj5cclxuICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmltcG9ydCB7IHJlYWN0aXZlIH0gZnJvbSBcInZ1ZVwiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4vanMvVXNlclwiO1xyXG5pbXBvcnQgeyBVc2VycyB9IGZyb20gXCIuL2pzL1VzZXJzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VzIH0gZnJvbSBcIi4vanMvTWVzc2FnZXNcIjtcclxuaW1wb3J0IE1lc3NhZ2VEaXNwbGF5IGZyb20gXCIuL2NvbXBvbmVudHMvTWVzc2FnZURpc3BsYXkudnVlXCI7XHJcbmltcG9ydCBOYXZiYXIgZnJvbSBcIi4vY29tcG9uZW50cy9OYXZiYXIudnVlXCJcclxuaW1wb3J0IFJvbGVzIGZyb20gXCIuL2pzL1JvbGVzXCI7XHJcbi8vIGltcG9ydCB7IHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlcnM6IHt9LFxyXG4gICAgICB1c2VyOiB7fSxcclxuICAgICAgbWVzc2FnZXM6IHt9LFxyXG4gICAgICByb2xlczoge30sXHJcbiAgICAgIC8vIG5lZWRzVnVlUmVmcmVzaDogeyBcImRhdGFcIjogZmFsc2UsIFwia2VlcExvb3BpbmdcIjogZmFsc2UgfSxcclxuICAgIH1cclxuICB9LFxyXG4gIGNyZWF0ZWQoKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IHJlYWN0aXZlKG5ldyBNZXNzYWdlcygpKTtcclxuICAgIGNvbnN0IHVzZXIgPSByZWFjdGl2ZShuZXcgVXNlcihtZXNzYWdlcywgd2luZG93LmxvY2F0aW9uLm9yaWdpbikpO1xyXG4gICAgY29uc3Qgcm9sZXMgPSByZWFjdGl2ZShuZXcgUm9sZXMod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgdXNlcikpO1xyXG4gICAgY29uc3QgdXNlcnMgPSByZWFjdGl2ZShuZXcgVXNlcnModXNlciwgbWVzc2FnZXMsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sIHJvbGVzKSk7XHJcbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgdGhpcy5yb2xlcyA9IHJvbGVzO1xyXG4gICAgdGhpcy51c2VycyA9IHVzZXJzO1xyXG4gICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xyXG4gICAgdGhpcy5jaGVja19pbnZhbGlkX3Rva2VuKCk7XHJcbiAgICB0aGlzLmNoZWNrX3Rva2VuX3ZhbGlkaXR5KCk7XHJcbiAgICAvLyB0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZyA9IHRydWU7XHJcbiAgICAvLyB0aGlzLmNoZWNrX2xvZ2dlZF9pbigpO1xyXG4gICAgLy8gdGhpcy52dWVSZWZyZXNoKClcclxuICB9LFxyXG4gIGNvbXBvbmVudHM6IHtcclxuICAgIE1lc3NhZ2VEaXNwbGF5LFxyXG4gICAgTmF2YmFyXHJcbiAgfSxcclxuICBtZXRob2RzOiB7XHJcbiAgICBjaGVja19pbnZhbGlkX3Rva2VuKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVzZXIuaW52YWxpZF90b2tlbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIubG9nb3V0KClcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuYWRkX21lc3NhZ2UoXCJTZXNzaW9uIGV4cGlyZWQsIHBsZWFzZSBsb2dpbi5cIiwgXCJ0ZXh0LWRhbmdlciBoNlwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogXCJsb2dpblwiIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyLmxvZ2dlZF9pbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyLmludmFsaWRfdG9rZW4gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrX2ludmFsaWRfdG9rZW4sIDIwMDApXHJcbiAgICAgIH0sXHJcbiAgICBjaGVja190b2tlbl92YWxpZGl0eSgpIHtcclxuICAgICAgaWYgKHRoaXMudXNlci5sb2dnZWRfaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMudXNlci5jaGVja190b2tlbl92YWxpZGl0eSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja190b2tlbl92YWxpZGl0eSwgMzAwMDApXHJcbiAgICB9LFxyXG4gICAgdnVlX3JlZnJlc2goKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5lZWRzX3Z1ZV9yZWZyZXNoLmRhdGEgPSB0aGlzLnVzZXIuaXBfYWRkcmVzc1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubmVlZHNfdnVlX3JlZnJlc2gua2VlcF9sb29waW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBteV90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnZ1ZV9yZWZyZXNoLCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgICAgXHJcbiAgICBjaGVja19sb2dnZWRfaW4oKSB7XHJcbiAgICAgIC8vIHRoaXMudXNlcnMuY3VycmVudF91c2VyID0gdGhpcy51c2VyLmNoZWNrX2xvZ2dlZF9pbigpO1xyXG4gICAgICBpZiAoISh0aGlzLnVzZXIubG9nZ2VkX2luKSAmJiAhKHRoaXMuJHJvdXRlci5uYW1lPT1cInBhc3N3b3JkcmVzZXRcIikgKSB7XHJcbiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCJsb2dpblwiKVxyXG4gICAgICB9XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja19sb2dnZWRfaW4sIDUwMDApO1xyXG4gICAgfSxcclxuICB9XHJcbn1cclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGUgc2NvcGVkPlxyXG48L3N0eWxlPlxyXG4iLCIvKiFcbiAgKiB2dWUtcm91dGVyIHY0LjEuNlxuICAqIChjKSAyMDIyIEVkdWFyZG8gU2FuIE1hcnRpbiBNb3JvdGVcbiAgKiBAbGljZW5zZSBNSVRcbiAgKi9cbmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgaW5qZWN0LCBvblVubW91bnRlZCwgb25EZWFjdGl2YXRlZCwgb25BY3RpdmF0ZWQsIGNvbXB1dGVkLCB1bnJlZiwgd2F0Y2hFZmZlY3QsIGRlZmluZUNvbXBvbmVudCwgcmVhY3RpdmUsIGgsIHByb3ZpZGUsIHJlZiwgd2F0Y2gsIHNoYWxsb3dSZWYsIG5leHRUaWNrIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHNldHVwRGV2dG9vbHNQbHVnaW4gfSBmcm9tICdAdnVlL2RldnRvb2xzLWFwaSc7XG5cbmNvbnN0IGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG5mdW5jdGlvbiBpc0VTTW9kdWxlKG9iaikge1xyXG4gICAgcmV0dXJuIG9iai5fX2VzTW9kdWxlIHx8IG9ialtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJztcclxufVxyXG5jb25zdCBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xyXG5mdW5jdGlvbiBhcHBseVRvUGFyYW1zKGZuLCBwYXJhbXMpIHtcclxuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXNba2V5XTtcclxuICAgICAgICBuZXdQYXJhbXNba2V5XSA9IGlzQXJyYXkodmFsdWUpXHJcbiAgICAgICAgICAgID8gdmFsdWUubWFwKGZuKVxyXG4gICAgICAgICAgICA6IGZuKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdQYXJhbXM7XHJcbn1cclxuY29uc3Qgbm9vcCA9ICgpID0+IHsgfTtcclxuLyoqXHJcbiAqIFR5cGVzYWZlIGFsdGVybmF0aXZlIHRvIEFycmF5LmlzQXJyYXlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L3B1bGwvNDgyMjhcclxuICovXHJcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xyXG4gICAgLy8gYXZvaWQgdXNpbmcgLi4uYXJncyBhcyBpdCBicmVha3MgaW4gb2xkZXIgRWRnZSBidWlsZHNcclxuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cykuc2xpY2UoMSk7XHJcbiAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgWydbVnVlIFJvdXRlciB3YXJuXTogJyArIG1zZ10uY29uY2F0KGFyZ3MpKTtcclxufVxuXG5jb25zdCBUUkFJTElOR19TTEFTSF9SRSA9IC9cXC8kLztcclxuY29uc3QgcmVtb3ZlVHJhaWxpbmdTbGFzaCA9IChwYXRoKSA9PiBwYXRoLnJlcGxhY2UoVFJBSUxJTkdfU0xBU0hfUkUsICcnKTtcclxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgYSBVUkkgaW50byBhIG5vcm1hbGl6ZWQgaGlzdG9yeSBsb2NhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gcGFyc2VRdWVyeVxyXG4gKiBAcGFyYW0gbG9jYXRpb24gLSBVUkkgdG8gbm9ybWFsaXplXHJcbiAqIEBwYXJhbSBjdXJyZW50TG9jYXRpb24gLSBjdXJyZW50IGFic29sdXRlIGxvY2F0aW9uLiBBbGxvd3MgcmVzb2x2aW5nIHJlbGF0aXZlXHJcbiAqIHBhdGhzLiBNdXN0IHN0YXJ0IHdpdGggYC9gLiBEZWZhdWx0cyB0byBgL2BcclxuICogQHJldHVybnMgYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlVVJMKHBhcnNlUXVlcnksIGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gPSAnLycpIHtcclxuICAgIGxldCBwYXRoLCBxdWVyeSA9IHt9LCBzZWFyY2hTdHJpbmcgPSAnJywgaGFzaCA9ICcnO1xyXG4gICAgLy8gQ291bGQgdXNlIFVSTCBhbmQgVVJMU2VhcmNoUGFyYW1zIGJ1dCBJRSAxMSBkb2Vzbid0IHN1cHBvcnQgaXRcclxuICAgIC8vIFRPRE86IG1vdmUgdG8gbmV3IFVSTCgpXHJcbiAgICBjb25zdCBoYXNoUG9zID0gbG9jYXRpb24uaW5kZXhPZignIycpO1xyXG4gICAgbGV0IHNlYXJjaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoJz8nKTtcclxuICAgIC8vIHRoZSBoYXNoIGFwcGVhcnMgYmVmb3JlIHRoZSBzZWFyY2gsIHNvIGl0J3Mgbm90IHBhcnQgb2YgdGhlIHNlYXJjaCBzdHJpbmdcclxuICAgIGlmIChoYXNoUG9zIDwgc2VhcmNoUG9zICYmIGhhc2hQb3MgPj0gMCkge1xyXG4gICAgICAgIHNlYXJjaFBvcyA9IC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKHNlYXJjaFBvcyA+IC0xKSB7XHJcbiAgICAgICAgcGF0aCA9IGxvY2F0aW9uLnNsaWNlKDAsIHNlYXJjaFBvcyk7XHJcbiAgICAgICAgc2VhcmNoU3RyaW5nID0gbG9jYXRpb24uc2xpY2Uoc2VhcmNoUG9zICsgMSwgaGFzaFBvcyA+IC0xID8gaGFzaFBvcyA6IGxvY2F0aW9uLmxlbmd0aCk7XHJcbiAgICAgICAgcXVlcnkgPSBwYXJzZVF1ZXJ5KHNlYXJjaFN0cmluZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaGFzaFBvcyA+IC0xKSB7XHJcbiAgICAgICAgcGF0aCA9IHBhdGggfHwgbG9jYXRpb24uc2xpY2UoMCwgaGFzaFBvcyk7XHJcbiAgICAgICAgLy8ga2VlcCB0aGUgIyBjaGFyYWN0ZXJcclxuICAgICAgICBoYXNoID0gbG9jYXRpb24uc2xpY2UoaGFzaFBvcywgbG9jYXRpb24ubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIC8vIG5vIHNlYXJjaCBhbmQgbm8gcXVlcnlcclxuICAgIHBhdGggPSByZXNvbHZlUmVsYXRpdmVQYXRoKHBhdGggIT0gbnVsbCA/IHBhdGggOiBsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcclxuICAgIC8vIGVtcHR5IHBhdGggbWVhbnMgYSByZWxhdGl2ZSBxdWVyeSBvciBoYXNoIGA/Zm9vPWZgLCBgI3RoaW5nYFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBmdWxsUGF0aDogcGF0aCArIChzZWFyY2hTdHJpbmcgJiYgJz8nKSArIHNlYXJjaFN0cmluZyArIGhhc2gsXHJcbiAgICAgICAgcGF0aCxcclxuICAgICAgICBxdWVyeSxcclxuICAgICAgICBoYXNoLFxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogU3RyaW5naWZpZXMgYSBVUkwgb2JqZWN0XHJcbiAqXHJcbiAqIEBwYXJhbSBzdHJpbmdpZnlRdWVyeVxyXG4gKiBAcGFyYW0gbG9jYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeVVSTChzdHJpbmdpZnlRdWVyeSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgPyBzdHJpbmdpZnlRdWVyeShsb2NhdGlvbi5xdWVyeSkgOiAnJztcclxuICAgIHJldHVybiBsb2NhdGlvbi5wYXRoICsgKHF1ZXJ5ICYmICc/JykgKyBxdWVyeSArIChsb2NhdGlvbi5oYXNoIHx8ICcnKTtcclxufVxyXG4vKipcclxuICogU3RyaXBzIG9mZiB0aGUgYmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgYSBsb2NhdGlvbi5wYXRobmFtZSBpbiBhIG5vbi1jYXNlLXNlbnNpdGl2ZSB3YXkuXHJcbiAqXHJcbiAqIEBwYXJhbSBwYXRobmFtZSAtIGxvY2F0aW9uLnBhdGhuYW1lXHJcbiAqIEBwYXJhbSBiYXNlIC0gYmFzZSB0byBzdHJpcCBvZmZcclxuICovXHJcbmZ1bmN0aW9uIHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSkge1xyXG4gICAgLy8gbm8gYmFzZSBvciBiYXNlIGlzIG5vdCBmb3VuZCBhdCB0aGUgYmVnaW5uaW5nXHJcbiAgICBpZiAoIWJhc2UgfHwgIXBhdGhuYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChiYXNlLnRvTG93ZXJDYXNlKCkpKVxyXG4gICAgICAgIHJldHVybiBwYXRobmFtZTtcclxuICAgIHJldHVybiBwYXRobmFtZS5zbGljZShiYXNlLmxlbmd0aCkgfHwgJy8nO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdHdvIFJvdXRlTG9jYXRpb24gYXJlIGVxdWFsLiBUaGlzIG1lYW5zIHRoYXQgYm90aCBsb2NhdGlvbnMgYXJlXHJcbiAqIHBvaW50aW5nIHRvd2FyZHMgdGhlIHNhbWUge0BsaW5rIFJvdXRlUmVjb3JkfSBhbmQgdGhhdCBhbGwgYHBhcmFtc2AsIGBxdWVyeWBcclxuICogcGFyYW1ldGVycyBhbmQgYGhhc2hgIGFyZSB0aGUgc2FtZVxyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGZpcnN0IHtAbGluayBSb3V0ZUxvY2F0aW9ufVxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVMb2NhdGlvbn1cclxuICovXHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnksIGEsIGIpIHtcclxuICAgIGNvbnN0IGFMYXN0SW5kZXggPSBhLm1hdGNoZWQubGVuZ3RoIC0gMTtcclxuICAgIGNvbnN0IGJMYXN0SW5kZXggPSBiLm1hdGNoZWQubGVuZ3RoIC0gMTtcclxuICAgIHJldHVybiAoYUxhc3RJbmRleCA+IC0xICYmXHJcbiAgICAgICAgYUxhc3RJbmRleCA9PT0gYkxhc3RJbmRleCAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlUmVjb3JkKGEubWF0Y2hlZFthTGFzdEluZGV4XSwgYi5tYXRjaGVkW2JMYXN0SW5kZXhdKSAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYS5wYXJhbXMsIGIucGFyYW1zKSAmJlxyXG4gICAgICAgIHN0cmluZ2lmeVF1ZXJ5KGEucXVlcnkpID09PSBzdHJpbmdpZnlRdWVyeShiLnF1ZXJ5KSAmJlxyXG4gICAgICAgIGEuaGFzaCA9PT0gYi5oYXNoKTtcclxufVxyXG4vKipcclxuICogQ2hlY2sgaWYgdHdvIGBSb3V0ZVJlY29yZHNgIGFyZSBlcXVhbC4gVGFrZXMgaW50byBhY2NvdW50IGFsaWFzZXM6IHRoZXkgYXJlXHJcbiAqIGNvbnNpZGVyZWQgZXF1YWwgdG8gdGhlIGBSb3V0ZVJlY29yZGAgdGhleSBhcmUgYWxpYXNpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gZmlyc3Qge0BsaW5rIFJvdXRlUmVjb3JkfVxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVSZWNvcmR9XHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZVJlY29yZChhLCBiKSB7XHJcbiAgICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcclxuICAgIC8vIGJ1dCBhbGwgYWxpYXNlcyBwb2ludCB0byB0aGUgb3JpZ2luYWwgcmVjb3JkLCB0aGlzIHdpbGwgYWx3YXlzIGNvbXBhcmVcclxuICAgIC8vIHRoZSBvcmlnaW5hbCByZWNvcmRcclxuICAgIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYSwgYikge1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGEpIHtcclxuICAgICAgICBpZiAoIWlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhW2tleV0sIGJba2V5XSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhLCBiKSB7XHJcbiAgICByZXR1cm4gaXNBcnJheShhKVxyXG4gICAgICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYSwgYilcclxuICAgICAgICA6IGlzQXJyYXkoYilcclxuICAgICAgICAgICAgPyBpc0VxdWl2YWxlbnRBcnJheShiLCBhKVxyXG4gICAgICAgICAgICA6IGEgPT09IGI7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrIGlmIHR3byBhcnJheXMgYXJlIHRoZSBzYW1lIG9yIGlmIGFuIGFycmF5IHdpdGggb25lIHNpbmdsZSBlbnRyeSBpcyB0aGVcclxuICogc2FtZSBhcyBhbm90aGVyIHByaW1pdGl2ZSB2YWx1ZS4gVXNlZCB0byBjaGVjayBxdWVyeSBhbmQgcGFyYW1ldGVyc1xyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGFycmF5IG9mIHZhbHVlc1xyXG4gKiBAcGFyYW0gYiAtIGFycmF5IG9mIHZhbHVlcyBvciBhIHNpbmdsZSB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24gaXNFcXVpdmFsZW50QXJyYXkoYSwgYikge1xyXG4gICAgcmV0dXJuIGlzQXJyYXkoYilcclxuICAgICAgICA/IGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IGJbaV0pXHJcbiAgICAgICAgOiBhLmxlbmd0aCA9PT0gMSAmJiBhWzBdID09PSBiO1xyXG59XHJcbi8qKlxyXG4gKiBSZXNvbHZlcyBhIHJlbGF0aXZlIHBhdGggdGhhdCBzdGFydHMgd2l0aCBgLmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB0byAtIHBhdGggbG9jYXRpb24gd2UgYXJlIHJlc29sdmluZ1xyXG4gKiBAcGFyYW0gZnJvbSAtIGN1cnJlbnRMb2NhdGlvbi5wYXRoLCBzaG91bGQgc3RhcnQgd2l0aCBgL2BcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVBhdGgodG8sIGZyb20pIHtcclxuICAgIGlmICh0by5zdGFydHNXaXRoKCcvJykpXHJcbiAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZnJvbS5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICB3YXJuKGBDYW5ub3QgcmVzb2x2ZSBhIHJlbGF0aXZlIGxvY2F0aW9uIHdpdGhvdXQgYW4gYWJzb2x1dGUgcGF0aC4gVHJ5aW5nIHRvIHJlc29sdmUgXCIke3RvfVwiIGZyb20gXCIke2Zyb219XCIuIEl0IHNob3VsZCBsb29rIGxpa2UgXCIvJHtmcm9tfVwiLmApO1xyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIH1cclxuICAgIGlmICghdG8pXHJcbiAgICAgICAgcmV0dXJuIGZyb207XHJcbiAgICBjb25zdCBmcm9tU2VnbWVudHMgPSBmcm9tLnNwbGl0KCcvJyk7XHJcbiAgICBjb25zdCB0b1NlZ21lbnRzID0gdG8uc3BsaXQoJy8nKTtcclxuICAgIGxldCBwb3NpdGlvbiA9IGZyb21TZWdtZW50cy5sZW5ndGggLSAxO1xyXG4gICAgbGV0IHRvUG9zaXRpb247XHJcbiAgICBsZXQgc2VnbWVudDtcclxuICAgIGZvciAodG9Qb3NpdGlvbiA9IDA7IHRvUG9zaXRpb24gPCB0b1NlZ21lbnRzLmxlbmd0aDsgdG9Qb3NpdGlvbisrKSB7XHJcbiAgICAgICAgc2VnbWVudCA9IHRvU2VnbWVudHNbdG9Qb3NpdGlvbl07XHJcbiAgICAgICAgLy8gd2Ugc3RheSBvbiB0aGUgc2FtZSBwb3NpdGlvblxyXG4gICAgICAgIGlmIChzZWdtZW50ID09PSAnLicpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIC8vIGdvIHVwIGluIHRoZSBmcm9tIGFycmF5XHJcbiAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcuLicpIHtcclxuICAgICAgICAgICAgLy8gd2UgY2FuJ3QgZ28gYmVsb3cgemVybywgYnV0IHdlIHN0aWxsIG5lZWQgdG8gaW5jcmVtZW50IHRvUG9zaXRpb25cclxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID4gMSlcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHdlIHJlYWNoZWQgYSBub24tcmVsYXRpdmUgcGF0aCwgd2Ugc3RvcCBoZXJlXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiAoZnJvbVNlZ21lbnRzLnNsaWNlKDAsIHBvc2l0aW9uKS5qb2luKCcvJykgK1xyXG4gICAgICAgICcvJyArXHJcbiAgICAgICAgdG9TZWdtZW50c1xyXG4gICAgICAgICAgICAvLyBlbnN1cmUgd2UgdXNlIGF0IGxlYXN0IHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHRvU2VnbWVudHNcclxuICAgICAgICAgICAgLnNsaWNlKHRvUG9zaXRpb24gLSAodG9Qb3NpdGlvbiA9PT0gdG9TZWdtZW50cy5sZW5ndGggPyAxIDogMCkpXHJcbiAgICAgICAgICAgIC5qb2luKCcvJykpO1xyXG59XG5cbnZhciBOYXZpZ2F0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uVHlwZSkge1xyXG4gICAgTmF2aWdhdGlvblR5cGVbXCJwb3BcIl0gPSBcInBvcFwiO1xyXG4gICAgTmF2aWdhdGlvblR5cGVbXCJwdXNoXCJdID0gXCJwdXNoXCI7XHJcbn0pKE5hdmlnYXRpb25UeXBlIHx8IChOYXZpZ2F0aW9uVHlwZSA9IHt9KSk7XHJcbnZhciBOYXZpZ2F0aW9uRGlyZWN0aW9uO1xyXG4oZnVuY3Rpb24gKE5hdmlnYXRpb25EaXJlY3Rpb24pIHtcclxuICAgIE5hdmlnYXRpb25EaXJlY3Rpb25bXCJiYWNrXCJdID0gXCJiYWNrXCI7XHJcbiAgICBOYXZpZ2F0aW9uRGlyZWN0aW9uW1wiZm9yd2FyZFwiXSA9IFwiZm9yd2FyZFwiO1xyXG4gICAgTmF2aWdhdGlvbkRpcmVjdGlvbltcInVua25vd25cIl0gPSBcIlwiO1xyXG59KShOYXZpZ2F0aW9uRGlyZWN0aW9uIHx8IChOYXZpZ2F0aW9uRGlyZWN0aW9uID0ge30pKTtcclxuLyoqXHJcbiAqIFN0YXJ0aW5nIGxvY2F0aW9uIGZvciBIaXN0b3JpZXNcclxuICovXHJcbmNvbnN0IFNUQVJUID0gJyc7XHJcbi8vIEdlbmVyaWMgdXRpbHNcclxuLyoqXHJcbiAqIE5vcm1hbGl6ZXMgYSBiYXNlIGJ5IHJlbW92aW5nIGFueSB0cmFpbGluZyBzbGFzaCBhbmQgcmVhZGluZyB0aGUgYmFzZSB0YWcgaWZcclxuICogcHJlc2VudC5cclxuICpcclxuICogQHBhcmFtIGJhc2UgLSBiYXNlIHRvIG5vcm1hbGl6ZVxyXG4gKi9cclxuZnVuY3Rpb24gbm9ybWFsaXplQmFzZShiYXNlKSB7XHJcbiAgICBpZiAoIWJhc2UpIHtcclxuICAgICAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc3BlY3QgPGJhc2U+IHRhZ1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XHJcbiAgICAgICAgICAgIGJhc2UgPSAoYmFzZUVsICYmIGJhc2VFbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkgfHwgJy8nO1xyXG4gICAgICAgICAgICAvLyBzdHJpcCBmdWxsIFVSTCBvcmlnaW5cclxuICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZSgvXlxcdys6XFwvXFwvW15cXC9dKy8sICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGJhc2UgPSAnLyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2ggd2hlbiBpdCB3YXMgcmVtb3ZlZCBieSB0aGUgcmVnZXggYWJvdmUgYXZvaWQgbGVhZGluZ1xyXG4gICAgLy8gc2xhc2ggd2l0aCBoYXNoIGJlY2F1c2UgdGhlIGZpbGUgY291bGQgYmUgcmVhZCBmcm9tIHRoZSBkaXNrIGxpa2UgZmlsZTovL1xyXG4gICAgLy8gYW5kIHRoZSBsZWFkaW5nIHNsYXNoIHdvdWxkIGNhdXNlIHByb2JsZW1zXHJcbiAgICBpZiAoYmFzZVswXSAhPT0gJy8nICYmIGJhc2VbMF0gIT09ICcjJylcclxuICAgICAgICBiYXNlID0gJy8nICsgYmFzZTtcclxuICAgIC8vIHJlbW92ZSB0aGUgdHJhaWxpbmcgc2xhc2ggc28gYWxsIG90aGVyIG1ldGhvZCBjYW4ganVzdCBkbyBgYmFzZSArIGZ1bGxQYXRoYFxyXG4gICAgLy8gdG8gYnVpbGQgYW4gaHJlZlxyXG4gICAgcmV0dXJuIHJlbW92ZVRyYWlsaW5nU2xhc2goYmFzZSk7XHJcbn1cclxuLy8gcmVtb3ZlIGFueSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBoYXNoXHJcbmNvbnN0IEJFRk9SRV9IQVNIX1JFID0gL15bXiNdKyMvO1xyXG5mdW5jdGlvbiBjcmVhdGVIcmVmKGJhc2UsIGxvY2F0aW9uKSB7XHJcbiAgICByZXR1cm4gYmFzZS5yZXBsYWNlKEJFRk9SRV9IQVNIX1JFLCAnIycpICsgbG9jYXRpb247XHJcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudFBvc2l0aW9uKGVsLCBvZmZzZXQpIHtcclxuICAgIGNvbnN0IGRvY1JlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBlbFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmVoYXZpb3I6IG9mZnNldC5iZWhhdmlvcixcclxuICAgICAgICBsZWZ0OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIChvZmZzZXQubGVmdCB8fCAwKSxcclxuICAgICAgICB0b3A6IGVsUmVjdC50b3AgLSBkb2NSZWN0LnRvcCAtIChvZmZzZXQudG9wIHx8IDApLFxyXG4gICAgfTtcclxufVxyXG5jb25zdCBjb21wdXRlU2Nyb2xsUG9zaXRpb24gPSAoKSA9PiAoe1xyXG4gICAgbGVmdDogd2luZG93LnBhZ2VYT2Zmc2V0LFxyXG4gICAgdG9wOiB3aW5kb3cucGFnZVlPZmZzZXQsXHJcbn0pO1xyXG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSB7XHJcbiAgICBsZXQgc2Nyb2xsVG9PcHRpb25zO1xyXG4gICAgaWYgKCdlbCcgaW4gcG9zaXRpb24pIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbkVsID0gcG9zaXRpb24uZWw7XHJcbiAgICAgICAgY29uc3QgaXNJZFNlbGVjdG9yID0gdHlwZW9mIHBvc2l0aW9uRWwgPT09ICdzdHJpbmcnICYmIHBvc2l0aW9uRWwuc3RhcnRzV2l0aCgnIycpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGBpZGBzIGNhbiBhY2NlcHQgcHJldHR5IG11Y2ggYW55IGNoYXJhY3RlcnMsIGluY2x1ZGluZyBDU1MgY29tYmluYXRvcnNcclxuICAgICAgICAgKiBsaWtlIGA+YCBvciBgfmAuIEl0J3Mgc3RpbGwgcG9zc2libGUgdG8gcmV0cmlldmUgZWxlbWVudHMgdXNpbmdcclxuICAgICAgICAgKiBgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ34nKWAgYnV0IGl0IG5lZWRzIHRvIGJlIGVzY2FwZWQgd2hlbiB1c2luZ1xyXG4gICAgICAgICAqIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjXFxcXH4nKWAgZm9yIGl0IHRvIGJlIHZhbGlkLiBUaGUgb25seVxyXG4gICAgICAgICAqIHJlcXVpcmVtZW50cyBmb3IgYGlkYHMgYXJlIHRoZW0gdG8gYmUgdW5pcXVlIG9uIHRoZSBwYWdlIGFuZCB0byBub3QgYmVcclxuICAgICAgICAgKiBlbXB0eSAoYGlkPVwiXCJgKS4gQmVjYXVzZSBvZiB0aGF0LCB3aGVuIHBhc3NpbmcgYW4gaWQgc2VsZWN0b3IsIGl0IHNob3VsZFxyXG4gICAgICAgICAqIGJlIHByb3Blcmx5IGVzY2FwZWQgZm9yIGl0IHRvIHdvcmsgd2l0aCBgcXVlcnlTZWxlY3RvcmAuIFdlIGNvdWxkIGNoZWNrXHJcbiAgICAgICAgICogZm9yIHRoZSBpZCBzZWxlY3RvciB0byBiZSBzaW1wbGUgKG5vIENTUyBjb21iaW5hdG9ycyBgKyA+fmApIGJ1dCB0aGF0XHJcbiAgICAgICAgICogd291bGQgbWFrZSB0aGluZ3MgaW5jb25zaXN0ZW50IHNpbmNlIHRoZXkgYXJlIHZhbGlkIGNoYXJhY3RlcnMgZm9yIGFuXHJcbiAgICAgICAgICogYGlkYCBidXQgd291bGQgbmVlZCB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmcgYHF1ZXJ5U2VsZWN0b3JgLCBicmVha2luZ1xyXG4gICAgICAgICAqIHRoZWlyIHVzYWdlIGFuZCBlbmRpbmcgdXAgaW4gbm8gc2VsZWN0b3IgcmV0dXJuZWQuIFNlbGVjdG9ycyBuZWVkIHRvIGJlXHJcbiAgICAgICAgICogZXNjYXBlZDpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC0gYCMxLXRoaW5nYCBiZWNvbWVzIGAjXFwzMSAtdGhpbmdgXHJcbiAgICAgICAgICogLSBgI3dpdGh+c3ltYm9sc2AgYmVjb21lcyBgI3dpdGhcXFxcfnN5bWJvbHNgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAtIE1vcmUgaW5mb3JtYXRpb24gYWJvdXQgIHRoZSB0b3BpYyBjYW4gYmUgZm91bmQgYXRcclxuICAgICAgICAgKiAgIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9odG1sNS1pZC1jbGFzcy5cclxuICAgICAgICAgKiAtIFByYWN0aWNhbCBleGFtcGxlOiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvZGVtby9odG1sNS1pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdHlwZW9mIHBvc2l0aW9uLmVsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBpZiAoIWlzSWRTZWxlY3RvciB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24uZWwuc2xpY2UoMSkpKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvc2l0aW9uLmVsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJZFNlbGVjdG9yICYmIGZvdW5kRWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgVGhlIHNlbGVjdG9yIFwiJHtwb3NpdGlvbi5lbH1cIiBzaG91bGQgYmUgcGFzc2VkIGFzIFwiZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyR7cG9zaXRpb24uZWx9JylcIiBiZWNhdXNlIGl0IHN0YXJ0cyB3aXRoIFwiI1wiLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdG8gYXZvaWQgb3RoZXIgd2FybmluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBUaGUgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIGlzIGludmFsaWQuIElmIHlvdSBhcmUgdXNpbmcgYW4gaWQgc2VsZWN0b3IsIG1ha2Ugc3VyZSB0byBlc2NhcGUgaXQuIFlvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGVzY2FwaW5nIGNoYXJhY3RlcnMgaW4gc2VsZWN0b3JzIGF0IGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9jc3MtZXNjYXBlcyBvciB1c2UgQ1NTLmVzY2FwZSAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NTUy9lc2NhcGUpLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0byBhdm9pZCBvdGhlciB3YXJuaW5nc1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBlbCA9IHR5cGVvZiBwb3NpdGlvbkVsID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IGlzSWRTZWxlY3RvclxyXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbkVsLnNsaWNlKDEpKVxyXG4gICAgICAgICAgICAgICAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvc2l0aW9uRWwpXHJcbiAgICAgICAgICAgIDogcG9zaXRpb25FbDtcclxuICAgICAgICBpZiAoIWVsKSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgd2FybihgQ291bGRuJ3QgZmluZCBlbGVtZW50IHVzaW5nIHNlbGVjdG9yIFwiJHtwb3NpdGlvbi5lbH1cIiByZXR1cm5lZCBieSBzY3JvbGxCZWhhdmlvci5gKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzY3JvbGxUb09wdGlvbnMgPSBnZXRFbGVtZW50UG9zaXRpb24oZWwsIHBvc2l0aW9uKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHNjcm9sbFRvT3B0aW9ucyA9IHBvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKCdzY3JvbGxCZWhhdmlvcicgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKVxyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxUb09wdGlvbnMpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFRvT3B0aW9ucy5sZWZ0ICE9IG51bGwgPyBzY3JvbGxUb09wdGlvbnMubGVmdCA6IHdpbmRvdy5wYWdlWE9mZnNldCwgc2Nyb2xsVG9PcHRpb25zLnRvcCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLnRvcCA6IHdpbmRvdy5wYWdlWU9mZnNldCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0U2Nyb2xsS2V5KHBhdGgsIGRlbHRhKSB7XHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IGhpc3Rvcnkuc3RhdGUgPyBoaXN0b3J5LnN0YXRlLnBvc2l0aW9uIC0gZGVsdGEgOiAtMTtcclxuICAgIHJldHVybiBwb3NpdGlvbiArIHBhdGg7XHJcbn1cclxuY29uc3Qgc2Nyb2xsUG9zaXRpb25zID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBzYXZlU2Nyb2xsUG9zaXRpb24oa2V5LCBzY3JvbGxQb3NpdGlvbikge1xyXG4gICAgc2Nyb2xsUG9zaXRpb25zLnNldChrZXksIHNjcm9sbFBvc2l0aW9uKTtcclxufVxyXG5mdW5jdGlvbiBnZXRTYXZlZFNjcm9sbFBvc2l0aW9uKGtleSkge1xyXG4gICAgY29uc3Qgc2Nyb2xsID0gc2Nyb2xsUG9zaXRpb25zLmdldChrZXkpO1xyXG4gICAgLy8gY29uc3VtZSBpdCBzbyBpdCdzIG5vdCB1c2VkIGFnYWluXHJcbiAgICBzY3JvbGxQb3NpdGlvbnMuZGVsZXRlKGtleSk7XHJcbiAgICByZXR1cm4gc2Nyb2xsO1xyXG59XHJcbi8vIFRPRE86IFJGQyBhYm91dCBob3cgdG8gc2F2ZSBzY3JvbGwgcG9zaXRpb25cclxuLyoqXHJcbiAqIFNjcm9sbEJlaGF2aW9yIGluc3RhbmNlIHVzZWQgYnkgdGhlIHJvdXRlciB0byBjb21wdXRlIGFuZCByZXN0b3JlIHRoZSBzY3JvbGxcclxuICogcG9zaXRpb24gd2hlbiBuYXZpZ2F0aW5nLlxyXG4gKi9cclxuLy8gZXhwb3J0IGludGVyZmFjZSBTY3JvbGxIYW5kbGVyPFNjcm9sbFBvc2l0aW9uRW50cnkgZXh0ZW5kcyBIaXN0b3J5U3RhdGVWYWx1ZSwgU2Nyb2xsUG9zaXRpb24gZXh0ZW5kcyBTY3JvbGxQb3NpdGlvbkVudHJ5PiB7XHJcbi8vICAgLy8gcmV0dXJucyBhIHNjcm9sbCBwb3NpdGlvbiB0aGF0IGNhbiBiZSBzYXZlZCBpbiBoaXN0b3J5XHJcbi8vICAgY29tcHV0ZSgpOiBTY3JvbGxQb3NpdGlvbkVudHJ5XHJcbi8vICAgLy8gY2FuIHRha2UgYW4gZXh0ZW5kZWQgU2Nyb2xsUG9zaXRpb25FbnRyeVxyXG4vLyAgIHNjcm9sbChwb3NpdGlvbjogU2Nyb2xsUG9zaXRpb24pOiB2b2lkXHJcbi8vIH1cclxuLy8gZXhwb3J0IGNvbnN0IHNjcm9sbEhhbmRsZXI6IFNjcm9sbEhhbmRsZXI8U2Nyb2xsUG9zaXRpb24+ID0ge1xyXG4vLyAgIGNvbXB1dGU6IGNvbXB1dGVTY3JvbGwsXHJcbi8vICAgc2Nyb2xsOiBzY3JvbGxUb1Bvc2l0aW9uLFxyXG4vLyB9XG5cbmxldCBjcmVhdGVCYXNlTG9jYXRpb24gPSAoKSA9PiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0O1xyXG4vKipcclxuICogQ3JlYXRlcyBhIG5vcm1hbGl6ZWQgaGlzdG9yeSBsb2NhdGlvbiBmcm9tIGEgd2luZG93LmxvY2F0aW9uIG9iamVjdFxyXG4gKiBAcGFyYW0gbG9jYXRpb24gLVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ3VycmVudExvY2F0aW9uKGJhc2UsIGxvY2F0aW9uKSB7XHJcbiAgICBjb25zdCB7IHBhdGhuYW1lLCBzZWFyY2gsIGhhc2ggfSA9IGxvY2F0aW9uO1xyXG4gICAgLy8gYWxsb3dzIGhhc2ggYmFzZXMgbGlrZSAjLCAvIywgIy8sICMhLCAjIS8sIC8jIS8sIG9yIGV2ZW4gL2ZvbGRlciNlbmRcclxuICAgIGNvbnN0IGhhc2hQb3MgPSBiYXNlLmluZGV4T2YoJyMnKTtcclxuICAgIGlmIChoYXNoUG9zID4gLTEpIHtcclxuICAgICAgICBsZXQgc2xpY2VQb3MgPSBoYXNoLmluY2x1ZGVzKGJhc2Uuc2xpY2UoaGFzaFBvcykpXHJcbiAgICAgICAgICAgID8gYmFzZS5zbGljZShoYXNoUG9zKS5sZW5ndGhcclxuICAgICAgICAgICAgOiAxO1xyXG4gICAgICAgIGxldCBwYXRoRnJvbUhhc2ggPSBoYXNoLnNsaWNlKHNsaWNlUG9zKTtcclxuICAgICAgICAvLyBwcmVwZW5kIHRoZSBzdGFydGluZyBzbGFzaCB0byBoYXNoIHNvIHRoZSB1cmwgc3RhcnRzIHdpdGggLyNcclxuICAgICAgICBpZiAocGF0aEZyb21IYXNoWzBdICE9PSAnLycpXHJcbiAgICAgICAgICAgIHBhdGhGcm9tSGFzaCA9ICcvJyArIHBhdGhGcm9tSGFzaDtcclxuICAgICAgICByZXR1cm4gc3RyaXBCYXNlKHBhdGhGcm9tSGFzaCwgJycpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF0aCA9IHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSk7XHJcbiAgICByZXR1cm4gcGF0aCArIHNlYXJjaCArIGhhc2g7XHJcbn1cclxuZnVuY3Rpb24gdXNlSGlzdG9yeUxpc3RlbmVycyhiYXNlLCBoaXN0b3J5U3RhdGUsIGN1cnJlbnRMb2NhdGlvbiwgcmVwbGFjZSkge1xyXG4gICAgbGV0IGxpc3RlbmVycyA9IFtdO1xyXG4gICAgbGV0IHRlYXJkb3ducyA9IFtdO1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIGl0IGJlIGEgc3RhY2s/IGEgRGljdC4gQ2hlY2sgaWYgdGhlIHBvcHN0YXRlIGxpc3RlbmVyXHJcbiAgICAvLyBjYW4gdHJpZ2dlciB0d2ljZVxyXG4gICAgbGV0IHBhdXNlU3RhdGUgPSBudWxsO1xyXG4gICAgY29uc3QgcG9wU3RhdGVIYW5kbGVyID0gKHsgc3RhdGUsIH0pID0+IHtcclxuICAgICAgICBjb25zdCB0byA9IGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbik7XHJcbiAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRMb2NhdGlvbi52YWx1ZTtcclxuICAgICAgICBjb25zdCBmcm9tU3RhdGUgPSBoaXN0b3J5U3RhdGUudmFsdWU7XHJcbiAgICAgICAgbGV0IGRlbHRhID0gMDtcclxuICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XHJcbiAgICAgICAgICAgIGhpc3RvcnlTdGF0ZS52YWx1ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAvLyBpZ25vcmUgdGhlIHBvcHN0YXRlIGFuZCByZXNldCB0aGUgcGF1c2VTdGF0ZVxyXG4gICAgICAgICAgICBpZiAocGF1c2VTdGF0ZSAmJiBwYXVzZVN0YXRlID09PSBmcm9tKSB7XHJcbiAgICAgICAgICAgICAgICBwYXVzZVN0YXRlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWx0YSA9IGZyb21TdGF0ZSA/IHN0YXRlLnBvc2l0aW9uIC0gZnJvbVN0YXRlLnBvc2l0aW9uIDogMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcGxhY2UodG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh7IGRlbHRhRnJvbUN1cnJlbnQgfSlcclxuICAgICAgICAvLyBIZXJlIHdlIGNvdWxkIGFsc28gcmV2ZXJ0IHRoZSBuYXZpZ2F0aW9uIGJ5IGNhbGxpbmcgaGlzdG9yeS5nbygtZGVsdGEpXHJcbiAgICAgICAgLy8gdGhpcyBsaXN0ZW5lciB3aWxsIGhhdmUgdG8gYmUgYWRhcHRlZCB0byBub3QgdHJpZ2dlciBhZ2FpbiBhbmQgdG8gd2FpdCBmb3IgdGhlIHVybFxyXG4gICAgICAgIC8vIHRvIGJlIHVwZGF0ZWQgYmVmb3JlIHRyaWdnZXJpbmcgdGhlIGxpc3RlbmVycy4gU29tZSBraW5kIG9mIHZhbGlkYXRpb24gZnVuY3Rpb24gd291bGQgYWxzb1xyXG4gICAgICAgIC8vIG5lZWQgdG8gYmUgcGFzc2VkIHRvIHRoZSBsaXN0ZW5lcnMgc28gdGhlIG5hdmlnYXRpb24gY2FuIGJlIGFjY2VwdGVkXHJcbiAgICAgICAgLy8gY2FsbCBhbGwgbGlzdGVuZXJzXHJcbiAgICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihjdXJyZW50TG9jYXRpb24udmFsdWUsIGZyb20sIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogTmF2aWdhdGlvblR5cGUucG9wLFxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkZWx0YVxyXG4gICAgICAgICAgICAgICAgICAgID8gZGVsdGEgPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gTmF2aWdhdGlvbkRpcmVjdGlvbi5mb3J3YXJkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi5iYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgOiBOYXZpZ2F0aW9uRGlyZWN0aW9uLnVua25vd24sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIHBhdXNlTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHBhdXNlU3RhdGUgPSBjdXJyZW50TG9jYXRpb24udmFsdWU7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBsaXN0ZW4oY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBzZXQgdXAgdGhlIGxpc3RlbmVyIGFuZCBwcmVwYXJlIHRlYXJkb3duIGNhbGxiYWNrc1xyXG4gICAgICAgIGxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICBjb25zdCB0ZWFyZG93biA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0ZWFyZG93bnMucHVzaCh0ZWFyZG93bik7XHJcbiAgICAgICAgcmV0dXJuIHRlYXJkb3duO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYmVmb3JlVW5sb2FkTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgY29uc3QgeyBoaXN0b3J5IH0gPSB3aW5kb3c7XHJcbiAgICAgICAgaWYgKCFoaXN0b3J5LnN0YXRlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoYXNzaWduKHt9LCBoaXN0b3J5LnN0YXRlLCB7IHNjcm9sbDogY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCkgfSksICcnKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB0ZWFyZG93biBvZiB0ZWFyZG93bnMpXHJcbiAgICAgICAgICAgIHRlYXJkb3duKCk7XHJcbiAgICAgICAgdGVhcmRvd25zID0gW107XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgcG9wU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgYmVmb3JlVW5sb2FkTGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gc2V0IHVwIHRoZSBsaXN0ZW5lcnMgYW5kIHByZXBhcmUgdGVhcmRvd24gY2FsbGJhY2tzXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcGF1c2VMaXN0ZW5lcnMsXHJcbiAgICAgICAgbGlzdGVuLFxyXG4gICAgICAgIGRlc3Ryb3ksXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc3RhdGUgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBidWlsZFN0YXRlKGJhY2ssIGN1cnJlbnQsIGZvcndhcmQsIHJlcGxhY2VkID0gZmFsc2UsIGNvbXB1dGVTY3JvbGwgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBiYWNrLFxyXG4gICAgICAgIGN1cnJlbnQsXHJcbiAgICAgICAgZm9yd2FyZCxcclxuICAgICAgICByZXBsYWNlZCxcclxuICAgICAgICBwb3NpdGlvbjogd2luZG93Lmhpc3RvcnkubGVuZ3RoLFxyXG4gICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbCA/IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIDogbnVsbCxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKSB7XHJcbiAgICBjb25zdCB7IGhpc3RvcnksIGxvY2F0aW9uIH0gPSB3aW5kb3c7XHJcbiAgICAvLyBwcml2YXRlIHZhcmlhYmxlc1xyXG4gICAgY29uc3QgY3VycmVudExvY2F0aW9uID0ge1xyXG4gICAgICAgIHZhbHVlOiBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGhpc3RvcnlTdGF0ZSA9IHsgdmFsdWU6IGhpc3Rvcnkuc3RhdGUgfTtcclxuICAgIC8vIGJ1aWxkIGN1cnJlbnQgaGlzdG9yeSBlbnRyeSBhcyB0aGlzIGlzIGEgZnJlc2ggbmF2aWdhdGlvblxyXG4gICAgaWYgKCFoaXN0b3J5U3RhdGUudmFsdWUpIHtcclxuICAgICAgICBjaGFuZ2VMb2NhdGlvbihjdXJyZW50TG9jYXRpb24udmFsdWUsIHtcclxuICAgICAgICAgICAgYmFjazogbnVsbCxcclxuICAgICAgICAgICAgY3VycmVudDogY3VycmVudExvY2F0aW9uLnZhbHVlLFxyXG4gICAgICAgICAgICBmb3J3YXJkOiBudWxsLFxyXG4gICAgICAgICAgICAvLyB0aGUgbGVuZ3RoIGlzIG9mZiBieSBvbmUsIHdlIG5lZWQgdG8gZGVjcmVhc2UgaXRcclxuICAgICAgICAgICAgcG9zaXRpb246IGhpc3RvcnkubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgcmVwbGFjZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGRvbid0IGFkZCBhIHNjcm9sbCBhcyB0aGUgdXNlciBtYXkgaGF2ZSBhbiBhbmNob3IsIGFuZCB3ZSB3YW50XHJcbiAgICAgICAgICAgIC8vIHNjcm9sbEJlaGF2aW9yIHRvIGJlIHRyaWdnZXJlZCB3aXRob3V0IGEgc2F2ZWQgcG9zaXRpb25cclxuICAgICAgICAgICAgc2Nyb2xsOiBudWxsLFxyXG4gICAgICAgIH0sIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCByZXBsYWNlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogaWYgYSBiYXNlIHRhZyBpcyBwcm92aWRlZCwgYW5kIHdlIGFyZSBvbiBhIG5vcm1hbCBkb21haW4sIHdlIGhhdmUgdG9cclxuICAgICAgICAgKiByZXNwZWN0IHRoZSBwcm92aWRlZCBgYmFzZWAgYXR0cmlidXRlIGJlY2F1c2UgcHVzaFN0YXRlKCkgd2lsbCB1c2UgaXQgYW5kXHJcbiAgICAgICAgICogcG90ZW50aWFsbHkgZXJhc2UgYW55dGhpbmcgYmVmb3JlIHRoZSBgI2AgbGlrZSBhdFxyXG4gICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzY4NSB3aGVyZSBhIGJhc2Ugb2ZcclxuICAgICAgICAgKiBgL2ZvbGRlci8jYCBidXQgYSBiYXNlIG9mIGAvYCB3b3VsZCBlcmFzZSB0aGUgYC9mb2xkZXIvYCBzZWN0aW9uLiBJZlxyXG4gICAgICAgICAqIHRoZXJlIGlzIG5vIGhvc3QsIHRoZSBgPGJhc2U+YCB0YWcgbWFrZXMgbm8gc2Vuc2UgYW5kIGlmIHRoZXJlIGlzbid0IGFcclxuICAgICAgICAgKiBiYXNlIHRhZyB3ZSBjYW4ganVzdCB1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgYCNgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGhhc2hJbmRleCA9IGJhc2UuaW5kZXhPZignIycpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGhhc2hJbmRleCA+IC0xXHJcbiAgICAgICAgICAgID8gKGxvY2F0aW9uLmhvc3QgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpXHJcbiAgICAgICAgICAgICAgICA/IGJhc2VcclxuICAgICAgICAgICAgICAgIDogYmFzZS5zbGljZShoYXNoSW5kZXgpKSArIHRvXHJcbiAgICAgICAgICAgIDogY3JlYXRlQmFzZUxvY2F0aW9uKCkgKyBiYXNlICsgdG87XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQlJPV1NFUiBRVUlSS1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBTYWZhcmkgdGhyb3dzIGEgU2VjdXJpdHlFcnJvciB3aGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiAxMDAgdGltZXMgaW4gMzAgc2Vjb25kc1xyXG4gICAgICAgICAgICBoaXN0b3J5W3JlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXShzdGF0ZSwgJycsIHVybCk7XHJcbiAgICAgICAgICAgIGhpc3RvcnlTdGF0ZS52YWx1ZSA9IHN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oJ0Vycm9yIHdpdGggcHVzaC9yZXBsYWNlIFN0YXRlJywgZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBGb3JjZSB0aGUgbmF2aWdhdGlvbiwgdGhpcyBhbHNvIHJlc2V0cyB0aGUgY2FsbCBjb3VudFxyXG4gICAgICAgICAgICBsb2NhdGlvbltyZXBsYWNlID8gJ3JlcGxhY2UnIDogJ2Fzc2lnbiddKHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVwbGFjZSh0bywgZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXNzaWduKHt9LCBoaXN0b3J5LnN0YXRlLCBidWlsZFN0YXRlKGhpc3RvcnlTdGF0ZS52YWx1ZS5iYWNrLCBcclxuICAgICAgICAvLyBrZWVwIGJhY2sgYW5kIGZvcndhcmQgZW50cmllcyBidXQgb3ZlcnJpZGUgY3VycmVudCBwb3NpdGlvblxyXG4gICAgICAgIHRvLCBoaXN0b3J5U3RhdGUudmFsdWUuZm9yd2FyZCwgdHJ1ZSksIGRhdGEsIHsgcG9zaXRpb246IGhpc3RvcnlTdGF0ZS52YWx1ZS5wb3NpdGlvbiB9KTtcclxuICAgICAgICBjaGFuZ2VMb2NhdGlvbih0bywgc3RhdGUsIHRydWUpO1xyXG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcHVzaCh0bywgZGF0YSkge1xyXG4gICAgICAgIC8vIEFkZCB0byBjdXJyZW50IGVudHJ5IHRoZSBpbmZvcm1hdGlvbiBvZiB3aGVyZSB3ZSBhcmUgZ29pbmdcclxuICAgICAgICAvLyBhcyB3ZWxsIGFzIHNhdmluZyB0aGUgY3VycmVudCBwb3NpdGlvblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGFzc2lnbih7fSwgXHJcbiAgICAgICAgLy8gdXNlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZSB0byBncmFjZWZ1bGx5IGhhbmRsZSBhIHdyb25nIGNhbGwgdG9cclxuICAgICAgICAvLyBoaXN0b3J5LnJlcGxhY2VTdGF0ZVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzM2NlxyXG4gICAgICAgIGhpc3RvcnlTdGF0ZS52YWx1ZSwgaGlzdG9yeS5zdGF0ZSwge1xyXG4gICAgICAgICAgICBmb3J3YXJkOiB0byxcclxuICAgICAgICAgICAgc2Nyb2xsOiBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoaXN0b3J5LnN0YXRlKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYGhpc3Rvcnkuc3RhdGUgc2VlbXMgdG8gaGF2ZSBiZWVuIG1hbnVhbGx5IHJlcGxhY2VkIHdpdGhvdXQgcHJlc2VydmluZyB0aGUgbmVjZXNzYXJ5IHZhbHVlcy4gTWFrZSBzdXJlIHRvIHByZXNlcnZlIGV4aXN0aW5nIGhpc3Rvcnkgc3RhdGUgaWYgeW91IGFyZSBtYW51YWxseSBjYWxsaW5nIGhpc3RvcnkucmVwbGFjZVN0YXRlOlxcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYGhpc3RvcnkucmVwbGFjZVN0YXRlKGhpc3Rvcnkuc3RhdGUsICcnLCB1cmwpXFxuXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYXQgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvZ3VpZGUvbWlncmF0aW9uLyN1c2FnZS1vZi1oaXN0b3J5LXN0YXRlLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFuZ2VMb2NhdGlvbihjdXJyZW50U3RhdGUuY3VycmVudCwgY3VycmVudFN0YXRlLCB0cnVlKTtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgYnVpbGRTdGF0ZShjdXJyZW50TG9jYXRpb24udmFsdWUsIHRvLCBudWxsKSwgeyBwb3NpdGlvbjogY3VycmVudFN0YXRlLnBvc2l0aW9uICsgMSB9LCBkYXRhKTtcclxuICAgICAgICBjaGFuZ2VMb2NhdGlvbih0bywgc3RhdGUsIGZhbHNlKTtcclxuICAgICAgICBjdXJyZW50TG9jYXRpb24udmFsdWUgPSB0bztcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbG9jYXRpb246IGN1cnJlbnRMb2NhdGlvbixcclxuICAgICAgICBzdGF0ZTogaGlzdG9yeVN0YXRlLFxyXG4gICAgICAgIHB1c2gsXHJcbiAgICAgICAgcmVwbGFjZSxcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gSFRNTDUgaGlzdG9yeS4gTW9zdCBjb21tb24gaGlzdG9yeSBmb3Igc2luZ2xlIHBhZ2UgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0gYmFzZSAtXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJIaXN0b3J5KGJhc2UpIHtcclxuICAgIGJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xyXG4gICAgY29uc3QgaGlzdG9yeU5hdmlnYXRpb24gPSB1c2VIaXN0b3J5U3RhdGVOYXZpZ2F0aW9uKGJhc2UpO1xyXG4gICAgY29uc3QgaGlzdG9yeUxpc3RlbmVycyA9IHVzZUhpc3RvcnlMaXN0ZW5lcnMoYmFzZSwgaGlzdG9yeU5hdmlnYXRpb24uc3RhdGUsIGhpc3RvcnlOYXZpZ2F0aW9uLmxvY2F0aW9uLCBoaXN0b3J5TmF2aWdhdGlvbi5yZXBsYWNlKTtcclxuICAgIGZ1bmN0aW9uIGdvKGRlbHRhLCB0cmlnZ2VyTGlzdGVuZXJzID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghdHJpZ2dlckxpc3RlbmVycylcclxuICAgICAgICAgICAgaGlzdG9yeUxpc3RlbmVycy5wYXVzZUxpc3RlbmVycygpO1xyXG4gICAgICAgIGhpc3RvcnkuZ28oZGVsdGEpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgcm91dGVySGlzdG9yeSA9IGFzc2lnbih7XHJcbiAgICAgICAgLy8gaXQncyBvdmVycmlkZGVuIHJpZ2h0IGFmdGVyXHJcbiAgICAgICAgbG9jYXRpb246ICcnLFxyXG4gICAgICAgIGJhc2UsXHJcbiAgICAgICAgZ28sXHJcbiAgICAgICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZi5iaW5kKG51bGwsIGJhc2UpLFxyXG4gICAgfSwgaGlzdG9yeU5hdmlnYXRpb24sIGhpc3RvcnlMaXN0ZW5lcnMpO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdXRlckhpc3RvcnksICdsb2NhdGlvbicsIHtcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGdldDogKCkgPT4gaGlzdG9yeU5hdmlnYXRpb24ubG9jYXRpb24udmFsdWUsXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3V0ZXJIaXN0b3J5LCAnc3RhdGUnLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBnZXQ6ICgpID0+IGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLnZhbHVlLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcm91dGVySGlzdG9yeTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhbiBpbi1tZW1vcnkgYmFzZWQgaGlzdG9yeS4gVGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIGhpc3RvcnkgaXMgdG8gaGFuZGxlIFNTUi4gSXQgc3RhcnRzIGluIGEgc3BlY2lhbCBsb2NhdGlvbiB0aGF0IGlzIG5vd2hlcmUuXHJcbiAqIEl0J3MgdXAgdG8gdGhlIHVzZXIgdG8gcmVwbGFjZSB0aGF0IGxvY2F0aW9uIHdpdGggdGhlIHN0YXJ0ZXIgbG9jYXRpb24gYnkgZWl0aGVyIGNhbGxpbmcgYHJvdXRlci5wdXNoYCBvciBgcm91dGVyLnJlcGxhY2VgLlxyXG4gKlxyXG4gKiBAcGFyYW0gYmFzZSAtIEJhc2UgYXBwbGllZCB0byBhbGwgdXJscywgZGVmYXVsdHMgdG8gJy8nXHJcbiAqIEByZXR1cm5zIGEgaGlzdG9yeSBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSByb3V0ZXIgY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoYmFzZSA9ICcnKSB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gW107XHJcbiAgICBsZXQgcXVldWUgPSBbU1RBUlRdO1xyXG4gICAgbGV0IHBvc2l0aW9uID0gMDtcclxuICAgIGJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xyXG4gICAgZnVuY3Rpb24gc2V0TG9jYXRpb24obG9jYXRpb24pIHtcclxuICAgICAgICBwb3NpdGlvbisrO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gcXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGUgZW5kLCB3ZSBjYW4gc2ltcGx5IGFwcGVuZCBhIG5ldyBlbnRyeVxyXG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGxvY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGFyZSBpbiB0aGUgbWlkZGxlLCB3ZSByZW1vdmUgZXZlcnl0aGluZyBmcm9tIGhlcmUgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHF1ZXVlLnB1c2gobG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModG8sIGZyb20sIHsgZGlyZWN0aW9uLCBkZWx0YSB9KSB7XHJcbiAgICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uLFxyXG4gICAgICAgICAgICBkZWx0YSxcclxuICAgICAgICAgICAgdHlwZTogTmF2aWdhdGlvblR5cGUucG9wLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodG8sIGZyb20sIGluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSB7XHJcbiAgICAgICAgLy8gcmV3cml0dGVuIGJ5IE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxyXG4gICAgICAgIGxvY2F0aW9uOiBTVEFSVCxcclxuICAgICAgICAvLyBUT0RPOiBzaG91bGQgYmUga2VwdCBpbiBxdWV1ZVxyXG4gICAgICAgIHN0YXRlOiB7fSxcclxuICAgICAgICBiYXNlLFxyXG4gICAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcclxuICAgICAgICByZXBsYWNlKHRvKSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IGVudHJ5IGFuZCBkZWNyZW1lbnQgcG9zaXRpb25cclxuICAgICAgICAgICAgcXVldWUuc3BsaWNlKHBvc2l0aW9uLS0sIDEpO1xyXG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0byk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdXNoKHRvLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldExvY2F0aW9uKHRvKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpc3RlbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveSgpIHtcclxuICAgICAgICAgICAgbGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgICAgIHF1ZXVlID0gW1NUQVJUXTtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ28oZGVsdGEsIHNob3VsZFRyaWdnZXIgPSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmxvY2F0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBcclxuICAgICAgICAgICAgLy8gd2UgYXJlIGNvbnNpZGVyaW5nIGRlbHRhID09PSAwIGdvaW5nIGZvcndhcmQsIGJ1dCBpbiBhYnN0cmFjdCBtb2RlXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIDAgZm9yIHRoZSBkZWx0YSBkb2Vzbid0IG1ha2Ugc2Vuc2UgbGlrZSBpdCBkb2VzIGluIGh0bWw1IHdoZXJlXHJcbiAgICAgICAgICAgIC8vIGl0IHJlbG9hZHMgdGhlIHBhZ2VcclxuICAgICAgICAgICAgZGVsdGEgPCAwID8gTmF2aWdhdGlvbkRpcmVjdGlvbi5iYWNrIDogTmF2aWdhdGlvbkRpcmVjdGlvbi5mb3J3YXJkO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBvc2l0aW9uICsgZGVsdGEsIHF1ZXVlLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFRyaWdnZXIpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnModGhpcy5sb2NhdGlvbiwgZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgZ2V0OiAoKSA9PiBxdWV1ZVtwb3NpdGlvbl0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiByb3V0ZXJIaXN0b3J5O1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgaGFzaCBoaXN0b3J5LiBVc2VmdWwgZm9yIHdlYiBhcHBsaWNhdGlvbnMgd2l0aCBubyBob3N0IChlLmcuIGBmaWxlOi8vYCkgb3Igd2hlbiBjb25maWd1cmluZyBhIHNlcnZlciB0b1xyXG4gKiBoYW5kbGUgYW55IFVSTCBpcyBub3QgcG9zc2libGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBiYXNlIC0gb3B0aW9uYWwgYmFzZSB0byBwcm92aWRlLiBEZWZhdWx0cyB0byBgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2hgIElmIHRoZXJlIGlzIGEgYDxiYXNlPmAgdGFnXHJcbiAqIGluIHRoZSBgaGVhZGAsIGl0cyB2YWx1ZSB3aWxsIGJlIGlnbm9yZWQgaW4gZmF2b3Igb2YgdGhpcyBwYXJhbWV0ZXIgKipidXQgbm90ZSBpdCBhZmZlY3RzIGFsbCB0aGUgaGlzdG9yeS5wdXNoU3RhdGUoKVxyXG4gKiBjYWxscyoqLCBtZWFuaW5nIHRoYXQgaWYgeW91IHVzZSBhIGA8YmFzZT5gIHRhZywgaXQncyBgaHJlZmAgdmFsdWUgKipoYXMgdG8gbWF0Y2ggdGhpcyBwYXJhbWV0ZXIqKiAoaWdub3JpbmcgYW55dGhpbmdcclxuICogYWZ0ZXIgdGhlIGAjYCkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIC8vIGF0IGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCkgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyI2BcclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyNgXHJcbiAqIC8vIGlmIHRoZSBgI2AgaXMgcHJvdmlkZWQgaW4gdGhlIGJhc2UsIGl0IHdvbid0IGJlIGFkZGVkIGJ5IGBjcmVhdGVXZWJIYXNoSGlzdG9yeWBcclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvIy9hcHAvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyMvYXBwL2BcclxuICogLy8geW91IHNob3VsZCBhdm9pZCBkb2luZyB0aGlzIGJlY2F1c2UgaXQgY2hhbmdlcyB0aGUgb3JpZ2luYWwgdXJsIGFuZCBicmVha3MgY29weWluZyB1cmxzXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvb3RoZXItZm9sZGVyLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL290aGVyLWZvbGRlci8jYFxyXG4gKlxyXG4gKiAvLyBhdCBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWxcclxuICogLy8gZm9yIGxvY2F0aW9ucyB3aXRoIG5vIGBob3N0YCwgdGhlIGJhc2UgaXMgaWdub3JlZFxyXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL2lBbUlnbm9yZWQnKSAvLyBnaXZlcyBhIHVybCBvZiBgZmlsZTovLy91c3IvZXRjL2ZvbGRlci9pbmRleC5odG1sI2BcclxuICogYGBgXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJIYXNoSGlzdG9yeShiYXNlKSB7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBmaW5lIGluIHRlcm1zIG9mIGVuY29kaW5nLCBzcGVjaWFsbHkgZm9yIElFMTFcclxuICAgIC8vIGZvciBgZmlsZTovL2AsIGRpcmVjdGx5IHVzZSB0aGUgcGF0aG5hbWUgYW5kIGlnbm9yZSB0aGUgYmFzZVxyXG4gICAgLy8gbG9jYXRpb24ucGF0aG5hbWUgY29udGFpbnMgYW4gaW5pdGlhbCBgL2AgZXZlbiBhdCB0aGUgcm9vdDogYGh0dHBzOi8vZXhhbXBsZS5jb21gXHJcbiAgICBiYXNlID0gbG9jYXRpb24uaG9zdCA/IGJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2ggOiAnJztcclxuICAgIC8vIGFsbG93IHRoZSB1c2VyIHRvIHByb3ZpZGUgYSBgI2AgaW4gdGhlIG1pZGRsZTogYC9iYXNlLyMvYXBwYFxyXG4gICAgaWYgKCFiYXNlLmluY2x1ZGVzKCcjJykpXHJcbiAgICAgICAgYmFzZSArPSAnIyc7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFiYXNlLmVuZHNXaXRoKCcjLycpICYmICFiYXNlLmVuZHNXaXRoKCcjJykpIHtcclxuICAgICAgICB3YXJuKGBBIGhhc2ggYmFzZSBtdXN0IGVuZCB3aXRoIGEgXCIjXCI6XFxuXCIke2Jhc2V9XCIgc2hvdWxkIGJlIFwiJHtiYXNlLnJlcGxhY2UoLyMuKiQvLCAnIycpfVwiLmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZVdlYkhpc3RvcnkoYmFzZSk7XHJcbn1cblxuZnVuY3Rpb24gaXNSb3V0ZUxvY2F0aW9uKHJvdXRlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJvdXRlID09PSAnc3RyaW5nJyB8fCAocm91dGUgJiYgdHlwZW9mIHJvdXRlID09PSAnb2JqZWN0Jyk7XHJcbn1cclxuZnVuY3Rpb24gaXNSb3V0ZU5hbWUobmFtZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCc7XHJcbn1cblxuLyoqXHJcbiAqIEluaXRpYWwgcm91dGUgbG9jYXRpb24gd2hlcmUgdGhlIHJvdXRlciBpcy4gQ2FuIGJlIHVzZWQgaW4gbmF2aWdhdGlvbiBndWFyZHNcclxuICogdG8gZGlmZmVyZW50aWF0ZSB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBpbXBvcnQgeyBTVEFSVF9MT0NBVElPTiB9IGZyb20gJ3Z1ZS1yb3V0ZXInXHJcbiAqXHJcbiAqIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSkgPT4ge1xyXG4gKiAgIGlmIChmcm9tID09PSBTVEFSVF9MT0NBVElPTikge1xyXG4gKiAgICAgLy8gaW5pdGlhbCBuYXZpZ2F0aW9uXHJcbiAqICAgfVxyXG4gKiB9KVxyXG4gKiBgYGBcclxuICovXHJcbmNvbnN0IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgPSB7XHJcbiAgICBwYXRoOiAnLycsXHJcbiAgICBuYW1lOiB1bmRlZmluZWQsXHJcbiAgICBwYXJhbXM6IHt9LFxyXG4gICAgcXVlcnk6IHt9LFxyXG4gICAgaGFzaDogJycsXHJcbiAgICBmdWxsUGF0aDogJy8nLFxyXG4gICAgbWF0Y2hlZDogW10sXHJcbiAgICBtZXRhOiB7fSxcclxuICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXHJcbn07XG5cbmNvbnN0IE5hdmlnYXRpb25GYWlsdXJlU3ltYm9sID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICduYXZpZ2F0aW9uIGZhaWx1cmUnIDogJycpO1xyXG4vKipcclxuICogRW51bWVyYXRpb24gd2l0aCBhbGwgcG9zc2libGUgdHlwZXMgZm9yIG5hdmlnYXRpb24gZmFpbHVyZXMuIENhbiBiZSBwYXNzZWQgdG9cclxuICoge0BsaW5rIGlzTmF2aWdhdGlvbkZhaWx1cmV9IHRvIGNoZWNrIGZvciBzcGVjaWZpYyBmYWlsdXJlcy5cclxuICovXHJcbnZhciBOYXZpZ2F0aW9uRmFpbHVyZVR5cGU7XHJcbihmdW5jdGlvbiAoTmF2aWdhdGlvbkZhaWx1cmVUeXBlKSB7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGFib3J0ZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBhIG5hdmlnYXRpb25cclxuICAgICAqIGd1YXJkIHJldHVybmVkIGBmYWxzZWAgb3IgY2FsbGVkIGBuZXh0KGZhbHNlKWBcclxuICAgICAqL1xyXG4gICAgTmF2aWdhdGlvbkZhaWx1cmVUeXBlW05hdmlnYXRpb25GYWlsdXJlVHlwZVtcImFib3J0ZWRcIl0gPSA0XSA9IFwiYWJvcnRlZFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGNhbmNlbGxlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGEgbW9yZSByZWNlbnRcclxuICAgICAqIG5hdmlnYXRpb24gZmluaXNoZWQgc3RhcnRlZCAobm90IG5lY2Vzc2FyaWx5IGZpbmlzaGVkKS5cclxuICAgICAqL1xyXG4gICAgTmF2aWdhdGlvbkZhaWx1cmVUeXBlW05hdmlnYXRpb25GYWlsdXJlVHlwZVtcImNhbmNlbGxlZFwiXSA9IDhdID0gXCJjYW5jZWxsZWRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQSBkdXBsaWNhdGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgaXQgd2FzXHJcbiAgICAgKiBpbml0aWF0ZWQgd2hpbGUgYWxyZWFkeSBiZWluZyBhdCB0aGUgZXhhY3Qgc2FtZSBsb2NhdGlvbi5cclxuICAgICAqL1xyXG4gICAgTmF2aWdhdGlvbkZhaWx1cmVUeXBlW05hdmlnYXRpb25GYWlsdXJlVHlwZVtcImR1cGxpY2F0ZWRcIl0gPSAxNl0gPSBcImR1cGxpY2F0ZWRcIjtcclxufSkoTmF2aWdhdGlvbkZhaWx1cmVUeXBlIHx8IChOYXZpZ2F0aW9uRmFpbHVyZVR5cGUgPSB7fSkpO1xyXG4vLyBERVYgb25seSBkZWJ1ZyBtZXNzYWdlc1xyXG5jb25zdCBFcnJvclR5cGVNZXNzYWdlcyA9IHtcclxuICAgIFsxIC8qIEVycm9yVHlwZXMuTUFUQ0hFUl9OT1RfRk9VTkQgKi9dKHsgbG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBObyBtYXRjaCBmb3JcXG4gJHtKU09OLnN0cmluZ2lmeShsb2NhdGlvbil9JHtjdXJyZW50TG9jYXRpb25cclxuICAgICAgICAgICAgPyAnXFxud2hpbGUgYmVpbmcgYXRcXG4nICsgSlNPTi5zdHJpbmdpZnkoY3VycmVudExvY2F0aW9uKVxyXG4gICAgICAgICAgICA6ICcnfWA7XHJcbiAgICB9LFxyXG4gICAgWzIgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUICovXSh7IGZyb20sIHRvLCB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBSZWRpcmVjdGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3N0cmluZ2lmeVJvdXRlKHRvKX1cIiB2aWEgYSBuYXZpZ2F0aW9uIGd1YXJkLmA7XHJcbiAgICB9LFxyXG4gICAgWzQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi9dKHsgZnJvbSwgdG8gfSkge1xyXG4gICAgICAgIHJldHVybiBgTmF2aWdhdGlvbiBhYm9ydGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiIHZpYSBhIG5hdmlnYXRpb24gZ3VhcmQuYDtcclxuICAgIH0sXHJcbiAgICBbOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovXSh7IGZyb20sIHRvIH0pIHtcclxuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb24gY2FuY2VsbGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiIHdpdGggYSBuZXcgbmF2aWdhdGlvbi5gO1xyXG4gICAgfSxcclxuICAgIFsxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqL10oeyBmcm9tLCB0byB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBBdm9pZGVkIHJlZHVuZGFudCBuYXZpZ2F0aW9uIHRvIGN1cnJlbnQgbG9jYXRpb246IFwiJHtmcm9tLmZ1bGxQYXRofVwiLmA7XHJcbiAgICB9LFxyXG59O1xyXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJFcnJvcih0eXBlLCBwYXJhbXMpIHtcclxuICAgIC8vIGtlZXAgZnVsbCBlcnJvciBtZXNzYWdlcyBpbiBjanMgdmVyc2lvbnNcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIXRydWUpIHtcclxuICAgICAgICByZXR1cm4gYXNzaWduKG5ldyBFcnJvcihFcnJvclR5cGVNZXNzYWdlc1t0eXBlXShwYXJhbXMpKSwge1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBbTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2xdOiB0cnVlLFxyXG4gICAgICAgIH0sIHBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYXNzaWduKG5ldyBFcnJvcigpLCB7XHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIFtOYXZpZ2F0aW9uRmFpbHVyZVN5bWJvbF06IHRydWUsXHJcbiAgICAgICAgfSwgcGFyYW1zKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCB0eXBlKSB7XHJcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiZcclxuICAgICAgICBOYXZpZ2F0aW9uRmFpbHVyZVN5bWJvbCBpbiBlcnJvciAmJlxyXG4gICAgICAgICh0eXBlID09IG51bGwgfHwgISEoZXJyb3IudHlwZSAmIHR5cGUpKSk7XHJcbn1cclxuY29uc3QgcHJvcGVydGllc1RvTG9nID0gWydwYXJhbXMnLCAncXVlcnknLCAnaGFzaCddO1xyXG5mdW5jdGlvbiBzdHJpbmdpZnlSb3V0ZSh0bykge1xyXG4gICAgaWYgKHR5cGVvZiB0byA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgaWYgKCdwYXRoJyBpbiB0bylcclxuICAgICAgICByZXR1cm4gdG8ucGF0aDtcclxuICAgIGNvbnN0IGxvY2F0aW9uID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBwcm9wZXJ0aWVzVG9Mb2cpIHtcclxuICAgICAgICBpZiAoa2V5IGluIHRvKVxyXG4gICAgICAgICAgICBsb2NhdGlvbltrZXldID0gdG9ba2V5XTtcclxuICAgIH1cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsb2NhdGlvbiwgbnVsbCwgMik7XHJcbn1cblxuLy8gZGVmYXVsdCBwYXR0ZXJuIGZvciBhIHBhcmFtOiBub24tZ3JlZWR5IGV2ZXJ5dGhpbmcgYnV0IC9cclxuY29uc3QgQkFTRV9QQVJBTV9QQVRURVJOID0gJ1teL10rPyc7XHJcbmNvbnN0IEJBU0VfUEFUSF9QQVJTRVJfT1BUSU9OUyA9IHtcclxuICAgIHNlbnNpdGl2ZTogZmFsc2UsXHJcbiAgICBzdHJpY3Q6IGZhbHNlLFxyXG4gICAgc3RhcnQ6IHRydWUsXHJcbiAgICBlbmQ6IHRydWUsXHJcbn07XHJcbi8vIFNwZWNpYWwgUmVnZXggY2hhcmFjdGVycyB0aGF0IG11c3QgYmUgZXNjYXBlZCBpbiBzdGF0aWMgdG9rZW5zXHJcbmNvbnN0IFJFR0VYX0NIQVJTX1JFID0gL1suKyo/XiR7fSgpW1xcXS9cXFxcXS9nO1xyXG4vKipcclxuICogQ3JlYXRlcyBhIHBhdGggcGFyc2VyIGZyb20gYW4gYXJyYXkgb2YgU2VnbWVudHMgKGEgc2VnbWVudCBpcyBhbiBhcnJheSBvZiBUb2tlbnMpXHJcbiAqXHJcbiAqIEBwYXJhbSBzZWdtZW50cyAtIGFycmF5IG9mIHNlZ21lbnRzIHJldHVybmVkIGJ5IHRva2VuaXplUGF0aFxyXG4gKiBAcGFyYW0gZXh0cmFPcHRpb25zIC0gb3B0aW9uYWwgb3B0aW9ucyBmb3IgdGhlIHJlZ2V4cFxyXG4gKiBAcmV0dXJucyBhIFBhdGhQYXJzZXJcclxuICovXHJcbmZ1bmN0aW9uIHRva2Vuc1RvUGFyc2VyKHNlZ21lbnRzLCBleHRyYU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBhc3NpZ24oe30sIEJBU0VfUEFUSF9QQVJTRVJfT1BUSU9OUywgZXh0cmFPcHRpb25zKTtcclxuICAgIC8vIHRoZSBhbW91bnQgb2Ygc2NvcmVzIGlzIHRoZSBzYW1lIGFzIHRoZSBsZW5ndGggb2Ygc2VnbWVudHMgZXhjZXB0IGZvciB0aGUgcm9vdCBzZWdtZW50IFwiL1wiXHJcbiAgICBjb25zdCBzY29yZSA9IFtdO1xyXG4gICAgLy8gdGhlIHJlZ2V4cCBhcyBhIHN0cmluZ1xyXG4gICAgbGV0IHBhdHRlcm4gPSBvcHRpb25zLnN0YXJ0ID8gJ14nIDogJyc7XHJcbiAgICAvLyBleHRyYWN0ZWQga2V5c1xyXG4gICAgY29uc3Qga2V5cyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XHJcbiAgICAgICAgLy8gdGhlIHJvb3Qgc2VnbWVudCBuZWVkcyBzcGVjaWFsIHRyZWF0bWVudFxyXG4gICAgICAgIGNvbnN0IHNlZ21lbnRTY29yZXMgPSBzZWdtZW50Lmxlbmd0aCA/IFtdIDogWzkwIC8qIFBhdGhTY29yZS5Sb290ICovXTtcclxuICAgICAgICAvLyBhbGxvdyB0cmFpbGluZyBzbGFzaFxyXG4gICAgICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiAhc2VnbWVudC5sZW5ndGgpXHJcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gJy8nO1xyXG4gICAgICAgIGZvciAobGV0IHRva2VuSW5kZXggPSAwOyB0b2tlbkluZGV4IDwgc2VnbWVudC5sZW5ndGg7IHRva2VuSW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHNlZ21lbnRbdG9rZW5JbmRleF07XHJcbiAgICAgICAgICAgIC8vIHJlc2V0cyB0aGUgc2NvcmUgaWYgd2UgYXJlIGluc2lkZSBhIHN1Yi1zZWdtZW50IC86YS1vdGhlci06YlxyXG4gICAgICAgICAgICBsZXQgc3ViU2VnbWVudFNjb3JlID0gNDAgLyogUGF0aFNjb3JlLlNlZ21lbnQgKi8gK1xyXG4gICAgICAgICAgICAgICAgKG9wdGlvbnMuc2Vuc2l0aXZlID8gMC4yNSAvKiBQYXRoU2NvcmUuQm9udXNDYXNlU2Vuc2l0aXZlICovIDogMCk7XHJcbiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIHByZXBlbmQgdGhlIHNsYXNoIGlmIHdlIGFyZSBzdGFydGluZyBhIG5ldyBzZWdtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSAnLyc7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHRva2VuLnZhbHVlLnJlcGxhY2UoUkVHRVhfQ0hBUlNfUkUsICdcXFxcJCYnKTtcclxuICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSA0MCAvKiBQYXRoU2NvcmUuU3RhdGljICovO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogVG9rZW5UeXBlLlBhcmFtICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCByZXBlYXRhYmxlLCBvcHRpb25hbCwgcmVnZXhwIH0gPSB0b2tlbjtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVwZWF0YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmUgPSByZWdleHAgPyByZWdleHAgOiBCQVNFX1BBUkFNX1BBVFRFUk47XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgdXNlciBwcm92aWRlZCBhIGN1c3RvbSByZWdleHAgLzppZChcXFxcZCspXHJcbiAgICAgICAgICAgICAgICBpZiAocmUgIT09IEJBU0VfUEFSQU1fUEFUVEVSTikge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAxMCAvKiBQYXRoU2NvcmUuQm9udXNDdXN0b21SZWdFeHAgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSByZWdleHAgaXMgdmFsaWQgYmVmb3JlIHVzaW5nIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChgKCR7cmV9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjdXN0b20gUmVnRXhwIGZvciBwYXJhbSBcIiR7dmFsdWV9XCIgKCR7cmV9KTogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB3ZSByZXBlYXQgd2UgbXVzdCB0YWtlIGNhcmUgb2YgdGhlIHJlcGVhdGluZyBsZWFkaW5nIHNsYXNoXHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViUGF0dGVybiA9IHJlcGVhdGFibGUgPyBgKCg/OiR7cmV9KSg/Oi8oPzoke3JlfSkpKilgIDogYCgke3JlfSlgO1xyXG4gICAgICAgICAgICAgICAgLy8gcHJlcGVuZCB0aGUgc2xhc2ggaWYgd2UgYXJlIHN0YXJ0aW5nIGEgbmV3IHNlZ21lbnRcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5JbmRleClcclxuICAgICAgICAgICAgICAgICAgICBzdWJQYXR0ZXJuID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYW4gb3B0aW9uYWwgLyBpZiB0aGVyZSBhcmUgbW9yZSBzZWdtZW50cyBlLmcuIC86cD8tc3RhdGljXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIC86cD8tOnAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsICYmIHNlZ21lbnQubGVuZ3RoIDwgMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgKD86LyR7c3ViUGF0dGVybn0pYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnLycgKyBzdWJQYXR0ZXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1YlBhdHRlcm4gKz0gJz8nO1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBzdWJQYXR0ZXJuO1xyXG4gICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IDIwIC8qIFBhdGhTY29yZS5EeW5hbWljICovO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAtOCAvKiBQYXRoU2NvcmUuQm9udXNPcHRpb25hbCAqLztcclxuICAgICAgICAgICAgICAgIGlmIChyZXBlYXRhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSAtMjAgLyogUGF0aFNjb3JlLkJvbnVzUmVwZWF0YWJsZSAqLztcclxuICAgICAgICAgICAgICAgIGlmIChyZSA9PT0gJy4qJylcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTUwIC8qIFBhdGhTY29yZS5Cb251c1dpbGRjYXJkICovO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlZ21lbnRTY29yZXMucHVzaChzdWJTZWdtZW50U2NvcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhbiBlbXB0eSBhcnJheSBsaWtlIC9ob21lLyAtPiBbW3tob21lfV0sIFtdXVxyXG4gICAgICAgIC8vIGlmICghc2VnbWVudC5sZW5ndGgpIHBhdHRlcm4gKz0gJy8nXHJcbiAgICAgICAgc2NvcmUucHVzaChzZWdtZW50U2NvcmVzKTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgYXBwbHkgdGhlIHN0cmljdCBib251cyB0byB0aGUgbGFzdCBzY29yZVxyXG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0ICYmIG9wdGlvbnMuZW5kKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHNjb3JlLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgc2NvcmVbaV1bc2NvcmVbaV0ubGVuZ3RoIC0gMV0gKz0gMC43MDAwMDAwMDAwMDAwMDAxIC8qIFBhdGhTY29yZS5Cb251c1N0cmljdCAqLztcclxuICAgIH1cclxuICAgIC8vIFRPRE86IGRldiBvbmx5IHdhcm4gZG91YmxlIHRyYWlsaW5nIHNsYXNoXHJcbiAgICBpZiAoIW9wdGlvbnMuc3RyaWN0KVxyXG4gICAgICAgIHBhdHRlcm4gKz0gJy8/JztcclxuICAgIGlmIChvcHRpb25zLmVuZClcclxuICAgICAgICBwYXR0ZXJuICs9ICckJztcclxuICAgIC8vIGFsbG93IHBhdGhzIGxpa2UgL2R5bmFtaWMgdG8gb25seSBtYXRjaCBkeW5hbWljIG9yIGR5bmFtaWMvLi4uIGJ1dCBub3QgZHluYW1pY19zb21ldGhpbmdfZWxzZVxyXG4gICAgZWxzZSBpZiAob3B0aW9ucy5zdHJpY3QpXHJcbiAgICAgICAgcGF0dGVybiArPSAnKD86L3wkKSc7XHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAocGF0dGVybiwgb3B0aW9ucy5zZW5zaXRpdmUgPyAnJyA6ICdpJyk7XHJcbiAgICBmdW5jdGlvbiBwYXJzZShwYXRoKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBwYXRoLm1hdGNoKHJlKTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAoIW1hdGNoKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG1hdGNoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbaV0gfHwgJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaSAtIDFdO1xyXG4gICAgICAgICAgICBwYXJhbXNba2V5Lm5hbWVdID0gdmFsdWUgJiYga2V5LnJlcGVhdGFibGUgPyB2YWx1ZS5zcGxpdCgnLycpIDogdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzdHJpbmdpZnkocGFyYW1zKSB7XHJcbiAgICAgICAgbGV0IHBhdGggPSAnJztcclxuICAgICAgICAvLyBmb3Igb3B0aW9uYWwgcGFyYW1ldGVycyB0byBhbGxvdyB0byBiZSBlbXB0eVxyXG4gICAgICAgIGxldCBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoIWF2b2lkRHVwbGljYXRlZFNsYXNoIHx8ICFwYXRoLmVuZHNXaXRoKCcvJykpXHJcbiAgICAgICAgICAgICAgICBwYXRoICs9ICcvJztcclxuICAgICAgICAgICAgYXZvaWREdXBsaWNhdGVkU2xhc2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBzZWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBUb2tlblR5cGUuU3RhdGljICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSB0b2tlbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogVG9rZW5UeXBlLlBhcmFtICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgcmVwZWF0YWJsZSwgb3B0aW9uYWwgfSA9IHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gdmFsdWUgaW4gcGFyYW1zID8gcGFyYW1zW3ZhbHVlXSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHBhcmFtKSAmJiAhcmVwZWF0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3ZpZGVkIHBhcmFtIFwiJHt2YWx1ZX1cIiBpcyBhbiBhcnJheSBidXQgaXQgaXMgbm90IHJlcGVhdGFibGUgKCogb3IgKyBtb2RpZmllcnMpYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBpc0FycmF5KHBhcmFtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBhcmFtLmpvaW4oJy8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHBhcmFtO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbW9yZSB0aGFuIG9uZSBvcHRpb25hbCBwYXJhbSBsaWtlIC86YT8tc3RhdGljIHdlIGRvbid0IG5lZWQgdG8gY2FyZSBhYm91dCB0aGUgb3B0aW9uYWwgcGFyYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3Qgc2xhc2ggYXMgd2UgY291bGQgYmUgYXQgdGhlIGVuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXRoLmVuZHNXaXRoKCcvJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYXBwZW5kIGEgc2xhc2ggb24gdGhlIG5leHQgaXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtIFwiJHt2YWx1ZX1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXRoICs9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXZvaWQgZW1wdHkgcGF0aCB3aGVuIHdlIGhhdmUgbXVsdGlwbGUgb3B0aW9uYWwgcGFyYW1zXHJcbiAgICAgICAgcmV0dXJuIHBhdGggfHwgJy8nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZSxcclxuICAgICAgICBzY29yZSxcclxuICAgICAgICBrZXlzLFxyXG4gICAgICAgIHBhcnNlLFxyXG4gICAgICAgIHN0cmluZ2lmeSxcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENvbXBhcmVzIGFuIGFycmF5IG9mIG51bWJlcnMgYXMgdXNlZCBpbiBQYXRoUGFyc2VyLnNjb3JlIGFuZCByZXR1cm5zIGFcclxuICogbnVtYmVyLiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGBzb3J0YCBhbiBhcnJheVxyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGZpcnN0IGFycmF5IG9mIG51bWJlcnNcclxuICogQHBhcmFtIGIgLSBzZWNvbmQgYXJyYXkgb2YgbnVtYmVyc1xyXG4gKiBAcmV0dXJucyAwIGlmIGJvdGggYXJlIGVxdWFsLCA8IDAgaWYgYSBzaG91bGQgYmUgc29ydGVkIGZpcnN0LCA+IDAgaWYgYlxyXG4gKiBzaG91bGQgYmUgc29ydGVkIGZpcnN0XHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlU2NvcmVBcnJheShhLCBiKSB7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSAoaSA8IGEubGVuZ3RoICYmIGkgPCBiLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGRpZmYgPSBiW2ldIC0gYVtpXTtcclxuICAgICAgICAvLyBvbmx5IGtlZXAgZ29pbmcgaWYgZGlmZiA9PT0gMFxyXG4gICAgICAgIGlmIChkaWZmKVxyXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcclxuICAgICAgICBpKys7XHJcbiAgICB9XHJcbiAgICAvLyBpZiB0aGUgbGFzdCBzdWJzZWdtZW50IHdhcyBTdGF0aWMsIHRoZSBzaG9ydGVyIHNlZ21lbnRzIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3RcclxuICAgIC8vIG90aGVyd2lzZSBzb3J0IHRoZSBsb25nZXN0IHNlZ21lbnQgZmlyc3RcclxuICAgIGlmIChhLmxlbmd0aCA8IGIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSAxICYmIGFbMF0gPT09IDQwIC8qIFBhdGhTY29yZS5TdGF0aWMgKi8gKyA0MCAvKiBQYXRoU2NvcmUuU2VnbWVudCAqL1xyXG4gICAgICAgICAgICA/IC0xXHJcbiAgICAgICAgICAgIDogMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGEubGVuZ3RoID4gYi5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gYi5sZW5ndGggPT09IDEgJiYgYlswXSA9PT0gNDAgLyogUGF0aFNjb3JlLlN0YXRpYyAqLyArIDQwIC8qIFBhdGhTY29yZS5TZWdtZW50ICovXHJcbiAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICA6IC0xO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuLyoqXHJcbiAqIENvbXBhcmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGBzb3J0YCB0byBzb3J0IGFuIGFycmF5IG9mIFBhdGhQYXJzZXJcclxuICpcclxuICogQHBhcmFtIGEgLSBmaXJzdCBQYXRoUGFyc2VyXHJcbiAqIEBwYXJhbSBiIC0gc2Vjb25kIFBhdGhQYXJzZXJcclxuICogQHJldHVybnMgMCBpZiBib3RoIGFyZSBlcXVhbCwgPCAwIGlmIGEgc2hvdWxkIGJlIHNvcnRlZCBmaXJzdCwgPiAwIGlmIGJcclxuICovXHJcbmZ1bmN0aW9uIGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUoYSwgYikge1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgYVNjb3JlID0gYS5zY29yZTtcclxuICAgIGNvbnN0IGJTY29yZSA9IGIuc2NvcmU7XHJcbiAgICB3aGlsZSAoaSA8IGFTY29yZS5sZW5ndGggJiYgaSA8IGJTY29yZS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjb21wID0gY29tcGFyZVNjb3JlQXJyYXkoYVNjb3JlW2ldLCBiU2NvcmVbaV0pO1xyXG4gICAgICAgIC8vIGRvIG5vdCByZXR1cm4gaWYgYm90aCBhcmUgZXF1YWxcclxuICAgICAgICBpZiAoY29tcClcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXA7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgaWYgKE1hdGguYWJzKGJTY29yZS5sZW5ndGggLSBhU2NvcmUubGVuZ3RoKSA9PT0gMSkge1xyXG4gICAgICAgIGlmIChpc0xhc3RTY29yZU5lZ2F0aXZlKGFTY29yZSkpXHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIGlmIChpc0xhc3RTY29yZU5lZ2F0aXZlKGJTY29yZSkpXHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIC8vIGlmIGEgYW5kIGIgc2hhcmUgdGhlIHNhbWUgc2NvcmUgZW50cmllcyBidXQgYiBoYXMgbW9yZSwgc29ydCBiIGZpcnN0XHJcbiAgICByZXR1cm4gYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGg7XHJcbiAgICAvLyB0aGlzIGlzIHRoZSB0ZXJuYXJ5IHZlcnNpb25cclxuICAgIC8vIHJldHVybiBhU2NvcmUubGVuZ3RoIDwgYlNjb3JlLmxlbmd0aFxyXG4gICAgLy8gICA/IDFcclxuICAgIC8vICAgOiBhU2NvcmUubGVuZ3RoID4gYlNjb3JlLmxlbmd0aFxyXG4gICAgLy8gICA/IC0xXHJcbiAgICAvLyAgIDogMFxyXG59XHJcbi8qKlxyXG4gKiBUaGlzIGFsbG93cyBkZXRlY3Rpbmcgc3BsYXRzIGF0IHRoZSBlbmQgb2YgYSBwYXRoOiAvaG9tZS86aWQoLiopKlxyXG4gKlxyXG4gKiBAcGFyYW0gc2NvcmUgLSBzY29yZSB0byBjaGVja1xyXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBsYXN0IGVudHJ5IGlzIG5lZ2F0aXZlXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0xhc3RTY29yZU5lZ2F0aXZlKHNjb3JlKSB7XHJcbiAgICBjb25zdCBsYXN0ID0gc2NvcmVbc2NvcmUubGVuZ3RoIC0gMV07XHJcbiAgICByZXR1cm4gc2NvcmUubGVuZ3RoID4gMCAmJiBsYXN0W2xhc3QubGVuZ3RoIC0gMV0gPCAwO1xyXG59XG5cbmNvbnN0IFJPT1RfVE9LRU4gPSB7XHJcbiAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXHJcbiAgICB2YWx1ZTogJycsXHJcbn07XHJcbmNvbnN0IFZBTElEX1BBUkFNX1JFID0gL1thLXpBLVowLTlfXS87XHJcbi8vIEFmdGVyIHNvbWUgcHJvZmlsaW5nLCB0aGUgY2FjaGUgc2VlbXMgdG8gYmUgdW5uZWNlc3NhcnkgYmVjYXVzZSB0b2tlbml6ZVBhdGhcclxuLy8gKHRoZSBzbG93ZXN0IHBhcnQgb2YgYWRkaW5nIGEgcm91dGUpIGlzIHZlcnkgZmFzdFxyXG4vLyBjb25zdCB0b2tlbkNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIFRva2VuW11bXT4oKVxyXG5mdW5jdGlvbiB0b2tlbml6ZVBhdGgocGF0aCkge1xyXG4gICAgaWYgKCFwYXRoKVxyXG4gICAgICAgIHJldHVybiBbW11dO1xyXG4gICAgaWYgKHBhdGggPT09ICcvJylcclxuICAgICAgICByZXR1cm4gW1tST09UX1RPS0VOXV07XHJcbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICA/IGBSb3V0ZSBwYXRocyBzaG91bGQgc3RhcnQgd2l0aCBhIFwiL1wiOiBcIiR7cGF0aH1cIiBzaG91bGQgYmUgXCIvJHtwYXRofVwiLmBcclxuICAgICAgICAgICAgOiBgSW52YWxpZCBwYXRoIFwiJHtwYXRofVwiYCk7XHJcbiAgICB9XHJcbiAgICAvLyBpZiAodG9rZW5DYWNoZS5oYXMocGF0aCkpIHJldHVybiB0b2tlbkNhY2hlLmdldChwYXRoKSFcclxuICAgIGZ1bmN0aW9uIGNyYXNoKG1lc3NhZ2UpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVSUiAoJHtzdGF0ZX0pL1wiJHtidWZmZXJ9XCI6ICR7bWVzc2FnZX1gKTtcclxuICAgIH1cclxuICAgIGxldCBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xyXG4gICAgbGV0IHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcclxuICAgIGNvbnN0IHRva2VucyA9IFtdO1xyXG4gICAgLy8gdGhlIHNlZ21lbnQgd2lsbCBhbHdheXMgYmUgdmFsaWQgYmVjYXVzZSB3ZSBnZXQgaW50byB0aGUgaW5pdGlhbCBzdGF0ZVxyXG4gICAgLy8gd2l0aCB0aGUgbGVhZGluZyAvXHJcbiAgICBsZXQgc2VnbWVudDtcclxuICAgIGZ1bmN0aW9uIGZpbmFsaXplU2VnbWVudCgpIHtcclxuICAgICAgICBpZiAoc2VnbWVudClcclxuICAgICAgICAgICAgdG9rZW5zLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgc2VnbWVudCA9IFtdO1xyXG4gICAgfVxyXG4gICAgLy8gaW5kZXggb24gdGhlIHBhdGhcclxuICAgIGxldCBpID0gMDtcclxuICAgIC8vIGNoYXIgYXQgaW5kZXhcclxuICAgIGxldCBjaGFyO1xyXG4gICAgLy8gYnVmZmVyIG9mIHRoZSB2YWx1ZSByZWFkXHJcbiAgICBsZXQgYnVmZmVyID0gJyc7XHJcbiAgICAvLyBjdXN0b20gcmVnZXhwIGZvciBhIHBhcmFtXHJcbiAgICBsZXQgY3VzdG9tUmUgPSAnJztcclxuICAgIGZ1bmN0aW9uIGNvbnN1bWVCdWZmZXIoKSB7XHJcbiAgICAgICAgaWYgKCFidWZmZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoc3RhdGUgPT09IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovKSB7XHJcbiAgICAgICAgICAgIHNlZ21lbnQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYnVmZmVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09IDEgLyogVG9rZW5pemVyU3RhdGUuUGFyYW0gKi8gfHxcclxuICAgICAgICAgICAgc3RhdGUgPT09IDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi8gfHxcclxuICAgICAgICAgICAgc3RhdGUgPT09IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi8pIHtcclxuICAgICAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID4gMSAmJiAoY2hhciA9PT0gJyonIHx8IGNoYXIgPT09ICcrJykpXHJcbiAgICAgICAgICAgICAgICBjcmFzaChgQSByZXBlYXRhYmxlIHBhcmFtICgke2J1ZmZlcn0pIG11c3QgYmUgYWxvbmUgaW4gaXRzIHNlZ21lbnQuIGVnOiAnLzppZHMrLmApO1xyXG4gICAgICAgICAgICBzZWdtZW50LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBUb2tlblR5cGUuUGFyYW0gKi8sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjdXN0b21SZSxcclxuICAgICAgICAgICAgICAgIHJlcGVhdGFibGU6IGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogY2hhciA9PT0gJyonIHx8IGNoYXIgPT09ICc/JyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjcmFzaCgnSW52YWxpZCBzdGF0ZSB0byBjb25zdW1lIGJ1ZmZlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXIgPSAnJztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFkZENoYXJUb0J1ZmZlcigpIHtcclxuICAgICAgICBidWZmZXIgKz0gY2hhcjtcclxuICAgIH1cclxuICAgIHdoaWxlIChpIDwgcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICBjaGFyID0gcGF0aFtpKytdO1xyXG4gICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcgJiYgc3RhdGUgIT09IDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi8pIHtcclxuICAgICAgICAgICAgcHJldmlvdXNTdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICBzdGF0ZSA9IDQgLyogVG9rZW5pemVyU3RhdGUuRXNjYXBlTmV4dCAqLztcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLzpcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnLycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxpemVTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSAnOicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdW1lQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0IC8qIFRva2VuaXplclN0YXRlLkVzY2FwZU5leHQgKi86XHJcbiAgICAgICAgICAgICAgICBhZGRDaGFyVG9CdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gcHJldmlvdXNTdGF0ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEgLyogVG9rZW5pemVyU3RhdGUuUGFyYW0gKi86XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJygnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoVkFMSURfUEFSQU1fUkUudGVzdChjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENoYXJUb0J1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMCAvKiBUb2tlbml6ZXJTdGF0ZS5TdGF0aWMgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ28gYmFjayBvbmUgY2hhcmFjdGVyIGlmIHdlIHdlcmUgbm90IG1vZGlmeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyICE9PSAnKicgJiYgY2hhciAhPT0gJz8nICYmIGNoYXIgIT09ICcrJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGlzIGl0IHdvcnRoIGhhbmRsaW5nIG5lc3RlZCByZWdleHA/IGxpa2UgOnAoPzpwcmVmaXhfKFteL10rKV9zdWZmaXgpXHJcbiAgICAgICAgICAgICAgICAvLyBpdCBhbHJlYWR5IHdvcmtzIGJ5IGVzY2FwaW5nIHRoZSBjbG9zaW5nIClcclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vcGF0aHMuZXNtLmRldi8/cD1BQU1lSmJpQXdRRWNES2JBb0FBa1A2MFBHMlI2UUF2Z05hQTZBRkFDTTJBQnVRQkIjXHJcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGlzIHJlYWxseSBzb21ldGhpbmcgcGVvcGxlIG5lZWQgc2luY2UgeW91IGNhbiBhbHNvIHdyaXRlXHJcbiAgICAgICAgICAgICAgICAvLyAvcHJlZml4XzpwKClfc3VmZml4XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJyknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBlc2NhcGVkIClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tUmVbY3VzdG9tUmUubGVuZ3RoIC0gMV0gPT0gJ1xcXFwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSA9IGN1c3RvbVJlLnNsaWNlKDAsIC0xKSArIGNoYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMyAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cEVuZCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIHNhbWUgYXMgZmluYWxpemluZyBhIHBhcmFtXHJcbiAgICAgICAgICAgICAgICBjb25zdW1lQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xyXG4gICAgICAgICAgICAgICAgLy8gZ28gYmFjayBvbmUgY2hhcmFjdGVyIGlmIHdlIHdlcmUgbm90IG1vZGlmeWluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgIT09ICcqJyAmJiBjaGFyICE9PSAnPycgJiYgY2hhciAhPT0gJysnKVxyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVJlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNyYXNoKCdVbmtub3duIHN0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhdGUgPT09IDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi8pXHJcbiAgICAgICAgY3Jhc2goYFVuZmluaXNoZWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke2J1ZmZlcn1cImApO1xyXG4gICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgZmluYWxpemVTZWdtZW50KCk7XHJcbiAgICAvLyB0b2tlbkNhY2hlLnNldChwYXRoLCB0b2tlbnMpXHJcbiAgICByZXR1cm4gdG9rZW5zO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihyZWNvcmQsIHBhcmVudCwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgcGFyc2VyID0gdG9rZW5zVG9QYXJzZXIodG9rZW5pemVQYXRoKHJlY29yZC5wYXRoKSwgb3B0aW9ucyk7XHJcbiAgICAvLyB3YXJuIGFnYWluc3QgcGFyYW1zIHdpdGggdGhlIHNhbWUgbmFtZVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJzZXIua2V5cykge1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzLmhhcyhrZXkubmFtZSkpXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBGb3VuZCBkdXBsaWNhdGVkIHBhcmFtcyB3aXRoIG5hbWUgXCIke2tleS5uYW1lfVwiIGZvciBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIi4gT25seSB0aGUgbGFzdCBvbmUgd2lsbCBiZSBhdmFpbGFibGUgb24gXCIkcm91dGUucGFyYW1zXCIuYCk7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nS2V5cy5hZGQoa2V5Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG1hdGNoZXIgPSBhc3NpZ24ocGFyc2VyLCB7XHJcbiAgICAgICAgcmVjb3JkLFxyXG4gICAgICAgIHBhcmVudCxcclxuICAgICAgICAvLyB0aGVzZSBuZWVkcyB0byBiZSBwb3B1bGF0ZWQgYnkgdGhlIHBhcmVudFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICBhbGlhczogW10sXHJcbiAgICB9KTtcclxuICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAvLyBib3RoIGFyZSBhbGlhc2VzIG9yIGJvdGggYXJlIG5vdCBhbGlhc2VzXHJcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBtaXggdGhlbSBiZWNhdXNlIHRoZSBvcmRlciBpcyB1c2VkIHdoZW5cclxuICAgICAgICAvLyBwYXNzaW5nIG9yaWdpbmFsUmVjb3JkIGluIE1hdGNoZXIuYWRkUm91dGVcclxuICAgICAgICBpZiAoIW1hdGNoZXIucmVjb3JkLmFsaWFzT2YgPT09ICFwYXJlbnQucmVjb3JkLmFsaWFzT2YpXHJcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG1hdGNoZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hdGNoZXI7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBSb3V0ZXIgTWF0Y2hlci5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqIEBwYXJhbSByb3V0ZXMgLSBhcnJheSBvZiBpbml0aWFsIHJvdXRlc1xyXG4gKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyAtIGdsb2JhbCByb3V0ZSBvcHRpb25zXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJNYXRjaGVyKHJvdXRlcywgZ2xvYmFsT3B0aW9ucykge1xyXG4gICAgLy8gbm9ybWFsaXplZCBvcmRlcmVkIGFycmF5IG9mIG1hdGNoZXJzXHJcbiAgICBjb25zdCBtYXRjaGVycyA9IFtdO1xyXG4gICAgY29uc3QgbWF0Y2hlck1hcCA9IG5ldyBNYXAoKTtcclxuICAgIGdsb2JhbE9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoeyBzdHJpY3Q6IGZhbHNlLCBlbmQ6IHRydWUsIHNlbnNpdGl2ZTogZmFsc2UgfSwgZ2xvYmFsT3B0aW9ucyk7XHJcbiAgICBmdW5jdGlvbiBnZXRSZWNvcmRNYXRjaGVyKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hlck1hcC5nZXQobmFtZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBhZGRSb3V0ZShyZWNvcmQsIHBhcmVudCwgb3JpZ2luYWxSZWNvcmQpIHtcclxuICAgICAgICAvLyB1c2VkIGxhdGVyIG9uIHRvIHJlbW92ZSBieSBuYW1lXHJcbiAgICAgICAgY29uc3QgaXNSb290QWRkID0gIW9yaWdpbmFsUmVjb3JkO1xyXG4gICAgICAgIGNvbnN0IG1haW5Ob3JtYWxpemVkUmVjb3JkID0gbm9ybWFsaXplUm91dGVSZWNvcmQocmVjb3JkKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHdlIG1pZ2h0IGJlIHRoZSBjaGlsZCBvZiBhbiBhbGlhc1xyXG4gICAgICAgIG1haW5Ob3JtYWxpemVkUmVjb3JkLmFsaWFzT2YgPSBvcmlnaW5hbFJlY29yZCAmJiBvcmlnaW5hbFJlY29yZC5yZWNvcmQ7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhnbG9iYWxPcHRpb25zLCByZWNvcmQpO1xyXG4gICAgICAgIC8vIGdlbmVyYXRlIGFuIGFycmF5IG9mIHJlY29yZHMgdG8gY29ycmVjdGx5IGhhbmRsZSBhbGlhc2VzXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlY29yZHMgPSBbXHJcbiAgICAgICAgICAgIG1haW5Ob3JtYWxpemVkUmVjb3JkLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKCdhbGlhcycgaW4gcmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzZXMgPSB0eXBlb2YgcmVjb3JkLmFsaWFzID09PSAnc3RyaW5nJyA/IFtyZWNvcmQuYWxpYXNdIDogcmVjb3JkLmFsaWFzO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFsaWFzIG9mIGFsaWFzZXMpIHtcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZWNvcmRzLnB1c2goYXNzaWduKHt9LCBtYWluTm9ybWFsaXplZFJlY29yZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIHVzIHRvIGhvbGQgYSBjb3B5IG9mIHRoZSBgY29tcG9uZW50c2Agb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhhdCBhc3luYyBjb21wb25lbnRzIGNhY2hlIGlzIGhvbGQgb24gdGhlIG9yaWdpbmFsIHJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IG9yaWdpbmFsUmVjb3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3JpZ2luYWxSZWNvcmQucmVjb3JkLmNvbXBvbmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBtYWluTm9ybWFsaXplZFJlY29yZC5jb21wb25lbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGFsaWFzLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG1pZ2h0IGJlIHRoZSBjaGlsZCBvZiBhbiBhbGlhc1xyXG4gICAgICAgICAgICAgICAgICAgIGFsaWFzT2Y6IG9yaWdpbmFsUmVjb3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3JpZ2luYWxSZWNvcmQucmVjb3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbk5vcm1hbGl6ZWRSZWNvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGFsaWFzZXMgYXJlIGFsd2F5cyBvZiB0aGUgc2FtZSBraW5kIGFzIHRoZSBvcmlnaW5hbCBzaW5jZSB0aGV5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJlIGRlZmluZWQgb24gdGhlIHNhbWUgcmVjb3JkXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1hdGNoZXI7XHJcbiAgICAgICAgbGV0IG9yaWdpbmFsTWF0Y2hlcjtcclxuICAgICAgICBmb3IgKGNvbnN0IG5vcm1hbGl6ZWRSZWNvcmQgb2Ygbm9ybWFsaXplZFJlY29yZHMpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXRoIH0gPSBub3JtYWxpemVkUmVjb3JkO1xyXG4gICAgICAgICAgICAvLyBCdWlsZCB1cCB0aGUgcGF0aCBmb3IgbmVzdGVkIHJvdXRlcyBpZiB0aGUgY2hpbGQgaXNuJ3QgYW4gYWJzb2x1dGVcclxuICAgICAgICAgICAgLy8gcm91dGUuIE9ubHkgYWRkIHRoZSAvIGRlbGltaXRlciBpZiB0aGUgY2hpbGQgcGF0aCBpc24ndCBlbXB0eSBhbmQgaWYgdGhlXHJcbiAgICAgICAgICAgIC8vIHBhcmVudCBwYXRoIGRvZXNuJ3QgaGF2ZSBhIHRyYWlsaW5nIHNsYXNoXHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgcGF0aFswXSAhPT0gJy8nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gcGFyZW50LnJlY29yZC5wYXRoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGluZ1NsYXNoID0gcGFyZW50UGF0aFtwYXJlbnRQYXRoLmxlbmd0aCAtIDFdID09PSAnLycgPyAnJyA6ICcvJztcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZWNvcmQucGF0aCA9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlY29yZC5wYXRoICsgKHBhdGggJiYgY29ubmVjdGluZ1NsYXNoICsgcGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBub3JtYWxpemVkUmVjb3JkLnBhdGggPT09ICcqJykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYXRjaCBhbGwgcm91dGVzIChcIipcIikgbXVzdCBub3cgYmUgZGVmaW5lZCB1c2luZyBhIHBhcmFtIHdpdGggYSBjdXN0b20gcmVnZXhwLlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICdTZWUgbW9yZSBhdCBodHRwczovL25leHQucm91dGVyLnZ1ZWpzLm9yZy9ndWlkZS9taWdyYXRpb24vI3JlbW92ZWQtc3Rhci1vci1jYXRjaC1hbGwtcm91dGVzLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgb2JqZWN0IGJlZm9yZWhhbmQsIHNvIGl0IGNhbiBiZSBwYXNzZWQgdG8gY2hpbGRyZW5cclxuICAgICAgICAgICAgbWF0Y2hlciA9IGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihub3JtYWxpemVkUmVjb3JkLCBwYXJlbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHBhcmVudCAmJiBwYXRoWzBdID09PSAnLycpXHJcbiAgICAgICAgICAgICAgICBjaGVja01pc3NpbmdQYXJhbXNJbkFic29sdXRlUGF0aChtYXRjaGVyLCBwYXJlbnQpO1xyXG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgYW4gYWxpYXMgd2UgbXVzdCB0ZWxsIHRoZSBvcmlnaW5hbCByZWNvcmQgdGhhdCB3ZSBleGlzdCxcclxuICAgICAgICAgICAgLy8gc28gd2UgY2FuIGJlIHJlbW92ZWRcclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsUmVjb3JkKSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlY29yZC5hbGlhcy5wdXNoKG1hdGNoZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrU2FtZVBhcmFtcyhvcmlnaW5hbFJlY29yZCwgbWF0Y2hlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBmaXJzdCByZWNvcmQgaXMgdGhlIG9yaWdpbmFsIGFuZCBvdGhlcnMgYXJlIGFsaWFzZXNcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTWF0Y2hlciA9IG9yaWdpbmFsTWF0Y2hlciB8fCBtYXRjaGVyO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsTWF0Y2hlciAhPT0gbWF0Y2hlcilcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdGNoZXIuYWxpYXMucHVzaChtYXRjaGVyKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgcm91dGUgaWYgbmFtZWQgYW5kIG9ubHkgZm9yIHRoZSB0b3AgcmVjb3JkIChhdm9pZCBpbiBuZXN0ZWQgY2FsbHMpXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdvcmtzIGJlY2F1c2UgdGhlIG9yaWdpbmFsIHJlY29yZCBpcyB0aGUgZmlyc3Qgb25lXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSb290QWRkICYmIHJlY29yZC5uYW1lICYmICFpc0FsaWFzUmVjb3JkKG1hdGNoZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVJvdXRlKHJlY29yZC5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWFpbk5vcm1hbGl6ZWRSZWNvcmQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbWFpbk5vcm1hbGl6ZWRSZWNvcmQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkUm91dGUoY2hpbGRyZW5baV0sIG1hdGNoZXIsIG9yaWdpbmFsUmVjb3JkICYmIG9yaWdpbmFsUmVjb3JkLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgbm8gb3JpZ2luYWwgcmVjb3JkLCB0aGVuIHRoZSBmaXJzdCBvbmUgd2FzIG5vdCBhbiBhbGlhcyBhbmQgYWxsXHJcbiAgICAgICAgICAgIC8vIG90aGVyIGFsaWFzZXMgKGlmIGFueSkgbmVlZCB0byByZWZlcmVuY2UgdGhpcyByZWNvcmQgd2hlbiBhZGRpbmcgY2hpbGRyZW5cclxuICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmQgPSBvcmlnaW5hbFJlY29yZCB8fCBtYXRjaGVyO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbm9ybWFsaXplZCByZWNvcmRzIGZvciBtb3JlIGZsZXhpYmlsaXR5XHJcbiAgICAgICAgICAgIC8vIGlmIChwYXJlbnQgJiYgaXNBbGlhc1JlY29yZChvcmlnaW5hbFJlY29yZCkpIHtcclxuICAgICAgICAgICAgLy8gICBwYXJlbnQuY2hpbGRyZW4ucHVzaChvcmlnaW5hbFJlY29yZClcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBBdm9pZCBhZGRpbmcgYSByZWNvcmQgdGhhdCBkb2Vzbid0IGRpc3BsYXkgYW55dGhpbmcuIFRoaXMgYWxsb3dzIHBhc3NpbmcgdGhyb3VnaCByZWNvcmRzIHdpdGhvdXQgYSBjb21wb25lbnQgdG9cclxuICAgICAgICAgICAgLy8gbm90IGJlIHJlYWNoZWQgYW5kIHBhc3MgdGhyb3VnaCB0aGUgY2F0Y2ggYWxsIHJvdXRlXHJcbiAgICAgICAgICAgIGlmICgobWF0Y2hlci5yZWNvcmQuY29tcG9uZW50cyAmJlxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWF0Y2hlci5yZWNvcmQuY29tcG9uZW50cykubGVuZ3RoKSB8fFxyXG4gICAgICAgICAgICAgICAgbWF0Y2hlci5yZWNvcmQubmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgbWF0Y2hlci5yZWNvcmQucmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgICAgIGluc2VydE1hdGNoZXIobWF0Y2hlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsTWF0Y2hlclxyXG4gICAgICAgICAgICA/ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIG90aGVyIG1hdGNoZXJzIGFyZSBhbGlhc2VzLCB0aGV5IHNob3VsZCBiZSByZW1vdmVkIGJ5IHRoZSBvcmlnaW5hbCBtYXRjaGVyXHJcbiAgICAgICAgICAgICAgICByZW1vdmVSb3V0ZShvcmlnaW5hbE1hdGNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogbm9vcDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVJvdXRlKG1hdGNoZXJSZWYpIHtcclxuICAgICAgICBpZiAoaXNSb3V0ZU5hbWUobWF0Y2hlclJlZikpIHtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2hlciA9IG1hdGNoZXJNYXAuZ2V0KG1hdGNoZXJSZWYpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlcikge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlck1hcC5kZWxldGUobWF0Y2hlclJlZik7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVycy5zcGxpY2UobWF0Y2hlcnMuaW5kZXhPZihtYXRjaGVyKSwgMSk7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyLmNoaWxkcmVuLmZvckVhY2gocmVtb3ZlUm91dGUpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlci5hbGlhcy5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBtYXRjaGVycy5pbmRleE9mKG1hdGNoZXJSZWYpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyUmVmLnJlY29yZC5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXJNYXAuZGVsZXRlKG1hdGNoZXJSZWYucmVjb3JkLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlclJlZi5jaGlsZHJlbi5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXJSZWYuYWxpYXMuZm9yRWFjaChyZW1vdmVSb3V0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXJzO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaW5zZXJ0TWF0Y2hlcihtYXRjaGVyKSB7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIHdoaWxlIChpIDwgbWF0Y2hlcnMubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUobWF0Y2hlciwgbWF0Y2hlcnNbaV0pID49IDAgJiZcclxuICAgICAgICAgICAgLy8gQWRkaW5nIGNoaWxkcmVuIHdpdGggZW1wdHkgcGF0aCBzaG91bGQgc3RpbGwgYXBwZWFyIGJlZm9yZSB0aGUgcGFyZW50XHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzExMjRcclxuICAgICAgICAgICAgKG1hdGNoZXIucmVjb3JkLnBhdGggIT09IG1hdGNoZXJzW2ldLnJlY29yZC5wYXRoIHx8XHJcbiAgICAgICAgICAgICAgICAhaXNSZWNvcmRDaGlsZE9mKG1hdGNoZXIsIG1hdGNoZXJzW2ldKSkpXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICBtYXRjaGVycy5zcGxpY2UoaSwgMCwgbWF0Y2hlcik7XHJcbiAgICAgICAgLy8gb25seSBhZGQgdGhlIG9yaWdpbmFsIHJlY29yZCB0byB0aGUgbmFtZSBtYXBcclxuICAgICAgICBpZiAobWF0Y2hlci5yZWNvcmQubmFtZSAmJiAhaXNBbGlhc1JlY29yZChtYXRjaGVyKSlcclxuICAgICAgICAgICAgbWF0Y2hlck1hcC5zZXQobWF0Y2hlci5yZWNvcmQubmFtZSwgbWF0Y2hlcik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXNvbHZlKGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pIHtcclxuICAgICAgICBsZXQgbWF0Y2hlcjtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge307XHJcbiAgICAgICAgbGV0IHBhdGg7XHJcbiAgICAgICAgbGV0IG5hbWU7XHJcbiAgICAgICAgaWYgKCduYW1lJyBpbiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5uYW1lKSB7XHJcbiAgICAgICAgICAgIG1hdGNoZXIgPSBtYXRjaGVyTWFwLmdldChsb2NhdGlvbi5uYW1lKTtcclxuICAgICAgICAgICAgaWYgKCFtYXRjaGVyKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlUm91dGVyRXJyb3IoMSAvKiBFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gd2FybiBpZiB0aGUgdXNlciBpcyBwYXNzaW5nIGludmFsaWQgcGFyYW1zIHNvIHRoZXkgY2FuIGRlYnVnIGl0IGJldHRlciB3aGVuIHRoZXkgZ2V0IHJlbW92ZWRcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFBhcmFtcyA9IE9iamVjdC5rZXlzKGxvY2F0aW9uLnBhcmFtcyB8fCB7fSkuZmlsdGVyKHBhcmFtTmFtZSA9PiAhbWF0Y2hlci5rZXlzLmZpbmQoayA9PiBrLm5hbWUgPT09IHBhcmFtTmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGludmFsaWRQYXJhbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlzY2FyZGVkIGludmFsaWQgcGFyYW0ocykgXCIke2ludmFsaWRQYXJhbXMuam9pbignXCIsIFwiJyl9XCIgd2hlbiBuYXZpZ2F0aW5nLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9ibG9iL21haW4vcGFja2FnZXMvcm91dGVyL0NIQU5HRUxPRy5tZCM0MTQtMjAyMi0wOC0yMiBmb3IgbW9yZSBkZXRhaWxzLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hbWUgPSBtYXRjaGVyLnJlY29yZC5uYW1lO1xyXG4gICAgICAgICAgICBwYXJhbXMgPSBhc3NpZ24oXHJcbiAgICAgICAgICAgIC8vIHBhcmFtc0Zyb21Mb2NhdGlvbiBpcyBhIG5ldyBvYmplY3RcclxuICAgICAgICAgICAgcGFyYW1zRnJvbUxvY2F0aW9uKGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMsIFxyXG4gICAgICAgICAgICAvLyBvbmx5IGtlZXAgcGFyYW1zIHRoYXQgZXhpc3QgaW4gdGhlIHJlc29sdmVkIGxvY2F0aW9uXHJcbiAgICAgICAgICAgIC8vIFRPRE86IG9ubHkga2VlcCBvcHRpb25hbCBwYXJhbXMgY29taW5nIGZyb20gYSBwYXJlbnQgcmVjb3JkXHJcbiAgICAgICAgICAgIG1hdGNoZXIua2V5cy5maWx0ZXIoayA9PiAhay5vcHRpb25hbCkubWFwKGsgPT4gay5uYW1lKSksIFxyXG4gICAgICAgICAgICAvLyBkaXNjYXJkIGFueSBleGlzdGluZyBwYXJhbXMgaW4gdGhlIGN1cnJlbnQgbG9jYXRpb24gdGhhdCBkbyBub3QgZXhpc3QgaGVyZVxyXG4gICAgICAgICAgICAvLyAjMTQ5NyB0aGlzIGVuc3VyZXMgYmV0dGVyIGFjdGl2ZS9leGFjdCBtYXRjaGluZ1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5wYXJhbXMgJiZcclxuICAgICAgICAgICAgICAgIHBhcmFtc0Zyb21Mb2NhdGlvbihsb2NhdGlvbi5wYXJhbXMsIG1hdGNoZXIua2V5cy5tYXAoayA9PiBrLm5hbWUpKSk7XHJcbiAgICAgICAgICAgIC8vIHRocm93cyBpZiBjYW5ub3QgYmUgc3RyaW5naWZpZWRcclxuICAgICAgICAgICAgcGF0aCA9IG1hdGNoZXIuc3RyaW5naWZ5KHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdwYXRoJyBpbiBsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAvLyBubyBuZWVkIHRvIHJlc29sdmUgdGhlIHBhdGggd2l0aCB0aGUgbWF0Y2hlciBhcyBpdCB3YXMgcHJvdmlkZWRcclxuICAgICAgICAgICAgLy8gdGhpcyBhbHNvIGFsbG93cyB0aGUgdXNlciB0byBjb250cm9sIHRoZSBlbmNvZGluZ1xyXG4gICAgICAgICAgICBwYXRoID0gbG9jYXRpb24ucGF0aDtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcGF0aC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBNYXRjaGVyIGNhbm5vdCByZXNvbHZlIHJlbGF0aXZlIHBhdGhzIGJ1dCByZWNlaXZlZCBcIiR7cGF0aH1cIi4gVW5sZXNzIHlvdSBkaXJlY3RseSBjYWxsZWQgXFxgbWF0Y2hlci5yZXNvbHZlKFwiJHtwYXRofVwiKVxcYCwgdGhpcyBpcyBwcm9iYWJseSBhIGJ1ZyBpbiB2dWUtcm91dGVyLiBQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhdCBodHRwczovL25ldy1pc3N1ZS52dWVqcy5vcmcvP3JlcG89dnVlanMvcm91dGVyLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hdGNoZXIgPSBtYXRjaGVycy5maW5kKG0gPT4gbS5yZS50ZXN0KHBhdGgpKTtcclxuICAgICAgICAgICAgLy8gbWF0Y2hlciBzaG91bGQgaGF2ZSBhIHZhbHVlIGFmdGVyIHRoZSBsb29wXHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBrbm93IHRoZSBtYXRjaGVyIHdvcmtzIGJlY2F1c2Ugd2UgdGVzdGVkIHRoZSByZWdleHBcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IG1hdGNoZXIucGFyc2UocGF0aCk7XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gbWF0Y2hlci5yZWNvcmQubmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsb2NhdGlvbiBpcyBhIHJlbGF0aXZlIHBhdGhcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG1hdGNoIGJ5IG5hbWUgb3IgcGF0aCBvZiBjdXJyZW50IHJvdXRlXHJcbiAgICAgICAgICAgIG1hdGNoZXIgPSBjdXJyZW50TG9jYXRpb24ubmFtZVxyXG4gICAgICAgICAgICAgICAgPyBtYXRjaGVyTWFwLmdldChjdXJyZW50TG9jYXRpb24ubmFtZSlcclxuICAgICAgICAgICAgICAgIDogbWF0Y2hlcnMuZmluZChtID0+IG0ucmUudGVzdChjdXJyZW50TG9jYXRpb24ucGF0aCkpO1xyXG4gICAgICAgICAgICBpZiAoIW1hdGNoZXIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVSb3V0ZXJFcnJvcigxIC8qIEVycm9yVHlwZXMuTUFUQ0hFUl9OT1RfRk9VTkQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHdlIGFyZSBuYXZpZ2F0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uLCB3ZSBkb24ndCBuZWVkIHRvIHBpY2sgdGhlXHJcbiAgICAgICAgICAgIC8vIHBhcmFtcyBsaWtlIHdoZW4gYG5hbWVgIGlzIHByb3ZpZGVkXHJcbiAgICAgICAgICAgIHBhcmFtcyA9IGFzc2lnbih7fSwgY3VycmVudExvY2F0aW9uLnBhcmFtcywgbG9jYXRpb24ucGFyYW1zKTtcclxuICAgICAgICAgICAgcGF0aCA9IG1hdGNoZXIuc3RyaW5naWZ5KHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdGNoZWQgPSBbXTtcclxuICAgICAgICBsZXQgcGFyZW50TWF0Y2hlciA9IG1hdGNoZXI7XHJcbiAgICAgICAgd2hpbGUgKHBhcmVudE1hdGNoZXIpIHtcclxuICAgICAgICAgICAgLy8gcmV2ZXJzZWQgb3JkZXIgc28gcGFyZW50cyBhcmUgYXQgdGhlIGJlZ2lubmluZ1xyXG4gICAgICAgICAgICBtYXRjaGVkLnVuc2hpZnQocGFyZW50TWF0Y2hlci5yZWNvcmQpO1xyXG4gICAgICAgICAgICBwYXJlbnRNYXRjaGVyID0gcGFyZW50TWF0Y2hlci5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgIHBhcmFtcyxcclxuICAgICAgICAgICAgbWF0Y2hlZCxcclxuICAgICAgICAgICAgbWV0YTogbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaW5pdGlhbCByb3V0ZXNcclxuICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IGFkZFJvdXRlKHJvdXRlKSk7XHJcbiAgICByZXR1cm4geyBhZGRSb3V0ZSwgcmVzb2x2ZSwgcmVtb3ZlUm91dGUsIGdldFJvdXRlcywgZ2V0UmVjb3JkTWF0Y2hlciB9O1xyXG59XHJcbmZ1bmN0aW9uIHBhcmFtc0Zyb21Mb2NhdGlvbihwYXJhbXMsIGtleXMpIHtcclxuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgIGlmIChrZXkgaW4gcGFyYW1zKVxyXG4gICAgICAgICAgICBuZXdQYXJhbXNba2V5XSA9IHBhcmFtc1trZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1BhcmFtcztcclxufVxyXG4vKipcclxuICogTm9ybWFsaXplcyBhIFJvdXRlUmVjb3JkUmF3LiBDcmVhdGVzIGEgY29weVxyXG4gKlxyXG4gKiBAcGFyYW0gcmVjb3JkXHJcbiAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHZlcnNpb25cclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwYXRoOiByZWNvcmQucGF0aCxcclxuICAgICAgICByZWRpcmVjdDogcmVjb3JkLnJlZGlyZWN0LFxyXG4gICAgICAgIG5hbWU6IHJlY29yZC5uYW1lLFxyXG4gICAgICAgIG1ldGE6IHJlY29yZC5tZXRhIHx8IHt9LFxyXG4gICAgICAgIGFsaWFzT2Y6IHVuZGVmaW5lZCxcclxuICAgICAgICBiZWZvcmVFbnRlcjogcmVjb3JkLmJlZm9yZUVudGVyLFxyXG4gICAgICAgIHByb3BzOiBub3JtYWxpemVSZWNvcmRQcm9wcyhyZWNvcmQpLFxyXG4gICAgICAgIGNoaWxkcmVuOiByZWNvcmQuY2hpbGRyZW4gfHwgW10sXHJcbiAgICAgICAgaW5zdGFuY2VzOiB7fSxcclxuICAgICAgICBsZWF2ZUd1YXJkczogbmV3IFNldCgpLFxyXG4gICAgICAgIHVwZGF0ZUd1YXJkczogbmV3IFNldCgpLFxyXG4gICAgICAgIGVudGVyQ2FsbGJhY2tzOiB7fSxcclxuICAgICAgICBjb21wb25lbnRzOiAnY29tcG9uZW50cycgaW4gcmVjb3JkXHJcbiAgICAgICAgICAgID8gcmVjb3JkLmNvbXBvbmVudHMgfHwgbnVsbFxyXG4gICAgICAgICAgICA6IHJlY29yZC5jb21wb25lbnQgJiYgeyBkZWZhdWx0OiByZWNvcmQuY29tcG9uZW50IH0sXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBOb3JtYWxpemUgdGhlIG9wdGlvbmFsIGBwcm9wc2AgaW4gYSByZWNvcmQgdG8gYWx3YXlzIGJlIGFuIG9iamVjdCBzaW1pbGFyIHRvXHJcbiAqIGNvbXBvbmVudHMuIEFsc28gYWNjZXB0IGEgYm9vbGVhbiBmb3IgY29tcG9uZW50cy5cclxuICogQHBhcmFtIHJlY29yZFxyXG4gKi9cclxuZnVuY3Rpb24gbm9ybWFsaXplUmVjb3JkUHJvcHMocmVjb3JkKSB7XHJcbiAgICBjb25zdCBwcm9wc09iamVjdCA9IHt9O1xyXG4gICAgLy8gcHJvcHMgZG9lcyBub3QgZXhpc3Qgb24gcmVkaXJlY3QgcmVjb3JkcywgYnV0IHdlIGNhbiBzZXQgZmFsc2UgZGlyZWN0bHlcclxuICAgIGNvbnN0IHByb3BzID0gcmVjb3JkLnByb3BzIHx8IGZhbHNlO1xyXG4gICAgaWYgKCdjb21wb25lbnQnIGluIHJlY29yZCkge1xyXG4gICAgICAgIHByb3BzT2JqZWN0LmRlZmF1bHQgPSBwcm9wcztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIE5PVEU6IHdlIGNvdWxkIGFsc28gYWxsb3cgYSBmdW5jdGlvbiB0byBiZSBhcHBsaWVkIHRvIGV2ZXJ5IGNvbXBvbmVudC5cclxuICAgICAgICAvLyBXb3VsZCBuZWVkIHVzZXIgZmVlZGJhY2sgZm9yIHVzZSBjYXNlc1xyXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiByZWNvcmQuY29tcG9uZW50cylcclxuICAgICAgICAgICAgcHJvcHNPYmplY3RbbmFtZV0gPSB0eXBlb2YgcHJvcHMgPT09ICdib29sZWFuJyA/IHByb3BzIDogcHJvcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvcHNPYmplY3Q7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHJlY29yZCBvciBhbnkgb2YgaXRzIHBhcmVudCBpcyBhbiBhbGlhc1xyXG4gKiBAcGFyYW0gcmVjb3JkXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0FsaWFzUmVjb3JkKHJlY29yZCkge1xyXG4gICAgd2hpbGUgKHJlY29yZCkge1xyXG4gICAgICAgIGlmIChyZWNvcmQucmVjb3JkLmFsaWFzT2YpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJlY29yZCA9IHJlY29yZC5wYXJlbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuLyoqXHJcbiAqIE1lcmdlIG1ldGEgZmllbGRzIG9mIGFuIGFycmF5IG9mIHJlY29yZHNcclxuICpcclxuICogQHBhcmFtIG1hdGNoZWQgLSBhcnJheSBvZiBtYXRjaGVkIHJlY29yZHNcclxuICovXHJcbmZ1bmN0aW9uIG1lcmdlTWV0YUZpZWxkcyhtYXRjaGVkKSB7XHJcbiAgICByZXR1cm4gbWF0Y2hlZC5yZWR1Y2UoKG1ldGEsIHJlY29yZCkgPT4gYXNzaWduKG1ldGEsIHJlY29yZC5tZXRhKSwge30pO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhkZWZhdWx0cywgcGFydGlhbE9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgb3B0aW9uc1trZXldID0ga2V5IGluIHBhcnRpYWxPcHRpb25zID8gcGFydGlhbE9wdGlvbnNba2V5XSA6IGRlZmF1bHRzW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5mdW5jdGlvbiBpc1NhbWVQYXJhbShhLCBiKSB7XHJcbiAgICByZXR1cm4gKGEubmFtZSA9PT0gYi5uYW1lICYmXHJcbiAgICAgICAgYS5vcHRpb25hbCA9PT0gYi5vcHRpb25hbCAmJlxyXG4gICAgICAgIGEucmVwZWF0YWJsZSA9PT0gYi5yZXBlYXRhYmxlKTtcclxufVxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBwYXRoIGFuZCBpdHMgYWxpYXMgaGF2ZSB0aGUgc2FtZSByZXF1aXJlZCBwYXJhbXNcclxuICpcclxuICogQHBhcmFtIGEgLSBvcmlnaW5hbCByZWNvcmRcclxuICogQHBhcmFtIGIgLSBhbGlhcyByZWNvcmRcclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrU2FtZVBhcmFtcyhhLCBiKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBhLmtleXMpIHtcclxuICAgICAgICBpZiAoIWtleS5vcHRpb25hbCAmJiAhYi5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFsaWFzIFwiJHtiLnJlY29yZC5wYXRofVwiIGFuZCB0aGUgb3JpZ2luYWwgcmVjb3JkOiBcIiR7YS5yZWNvcmQucGF0aH1cIiBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiYCk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBiLmtleXMpIHtcclxuICAgICAgICBpZiAoIWtleS5vcHRpb25hbCAmJiAhYS5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFsaWFzIFwiJHtiLnJlY29yZC5wYXRofVwiIGFuZCB0aGUgb3JpZ2luYWwgcmVjb3JkOiBcIiR7YS5yZWNvcmQucGF0aH1cIiBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiYCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEEgcm91dGUgd2l0aCBhIG5hbWUgYW5kIGEgY2hpbGQgd2l0aCBhbiBlbXB0eSBwYXRoIHdpdGhvdXQgYSBuYW1lIHNob3VsZCB3YXJuIHdoZW4gYWRkaW5nIHRoZSByb3V0ZVxyXG4gKlxyXG4gKiBAcGFyYW0gbWFpbk5vcm1hbGl6ZWRSZWNvcmQgLSBSb3V0ZVJlY29yZE5vcm1hbGl6ZWRcclxuICogQHBhcmFtIHBhcmVudCAtIFJvdXRlUmVjb3JkTWF0Y2hlclxyXG4gKi9cclxuZnVuY3Rpb24gY2hlY2tDaGlsZE1pc3NpbmdOYW1lV2l0aEVtcHR5UGF0aChtYWluTm9ybWFsaXplZFJlY29yZCwgcGFyZW50KSB7XHJcbiAgICBpZiAocGFyZW50ICYmXHJcbiAgICAgICAgcGFyZW50LnJlY29yZC5uYW1lICYmXHJcbiAgICAgICAgIW1haW5Ob3JtYWxpemVkUmVjb3JkLm5hbWUgJiZcclxuICAgICAgICAhbWFpbk5vcm1hbGl6ZWRSZWNvcmQucGF0aCkge1xyXG4gICAgICAgIHdhcm4oYFRoZSByb3V0ZSBuYW1lZCBcIiR7U3RyaW5nKHBhcmVudC5yZWNvcmQubmFtZSl9XCIgaGFzIGEgY2hpbGQgd2l0aG91dCBhIG5hbWUgYW5kIGFuIGVtcHR5IHBhdGguIFVzaW5nIHRoYXQgbmFtZSB3b24ndCByZW5kZXIgdGhlIGVtcHR5IHBhdGggY2hpbGQgc28geW91IHByb2JhYmx5IHdhbnQgdG8gbW92ZSB0aGUgbmFtZSB0byB0aGUgY2hpbGQgaW5zdGVhZC4gSWYgdGhpcyBpcyBpbnRlbnRpb25hbCwgYWRkIGEgbmFtZSB0byB0aGUgY2hpbGQgcm91dGUgdG8gcmVtb3ZlIHRoZSB3YXJuaW5nLmApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNoZWNrTWlzc2luZ1BhcmFtc0luQWJzb2x1dGVQYXRoKHJlY29yZCwgcGFyZW50KSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJlbnQua2V5cykge1xyXG4gICAgICAgIGlmICghcmVjb3JkLmtleXMuZmluZChpc1NhbWVQYXJhbS5iaW5kKG51bGwsIGtleSkpKVxyXG4gICAgICAgICAgICByZXR1cm4gd2FybihgQWJzb2x1dGUgcGF0aCBcIiR7cmVjb3JkLnJlY29yZC5wYXRofVwiIG11c3QgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCIgYXMgaXRzIHBhcmVudCBcIiR7cGFyZW50LnJlY29yZC5wYXRofVwiLmApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzUmVjb3JkQ2hpbGRPZihyZWNvcmQsIHBhcmVudCkge1xyXG4gICAgcmV0dXJuIHBhcmVudC5jaGlsZHJlbi5zb21lKGNoaWxkID0+IGNoaWxkID09PSByZWNvcmQgfHwgaXNSZWNvcmRDaGlsZE9mKHJlY29yZCwgY2hpbGQpKTtcclxufVxuXG4vKipcclxuICogRW5jb2RpbmcgUnVsZXMg4pCjID0gU3BhY2UgUGF0aDog4pCjIFwiIDwgPiAjID8geyB9IFF1ZXJ5OiDikKMgXCIgPCA+ICMgJiA9IEhhc2g6IOKQoyBcIlxyXG4gKiA8ID4gYFxyXG4gKlxyXG4gKiBPbiB0b3Agb2YgdGhhdCwgdGhlIFJGQzM5ODYgKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tMi4yKVxyXG4gKiBkZWZpbmVzIHNvbWUgZXh0cmEgY2hhcmFjdGVycyB0byBiZSBlbmNvZGVkLiBNb3N0IGJyb3dzZXJzIGRvIG5vdCBlbmNvZGUgdGhlbVxyXG4gKiBpbiBlbmNvZGVVUkkgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy91cmwvaXNzdWVzLzM2OSwgc28gaXQgbWF5IGJlIHNhZmVyIHRvXHJcbiAqIGFsc28gZW5jb2RlIGAhJygpKmAuIExlYXZpbmcgdW4tZW5jb2RlZCBvbmx5IEFTQ0lJIGFscGhhbnVtZXJpYyhgYS16QS1aMC05YClcclxuICogcGx1cyBgLS5ffmAuIFRoaXMgZXh0cmEgc2FmZXR5IHNob3VsZCBiZSBhcHBsaWVkIHRvIHF1ZXJ5IGJ5IHBhdGNoaW5nIHRoZVxyXG4gKiBzdHJpbmcgcmV0dXJuZWQgYnkgZW5jb2RlVVJJQ29tcG9uZW50IGVuY29kZVVSSSBhbHNvIGVuY29kZXMgYFtcXF1eYC4gYFxcYFxyXG4gKiBzaG91bGQgYmUgZW5jb2RlZCB0byBhdm9pZCBhbWJpZ3VpdHkuIEJyb3dzZXJzIChJRSwgRkYsIEMpIHRyYW5zZm9ybSBhIGBcXGBcclxuICogaW50byBhIGAvYCBpZiBkaXJlY3RseSB0eXBlZCBpbi4gVGhlIF9iYWNrdGlja18gKGBgYGBgKSBzaG91bGQgYWxzbyBiZVxyXG4gKiBlbmNvZGVkIGV2ZXJ5d2hlcmUgYmVjYXVzZSBzb21lIGJyb3dzZXJzIGxpa2UgRkYgZW5jb2RlIGl0IHdoZW4gZGlyZWN0bHlcclxuICogd3JpdHRlbiB3aGlsZSBvdGhlcnMgZG9uJ3QuIFNhZmFyaSBhbmQgSUUgZG9uJ3QgZW5jb2RlIGBgXCI8Pnt9YGBgIGluIGhhc2guXHJcbiAqL1xyXG4vLyBjb25zdCBFWFRSQV9SRVNFUlZFRF9SRSA9IC9bIScoKSpdL2dcclxuLy8gY29uc3QgZW5jb2RlUmVzZXJ2ZWRSZXBsYWNlciA9IChjOiBzdHJpbmcpID0+ICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcclxuY29uc3QgSEFTSF9SRSA9IC8jL2c7IC8vICUyM1xyXG5jb25zdCBBTVBFUlNBTkRfUkUgPSAvJi9nOyAvLyAlMjZcclxuY29uc3QgU0xBU0hfUkUgPSAvXFwvL2c7IC8vICUyRlxyXG5jb25zdCBFUVVBTF9SRSA9IC89L2c7IC8vICUzRFxyXG5jb25zdCBJTV9SRSA9IC9cXD8vZzsgLy8gJTNGXHJcbmNvbnN0IFBMVVNfUkUgPSAvXFwrL2c7IC8vICUyQlxyXG4vKipcclxuICogTk9URTogSXQncyBub3QgY2xlYXIgdG8gbWUgaWYgd2Ugc2hvdWxkIGVuY29kZSB0aGUgKyBzeW1ib2wgaW4gcXVlcmllcywgaXRcclxuICogc2VlbXMgdG8gYmUgbGVzcyBmbGV4aWJsZSB0aGFuIG5vdCBkb2luZyBzbyBhbmQgSSBjYW4ndCBmaW5kIG91dCB0aGUgbGVnYWN5XHJcbiAqIHN5c3RlbXMgcmVxdWlyaW5nIHRoaXMgZm9yIHJlZ3VsYXIgcmVxdWVzdHMgbGlrZSB0ZXh0L2h0bWwuIEluIHRoZSBzdGFuZGFyZCxcclxuICogdGhlIGVuY29kaW5nIG9mIHRoZSBwbHVzIGNoYXJhY3RlciBpcyBvbmx5IG1lbnRpb25lZCBmb3JcclxuICogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXHJcbiAqIChodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybGVuY29kZWQtcGFyc2luZykgYW5kIG1vc3QgYnJvd3NlcnMgc2VlbXMgbG9cclxuICogbGVhdmUgdGhlIHBsdXMgY2hhcmFjdGVyIGFzIGlzIGluIHF1ZXJpZXMuIFRvIGJlIG1vcmUgZmxleGlibGUsIHdlIGFsbG93IHRoZVxyXG4gKiBwbHVzIGNoYXJhY3RlciBvbiB0aGUgcXVlcnksIGJ1dCBpdCBjYW4gYWxzbyBiZSBtYW51YWxseSBlbmNvZGVkIGJ5IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBSZXNvdXJjZXM6XHJcbiAqIC0gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmdcclxuICogLSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNjM0MjcxL3VybC1lbmNvZGluZy10aGUtc3BhY2UtY2hhcmFjdGVyLW9yLTIwXHJcbiAqL1xyXG5jb25zdCBFTkNfQlJBQ0tFVF9PUEVOX1JFID0gLyU1Qi9nOyAvLyBbXHJcbmNvbnN0IEVOQ19CUkFDS0VUX0NMT1NFX1JFID0gLyU1RC9nOyAvLyBdXHJcbmNvbnN0IEVOQ19DQVJFVF9SRSA9IC8lNUUvZzsgLy8gXlxyXG5jb25zdCBFTkNfQkFDS1RJQ0tfUkUgPSAvJTYwL2c7IC8vIGBcclxuY29uc3QgRU5DX0NVUkxZX09QRU5fUkUgPSAvJTdCL2c7IC8vIHtcclxuY29uc3QgRU5DX1BJUEVfUkUgPSAvJTdDL2c7IC8vIHxcclxuY29uc3QgRU5DX0NVUkxZX0NMT1NFX1JFID0gLyU3RC9nOyAvLyB9XHJcbmNvbnN0IEVOQ19TUEFDRV9SRSA9IC8lMjAvZzsgLy8gfVxyXG4vKipcclxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaFxyXG4gKiBzZWN0aW9ucyBvZiB0aGUgVVJMLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21tb25FbmNvZGUodGV4dCkge1xyXG4gICAgcmV0dXJuIGVuY29kZVVSSSgnJyArIHRleHQpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX1BJUEVfUkUsICd8JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQlJBQ0tFVF9PUEVOX1JFLCAnWycpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0JSQUNLRVRfQ0xPU0VfUkUsICddJyk7XHJcbn1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBoYXNoIHNlY3Rpb24gb2YgdGhlIFVSTC5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVIYXNoKHRleHQpIHtcclxuICAgIHJldHVybiBjb21tb25FbmNvZGUodGV4dClcclxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DVVJMWV9DTE9TRV9SRSwgJ30nKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DQVJFVF9SRSwgJ14nKTtcclxufVxyXG4vKipcclxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgcXVlcnkgdmFsdWVzIG9uIHRoZSBxdWVyeVxyXG4gKiBzZWN0aW9uIG9mIHRoZSBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUXVlcnlWYWx1ZSh0ZXh0KSB7XHJcbiAgICByZXR1cm4gKGNvbW1vbkVuY29kZSh0ZXh0KVxyXG4gICAgICAgIC8vIEVuY29kZSB0aGUgc3BhY2UgYXMgKywgZW5jb2RlIHRoZSArIHRvIGRpZmZlcmVudGlhdGUgaXQgZnJvbSB0aGUgc3BhY2VcclxuICAgICAgICAucmVwbGFjZShQTFVTX1JFLCAnJTJCJylcclxuICAgICAgICAucmVwbGFjZShFTkNfU1BBQ0VfUkUsICcrJylcclxuICAgICAgICAucmVwbGFjZShIQVNIX1JFLCAnJTIzJylcclxuICAgICAgICAucmVwbGFjZShBTVBFUlNBTkRfUkUsICclMjYnKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19CQUNLVElDS19SRSwgJ2AnKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DVVJMWV9PUEVOX1JFLCAneycpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NVUkxZX0NMT1NFX1JFLCAnfScpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NBUkVUX1JFLCAnXicpKTtcclxufVxyXG4vKipcclxuICogTGlrZSBgZW5jb2RlUXVlcnlWYWx1ZWAgYnV0IGFsc28gZW5jb2RlcyB0aGUgYD1gIGNoYXJhY3Rlci5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVRdWVyeUtleSh0ZXh0KSB7XHJcbiAgICByZXR1cm4gZW5jb2RlUXVlcnlWYWx1ZSh0ZXh0KS5yZXBsYWNlKEVRVUFMX1JFLCAnJTNEJyk7XHJcbn1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoIHNlY3Rpb24gb2YgdGhlIFVSTC5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVQYXRoKHRleHQpIHtcclxuICAgIHJldHVybiBjb21tb25FbmNvZGUodGV4dCkucmVwbGFjZShIQVNIX1JFLCAnJTIzJykucmVwbGFjZShJTV9SRSwgJyUzRicpO1xyXG59XHJcbi8qKlxyXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBvbiB0aGUgcGF0aCBzZWN0aW9uIG9mIHRoZSBVUkwgYXMgYVxyXG4gKiBwYXJhbS4gVGhpcyBmdW5jdGlvbiBlbmNvZGVzIGV2ZXJ5dGhpbmcge0BsaW5rIGVuY29kZVBhdGh9IGRvZXMgcGx1cyB0aGVcclxuICogc2xhc2ggKGAvYCkgY2hhcmFjdGVyLiBJZiBgdGV4dGAgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCByZXR1cm5zIGFuIGVtcHR5XHJcbiAqIHN0cmluZyBpbnN0ZWFkLlxyXG4gKlxyXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcclxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZVBhcmFtKHRleHQpIHtcclxuICAgIHJldHVybiB0ZXh0ID09IG51bGwgPyAnJyA6IGVuY29kZVBhdGgodGV4dCkucmVwbGFjZShTTEFTSF9SRSwgJyUyRicpO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGUgdGV4dCB1c2luZyBgZGVjb2RlVVJJQ29tcG9uZW50YC4gUmV0dXJucyB0aGUgb3JpZ2luYWwgdGV4dCBpZiBpdFxyXG4gKiBmYWlscy5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZGVjb2RlXHJcbiAqIEByZXR1cm5zIGRlY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWNvZGUodGV4dCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KCcnICsgdGV4dCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYEVycm9yIGRlY29kaW5nIFwiJHt0ZXh0fVwiLiBVc2luZyBvcmlnaW5hbCB2YWx1ZWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnICsgdGV4dDtcclxufVxuXG4vKipcclxuICogVHJhbnNmb3JtcyBhIHF1ZXJ5U3RyaW5nIGludG8gYSB7QGxpbmsgTG9jYXRpb25RdWVyeX0gb2JqZWN0LiBBY2NlcHQgYm90aCwgYVxyXG4gKiB2ZXJzaW9uIHdpdGggdGhlIGxlYWRpbmcgYD9gIGFuZCB3aXRob3V0IFNob3VsZCB3b3JrIGFzIFVSTFNlYXJjaFBhcmFtc1xyXG5cbiAqIEBpbnRlcm5hbFxyXG4gKlxyXG4gKiBAcGFyYW0gc2VhcmNoIC0gc2VhcmNoIHN0cmluZyB0byBwYXJzZVxyXG4gKiBAcmV0dXJucyBhIHF1ZXJ5IG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VRdWVyeShzZWFyY2gpIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0ge307XHJcbiAgICAvLyBhdm9pZCBjcmVhdGluZyBhbiBvYmplY3Qgd2l0aCBhbiBlbXB0eSBrZXkgYW5kIGVtcHR5IHZhbHVlXHJcbiAgICAvLyBiZWNhdXNlIG9mIHNwbGl0KCcmJylcclxuICAgIGlmIChzZWFyY2ggPT09ICcnIHx8IHNlYXJjaCA9PT0gJz8nKVxyXG4gICAgICAgIHJldHVybiBxdWVyeTtcclxuICAgIGNvbnN0IGhhc0xlYWRpbmdJTSA9IHNlYXJjaFswXSA9PT0gJz8nO1xyXG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gKGhhc0xlYWRpbmdJTSA/IHNlYXJjaC5zbGljZSgxKSA6IHNlYXJjaCkuc3BsaXQoJyYnKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VhcmNoUGFyYW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgLy8gcHJlIGRlY29kZSB0aGUgKyBpbnRvIHNwYWNlXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW0gPSBzZWFyY2hQYXJhbXNbaV0ucmVwbGFjZShQTFVTX1JFLCAnICcpO1xyXG4gICAgICAgIC8vIGFsbG93IHRoZSA9IGNoYXJhY3RlclxyXG4gICAgICAgIGNvbnN0IGVxUG9zID0gc2VhcmNoUGFyYW0uaW5kZXhPZignPScpO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGRlY29kZShlcVBvcyA8IDAgPyBzZWFyY2hQYXJhbSA6IHNlYXJjaFBhcmFtLnNsaWNlKDAsIGVxUG9zKSk7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlcVBvcyA8IDAgPyBudWxsIDogZGVjb2RlKHNlYXJjaFBhcmFtLnNsaWNlKGVxUG9zICsgMSkpO1xyXG4gICAgICAgIGlmIChrZXkgaW4gcXVlcnkpIHtcclxuICAgICAgICAgICAgLy8gYW4gZXh0cmEgdmFyaWFibGUgZm9yIHRzIHR5cGVzXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldO1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkoY3VycmVudFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gcXVlcnlba2V5XSA9IFtjdXJyZW50VmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlcnk7XHJcbn1cclxuLyoqXHJcbiAqIFN0cmluZ2lmaWVzIGEge0BsaW5rIExvY2F0aW9uUXVlcnlSYXd9IG9iamVjdC4gTGlrZSBgVVJMU2VhcmNoUGFyYW1zYCwgaXRcclxuICogZG9lc24ndCBwcmVwZW5kIGEgYD9gXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKlxyXG4gKiBAcGFyYW0gcXVlcnkgLSBxdWVyeSBvYmplY3QgdG8gc3RyaW5naWZ5XHJcbiAqIEByZXR1cm5zIHN0cmluZyB2ZXJzaW9uIG9mIHRoZSBxdWVyeSB3aXRob3V0IHRoZSBsZWFkaW5nIGA/YFxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5UXVlcnkocXVlcnkpIHtcclxuICAgIGxldCBzZWFyY2ggPSAnJztcclxuICAgIGZvciAobGV0IGtleSBpbiBxdWVyeSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcclxuICAgICAgICBrZXkgPSBlbmNvZGVRdWVyeUtleShrZXkpO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgbnVsbCBhZGRzIHRoZSB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoICs9IChzZWFyY2gubGVuZ3RoID8gJyYnIDogJycpICsga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBrZWVwIG51bGwgdmFsdWVzXHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0gaXNBcnJheSh2YWx1ZSlcclxuICAgICAgICAgICAgPyB2YWx1ZS5tYXAodiA9PiB2ICYmIGVuY29kZVF1ZXJ5VmFsdWUodikpXHJcbiAgICAgICAgICAgIDogW3ZhbHVlICYmIGVuY29kZVF1ZXJ5VmFsdWUodmFsdWUpXTtcclxuICAgICAgICB2YWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHNraXAgdW5kZWZpbmVkIHZhbHVlcyBpbiBhcnJheXMgYXMgaWYgdGhleSB3ZXJlIG5vdCBwcmVzZW50XHJcbiAgICAgICAgICAgIC8vIHNtYWxsZXIgY29kZSB0aGFuIHVzaW5nIGZpbHRlclxyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gb25seSBhcHBlbmQgJiB3aXRoIG5vbi1lbXB0eSBzZWFyY2hcclxuICAgICAgICAgICAgICAgIHNlYXJjaCArPSAoc2VhcmNoLmxlbmd0aCA/ICcmJyA6ICcnKSArIGtleTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaCArPSAnPScgKyB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlYXJjaDtcclxufVxyXG4vKipcclxuICogVHJhbnNmb3JtcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IGJ5IGNhc3RpbmdcclxuICogbnVtYmVycyBpbnRvIHN0cmluZ3MsIHJlbW92aW5nIGtleXMgd2l0aCBhbiB1bmRlZmluZWQgdmFsdWUgYW5kIHJlcGxhY2luZ1xyXG4gKiB1bmRlZmluZWQgd2l0aCBudWxsIGluIGFycmF5c1xyXG4gKlxyXG4gKiBAcGFyYW0gcXVlcnkgLSBxdWVyeSBvYmplY3QgdG8gbm9ybWFsaXplXHJcbiAqIEByZXR1cm5zIGEgbm9ybWFsaXplZCBxdWVyeSBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBxdWVyeVtrZXldO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRRdWVyeVtrZXldID0gaXNBcnJheSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgID8gdmFsdWUubWFwKHYgPT4gKHYgPT0gbnVsbCA/IG51bGwgOiAnJyArIHYpKVxyXG4gICAgICAgICAgICAgICAgOiB2YWx1ZSA9PSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIDogJycgKyB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplZFF1ZXJ5O1xyXG59XG5cbi8qKlxyXG4gKiBSb3V0ZVJlY29yZCBiZWluZyByZW5kZXJlZCBieSB0aGUgY2xvc2VzdCBhbmNlc3RvciBSb3V0ZXIgVmlldy4gVXNlZCBmb3JcclxuICogYG9uQmVmb3JlUm91dGVVcGRhdGVgIGFuZCBgb25CZWZvcmVSb3V0ZUxlYXZlYC4gcnZsbSBzdGFuZHMgZm9yIFJvdXRlciBWaWV3XHJcbiAqIExvY2F0aW9uIE1hdGNoZWRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBtYXRjaGVkUm91dGVLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGxvY2F0aW9uIG1hdGNoZWQnIDogJycpO1xyXG4vKipcclxuICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIHJvdXRlciB2aWV3IGRlcHRoIHRvIGNvbnRyb2wgd2hpY2ggY29tcG9uZW50IGluXHJcbiAqIGBtYXRjaGVkYCBpcyByZW5kZXJlZC4gcnZkIHN0YW5kcyBmb3IgUm91dGVyIFZpZXcgRGVwdGhcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCB2aWV3RGVwdGhLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGRlcHRoJyA6ICcnKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgaW5zdGFuY2UgcmV0dXJuZWQgYnkgYHVzZVJvdXRlcmAgaW4gdGVzdHMuIHJcclxuICogc3RhbmRzIGZvciByb3V0ZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCByb3V0ZXJLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlcicgOiAnJyk7XHJcbi8qKlxyXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgY3VycmVudCByb3V0ZSByZXR1cm5lZCBieSBgdXNlUm91dGVgIGluIHRlc3RzLiBybFxyXG4gKiBzdGFuZHMgZm9yIHJvdXRlIGxvY2F0aW9uXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgcm91dGVMb2NhdGlvbktleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAncm91dGUgbG9jYXRpb24nIDogJycpO1xyXG4vKipcclxuICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgcm91dGUgdXNlZCBieSByb3V0ZXItdmlldy4gSW50ZXJuYWxseSB0aGlzIGlzXHJcbiAqIHVzZWQgd2hlbiB0aGUgYHJvdXRlYCBwcm9wIGlzIHBhc3NlZC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCByb3V0ZXJWaWV3TG9jYXRpb25LZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGxvY2F0aW9uJyA6ICcnKTtcblxuLyoqXHJcbiAqIENyZWF0ZSBhIGxpc3Qgb2YgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIHJlc2V0LiBVc2VkIHRvIGNyZWF0ZSBiZWZvcmUgYW5kIGFmdGVyIG5hdmlnYXRpb24gZ3VhcmRzIGxpc3RcclxuICovXHJcbmZ1bmN0aW9uIHVzZUNhbGxiYWNrcygpIHtcclxuICAgIGxldCBoYW5kbGVycyA9IFtdO1xyXG4gICAgZnVuY3Rpb24gYWRkKGhhbmRsZXIpIHtcclxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpZiAoaSA+IC0xKVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgICBoYW5kbGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhZGQsXHJcbiAgICAgICAgbGlzdDogKCkgPT4gaGFuZGxlcnMsXHJcbiAgICAgICAgcmVzZXQsXHJcbiAgICB9O1xyXG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyR3VhcmQocmVjb3JkLCBuYW1lLCBndWFyZCkge1xyXG4gICAgY29uc3QgcmVtb3ZlRnJvbUxpc3QgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVjb3JkW25hbWVdLmRlbGV0ZShndWFyZCk7XHJcbiAgICB9O1xyXG4gICAgb25Vbm1vdW50ZWQocmVtb3ZlRnJvbUxpc3QpO1xyXG4gICAgb25EZWFjdGl2YXRlZChyZW1vdmVGcm9tTGlzdCk7XHJcbiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7XHJcbiAgICAgICAgcmVjb3JkW25hbWVdLmFkZChndWFyZCk7XHJcbiAgICB9KTtcclxuICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGQgYSBuYXZpZ2F0aW9uIGd1YXJkIHRoYXQgdHJpZ2dlcnMgd2hlbmV2ZXIgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGN1cnJlbnRcclxuICogbG9jYXRpb24gaXMgYWJvdXQgdG8gYmUgbGVmdC4gU2ltaWxhciB0byB7QGxpbmsgYmVmb3JlUm91dGVMZWF2ZX0gYnV0IGNhbiBiZVxyXG4gKiB1c2VkIGluIGFueSBjb21wb25lbnQuIFRoZSBndWFyZCBpcyByZW1vdmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBsZWF2ZUd1YXJkIC0ge0BsaW5rIE5hdmlnYXRpb25HdWFyZH1cclxuICovXHJcbmZ1bmN0aW9uIG9uQmVmb3JlUm91dGVMZWF2ZShsZWF2ZUd1YXJkKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFnZXRDdXJyZW50SW5zdGFuY2UoKSkge1xyXG4gICAgICAgIHdhcm4oJ2dldEN1cnJlbnRJbnN0YW5jZSgpIHJldHVybmVkIG51bGwuIG9uQmVmb3JlUm91dGVMZWF2ZSgpIG11c3QgYmUgY2FsbGVkIGF0IHRoZSB0b3Agb2YgYSBzZXR1cCBmdW5jdGlvbicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZCA9IGluamVjdChtYXRjaGVkUm91dGVLZXksIFxyXG4gICAgLy8gdG8gYXZvaWQgd2FybmluZ1xyXG4gICAge30pLnZhbHVlO1xyXG4gICAgaWYgKCFhY3RpdmVSZWNvcmQpIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybignTm8gYWN0aXZlIHJvdXRlIHJlY29yZCB3YXMgZm91bmQgd2hlbiBjYWxsaW5nIGBvbkJlZm9yZVJvdXRlTGVhdmUoKWAuIE1ha2Ugc3VyZSB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIGluc2lkZSBhIGNvbXBvbmVudCBjaGlsZCBvZiA8cm91dGVyLXZpZXc+LiBNYXliZSB5b3UgY2FsbGVkIGl0IGluc2lkZSBvZiBBcHAudnVlPycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCAnbGVhdmVHdWFyZHMnLCBsZWF2ZUd1YXJkKTtcclxufVxyXG4vKipcclxuICogQWRkIGEgbmF2aWdhdGlvbiBndWFyZCB0aGF0IHRyaWdnZXJzIHdoZW5ldmVyIHRoZSBjdXJyZW50IGxvY2F0aW9uIGlzIGFib3V0XHJcbiAqIHRvIGJlIHVwZGF0ZWQuIFNpbWlsYXIgdG8ge0BsaW5rIGJlZm9yZVJvdXRlVXBkYXRlfSBidXQgY2FuIGJlIHVzZWQgaW4gYW55XHJcbiAqIGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cclxuICpcclxuICogQHBhcmFtIHVwZGF0ZUd1YXJkIC0ge0BsaW5rIE5hdmlnYXRpb25HdWFyZH1cclxuICovXHJcbmZ1bmN0aW9uIG9uQmVmb3JlUm91dGVVcGRhdGUodXBkYXRlR3VhcmQpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWdldEN1cnJlbnRJbnN0YW5jZSgpKSB7XHJcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZVVwZGF0ZSgpIG11c3QgYmUgY2FsbGVkIGF0IHRoZSB0b3Agb2YgYSBzZXR1cCBmdW5jdGlvbicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZCA9IGluamVjdChtYXRjaGVkUm91dGVLZXksIFxyXG4gICAgLy8gdG8gYXZvaWQgd2FybmluZ1xyXG4gICAge30pLnZhbHVlO1xyXG4gICAgaWYgKCFhY3RpdmVSZWNvcmQpIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybignTm8gYWN0aXZlIHJvdXRlIHJlY29yZCB3YXMgZm91bmQgd2hlbiBjYWxsaW5nIGBvbkJlZm9yZVJvdXRlVXBkYXRlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT8nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlckd1YXJkKGFjdGl2ZVJlY29yZCwgJ3VwZGF0ZUd1YXJkcycsIHVwZGF0ZUd1YXJkKTtcclxufVxyXG5mdW5jdGlvbiBndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lKSB7XHJcbiAgICAvLyBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBlbnRlckNhbGxiYWNrQXJyYXkgdG8gcHJldmVudCBwdXNoaW5nIGNhbGxiYWNrcyBpZiBhIG5ldyBuYXZpZ2F0aW9uIHRvb2sgcGxhY2VcclxuICAgIGNvbnN0IGVudGVyQ2FsbGJhY2tBcnJheSA9IHJlY29yZCAmJlxyXG4gICAgICAgIC8vIG5hbWUgaXMgZGVmaW5lZCBpZiByZWNvcmQgaXMgYmVjYXVzZSBvZiB0aGUgZnVuY3Rpb24gb3ZlcmxvYWRcclxuICAgICAgICAocmVjb3JkLmVudGVyQ2FsbGJhY2tzW25hbWVdID0gcmVjb3JkLmVudGVyQ2FsbGJhY2tzW25hbWVdIHx8IFtdKTtcclxuICAgIHJldHVybiAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV4dCA9ICh2YWxpZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsaWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoY3JlYXRlUm91dGVyRXJyb3IoNCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG8sXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodmFsaWQgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHZhbGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc1JvdXRlTG9jYXRpb24odmFsaWQpKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoY3JlYXRlUm91dGVyRXJyb3IoMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0byxcclxuICAgICAgICAgICAgICAgICAgICB0bzogdmFsaWQsXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50ZXJDYWxsYmFja0FycmF5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgZW50ZXJDYWxsYmFja0FycmF5IGlzIHRydXRoeSwgYm90aCByZWNvcmQgYW5kIG5hbWUgYWxzbyBhcmVcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuZW50ZXJDYWxsYmFja3NbbmFtZV0gPT09IGVudGVyQ2FsbGJhY2tBcnJheSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2YWxpZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGVyQ2FsbGJhY2tBcnJheS5wdXNoKHZhbGlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gd3JhcHBpbmcgd2l0aCBQcm9taXNlLnJlc29sdmUgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBib3RoIGFzeW5jIGFuZCBzeW5jIGd1YXJkc1xyXG4gICAgICAgIGNvbnN0IGd1YXJkUmV0dXJuID0gZ3VhcmQuY2FsbChyZWNvcmQgJiYgcmVjb3JkLmluc3RhbmNlc1tuYW1lXSwgdG8sIGZyb20sIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGNhbk9ubHlCZUNhbGxlZE9uY2UobmV4dCwgdG8sIGZyb20pIDogbmV4dCk7XHJcbiAgICAgICAgbGV0IGd1YXJkQ2FsbCA9IFByb21pc2UucmVzb2x2ZShndWFyZFJldHVybik7XHJcbiAgICAgICAgaWYgKGd1YXJkLmxlbmd0aCA8IDMpXHJcbiAgICAgICAgICAgIGd1YXJkQ2FsbCA9IGd1YXJkQ2FsbC50aGVuKG5leHQpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZ3VhcmQubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgbmV2ZXIgY2FsbGVkIGluc2lkZSBvZiAke2d1YXJkLm5hbWUgPyAnXCInICsgZ3VhcmQubmFtZSArICdcIicgOiAnJ306XFxuJHtndWFyZC50b1N0cmluZygpfVxcbi4gSWYgeW91IGFyZSByZXR1cm5pbmcgYSB2YWx1ZSBpbnN0ZWFkIG9mIGNhbGxpbmcgXCJuZXh0XCIsIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIFwibmV4dFwiIHBhcmFtZXRlciBmcm9tIHlvdXIgZnVuY3Rpb24uYDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBndWFyZFJldHVybiA9PT0gJ29iamVjdCcgJiYgJ3RoZW4nIGluIGd1YXJkUmV0dXJuKSB7XHJcbiAgICAgICAgICAgICAgICBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbihyZXNvbHZlZFZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBfY2FsbGVkIGlzIGFkZGVkIGF0IGNhbk9ubHlCZUNhbGxlZE9uY2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHQuX2NhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIG5hdmlnYXRpb24gZ3VhcmQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZ3VhcmRSZXR1cm4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogX2NhbGxlZCBpcyBhZGRlZCBhdCBjYW5Pbmx5QmVDYWxsZWRPbmNlXHJcbiAgICAgICAgICAgICAgICBpZiAoIW5leHQuX2NhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4obWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBuYXZpZ2F0aW9uIGd1YXJkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBndWFyZENhbGwuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNhbk9ubHlCZUNhbGxlZE9uY2UobmV4dCwgdG8sIGZyb20pIHtcclxuICAgIGxldCBjYWxsZWQgPSAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY2FsbGVkKysgPT09IDEpXHJcbiAgICAgICAgICAgIHdhcm4oYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIG9uZSBuYXZpZ2F0aW9uIGd1YXJkIHdoZW4gZ29pbmcgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG8uZnVsbFBhdGh9XCIuIEl0IHNob3VsZCBiZSBjYWxsZWQgZXhhY3RseSBvbmUgdGltZSBpbiBlYWNoIG5hdmlnYXRpb24gZ3VhcmQuIFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24uYCk7XHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgcHV0IGl0IGluIHRoZSBvcmlnaW5hbCBvbmUgYmVjYXVzZSBpdCdzIGVhc2llciB0byBjaGVja1xyXG4gICAgICAgIG5leHQuX2NhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGNhbGxlZCA9PT0gMSlcclxuICAgICAgICAgICAgbmV4dC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0Q29tcG9uZW50c0d1YXJkcyhtYXRjaGVkLCBndWFyZFR5cGUsIHRvLCBmcm9tKSB7XHJcbiAgICBjb25zdCBndWFyZHMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIG1hdGNoZWQpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyZWNvcmQuY29tcG9uZW50cyAmJiAhcmVjb3JkLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB3YXJuKGBSZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBlaXRoZXIgbWlzc2luZyBhIFwiY29tcG9uZW50KHMpXCJgICtcclxuICAgICAgICAgICAgICAgIGAgb3IgXCJjaGlsZHJlblwiIHByb3BlcnR5LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcmVjb3JkLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgbGV0IHJhd0NvbXBvbmVudCA9IHJlY29yZC5jb21wb25lbnRzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJhd0NvbXBvbmVudCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmF3Q29tcG9uZW50ICE9PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmF3Q29tcG9uZW50ICE9PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBub3RgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCBhIHZhbGlkIGNvbXBvbmVudC4gUmVjZWl2ZWQgXCIke1N0cmluZyhyYXdDb21wb25lbnQpfVwiLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRocm93IHRvIGVuc3VyZSB3ZSBzdG9wIGhlcmUgYnV0IHdhcm4gdG8gZW5zdXJlIHRoZSBtZXNzYWdlIGlzbid0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWlzc2VkIGJ5IHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJvdXRlIGNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3RoZW4nIGluIHJhd0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhcm4gaWYgdXNlciB3cm90ZSBpbXBvcnQoJy9jb21wb25lbnQudnVlJykgaW5zdGVhZCBvZiAoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGltcG9ydCgnLi9jb21wb25lbnQudnVlJylcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgYSBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFByb21pc2UgaW5zdGVhZCBvZiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UuIERpZCB5b3UgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3cml0ZSBcImltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgXCIoKSA9PiBpbXBvcnQoJy4vTXlQYWdlLnZ1ZScpXCIgPyBUaGlzIHdpbGwgYnJlYWsgaW4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcmF3Q29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd0NvbXBvbmVudCA9ICgpID0+IHByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXdDb21wb25lbnQuX19hc3luY0xvYWRlciAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhcm4gb25seSBvbmNlIHBlciBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAhcmF3Q29tcG9uZW50Ll9fd2FybmVkRGVmaW5lQXN5bmMpIHtcclxuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGRlZmluZWQgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB1c2luZyBcImRlZmluZUFzeW5jQ29tcG9uZW50KClcIi4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBXcml0ZSBcIigpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgXCJkZWZpbmVBc3luY0NvbXBvbmVudCgoKSA9PiBpbXBvcnQoJy4vTXlQYWdlLnZ1ZScpKVwiLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNraXAgdXBkYXRlIGFuZCBsZWF2ZSBndWFyZHMgaWYgdGhlIHJvdXRlIGNvbXBvbmVudCBpcyBub3QgbW91bnRlZFxyXG4gICAgICAgICAgICBpZiAoZ3VhcmRUeXBlICE9PSAnYmVmb3JlUm91dGVFbnRlcicgJiYgIXJlY29yZC5pbnN0YW5jZXNbbmFtZV0pXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKGlzUm91dGVDb21wb25lbnQocmF3Q29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gX192Y2NPcHRzIGlzIGFkZGVkIGJ5IHZ1ZS1jbGFzcy1jb21wb25lbnQgYW5kIGNvbnRhaW4gdGhlIHJlZ3VsYXIgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHJhd0NvbXBvbmVudC5fX3ZjY09wdHMgfHwgcmF3Q29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmQgPSBvcHRpb25zW2d1YXJkVHlwZV07XHJcbiAgICAgICAgICAgICAgICBndWFyZCAmJiBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzdGFydCByZXF1ZXN0aW5nIHRoZSBjaHVuayBhbHJlYWR5XHJcbiAgICAgICAgICAgICAgICBsZXQgY29tcG9uZW50UHJvbWlzZSA9IHJhd0NvbXBvbmVudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhKCdjYXRjaCcgaW4gY29tcG9uZW50UHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgYSBmdW5jdGlvbiB0aGF0IGRvZXMgbm90IHJldHVybiBhIFByb21pc2UuIElmIHlvdSB3ZXJlIHBhc3NpbmcgYSBmdW5jdGlvbmFsIGNvbXBvbmVudCwgbWFrZSBzdXJlIHRvIGFkZCBhIFwiZGlzcGxheU5hbWVcIiB0byB0aGUgY29tcG9uZW50LiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb21wb25lbnRQcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKCgpID0+IGNvbXBvbmVudFByb21pc2UudGhlbihyZXNvbHZlZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgQ291bGRuJ3QgcmVzb2x2ZSBjb21wb25lbnQgXCIke25hbWV9XCIgYXQgXCIke3JlY29yZC5wYXRofVwiYCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkQ29tcG9uZW50ID0gaXNFU01vZHVsZShyZXNvbHZlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXNvbHZlZC5kZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzb2x2ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgcmVzb2x2ZWQgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGJlY2F1c2Ugd2Ugd2VudCBpbnRvIHRoZSBmb3IgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZC5jb21wb25lbnRzW25hbWVdID0gcmVzb2x2ZWRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gX192Y2NPcHRzIGlzIGFkZGVkIGJ5IHZ1ZS1jbGFzcy1jb21wb25lbnQgYW5kIGNvbnRhaW4gdGhlIHJlZ3VsYXIgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlZENvbXBvbmVudC5fX3ZjY09wdHMgfHwgcmVzb2x2ZWRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3VhcmQgPSBvcHRpb25zW2d1YXJkVHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGd1YXJkICYmIGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tLCByZWNvcmQsIG5hbWUpKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ3VhcmRzO1xyXG59XHJcbi8qKlxyXG4gKiBBbGxvd3MgZGlmZmVyZW50aWF0aW5nIGxhenkgY29tcG9uZW50cyBmcm9tIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBhbmQgdnVlLWNsYXNzLWNvbXBvbmVudFxyXG4gKiBAaW50ZXJuYWxcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNSb3V0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIHJldHVybiAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ29iamVjdCcgfHxcclxuICAgICAgICAnZGlzcGxheU5hbWUnIGluIGNvbXBvbmVudCB8fFxyXG4gICAgICAgICdwcm9wcycgaW4gY29tcG9uZW50IHx8XHJcbiAgICAgICAgJ19fdmNjT3B0cycgaW4gY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICogRW5zdXJlcyBhIHJvdXRlIGlzIGxvYWRlZCwgc28gaXQgY2FuIGJlIHBhc3NlZCBhcyBvIHByb3AgdG8gYDxSb3V0ZXJWaWV3PmAuXHJcbiAqXHJcbiAqIEBwYXJhbSByb3V0ZSAtIHJlc29sdmVkIHJvdXRlIHRvIGxvYWRcclxuICovXHJcbmZ1bmN0aW9uIGxvYWRSb3V0ZUxvY2F0aW9uKHJvdXRlKSB7XHJcbiAgICByZXR1cm4gcm91dGUubWF0Y2hlZC5ldmVyeShyZWNvcmQgPT4gcmVjb3JkLnJlZGlyZWN0KVxyXG4gICAgICAgID8gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdDYW5ub3QgbG9hZCBhIHJvdXRlIHRoYXQgcmVkaXJlY3RzLicpKVxyXG4gICAgICAgIDogUHJvbWlzZS5hbGwocm91dGUubWF0Y2hlZC5tYXAocmVjb3JkID0+IHJlY29yZC5jb21wb25lbnRzICYmXHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKHJlY29yZC5jb21wb25lbnRzKS5yZWR1Y2UoKHByb21pc2VzLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYXdDb21wb25lbnQgPSByZWNvcmQuY29tcG9uZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmF3Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgISgnZGlzcGxheU5hbWUnIGluIHJhd0NvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHJhd0NvbXBvbmVudCgpLnRoZW4ocmVzb2x2ZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgQ291bGRuJ3QgcmVzb2x2ZSBjb21wb25lbnQgXCIke25hbWV9XCIgYXQgXCIke3JlY29yZC5wYXRofVwiLiBFbnN1cmUgeW91IHBhc3NlZCBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UuYCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZENvbXBvbmVudCA9IGlzRVNNb2R1bGUocmVzb2x2ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHJlc29sdmVkLmRlZmF1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzb2x2ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIHJlc29sdmVkIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQgYmVjYXVzZSB3ZSB3ZW50IGludG8gdGhlIGZvciBsb29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZC5jb21wb25lbnRzW25hbWVdID0gcmVzb2x2ZWRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZXM7XHJcbiAgICAgICAgICAgIH0sIFtdKSkpKS50aGVuKCgpID0+IHJvdXRlKTtcclxufVxuXG4vLyBUT0RPOiB3ZSBjb3VsZCBhbGxvdyBjdXJyZW50Um91dGUgYXMgYSBwcm9wIHRvIGV4cG9zZSBgaXNBY3RpdmVgIGFuZFxyXG4vLyBgaXNFeGFjdEFjdGl2ZWAgYmVoYXZpb3Igc2hvdWxkIGdvIHRocm91Z2ggYW4gUkZDXHJcbmZ1bmN0aW9uIHVzZUxpbmsocHJvcHMpIHtcclxuICAgIGNvbnN0IHJvdXRlciA9IGluamVjdChyb3V0ZXJLZXkpO1xyXG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xyXG4gICAgY29uc3Qgcm91dGUgPSBjb21wdXRlZCgoKSA9PiByb3V0ZXIucmVzb2x2ZSh1bnJlZihwcm9wcy50bykpKTtcclxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZEluZGV4ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGUudmFsdWU7XHJcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IG1hdGNoZWQ7XHJcbiAgICAgICAgY29uc3Qgcm91dGVNYXRjaGVkID0gbWF0Y2hlZFtsZW5ndGggLSAxXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50TWF0Y2hlZCA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkO1xyXG4gICAgICAgIGlmICghcm91dGVNYXRjaGVkIHx8ICFjdXJyZW50TWF0Y2hlZC5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIHJvdXRlTWF0Y2hlZCkpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgLy8gcG9zc2libGUgcGFyZW50IHJlY29yZFxyXG4gICAgICAgIGNvbnN0IHBhcmVudFJlY29yZFBhdGggPSBnZXRPcmlnaW5hbFBhdGgobWF0Y2hlZFtsZW5ndGggLSAyXSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIG5lc3RlZCByb3V0ZXNcclxuICAgICAgICBsZW5ndGggPiAxICYmXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJlbnQgYW5kIG1hdGNoZWQgcm91dGUgaGF2ZSB0aGUgc2FtZSBwYXRoLCB0aGlzIGxpbmsgaXNcclxuICAgICAgICAgICAgLy8gcmVmZXJyaW5nIHRvIHRoZSBlbXB0eSBjaGlsZC4gT3Igd2UgY3VycmVudGx5IGFyZSBvbiBhIGRpZmZlcmVudFxyXG4gICAgICAgICAgICAvLyBjaGlsZCBvZiB0aGUgc2FtZSBwYXJlbnRcclxuICAgICAgICAgICAgZ2V0T3JpZ2luYWxQYXRoKHJvdXRlTWF0Y2hlZCkgPT09IHBhcmVudFJlY29yZFBhdGggJiZcclxuICAgICAgICAgICAgLy8gYXZvaWQgY29tcGFyaW5nIHRoZSBjaGlsZCB3aXRoIGl0cyBwYXJlbnRcclxuICAgICAgICAgICAgY3VycmVudE1hdGNoZWRbY3VycmVudE1hdGNoZWQubGVuZ3RoIC0gMV0ucGF0aCAhPT0gcGFyZW50UmVjb3JkUGF0aFxyXG4gICAgICAgICAgICA/IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIG1hdGNoZWRbbGVuZ3RoIC0gMl0pKVxyXG4gICAgICAgICAgICA6IGluZGV4KTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaXNBY3RpdmUgPSBjb21wdXRlZCgoKSA9PiBhY3RpdmVSZWNvcmRJbmRleC52YWx1ZSA+IC0xICYmXHJcbiAgICAgICAgaW5jbHVkZXNQYXJhbXMoY3VycmVudFJvdXRlLnBhcmFtcywgcm91dGUudmFsdWUucGFyYW1zKSk7XHJcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJlxyXG4gICAgICAgIGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID09PSBjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggLSAxICYmXHJcbiAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcclxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlKGUgPSB7fSkge1xyXG4gICAgICAgIGlmIChndWFyZEV2ZW50KGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJbdW5yZWYocHJvcHMucmVwbGFjZSkgPyAncmVwbGFjZScgOiAncHVzaCddKHVucmVmKHByb3BzLnRvKVxyXG4gICAgICAgICAgICAvLyBhdm9pZCB1bmNhdWdodCBlcnJvcnMgYXJlIHRoZXkgYXJlIGxvZ2dlZCBhbnl3YXlcclxuICAgICAgICAgICAgKS5jYXRjaChub29wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gZGV2dG9vbHMgb25seVxyXG4gICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rQ29udGV4dERldnRvb2xzID0ge1xyXG4gICAgICAgICAgICAgICAgcm91dGU6IHJvdXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IGlzQWN0aXZlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgaXNFeGFjdEFjdGl2ZTogaXNFeGFjdEFjdGl2ZS52YWx1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhpcyBpcyBpbnRlcm5hbFxyXG4gICAgICAgICAgICBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyA9IGluc3RhbmNlLl9fdnJsX2RldnRvb2xzIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGlzIGlzIGludGVybmFsXHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9fdnJsX2RldnRvb2xzLnB1c2gobGlua0NvbnRleHREZXZ0b29scyk7XHJcbiAgICAgICAgICAgIHdhdGNoRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMucm91dGUgPSByb3V0ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNBY3RpdmUgPSBpc0FjdGl2ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNFeGFjdEFjdGl2ZSA9IGlzRXhhY3RBY3RpdmUudmFsdWU7XHJcbiAgICAgICAgICAgIH0sIHsgZmx1c2g6ICdwb3N0JyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE5PVEU6IHVwZGF0ZSB7QGxpbmsgX1JvdXRlckxpbmtJfSdzIGAkc2xvdHNgIHR5cGUgd2hlbiB1cGRhdGluZyB0aGlzXHJcbiAgICAgKi9cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcm91dGUsXHJcbiAgICAgICAgaHJlZjogY29tcHV0ZWQoKCkgPT4gcm91dGUudmFsdWUuaHJlZiksXHJcbiAgICAgICAgaXNBY3RpdmUsXHJcbiAgICAgICAgaXNFeGFjdEFjdGl2ZSxcclxuICAgICAgICBuYXZpZ2F0ZSxcclxuICAgIH07XHJcbn1cclxuY29uc3QgUm91dGVyTGlua0ltcGwgPSAvKiNfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XHJcbiAgICBuYW1lOiAnUm91dGVyTGluaycsXHJcbiAgICBjb21wYXRDb25maWc6IHsgTU9ERTogMyB9LFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgICB0bzoge1xyXG4gICAgICAgICAgICB0eXBlOiBbU3RyaW5nLCBPYmplY3RdLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcGxhY2U6IEJvb2xlYW4sXHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgICAgICAvLyBpbmFjdGl2ZUNsYXNzOiBTdHJpbmcsXHJcbiAgICAgICAgZXhhY3RBY3RpdmVDbGFzczogU3RyaW5nLFxyXG4gICAgICAgIGN1c3RvbTogQm9vbGVhbixcclxuICAgICAgICBhcmlhQ3VycmVudFZhbHVlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ3BhZ2UnLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdXNlTGluayxcclxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gcmVhY3RpdmUodXNlTGluayhwcm9wcykpO1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyB9ID0gaW5qZWN0KHJvdXRlcktleSk7XHJcbiAgICAgICAgY29uc3QgZWxDbGFzcyA9IGNvbXB1dGVkKCgpID0+ICh7XHJcbiAgICAgICAgICAgIFtnZXRMaW5rQ2xhc3MocHJvcHMuYWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0FjdGl2ZUNsYXNzLCAncm91dGVyLWxpbmstYWN0aXZlJyldOiBsaW5rLmlzQWN0aXZlLFxyXG4gICAgICAgICAgICAvLyBbZ2V0TGlua0NsYXNzKFxyXG4gICAgICAgICAgICAvLyAgIHByb3BzLmluYWN0aXZlQ2xhc3MsXHJcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5saW5rSW5hY3RpdmVDbGFzcyxcclxuICAgICAgICAgICAgLy8gICAncm91dGVyLWxpbmstaW5hY3RpdmUnXHJcbiAgICAgICAgICAgIC8vICldOiAhbGluay5pc0V4YWN0QWN0aXZlLFxyXG4gICAgICAgICAgICBbZ2V0TGlua0NsYXNzKHByb3BzLmV4YWN0QWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3MsICdyb3V0ZXItbGluay1leGFjdC1hY3RpdmUnKV06IGxpbmsuaXNFeGFjdEFjdGl2ZSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQobGluayk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5jdXN0b21cclxuICAgICAgICAgICAgICAgID8gY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIDogaCgnYScsIHtcclxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1jdXJyZW50JzogbGluay5pc0V4YWN0QWN0aXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcHJvcHMuYXJpYUN1cnJlbnRWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogbGluay5ocmVmLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd291bGQgb3ZlcnJpZGUgdXNlciBhZGRlZCBhdHRycyBidXQgVnVlIHdpbGwgc3RpbGwgYWRkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyLCBzbyB3ZSBlbmQgdXAgdHJpZ2dlcmluZyBib3RoXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogbGluay5uYXZpZ2F0ZSxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogZWxDbGFzcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuKTtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxufSk7XHJcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxyXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xyXG4vKipcclxuICogQ29tcG9uZW50IHRvIHJlbmRlciBhIGxpbmsgdGhhdCB0cmlnZ2VycyBhIG5hdmlnYXRpb24gb24gY2xpY2suXHJcbiAqL1xyXG5jb25zdCBSb3V0ZXJMaW5rID0gUm91dGVyTGlua0ltcGw7XHJcbmZ1bmN0aW9uIGd1YXJkRXZlbnQoZSkge1xyXG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcclxuICAgIGlmIChlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcclxuICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcclxuICAgIGlmIChlLmJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9uICE9PSAwKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIC8vIGRvbid0IHJlZGlyZWN0IGlmIGB0YXJnZXQ9XCJfYmxhbmtcImBcclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZ2V0QXR0cmlidXRlIGRvZXMgZXhpc3RcclxuICAgIGlmIChlLmN1cnJlbnRUYXJnZXQgJiYgZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZ2V0QXR0cmlidXRlIGV4aXN0c1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xyXG4gICAgICAgIGlmICgvXFxiX2JsYW5rXFxiL2kudGVzdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzIG1heSBiZSBhIFdlZXggZXZlbnQgd2hpY2ggZG9lc24ndCBoYXZlIHRoaXMgbWV0aG9kXHJcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdClcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpbmNsdWRlc1BhcmFtcyhvdXRlciwgaW5uZXIpIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGlubmVyKSB7XHJcbiAgICAgICAgY29uc3QgaW5uZXJWYWx1ZSA9IGlubmVyW2tleV07XHJcbiAgICAgICAgY29uc3Qgb3V0ZXJWYWx1ZSA9IG91dGVyW2tleV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbm5lclZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJWYWx1ZSAhPT0gb3V0ZXJWYWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghaXNBcnJheShvdXRlclZhbHVlKSB8fFxyXG4gICAgICAgICAgICAgICAgb3V0ZXJWYWx1ZS5sZW5ndGggIT09IGlubmVyVmFsdWUubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICBpbm5lclZhbHVlLnNvbWUoKHZhbHVlLCBpKSA9PiB2YWx1ZSAhPT0gb3V0ZXJWYWx1ZVtpXSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIEdldCB0aGUgb3JpZ2luYWwgcGF0aCB2YWx1ZSBvZiBhIHJlY29yZCBieSBmb2xsb3dpbmcgaXRzIGFsaWFzT2ZcclxuICogQHBhcmFtIHJlY29yZFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0T3JpZ2luYWxQYXRoKHJlY29yZCkge1xyXG4gICAgcmV0dXJuIHJlY29yZCA/IChyZWNvcmQuYWxpYXNPZiA/IHJlY29yZC5hbGlhc09mLnBhdGggOiByZWNvcmQucGF0aCkgOiAnJztcclxufVxyXG4vKipcclxuICogVXRpbGl0eSBjbGFzcyB0byBnZXQgdGhlIGFjdGl2ZSBjbGFzcyBiYXNlZCBvbiBkZWZhdWx0cy5cclxuICogQHBhcmFtIHByb3BDbGFzc1xyXG4gKiBAcGFyYW0gZ2xvYmFsQ2xhc3NcclxuICogQHBhcmFtIGRlZmF1bHRDbGFzc1xyXG4gKi9cclxuY29uc3QgZ2V0TGlua0NsYXNzID0gKHByb3BDbGFzcywgZ2xvYmFsQ2xhc3MsIGRlZmF1bHRDbGFzcykgPT4gcHJvcENsYXNzICE9IG51bGxcclxuICAgID8gcHJvcENsYXNzXHJcbiAgICA6IGdsb2JhbENsYXNzICE9IG51bGxcclxuICAgICAgICA/IGdsb2JhbENsYXNzXHJcbiAgICAgICAgOiBkZWZhdWx0Q2xhc3M7XG5cbmNvbnN0IFJvdXRlclZpZXdJbXBsID0gLyojX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoe1xyXG4gICAgbmFtZTogJ1JvdXRlclZpZXcnLFxyXG4gICAgLy8gIzY3NCB3ZSBtYW51YWxseSBpbmhlcml0IHRoZW1cclxuICAgIGluaGVyaXRBdHRyczogZmFsc2UsXHJcbiAgICBwcm9wczoge1xyXG4gICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAnZGVmYXVsdCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByb3V0ZTogT2JqZWN0LFxyXG4gICAgfSxcclxuICAgIC8vIEJldHRlciBjb21wYXQgZm9yIEB2dWUvY29tcGF0IHVzZXJzXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8xMzE1XHJcbiAgICBjb21wYXRDb25maWc6IHsgTU9ERTogMyB9LFxyXG4gICAgc2V0dXAocHJvcHMsIHsgYXR0cnMsIHNsb3RzIH0pIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkRlcHJlY2F0ZWRVc2FnZSgpO1xyXG4gICAgICAgIGNvbnN0IGluamVjdGVkUm91dGUgPSBpbmplY3Qocm91dGVyVmlld0xvY2F0aW9uS2V5KTtcclxuICAgICAgICBjb25zdCByb3V0ZVRvRGlzcGxheSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnJvdXRlIHx8IGluamVjdGVkUm91dGUudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGluamVjdGVkRGVwdGggPSBpbmplY3Qodmlld0RlcHRoS2V5LCAwKTtcclxuICAgICAgICAvLyBUaGUgZGVwdGggY2hhbmdlcyBiYXNlZCBvbiBlbXB0eSBjb21wb25lbnRzIG9wdGlvbiwgd2hpY2ggYWxsb3dzIHBhc3N0aHJvdWdoIHJvdXRlcyBlLmcuIHJvdXRlcyB3aXRoIGNoaWxkcmVuXHJcbiAgICAgICAgLy8gdGhhdCBhcmUgdXNlZCB0byByZXVzZSB0aGUgYHBhdGhgIHByb3BlcnR5XHJcbiAgICAgICAgY29uc3QgZGVwdGggPSBjb21wdXRlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbml0aWFsRGVwdGggPSB1bnJlZihpbmplY3RlZERlcHRoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBtYXRjaGVkIH0gPSByb3V0ZVRvRGlzcGxheS52YWx1ZTtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZWRSb3V0ZTtcclxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaGVkUm91dGUgPSBtYXRjaGVkW2luaXRpYWxEZXB0aF0pICYmXHJcbiAgICAgICAgICAgICAgICAhbWF0Y2hlZFJvdXRlLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxEZXB0aCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsRGVwdGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlUmVmID0gY29tcHV0ZWQoKCkgPT4gcm91dGVUb0Rpc3BsYXkudmFsdWUubWF0Y2hlZFtkZXB0aC52YWx1ZV0pO1xyXG4gICAgICAgIHByb3ZpZGUodmlld0RlcHRoS2V5LCBjb21wdXRlZCgoKSA9PiBkZXB0aC52YWx1ZSArIDEpKTtcclxuICAgICAgICBwcm92aWRlKG1hdGNoZWRSb3V0ZUtleSwgbWF0Y2hlZFJvdXRlUmVmKTtcclxuICAgICAgICBwcm92aWRlKHJvdXRlclZpZXdMb2NhdGlvbktleSwgcm91dGVUb0Rpc3BsYXkpO1xyXG4gICAgICAgIGNvbnN0IHZpZXdSZWYgPSByZWYoKTtcclxuICAgICAgICAvLyB3YXRjaCBhdCB0aGUgc2FtZSB0aW1lIHRoZSBjb21wb25lbnQgaW5zdGFuY2UsIHRoZSByb3V0ZSByZWNvcmQgd2UgYXJlXHJcbiAgICAgICAgLy8gcmVuZGVyaW5nLCBhbmQgdGhlIG5hbWVcclxuICAgICAgICB3YXRjaCgoKSA9PiBbdmlld1JlZi52YWx1ZSwgbWF0Y2hlZFJvdXRlUmVmLnZhbHVlLCBwcm9wcy5uYW1lXSwgKFtpbnN0YW5jZSwgdG8sIG5hbWVdLCBbb2xkSW5zdGFuY2UsIGZyb20sIG9sZE5hbWVdKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvcHkgcmV1c2VkIGluc3RhbmNlc1xyXG4gICAgICAgICAgICBpZiAodG8pIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCB1cGRhdGUgdGhlIGluc3RhbmNlIGZvciBuZXcgaW5zdGFuY2VzIGFzIHdlbGwgYXMgcmV1c2VkXHJcbiAgICAgICAgICAgICAgICAvLyBpbnN0YW5jZXMgd2hlbiBuYXZpZ2F0aW5nIHRvIGEgbmV3IHJvdXRlXHJcbiAgICAgICAgICAgICAgICB0by5pbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBjb21wb25lbnQgaW5zdGFuY2UgaXMgcmV1c2VkIGZvciBhIGRpZmZlcmVudCByb3V0ZSBvciBuYW1lLCBzb1xyXG4gICAgICAgICAgICAgICAgLy8gd2UgY29weSBhbnkgc2F2ZWQgdXBkYXRlIG9yIGxlYXZlIGd1YXJkcy4gV2l0aCBhc3luYyBzZXR1cCwgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudGluZyBjb21wb25lbnQgd2lsbCBtb3VudCBiZWZvcmUgdGhlIG1hdGNoZWRSb3V0ZSBjaGFuZ2VzLFxyXG4gICAgICAgICAgICAgICAgLy8gbWFraW5nIGluc3RhbmNlID09PSBvbGRJbnN0YW5jZSwgc28gd2UgY2hlY2sgaWYgZ3VhcmRzIGhhdmUgYmVlblxyXG4gICAgICAgICAgICAgICAgLy8gYWRkZWQgYmVmb3JlLiBUaGlzIHdvcmtzIGJlY2F1c2Ugd2UgcmVtb3ZlIGd1YXJkcyB3aGVuXHJcbiAgICAgICAgICAgICAgICAvLyB1bm1vdW50aW5nL2RlYWN0aXZhdGluZyBjb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSAmJiBmcm9tICE9PSB0byAmJiBpbnN0YW5jZSAmJiBpbnN0YW5jZSA9PT0gb2xkSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRvLmxlYXZlR3VhcmRzLnNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG8ubGVhdmVHdWFyZHMgPSBmcm9tLmxlYXZlR3VhcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRvLnVwZGF0ZUd1YXJkcy5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLnVwZGF0ZUd1YXJkcyA9IGZyb20udXBkYXRlR3VhcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGJlZm9yZVJvdXRlRW50ZXIgbmV4dCBjYWxsYmFja3NcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlICYmXHJcbiAgICAgICAgICAgICAgICB0byAmJlxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gaW5zdGFuY2UgYnV0IHRvIGFuZCBmcm9tIGFyZSB0aGUgc2FtZSB0aGlzIG1pZ2h0IGJlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgZmlyc3QgdmlzaXRcclxuICAgICAgICAgICAgICAgICghZnJvbSB8fCAhaXNTYW1lUm91dGVSZWNvcmQodG8sIGZyb20pIHx8ICFvbGRJbnN0YW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICh0by5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSkuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayhpbnN0YW5jZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgeyBmbHVzaDogJ3Bvc3QnIH0pO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm91dGVUb0Rpc3BsYXkudmFsdWU7XHJcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhlIHZhbHVlIGF0IHRoZSB0aW1lIHdlIHJlbmRlciBiZWNhdXNlIHdoZW4gd2UgdW5tb3VudCwgd2VcclxuICAgICAgICAgICAgLy8gbmF2aWdhdGVkIHRvIGEgZGlmZmVyZW50IGxvY2F0aW9uIHNvIHRoZSB2YWx1ZSBpcyBkaWZmZXJlbnRcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudE5hbWUgPSBwcm9wcy5uYW1lO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVkUm91dGVSZWYudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IFZpZXdDb21wb25lbnQgPSBtYXRjaGVkUm91dGUgJiYgbWF0Y2hlZFJvdXRlLmNvbXBvbmVudHNbY3VycmVudE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoIVZpZXdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHsgQ29tcG9uZW50OiBWaWV3Q29tcG9uZW50LCByb3V0ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwcm9wcyBmcm9tIHJvdXRlIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgY29uc3Qgcm91dGVQcm9wc09wdGlvbiA9IG1hdGNoZWRSb3V0ZS5wcm9wc1tjdXJyZW50TmFtZV07XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlUHJvcHMgPSByb3V0ZVByb3BzT3B0aW9uXHJcbiAgICAgICAgICAgICAgICA/IHJvdXRlUHJvcHNPcHRpb24gPT09IHRydWVcclxuICAgICAgICAgICAgICAgICAgICA/IHJvdXRlLnBhcmFtc1xyXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHJvdXRlUHJvcHNPcHRpb24gPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyByb3V0ZVByb3BzT3B0aW9uKHJvdXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJvdXRlUHJvcHNPcHRpb25cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgY29uc3Qgb25Wbm9kZVVubW91bnRlZCA9IHZub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgaW5zdGFuY2UgcmVmZXJlbmNlIHRvIHByZXZlbnQgbGVha1xyXG4gICAgICAgICAgICAgICAgaWYgKHZub2RlLmNvbXBvbmVudC5pc1VubW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRSb3V0ZS5pbnN0YW5jZXNbY3VycmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gaChWaWV3Q29tcG9uZW50LCBhc3NpZ24oe30sIHJvdXRlUHJvcHMsIGF0dHJzLCB7XHJcbiAgICAgICAgICAgICAgICBvblZub2RlVW5tb3VudGVkLFxyXG4gICAgICAgICAgICAgICAgcmVmOiB2aWV3UmVmLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiZcclxuICAgICAgICAgICAgICAgIGlzQnJvd3NlciAmJlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnJlZikge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY2FuIGRpc3BsYXkgaWYgaXQncyBhbiBhbGlhcywgaXRzIHByb3BzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlcHRoOiBkZXB0aC52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtYXRjaGVkUm91dGUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBtYXRjaGVkUm91dGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhOiBtYXRjaGVkUm91dGUubWV0YSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcm5hbEluc3RhbmNlcyA9IGlzQXJyYXkoY29tcG9uZW50LnJlZilcclxuICAgICAgICAgICAgICAgICAgICA/IGNvbXBvbmVudC5yZWYubWFwKHIgPT4gci5pKVxyXG4gICAgICAgICAgICAgICAgICAgIDogW2NvbXBvbmVudC5yZWYuaV07XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbEluc3RhbmNlcy5mb3JFYWNoKGluc3RhbmNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX192cnZfZGV2dG9vbHMgPSBpbmZvO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgLy8gcGFzcyB0aGUgdm5vZGUgdG8gdGhlIHNsb3QgYXMgYSBwcm9wLlxyXG4gICAgICAgICAgICAvLyBoIGFuZCA8Y29tcG9uZW50IDppcz1cIi4uLlwiPiBib3RoIGFjY2VwdCB2bm9kZXNcclxuICAgICAgICAgICAgbm9ybWFsaXplU2xvdChzbG90cy5kZWZhdWx0LCB7IENvbXBvbmVudDogY29tcG9uZW50LCByb3V0ZSB9KSB8fFxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxufSk7XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVNsb3Qoc2xvdCwgZGF0YSkge1xyXG4gICAgaWYgKCFzbG90KVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgY29uc3Qgc2xvdENvbnRlbnQgPSBzbG90KGRhdGEpO1xyXG4gICAgcmV0dXJuIHNsb3RDb250ZW50Lmxlbmd0aCA9PT0gMSA/IHNsb3RDb250ZW50WzBdIDogc2xvdENvbnRlbnQ7XHJcbn1cclxuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXHJcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXHJcbi8qKlxyXG4gKiBDb21wb25lbnQgdG8gZGlzcGxheSB0aGUgY3VycmVudCByb3V0ZSB0aGUgdXNlciBpcyBhdC5cclxuICovXHJcbmNvbnN0IFJvdXRlclZpZXcgPSBSb3V0ZXJWaWV3SW1wbDtcclxuLy8gd2FybiBhZ2FpbnN0IGRlcHJlY2F0ZWQgdXNhZ2Ugd2l0aCA8dHJhbnNpdGlvbj4gJiA8a2VlcC1hbGl2ZT5cclxuLy8gZHVlIHRvIGZ1bmN0aW9uYWwgY29tcG9uZW50IGJlaW5nIG5vIGxvbmdlciBlYWdlciBpbiBWdWUgM1xyXG5mdW5jdGlvbiB3YXJuRGVwcmVjYXRlZFVzYWdlKCkge1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgIGNvbnN0IHBhcmVudE5hbWUgPSBpbnN0YW5jZS5wYXJlbnQgJiYgaW5zdGFuY2UucGFyZW50LnR5cGUubmFtZTtcclxuICAgIGlmIChwYXJlbnROYW1lICYmXHJcbiAgICAgICAgKHBhcmVudE5hbWUgPT09ICdLZWVwQWxpdmUnIHx8IHBhcmVudE5hbWUuaW5jbHVkZXMoJ1RyYW5zaXRpb24nKSkpIHtcclxuICAgICAgICBjb25zdCBjb21wID0gcGFyZW50TmFtZSA9PT0gJ0tlZXBBbGl2ZScgPyAna2VlcC1hbGl2ZScgOiAndHJhbnNpdGlvbic7XHJcbiAgICAgICAgd2FybihgPHJvdXRlci12aWV3PiBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgZGlyZWN0bHkgaW5zaWRlIDx0cmFuc2l0aW9uPiBvciA8a2VlcC1hbGl2ZT4uXFxuYCArXHJcbiAgICAgICAgICAgIGBVc2Ugc2xvdCBwcm9wcyBpbnN0ZWFkOlxcblxcbmAgK1xyXG4gICAgICAgICAgICBgPHJvdXRlci12aWV3IHYtc2xvdD1cInsgQ29tcG9uZW50IH1cIj5cXG5gICtcclxuICAgICAgICAgICAgYCAgPCR7Y29tcH0+XFxuYCArXHJcbiAgICAgICAgICAgIGAgICAgPGNvbXBvbmVudCA6aXM9XCJDb21wb25lbnRcIiAvPlxcbmAgK1xyXG4gICAgICAgICAgICBgICA8LyR7Y29tcH0+XFxuYCArXHJcbiAgICAgICAgICAgIGA8L3JvdXRlci12aWV3PmApO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBDb3BpZXMgYSByb3V0ZSBsb2NhdGlvbiBhbmQgcmVtb3ZlcyBhbnkgcHJvYmxlbWF0aWMgcHJvcGVydGllcyB0aGF0IGNhbm5vdCBiZSBzaG93biBpbiBkZXZ0b29scyAoZS5nLiBWdWUgaW5zdGFuY2VzKS5cclxuICpcclxuICogQHBhcmFtIHJvdXRlTG9jYXRpb24gLSByb3V0ZUxvY2F0aW9uIHRvIGZvcm1hdFxyXG4gKiBAcGFyYW0gdG9vbHRpcCAtIG9wdGlvbmFsIHRvb2x0aXBcclxuICogQHJldHVybnMgYSBjb3B5IG9mIHRoZSByb3V0ZUxvY2F0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlTG9jYXRpb24sIHRvb2x0aXApIHtcclxuICAgIGNvbnN0IGNvcHkgPSBhc3NpZ24oe30sIHJvdXRlTG9jYXRpb24sIHtcclxuICAgICAgICAvLyByZW1vdmUgdmFyaWFibGVzIHRoYXQgY2FuIGNvbnRhaW4gdnVlIGluc3RhbmNlc1xyXG4gICAgICAgIG1hdGNoZWQ6IHJvdXRlTG9jYXRpb24ubWF0Y2hlZC5tYXAobWF0Y2hlZCA9PiBvbWl0KG1hdGNoZWQsIFsnaW5zdGFuY2VzJywgJ2NoaWxkcmVuJywgJ2FsaWFzT2YnXSkpLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgdHlwZTogbnVsbCxcclxuICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IHJvdXRlTG9jYXRpb24uZnVsbFBhdGgsXHJcbiAgICAgICAgICAgIHRvb2x0aXAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjb3B5LFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXksXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuLy8gdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXHJcbmxldCByb3V0ZXJJZCA9IDA7XHJcbmZ1bmN0aW9uIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKSB7XHJcbiAgICAvLyBUYWtlIG92ZXIgcm91dGVyLmJlZm9yZUVhY2ggYW5kIGFmdGVyRWFjaFxyXG4gICAgLy8gbWFrZSBzdXJlIHdlIGFyZSBub3QgcmVnaXN0ZXJpbmcgdGhlIGRldnRvb2wgdHdpY2VcclxuICAgIGlmIChyb3V0ZXIuX19oYXNEZXZ0b29scylcclxuICAgICAgICByZXR1cm47XHJcbiAgICByb3V0ZXIuX19oYXNEZXZ0b29scyA9IHRydWU7XHJcbiAgICAvLyBpbmNyZW1lbnQgdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXHJcbiAgICBjb25zdCBpZCA9IHJvdXRlcklkKys7XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ29yZy52dWVqcy5yb3V0ZXInICsgKGlkID8gJy4nICsgaWQgOiAnJyksXHJcbiAgICAgICAgbGFiZWw6ICdWdWUgUm91dGVyJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3Z1ZS1yb3V0ZXInLFxyXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnJyxcclxuICAgICAgICBsb2dvOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2xvZ28ucG5nJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzOiBbJ1JvdXRpbmcnXSxcclxuICAgICAgICBhcHAsXHJcbiAgICB9LCBhcGkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXBpLm5vdyAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tWdWUgUm91dGVyXTogWW91IHNlZW0gdG8gYmUgdXNpbmcgYW4gb3V0ZGF0ZWQgdmVyc2lvbiBvZiBWdWUgRGV2dG9vbHMuIEFyZSB5b3Ugc3RpbGwgdXNpbmcgdGhlIEJldGEgcmVsZWFzZSBpbnN0ZWFkIG9mIHRoZSBzdGFibGUgb25lPyBZb3UgY2FuIGZpbmQgdGhlIGxpbmtzIGF0IGh0dHBzOi8vZGV2dG9vbHMudnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkaXNwbGF5IHN0YXRlIGFkZGVkIGJ5IHRoZSByb3V0ZXJcclxuICAgICAgICBhcGkub24uaW5zcGVjdENvbXBvbmVudCgocGF5bG9hZCwgY3R4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmluc3RhbmNlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1JvdXRpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJyRyb3V0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUsICdDdXJyZW50IFJvdXRlJyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIG1hcmsgcm91dGVyLWxpbmsgYXMgYWN0aXZlIGFuZCBkaXNwbGF5IHRhZ3Mgb24gcm91dGVyIHZpZXdzXHJcbiAgICAgICAgYXBpLm9uLnZpc2l0Q29tcG9uZW50VHJlZSgoeyB0cmVlTm9kZTogbm9kZSwgY29tcG9uZW50SW5zdGFuY2UgfSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50SW5zdGFuY2UuX192cnZfZGV2dG9vbHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBjb21wb25lbnRJbnN0YW5jZS5fX3Zydl9kZXZ0b29scztcclxuICAgICAgICAgICAgICAgIG5vZGUudGFncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogKGluZm8ubmFtZSA/IGAke2luZm8ubmFtZS50b1N0cmluZygpfTogYCA6ICcnKSArIGluZm8ucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1RoaXMgY29tcG9uZW50IGlzIHJlbmRlcmVkIGJ5ICZsdDtyb3V0ZXItdmlldyZndDsnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogUElOS181MDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiBtdWx0aXBsZSB1c2VMaW5rIGFyZSB1c2VkXHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNvbXBvbmVudEluc3RhbmNlLl9fdnJsX2RldnRvb2xzKSkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuX19kZXZ0b29sc0FwaSA9IGFwaTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9fdnJsX2RldnRvb2xzLmZvckVhY2goZGV2dG9vbHNEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gT1JBTkdFXzQwMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdG9vbHRpcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXZ0b29sc0RhdGEuaXNFeGFjdEFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBMSU1FXzUwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcCA9ICdUaGlzIGlzIGV4YWN0bHkgYWN0aXZlJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGV2dG9vbHNEYXRhLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IEJMVUVfNjAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwID0gJ1RoaXMgbGluayBpcyBhY3RpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBub2RlLnRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkZXZ0b29sc0RhdGEucm91dGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdhdGNoKHJvdXRlci5jdXJyZW50Um91dGUsICgpID0+IHtcclxuICAgICAgICAgICAgLy8gcmVmcmVzaCBhY3RpdmUgc3RhdGVcclxuICAgICAgICAgICAgcmVmcmVzaFJvdXRlc1ZpZXcoKTtcclxuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUocm91dGVySW5zcGVjdG9ySWQpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBuYXZpZ2F0aW9uc0xheWVySWQgPSAncm91dGVyOm5hdmlnYXRpb25zOicgKyBpZDtcclxuICAgICAgICBhcGkuYWRkVGltZWxpbmVMYXllcih7XHJcbiAgICAgICAgICAgIGlkOiBuYXZpZ2F0aW9uc0xheWVySWQsXHJcbiAgICAgICAgICAgIGxhYmVsOiBgUm91dGVyJHtpZCA/ICcgJyArIGlkIDogJyd9IE5hdmlnYXRpb25zYCxcclxuICAgICAgICAgICAgY29sb3I6IDB4NDBhOGM0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnN0IGVycm9yc0xheWVySWQgPSAncm91dGVyOmVycm9ycydcclxuICAgICAgICAvLyBhcGkuYWRkVGltZWxpbmVMYXllcih7XHJcbiAgICAgICAgLy8gICBpZDogZXJyb3JzTGF5ZXJJZCxcclxuICAgICAgICAvLyAgIGxhYmVsOiAnUm91dGVyIEVycm9ycycsXHJcbiAgICAgICAgLy8gICBjb2xvcjogMHhlYTU0NTUsXHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICByb3V0ZXIub25FcnJvcigoZXJyb3IsIHRvKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IG5hdmlnYXRpb25zTGF5ZXJJZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBkdXJpbmcgTmF2aWdhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ1R5cGU6ICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYXBpLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gYG1ldGFgIGFuZCB1c2VkIHRvIGdyb3VwIGV2ZW50c1xyXG4gICAgICAgIGxldCBuYXZpZ2F0aW9uSWQgPSAwO1xyXG4gICAgICAgIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmQ6IGZvcm1hdERpc3BsYXkoJ2JlZm9yZUVhY2gnKSxcclxuICAgICAgICAgICAgICAgIGZyb206IGZvcm1hdFJvdXRlTG9jYXRpb24oZnJvbSwgJ0N1cnJlbnQgTG9jYXRpb24gZHVyaW5nIHRoaXMgbmF2aWdhdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgdG86IGZvcm1hdFJvdXRlTG9jYXRpb24odG8sICdUYXJnZXQgbG9jYXRpb24nKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gVXNlZCB0byBncm91cCBuYXZpZ2F0aW9ucyB0b2dldGhlciwgaGlkZSBmcm9tIGRldnRvb2xzXHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0by5tZXRhLCAnX19uYXZpZ2F0aW9uSWQnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmF2aWdhdGlvbklkKyssXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBuYXZpZ2F0aW9uc0xheWVySWQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0YXJ0IG9mIG5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByb3V0ZXIuYWZ0ZXJFYWNoKCh0bywgZnJvbSwgZmFpbHVyZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmQ6IGZvcm1hdERpc3BsYXkoJ2FmdGVyRWFjaCcpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAoZmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5mYWlsdXJlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWlsdXJlID8gZmFpbHVyZS5tZXNzYWdlIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdOYXZpZ2F0aW9uIEZhaWx1cmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmFpbHVyZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gZm9ybWF0RGlzcGxheSgn4p2MJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IGZvcm1hdERpc3BsYXkoJ+KchScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIHNldCBoZXJlIHRvIGhhdmUgdGhlIHJpZ2h0IG9yZGVyXHJcbiAgICAgICAgICAgIGRhdGEuZnJvbSA9IGZvcm1hdFJvdXRlTG9jYXRpb24oZnJvbSwgJ0N1cnJlbnQgTG9jYXRpb24gZHVyaW5nIHRoaXMgbmF2aWdhdGlvbicpO1xyXG4gICAgICAgICAgICBkYXRhLnRvID0gZm9ybWF0Um91dGVMb2NhdGlvbih0bywgJ1RhcmdldCBsb2NhdGlvbicpO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBuYXZpZ2F0aW9uc0xheWVySWQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRW5kIG9mIG5hdmlnYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBhcGkubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dUeXBlOiBmYWlsdXJlID8gJ3dhcm5pbmcnIDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnNwZWN0b3Igb2YgRXhpc3Rpbmcgcm91dGVzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3Qgcm91dGVySW5zcGVjdG9ySWQgPSAncm91dGVyLWluc3BlY3RvcjonICsgaWQ7XHJcbiAgICAgICAgYXBpLmFkZEluc3BlY3Rvcih7XHJcbiAgICAgICAgICAgIGlkOiByb3V0ZXJJbnNwZWN0b3JJZCxcclxuICAgICAgICAgICAgbGFiZWw6ICdSb3V0ZXMnICsgKGlkID8gJyAnICsgaWQgOiAnJyksXHJcbiAgICAgICAgICAgIGljb246ICdib29rJyxcclxuICAgICAgICAgICAgdHJlZUZpbHRlclBsYWNlaG9sZGVyOiAnU2VhcmNoIHJvdXRlcycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaFJvdXRlc1ZpZXcoKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSByb3V0ZXMgdmlldyBpc24ndCBhY3RpdmVcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVSb3V0ZXNQYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gYWN0aXZlUm91dGVzUGF5bG9hZDtcclxuICAgICAgICAgICAgLy8gY2hpbGRyZW4gcm91dGVzIHdpbGwgYXBwZWFyIGFzIG5lc3RlZFxyXG4gICAgICAgICAgICBsZXQgcm91dGVzID0gbWF0Y2hlci5nZXRSb3V0ZXMoKS5maWx0ZXIocm91dGUgPT4gIXJvdXRlLnBhcmVudCk7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IG1hdGNoIHN0YXRlIHRvIGZhbHNlXHJcbiAgICAgICAgICAgIHJvdXRlcy5mb3JFYWNoKHJlc2V0TWF0Y2hTdGF0ZU9uUm91dGVSZWNvcmQpO1xyXG4gICAgICAgICAgICAvLyBhcHBseSBhIG1hdGNoIHN0YXRlIGlmIHRoZXJlIGlzIGEgcGF5bG9hZFxyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5maWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJvdXRlcyA9IHJvdXRlcy5maWx0ZXIocm91dGUgPT4gXHJcbiAgICAgICAgICAgICAgICAvLyBzYXZlIG1hdGNoZXMgc3RhdGUgYmFzZWQgb24gdGhlIHBheWxvYWRcclxuICAgICAgICAgICAgICAgIGlzUm91dGVNYXRjaGluZyhyb3V0ZSwgcGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIG1hcmsgYWN0aXZlIHJvdXRlc1xyXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUpKTtcclxuICAgICAgICAgICAgcGF5bG9hZC5yb290Tm9kZXMgPSByb3V0ZXMubWFwKGZvcm1hdFJvdXRlUmVjb3JkRm9ySW5zcGVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFjdGl2ZVJvdXRlc1BheWxvYWQ7XHJcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclRyZWUocGF5bG9hZCA9PiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVJvdXRlc1BheWxvYWQgPSBwYXlsb2FkO1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSByb3V0ZXJJbnNwZWN0b3JJZCkge1xyXG4gICAgICAgICAgICAgICAgcmVmcmVzaFJvdXRlc1ZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERpc3BsYXkgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3V0ZSByZWNvcmRcclxuICAgICAgICAgKi9cclxuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yU3RhdGUocGF5bG9hZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IHJvdXRlckluc3BlY3RvcklkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXMgPSBtYXRjaGVyLmdldFJvdXRlcygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZXMuZmluZChyb3V0ZSA9PiByb3V0ZS5yZWNvcmQuX192ZF9pZCA9PT0gcGF5bG9hZC5ub2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogZm9ybWF0Um91dGVSZWNvcmRNYXRjaGVyRm9yU3RhdGVJbnNwZWN0b3Iocm91dGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUocm91dGVySW5zcGVjdG9ySWQpO1xyXG4gICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUocm91dGVySW5zcGVjdG9ySWQpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gbW9kaWZpZXJGb3JLZXkoa2V5KSB7XHJcbiAgICBpZiAoa2V5Lm9wdGlvbmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJyonIDogJz8nO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJysnIDogJyc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRNYXRjaGVyRm9yU3RhdGVJbnNwZWN0b3Iocm91dGUpIHtcclxuICAgIGNvbnN0IHsgcmVjb3JkIH0gPSByb3V0ZTtcclxuICAgIGNvbnN0IGZpZWxkcyA9IFtcclxuICAgICAgICB7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncGF0aCcsIHZhbHVlOiByZWNvcmQucGF0aCB9LFxyXG4gICAgXTtcclxuICAgIGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSB7XHJcbiAgICAgICAgZmllbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogJ25hbWUnLFxyXG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLm5hbWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmaWVsZHMucHVzaCh7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncmVnZXhwJywgdmFsdWU6IHJvdXRlLnJlIH0pO1xyXG4gICAgaWYgKHJvdXRlLmtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgZmllbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogJ2tleXMnLFxyXG4gICAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogcm91dGUua2V5c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgJHtrZXkubmFtZX0ke21vZGlmaWVyRm9yS2V5KGtleSl9YClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUGFyYW0ga2V5cycsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdXRlLmtleXMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlY29yZC5yZWRpcmVjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgZmllbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGtleTogJ3JlZGlyZWN0JyxcclxuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5yZWRpcmVjdCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyb3V0ZS5hbGlhcy5sZW5ndGgpIHtcclxuICAgICAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAga2V5OiAnYWxpYXNlcycsXHJcbiAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5hbGlhcy5tYXAoYWxpYXMgPT4gYWxpYXMucmVjb3JkLnBhdGgpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHJvdXRlLnJlY29yZC5tZXRhKS5sZW5ndGgpIHtcclxuICAgICAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAga2V5OiAnbWV0YScsXHJcbiAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5yZWNvcmQubWV0YSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZpZWxkcy5wdXNoKHtcclxuICAgICAgICBrZXk6ICdzY29yZScsXHJcbiAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IHJvdXRlLnNjb3JlLm1hcChzY29yZSA9PiBzY29yZS5qb2luKCcsICcpKS5qb2luKCcgfCAnKSxcclxuICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTY29yZSB1c2VkIHRvIHNvcnQgcm91dGVzJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5zY29yZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmllbGRzO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0ZWQgZnJvbSB0YWlsd2luZCBwYWxldHRlXHJcbiAqL1xyXG5jb25zdCBQSU5LXzUwMCA9IDB4ZWM0ODk5O1xyXG5jb25zdCBCTFVFXzYwMCA9IDB4MjU2M2ViO1xyXG5jb25zdCBMSU1FXzUwMCA9IDB4ODRjYzE2O1xyXG5jb25zdCBDWUFOXzQwMCA9IDB4MjJkM2VlO1xyXG5jb25zdCBPUkFOR0VfNDAwID0gMHhmYjkyM2M7XHJcbi8vIGNvbnN0IEdSQVlfMTAwID0gMHhmNGY0ZjVcclxuY29uc3QgREFSSyA9IDB4NjY2NjY2O1xyXG5mdW5jdGlvbiBmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3Rvcihyb3V0ZSkge1xyXG4gICAgY29uc3QgdGFncyA9IFtdO1xyXG4gICAgY29uc3QgeyByZWNvcmQgfSA9IHJvdXRlO1xyXG4gICAgaWYgKHJlY29yZC5uYW1lICE9IG51bGwpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogU3RyaW5nKHJlY29yZC5uYW1lKSxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IENZQU5fNDAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlY29yZC5hbGlhc09mKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdhbGlhcycsXHJcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBPUkFOR0VfNDAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLl9fdmRfbWF0Y2gpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogJ21hdGNoZXMnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogUElOS181MDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocm91dGUuX192ZF9leGFjdEFjdGl2ZSkge1xyXG4gICAgICAgIHRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnZXhhY3QnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogTElNRV81MDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocm91dGUuX192ZF9hY3RpdmUpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogJ2FjdGl2ZScsXHJcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBCTFVFXzYwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZWNvcmQucmVkaXJlY3QpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogdHlwZW9mIHJlY29yZC5yZWRpcmVjdCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgICAgID8gYHJlZGlyZWN0OiAke3JlY29yZC5yZWRpcmVjdH1gXHJcbiAgICAgICAgICAgICAgICA6ICdyZWRpcmVjdHMnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDB4ZmZmZmZmLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IERBUkssXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgYW4gaWQgdG8gYmUgYWJsZSB0byBzZWxlY3QgaXQuIFVzaW5nIHRoZSBgcGF0aGAgaXMgbm90IHBvc3NpYmxlIGJlY2F1c2VcclxuICAgIC8vIGVtcHR5IHBhdGggY2hpbGRyZW4gd291bGQgY29sbGlkZSB3aXRoIHRoZWlyIHBhcmVudHNcclxuICAgIGxldCBpZCA9IHJlY29yZC5fX3ZkX2lkO1xyXG4gICAgaWYgKGlkID09IG51bGwpIHtcclxuICAgICAgICBpZCA9IFN0cmluZyhyb3V0ZVJlY29yZElkKyspO1xyXG4gICAgICAgIHJlY29yZC5fX3ZkX2lkID0gaWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIGxhYmVsOiByZWNvcmQucGF0aCxcclxuICAgICAgICB0YWdzLFxyXG4gICAgICAgIGNoaWxkcmVuOiByb3V0ZS5jaGlsZHJlbi5tYXAoZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3IpLFxyXG4gICAgfTtcclxufVxyXG4vLyAgaW5jcmVtZW50YWwgaWQgZm9yIHJvdXRlIHJlY29yZHMgYW5kIGluc3BlY3RvciBzdGF0ZVxyXG5sZXQgcm91dGVSZWNvcmRJZCA9IDA7XHJcbmNvbnN0IEVYVFJBQ1RfUkVHRVhQX1JFID0gL15cXC8oLiopXFwvKFthLXpdKikkLztcclxuZnVuY3Rpb24gbWFya1JvdXRlUmVjb3JkQWN0aXZlKHJvdXRlLCBjdXJyZW50Um91dGUpIHtcclxuICAgIC8vIG5vIHJvdXRlIHdpbGwgYmUgYWN0aXZlIGlmIG1hdGNoZWQgaXMgZW1wdHlcclxuICAgIC8vIHJlc2V0IHRoZSBtYXRjaGluZyBzdGF0ZVxyXG4gICAgY29uc3QgaXNFeGFjdEFjdGl2ZSA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlUmVjb3JkKGN1cnJlbnRSb3V0ZS5tYXRjaGVkW2N1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFdLCByb3V0ZS5yZWNvcmQpO1xyXG4gICAgcm91dGUuX192ZF9leGFjdEFjdGl2ZSA9IHJvdXRlLl9fdmRfYWN0aXZlID0gaXNFeGFjdEFjdGl2ZTtcclxuICAgIGlmICghaXNFeGFjdEFjdGl2ZSkge1xyXG4gICAgICAgIHJvdXRlLl9fdmRfYWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQuc29tZShtYXRjaCA9PiBpc1NhbWVSb3V0ZVJlY29yZChtYXRjaCwgcm91dGUucmVjb3JkKSk7XHJcbiAgICB9XHJcbiAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkUm91dGUgPT4gbWFya1JvdXRlUmVjb3JkQWN0aXZlKGNoaWxkUm91dGUsIGN1cnJlbnRSb3V0ZSkpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc2V0TWF0Y2hTdGF0ZU9uUm91dGVSZWNvcmQocm91dGUpIHtcclxuICAgIHJvdXRlLl9fdmRfbWF0Y2ggPSBmYWxzZTtcclxuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2gocmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZCk7XHJcbn1cclxuZnVuY3Rpb24gaXNSb3V0ZU1hdGNoaW5nKHJvdXRlLCBmaWx0ZXIpIHtcclxuICAgIGNvbnN0IGZvdW5kID0gU3RyaW5nKHJvdXRlLnJlKS5tYXRjaChFWFRSQUNUX1JFR0VYUF9SRSk7XHJcbiAgICByb3V0ZS5fX3ZkX21hdGNoID0gZmFsc2U7XHJcbiAgICBpZiAoIWZvdW5kIHx8IGZvdW5kLmxlbmd0aCA8IDMpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyB1c2UgYSByZWdleHAgd2l0aG91dCAkIGF0IHRoZSBlbmQgdG8gbWF0Y2ggbmVzdGVkIHJvdXRlcyBiZXR0ZXJcclxuICAgIGNvbnN0IG5vbkVuZGluZ1JFID0gbmV3IFJlZ0V4cChmb3VuZFsxXS5yZXBsYWNlKC9cXCQkLywgJycpLCBmb3VuZFsyXSk7XHJcbiAgICBpZiAobm9uRW5kaW5nUkUudGVzdChmaWx0ZXIpKSB7XHJcbiAgICAgICAgLy8gbWFyayBjaGlsZHJlbiBhcyBtYXRjaGVzXHJcbiAgICAgICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xyXG4gICAgICAgIC8vIGV4Y2VwdGlvbiBjYXNlOiBgL2BcclxuICAgICAgICBpZiAocm91dGUucmVjb3JkLnBhdGggIT09ICcvJyB8fCBmaWx0ZXIgPT09ICcvJykge1xyXG4gICAgICAgICAgICByb3V0ZS5fX3ZkX21hdGNoID0gcm91dGUucmUudGVzdChmaWx0ZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGlkZSB0aGUgLyByb3V0ZVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhdGggPSByb3V0ZS5yZWNvcmQucGF0aC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgZGVjb2RlZFBhdGggPSBkZWNvZGUocGF0aCk7XHJcbiAgICAvLyBhbHNvIGFsbG93IHBhcnRpYWwgbWF0Y2hpbmcgb24gdGhlIHBhdGhcclxuICAgIGlmICghZmlsdGVyLnN0YXJ0c1dpdGgoJy8nKSAmJlxyXG4gICAgICAgIChkZWNvZGVkUGF0aC5pbmNsdWRlcyhmaWx0ZXIpIHx8IHBhdGguaW5jbHVkZXMoZmlsdGVyKSkpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBpZiAoZGVjb2RlZFBhdGguc3RhcnRzV2l0aChmaWx0ZXIpIHx8IHBhdGguc3RhcnRzV2l0aChmaWx0ZXIpKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgaWYgKHJvdXRlLnJlY29yZC5uYW1lICYmIFN0cmluZyhyb3V0ZS5yZWNvcmQubmFtZSkuaW5jbHVkZXMoZmlsdGVyKSlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiByb3V0ZS5jaGlsZHJlbi5zb21lKGNoaWxkID0+IGlzUm91dGVNYXRjaGluZyhjaGlsZCwgZmlsdGVyKSk7XHJcbn1cclxuZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcclxuICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICByZXRba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBSb3V0ZXIgaW5zdGFuY2UgdGhhdCBjYW4gYmUgdXNlZCBieSBhIFZ1ZSBhcHAuXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIC0ge0BsaW5rIFJvdXRlck9wdGlvbnN9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXIob3B0aW9ucykge1xyXG4gICAgY29uc3QgbWF0Y2hlciA9IGNyZWF0ZVJvdXRlck1hdGNoZXIob3B0aW9ucy5yb3V0ZXMsIG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcGFyc2VRdWVyeSQxID0gb3B0aW9ucy5wYXJzZVF1ZXJ5IHx8IHBhcnNlUXVlcnk7XHJcbiAgICBjb25zdCBzdHJpbmdpZnlRdWVyeSQxID0gb3B0aW9ucy5zdHJpbmdpZnlRdWVyeSB8fCBzdHJpbmdpZnlRdWVyeTtcclxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBvcHRpb25zLmhpc3Rvcnk7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyb3V0ZXJIaXN0b3J5KVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvdmlkZSB0aGUgXCJoaXN0b3J5XCIgb3B0aW9uIHdoZW4gY2FsbGluZyBcImNyZWF0ZVJvdXRlcigpXCI6JyArXHJcbiAgICAgICAgICAgICcgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvYXBpLyNoaXN0b3J5LicpO1xyXG4gICAgY29uc3QgYmVmb3JlR3VhcmRzID0gdXNlQ2FsbGJhY2tzKCk7XHJcbiAgICBjb25zdCBiZWZvcmVSZXNvbHZlR3VhcmRzID0gdXNlQ2FsbGJhY2tzKCk7XHJcbiAgICBjb25zdCBhZnRlckd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xyXG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gc2hhbGxvd1JlZihTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKTtcclxuICAgIGxldCBwZW5kaW5nTG9jYXRpb24gPSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xyXG4gICAgLy8gbGVhdmUgdGhlIHNjcm9sbFJlc3RvcmF0aW9uIGlmIG5vIHNjcm9sbEJlaGF2aW9yIGlzIHByb3ZpZGVkXHJcbiAgICBpZiAoaXNCcm93c2VyICYmIG9wdGlvbnMuc2Nyb2xsQmVoYXZpb3IgJiYgJ3Njcm9sbFJlc3RvcmF0aW9uJyBpbiBoaXN0b3J5KSB7XHJcbiAgICAgICAgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICdtYW51YWwnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9ybWFsaXplUGFyYW1zID0gYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIHBhcmFtVmFsdWUgPT4gJycgKyBwYXJhbVZhbHVlKTtcclxuICAgIGNvbnN0IGVuY29kZVBhcmFtcyA9IGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBlbmNvZGVQYXJhbSk7XHJcbiAgICBjb25zdCBkZWNvZGVQYXJhbXMgPSBcclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVudGlvbmFsbHkgYXZvaWQgdGhlIHR5cGUgY2hlY2tcclxuICAgIGFwcGx5VG9QYXJhbXMuYmluZChudWxsLCBkZWNvZGUpO1xyXG4gICAgZnVuY3Rpb24gYWRkUm91dGUocGFyZW50T3JSb3V0ZSwgcm91dGUpIHtcclxuICAgICAgICBsZXQgcGFyZW50O1xyXG4gICAgICAgIGxldCByZWNvcmQ7XHJcbiAgICAgICAgaWYgKGlzUm91dGVOYW1lKHBhcmVudE9yUm91dGUpKSB7XHJcbiAgICAgICAgICAgIHBhcmVudCA9IG1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihwYXJlbnRPclJvdXRlKTtcclxuICAgICAgICAgICAgcmVjb3JkID0gcm91dGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZWNvcmQgPSBwYXJlbnRPclJvdXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF0Y2hlci5hZGRSb3V0ZShyZWNvcmQsIHBhcmVudCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZW1vdmVSb3V0ZShuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkTWF0Y2hlciA9IG1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKTtcclxuICAgICAgICBpZiAocmVjb3JkTWF0Y2hlcikge1xyXG4gICAgICAgICAgICBtYXRjaGVyLnJlbW92ZVJvdXRlKHJlY29yZE1hdGNoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgQ2Fubm90IHJlbW92ZSBub24tZXhpc3RlbnQgcm91dGUgXCIke1N0cmluZyhuYW1lKX1cImApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldFJvdXRlcygpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hlci5nZXRSb3V0ZXMoKS5tYXAocm91dGVNYXRjaGVyID0+IHJvdXRlTWF0Y2hlci5yZWNvcmQpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xyXG4gICAgICAgIHJldHVybiAhIW1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlc29sdmUocmF3TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICAgIC8vIGNvbnN0IG9iamVjdExvY2F0aW9uID0gcm91dGVyTG9jYXRpb25Bc09iamVjdChyYXdMb2NhdGlvbilcclxuICAgICAgICAvLyB3ZSBjcmVhdGUgYSBjb3B5IHRvIG1vZGlmeSBpdCBsYXRlclxyXG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbiA9IGFzc2lnbih7fSwgY3VycmVudExvY2F0aW9uIHx8IGN1cnJlbnRSb3V0ZS52YWx1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiByYXdMb2NhdGlvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25Ob3JtYWxpemVkID0gcGFyc2VVUkwocGFyc2VRdWVyeSQxLCByYXdMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uLnBhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVyLnJlc29sdmUoeyBwYXRoOiBsb2NhdGlvbk5vcm1hbGl6ZWQucGF0aCB9LCBjdXJyZW50TG9jYXRpb24pO1xyXG4gICAgICAgICAgICBjb25zdCBocmVmID0gcm91dGVySGlzdG9yeS5jcmVhdGVIcmVmKGxvY2F0aW9uTm9ybWFsaXplZC5mdWxsUGF0aCk7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8vJykpXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgTG9jYXRpb24gXCIke3Jhd0xvY2F0aW9ufVwiIHJlc29sdmVkIHRvIFwiJHtocmVmfVwiLiBBIHJlc29sdmVkIGxvY2F0aW9uIGNhbm5vdCBzdGFydCB3aXRoIG11bHRpcGxlIHNsYXNoZXMuYCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbWF0Y2hlZFJvdXRlLm1hdGNoZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7cmF3TG9jYXRpb259XCJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBsb2NhdGlvbk5vcm1hbGl6ZWQgaXMgYWx3YXlzIGEgbmV3IG9iamVjdFxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWduKGxvY2F0aW9uTm9ybWFsaXplZCwgbWF0Y2hlZFJvdXRlLCB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGRlY29kZVBhcmFtcyhtYXRjaGVkUm91dGUucGFyYW1zKSxcclxuICAgICAgICAgICAgICAgIGhhc2g6IGRlY29kZShsb2NhdGlvbk5vcm1hbGl6ZWQuaGFzaCksXHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgaHJlZixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtYXRjaGVyTG9jYXRpb247XHJcbiAgICAgICAgLy8gcGF0aCBjb3VsZCBiZSByZWxhdGl2ZSBpbiBvYmplY3QgYXMgd2VsbFxyXG4gICAgICAgIGlmICgncGF0aCcgaW4gcmF3TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgJ3BhcmFtcycgaW4gcmF3TG9jYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICEoJ25hbWUnIGluIHJhd0xvY2F0aW9uKSAmJlxyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhlIHR5cGUgaXMgbmV2ZXJcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHJhd0xvY2F0aW9uLnBhcmFtcykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBQYXRoIFwiJHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSB0eXBlIGlzIG5ldmVyXHJcbiAgICAgICAgICAgICAgICByYXdMb2NhdGlvbi5wYXRofVwiIHdhcyBwYXNzZWQgd2l0aCBwYXJhbXMgYnV0IHRoZXkgd2lsbCBiZSBpZ25vcmVkLiBVc2UgYSBuYW1lZCByb3V0ZSBhbG9uZ3NpZGUgcGFyYW1zIGluc3RlYWQuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWF0Y2hlckxvY2F0aW9uID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogcGFyc2VVUkwocGFyc2VRdWVyeSQxLCByYXdMb2NhdGlvbi5wYXRoLCBjdXJyZW50TG9jYXRpb24ucGF0aCkucGF0aCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgYW55IG51bGxpc2ggcGFyYW1cclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGFyYW1zID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbi5wYXJhbXMpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0YXJnZXRQYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRQYXJhbXNba2V5XSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldFBhcmFtc1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHBhc3MgZW5jb2RlZCB2YWx1ZXMgdG8gdGhlIG1hdGNoZXIsIHNvIGl0IGNhbiBwcm9kdWNlIGVuY29kZWQgcGF0aCBhbmQgZnVsbFBhdGhcclxuICAgICAgICAgICAgbWF0Y2hlckxvY2F0aW9uID0gYXNzaWduKHt9LCByYXdMb2NhdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBlbmNvZGVQYXJhbXMocmF3TG9jYXRpb24ucGFyYW1zKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgbG9jYXRpb24gcGFyYW1zIGFyZSBkZWNvZGVkLCB3ZSBuZWVkIHRvIGVuY29kZSB0aGVtIGluIGNhc2UgdGhlXHJcbiAgICAgICAgICAgIC8vIG1hdGNoZXIgbWVyZ2VzIHRoZSBwYXJhbXNcclxuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLnBhcmFtcyA9IGVuY29kZVBhcmFtcyhjdXJyZW50TG9jYXRpb24ucGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlci5yZXNvbHZlKG1hdGNoZXJMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcclxuICAgICAgICBjb25zdCBoYXNoID0gcmF3TG9jYXRpb24uaGFzaCB8fCAnJztcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhhc2ggJiYgIWhhc2guc3RhcnRzV2l0aCgnIycpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEEgXFxgaGFzaFxcYCBzaG91bGQgYWx3YXlzIHN0YXJ0IHdpdGggdGhlIGNoYXJhY3RlciBcIiNcIi4gUmVwbGFjZSBcIiR7aGFzaH1cIiB3aXRoIFwiIyR7aGFzaH1cIi5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhlIG1hdGNoZXIgbWlnaHQgaGF2ZSBtZXJnZWQgY3VycmVudCBsb2NhdGlvbiBwYXJhbXMsIHNvXHJcbiAgICAgICAgLy8gd2UgbmVlZCB0byBydW4gdGhlIGRlY29kaW5nIGFnYWluXHJcbiAgICAgICAgbWF0Y2hlZFJvdXRlLnBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhkZWNvZGVQYXJhbXMobWF0Y2hlZFJvdXRlLnBhcmFtcykpO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gc3RyaW5naWZ5VVJMKHN0cmluZ2lmeVF1ZXJ5JDEsIGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcclxuICAgICAgICAgICAgaGFzaDogZW5jb2RlSGFzaChoYXNoKSxcclxuICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYoZnVsbFBhdGgpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgaWYgKGhyZWYuc3RhcnRzV2l0aCgnLy8nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTG9jYXRpb24gXCIke3Jhd0xvY2F0aW9ufVwiIHJlc29sdmVkIHRvIFwiJHtocmVmfVwiLiBBIHJlc29sdmVkIGxvY2F0aW9uIGNhbm5vdCBzdGFydCB3aXRoIG11bHRpcGxlIHNsYXNoZXMuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIW1hdGNoZWRSb3V0ZS5tYXRjaGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7J3BhdGgnIGluIHJhd0xvY2F0aW9uID8gcmF3TG9jYXRpb24ucGF0aCA6IHJhd0xvY2F0aW9ufVwiYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7XHJcbiAgICAgICAgICAgIGZ1bGxQYXRoLFxyXG4gICAgICAgICAgICAvLyBrZWVwIHRoZSBoYXNoIGVuY29kZWQgc28gZnVsbFBhdGggaXMgZWZmZWN0aXZlbHkgcGF0aCArIGVuY29kZWRRdWVyeSArXHJcbiAgICAgICAgICAgIC8vIGhhc2hcclxuICAgICAgICAgICAgaGFzaCxcclxuICAgICAgICAgICAgcXVlcnk6IFxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgdXNlciBpcyB1c2luZyBhIGN1c3RvbSBxdWVyeSBsaWIgbGlrZSBxcywgd2UgbWlnaHQgaGF2ZVxyXG4gICAgICAgICAgICAvLyBuZXN0ZWQgb2JqZWN0cywgc28gd2Uga2VlcCB0aGUgcXVlcnkgYXMgaXMsIG1lYW5pbmcgaXQgY2FuIGNvbnRhaW5cclxuICAgICAgICAgICAgLy8gbnVtYmVycyBhdCBgJHJvdXRlLnF1ZXJ5YCwgYnV0IGF0IHRoZSBwb2ludCwgdGhlIHVzZXIgd2lsbCBoYXZlIHRvXHJcbiAgICAgICAgICAgIC8vIHVzZSB0aGVpciBvd24gdHlwZSBhbnl3YXkuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzMyOCNpc3N1ZWNvbW1lbnQtNjQ5NDgxNTY3XHJcbiAgICAgICAgICAgIHN0cmluZ2lmeVF1ZXJ5JDEgPT09IHN0cmluZ2lmeVF1ZXJ5XHJcbiAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZVF1ZXJ5KHJhd0xvY2F0aW9uLnF1ZXJ5KVxyXG4gICAgICAgICAgICAgICAgOiAocmF3TG9jYXRpb24ucXVlcnkgfHwge30pLFxyXG4gICAgICAgIH0sIG1hdGNoZWRSb3V0ZSwge1xyXG4gICAgICAgICAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBocmVmLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbG9jYXRpb25Bc09iamVjdCh0bykge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdG8gPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gcGFyc2VVUkwocGFyc2VRdWVyeSQxLCB0bywgY3VycmVudFJvdXRlLnZhbHVlLnBhdGgpXHJcbiAgICAgICAgICAgIDogYXNzaWduKHt9LCB0byk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSkge1xyXG4gICAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24gIT09IHRvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVSb3V0ZXJFcnJvcig4IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9DQU5DRUxMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIGZyb20sXHJcbiAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcHVzaCh0bykge1xyXG4gICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KHRvKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlcGxhY2UodG8pIHtcclxuICAgICAgICByZXR1cm4gcHVzaChhc3NpZ24obG9jYXRpb25Bc09iamVjdCh0byksIHsgcmVwbGFjZTogdHJ1ZSB9KSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVSZWRpcmVjdFJlY29yZCh0bykge1xyXG4gICAgICAgIGNvbnN0IGxhc3RNYXRjaGVkID0gdG8ubWF0Y2hlZFt0by5tYXRjaGVkLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGlmIChsYXN0TWF0Y2hlZCAmJiBsYXN0TWF0Y2hlZC5yZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHJlZGlyZWN0IH0gPSBsYXN0TWF0Y2hlZDtcclxuICAgICAgICAgICAgbGV0IG5ld1RhcmdldExvY2F0aW9uID0gdHlwZW9mIHJlZGlyZWN0ID09PSAnZnVuY3Rpb24nID8gcmVkaXJlY3QodG8pIDogcmVkaXJlY3Q7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VGFyZ2V0TG9jYXRpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdUYXJnZXRMb2NhdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24uaW5jbHVkZXMoJz8nKSB8fCBuZXdUYXJnZXRMb2NhdGlvbi5pbmNsdWRlcygnIycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKG5ld1RhcmdldExvY2F0aW9uID0gbG9jYXRpb25Bc09iamVjdChuZXdUYXJnZXRMb2NhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogLy8gZm9yY2UgZW1wdHkgcGFyYW1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHBhdGg6IG5ld1RhcmdldExvY2F0aW9uIH07XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBmb3JjZSBlbXB0eSBwYXJhbXMgd2hlbiBhIHN0cmluZyBpcyBwYXNzZWQgdG8gbGV0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm91dGVyIHBhcnNlIHRoZW0gYWdhaW5cclxuICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uLnBhcmFtcyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICEoJ3BhdGgnIGluIG5ld1RhcmdldExvY2F0aW9uKSAmJlxyXG4gICAgICAgICAgICAgICAgISgnbmFtZScgaW4gbmV3VGFyZ2V0TG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBJbnZhbGlkIHJlZGlyZWN0IGZvdW5kOlxcbiR7SlNPTi5zdHJpbmdpZnkobmV3VGFyZ2V0TG9jYXRpb24sIG51bGwsIDIpfVxcbiB3aGVuIG5hdmlnYXRpbmcgdG8gXCIke3RvLmZ1bGxQYXRofVwiLiBBIHJlZGlyZWN0IG11c3QgY29udGFpbiBhIG5hbWUgb3IgcGF0aC4gVGhpcyB3aWxsIGJyZWFrIGluIHByb2R1Y3Rpb24uYCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVkaXJlY3QnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWduKHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB0by5xdWVyeSxcclxuICAgICAgICAgICAgICAgIGhhc2g6IHRvLmhhc2gsXHJcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB0cmFuc2ZlcnJpbmcgcGFyYW1zIGlmIHRoZSByZWRpcmVjdCBoYXMgYSBwYXRoXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6ICdwYXRoJyBpbiBuZXdUYXJnZXRMb2NhdGlvbiA/IHt9IDogdG8ucGFyYW1zLFxyXG4gICAgICAgICAgICB9LCBuZXdUYXJnZXRMb2NhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcHVzaFdpdGhSZWRpcmVjdCh0bywgcmVkaXJlY3RlZEZyb20pIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRMb2NhdGlvbiA9IChwZW5kaW5nTG9jYXRpb24gPSByZXNvbHZlKHRvKSk7XHJcbiAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcclxuICAgICAgICBjb25zdCBkYXRhID0gdG8uc3RhdGU7XHJcbiAgICAgICAgY29uc3QgZm9yY2UgPSB0by5mb3JjZTtcclxuICAgICAgICAvLyB0byBjb3VsZCBiZSBhIHN0cmluZyB3aGVyZSBgcmVwbGFjZWAgaXMgYSBmdW5jdGlvblxyXG4gICAgICAgIGNvbnN0IHJlcGxhY2UgPSB0by5yZXBsYWNlID09PSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZFJlZGlyZWN0ID0gaGFuZGxlUmVkaXJlY3RSZWNvcmQodGFyZ2V0TG9jYXRpb24pO1xyXG4gICAgICAgIGlmIChzaG91bGRSZWRpcmVjdClcclxuICAgICAgICAgICAgcmV0dXJuIHB1c2hXaXRoUmVkaXJlY3QoYXNzaWduKGxvY2F0aW9uQXNPYmplY3Qoc2hvdWxkUmVkaXJlY3QpLCB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogdHlwZW9mIHNob3VsZFJlZGlyZWN0ID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICAgICAgICAgID8gYXNzaWduKHt9LCBkYXRhLCBzaG91bGRSZWRpcmVjdC5zdGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICA6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICBmb3JjZSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UsXHJcbiAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgLy8ga2VlcCBvcmlnaW5hbCByZWRpcmVjdGVkRnJvbSBpZiBpdCBleGlzdHNcclxuICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gfHwgdGFyZ2V0TG9jYXRpb24pO1xyXG4gICAgICAgIC8vIGlmIGl0IHdhcyBhIHJlZGlyZWN0IHdlIGFscmVhZHkgY2FsbGVkIGBwdXNoV2l0aFJlZGlyZWN0YCBhYm92ZVxyXG4gICAgICAgIGNvbnN0IHRvTG9jYXRpb24gPSB0YXJnZXRMb2NhdGlvbjtcclxuICAgICAgICB0b0xvY2F0aW9uLnJlZGlyZWN0ZWRGcm9tID0gcmVkaXJlY3RlZEZyb207XHJcbiAgICAgICAgbGV0IGZhaWx1cmU7XHJcbiAgICAgICAgaWYgKCFmb3JjZSAmJiBpc1NhbWVSb3V0ZUxvY2F0aW9uKHN0cmluZ2lmeVF1ZXJ5JDEsIGZyb20sIHRhcmdldExvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICBmYWlsdXJlID0gY3JlYXRlUm91dGVyRXJyb3IoMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8sIHsgdG86IHRvTG9jYXRpb24sIGZyb20gfSk7XHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2Nyb2xsIHRvIGFsbG93IHNjcm9sbGluZyB0byB0aGUgc2FtZSBhbmNob3JcclxuICAgICAgICAgICAgaGFuZGxlU2Nyb2xsKGZyb20sIGZyb20sIFxyXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGEgcHVzaCwgdGhlIG9ubHkgd2F5IGZvciBpdCB0byBiZSB0cmlnZ2VyZWQgZnJvbSBhXHJcbiAgICAgICAgICAgIC8vIGhpc3RvcnkubGlzdGVuIGlzIHdpdGggYSByZWRpcmVjdCwgd2hpY2ggbWFrZXMgaXQgYmVjb21lIGEgcHVzaFxyXG4gICAgICAgICAgICB0cnVlLCBcclxuICAgICAgICAgICAgLy8gVGhpcyBjYW5ub3QgYmUgdGhlIGZpcnN0IG5hdmlnYXRpb24gYmVjYXVzZSB0aGUgaW5pdGlhbCBsb2NhdGlvblxyXG4gICAgICAgICAgICAvLyBjYW5ub3QgYmUgbWFudWFsbHkgbmF2aWdhdGVkIHRvXHJcbiAgICAgICAgICAgIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChmYWlsdXJlID8gUHJvbWlzZS5yZXNvbHZlKGZhaWx1cmUpIDogbmF2aWdhdGUodG9Mb2NhdGlvbiwgZnJvbSkpXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IpXHJcbiAgICAgICAgICAgID8gLy8gbmF2aWdhdGlvbiByZWRpcmVjdHMgc3RpbGwgbWFyayB0aGUgcm91dGVyIGFzIHJlYWR5XHJcbiAgICAgICAgICAgICAgICBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLylcclxuICAgICAgICAgICAgICAgICAgICA/IGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgOiBtYXJrQXNSZWFkeShlcnJvcikgLy8gYWxzbyByZXR1cm5zIHRoZSBlcnJvclxyXG4gICAgICAgICAgICA6IC8vIHJlamVjdCBhbnkgdW5rbm93biBlcnJvclxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckVycm9yKGVycm9yLCB0b0xvY2F0aW9uLCBmcm9tKSlcclxuICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDIgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHJlZGlyZWN0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uIHdlIHdlcmUgYWxyZWFkeSBhdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NhbWVSb3V0ZUxvY2F0aW9uKHN0cmluZ2lmeVF1ZXJ5JDEsIHJlc29sdmUoZmFpbHVyZS50byksIHRvTG9jYXRpb24pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCB3ZSBoYXZlIGRvbmUgaXQgYSBjb3VwbGUgb2YgdGltZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYWRkZWQgb25seSBpbiBkZXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlZGlyZWN0ZWRGcm9tLl9jb3VudCA9IHJlZGlyZWN0ZWRGcm9tLl9jb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20uX2NvdW50ICsgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAxKSA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYERldGVjdGVkIGFuIGluZmluaXRlIHJlZGlyZWN0aW9uIGluIGEgbmF2aWdhdGlvbiBndWFyZCB3aGVuIGdvaW5nIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvTG9jYXRpb24uZnVsbFBhdGh9XCIuIEFib3J0aW5nIHRvIGF2b2lkIGEgU3RhY2sgT3ZlcmZsb3cuIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW5maW5pdGUgcmVkaXJlY3QgaW4gbmF2aWdhdGlvbiBndWFyZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1c2hXaXRoUmVkaXJlY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgYW4gZXhpc3RpbmcgcmVwbGFjZW1lbnQgYnV0IGFsbG93IHRoZSByZWRpcmVjdCB0byBvdmVycmlkZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGxvY2F0aW9uQXNPYmplY3QoZmFpbHVyZS50byksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHR5cGVvZiBmYWlsdXJlLnRvID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhc3NpZ24oe30sIGRhdGEsIGZhaWx1cmUudG8uc3RhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgcmVkaXJlY3RlZEZyb20gaWYgYW55XHJcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gfHwgdG9Mb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBmYWlsIHdlIGRvbid0IGZpbmFsaXplIHRoZSBuYXZpZ2F0aW9uXHJcbiAgICAgICAgICAgICAgICBmYWlsdXJlID0gZmluYWxpemVOYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20sIHRydWUsIHJlcGxhY2UsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyaWdnZXJBZnRlckVhY2godG9Mb2NhdGlvbiwgZnJvbSwgZmFpbHVyZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsdXJlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gcmVqZWN0IGFuZCBza2lwIGFsbCBuYXZpZ2F0aW9uIGd1YXJkcyBpZiBhIG5ldyBuYXZpZ2F0aW9uIGhhcHBlbmVkXHJcbiAgICAgKiBAcGFyYW0gdG9cclxuICAgICAqIEBwYXJhbSBmcm9tXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uQW5kUmVqZWN0KHRvLCBmcm9tKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yID8gUHJvbWlzZS5yZWplY3QoZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiByZWZhY3RvciB0aGUgd2hvbGUgYmVmb3JlIGd1YXJkcyBieSBpbnRlcm5hbGx5IHVzaW5nIHJvdXRlci5iZWZvcmVFYWNoXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZSh0bywgZnJvbSkge1xyXG4gICAgICAgIGxldCBndWFyZHM7XHJcbiAgICAgICAgY29uc3QgW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc10gPSBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKTtcclxuICAgICAgICAvLyBhbGwgY29tcG9uZW50cyBoZXJlIGhhdmUgYmVlbiByZXNvbHZlZCBvbmNlIGJlY2F1c2Ugd2UgYXJlIGxlYXZpbmdcclxuICAgICAgICBndWFyZHMgPSBleHRyYWN0Q29tcG9uZW50c0d1YXJkcyhsZWF2aW5nUmVjb3Jkcy5yZXZlcnNlKCksICdiZWZvcmVSb3V0ZUxlYXZlJywgdG8sIGZyb20pO1xyXG4gICAgICAgIC8vIGxlYXZpbmdSZWNvcmRzIGlzIGFscmVhZHkgcmV2ZXJzZWRcclxuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBsZWF2aW5nUmVjb3Jkcykge1xyXG4gICAgICAgICAgICByZWNvcmQubGVhdmVHdWFyZHMuZm9yRWFjaChndWFyZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2sgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdC5iaW5kKG51bGwsIHRvLCBmcm9tKTtcclxuICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlUm91dGVMZWF2ZSBndWFyZHNcclxuICAgICAgICByZXR1cm4gKHJ1bkd1YXJkUXVldWUoZ3VhcmRzKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGdsb2JhbCBndWFyZHMgYmVmb3JlRWFjaFxyXG4gICAgICAgICAgICBndWFyZHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBndWFyZCBvZiBiZWZvcmVHdWFyZHMubGlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGluIGNvbXBvbmVudHMgYmVmb3JlUm91dGVVcGRhdGVcclxuICAgICAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHModXBkYXRpbmdSZWNvcmRzLCAnYmVmb3JlUm91dGVVcGRhdGUnLCB0bywgZnJvbSk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIHVwZGF0aW5nUmVjb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgcmVjb3JkLnVwZGF0ZUd1YXJkcy5mb3JFYWNoKGd1YXJkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgICAgICAvLyBydW4gdGhlIHF1ZXVlIG9mIHBlciByb3V0ZSBiZWZvcmVFbnRlciBndWFyZHNcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSByb3V0ZSBiZWZvcmVFbnRlclxyXG4gICAgICAgICAgICBndWFyZHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgdG8ubWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHRyaWdnZXIgYmVmb3JlRW50ZXIgb24gcmV1c2VkIHZpZXdzXHJcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkLmJlZm9yZUVudGVyICYmICFmcm9tLm1hdGNoZWQuaW5jbHVkZXMocmVjb3JkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHJlY29yZC5iZWZvcmVFbnRlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBiZWZvcmVFbnRlciBvZiByZWNvcmQuYmVmb3JlRW50ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGJlZm9yZUVudGVyLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihyZWNvcmQuYmVmb3JlRW50ZXIsIHRvLCBmcm9tKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBhdCB0aGlzIHBvaW50IHRvLm1hdGNoZWQgaXMgbm9ybWFsaXplZCBhbmQgZG9lcyBub3QgY29udGFpbiBhbnkgKCkgPT4gUHJvbWlzZTxDb21wb25lbnQ+XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIGV4aXN0aW5nIGVudGVyQ2FsbGJhY2tzLCB0aGVzZSBhcmUgYWRkZWQgYnkgZXh0cmFjdENvbXBvbmVudHNHdWFyZHNcclxuICAgICAgICAgICAgdG8ubWF0Y2hlZC5mb3JFYWNoKHJlY29yZCA9PiAocmVjb3JkLmVudGVyQ2FsbGJhY2tzID0ge30pKTtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaW4tY29tcG9uZW50IGJlZm9yZVJvdXRlRW50ZXJcclxuICAgICAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMoZW50ZXJpbmdSZWNvcmRzLCAnYmVmb3JlUm91dGVFbnRlcicsIHRvLCBmcm9tKTtcclxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgICAgICAvLyBydW4gdGhlIHF1ZXVlIG9mIHBlciByb3V0ZSBiZWZvcmVFbnRlciBndWFyZHNcclxuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGdsb2JhbCBndWFyZHMgYmVmb3JlUmVzb2x2ZVxyXG4gICAgICAgICAgICBndWFyZHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBndWFyZCBvZiBiZWZvcmVSZXNvbHZlR3VhcmRzLmxpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gY2F0Y2ggYW55IG5hdmlnYXRpb24gY2FuY2VsZWRcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBpc05hdmlnYXRpb25GYWlsdXJlKGVyciwgOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovKVxyXG4gICAgICAgICAgICA/IGVyclxyXG4gICAgICAgICAgICA6IFByb21pc2UucmVqZWN0KGVycikpKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJBZnRlckVhY2godG8sIGZyb20sIGZhaWx1cmUpIHtcclxuICAgICAgICAvLyBuYXZpZ2F0aW9uIGlzIGNvbmZpcm1lZCwgY2FsbCBhZnRlckd1YXJkc1xyXG4gICAgICAgIC8vIFRPRE86IHdyYXAgd2l0aCBlcnJvciBoYW5kbGVyc1xyXG4gICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYWZ0ZXJHdWFyZHMubGlzdCgpKVxyXG4gICAgICAgICAgICBndWFyZCh0bywgZnJvbSwgZmFpbHVyZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIC0gQ2xlYW5zIHVwIGFueSBuYXZpZ2F0aW9uIGd1YXJkc1xyXG4gICAgICogLSBDaGFuZ2VzIHRoZSB1cmwgaWYgbmVjZXNzYXJ5XHJcbiAgICAgKiAtIENhbGxzIHRoZSBzY3JvbGxCZWhhdmlvclxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBmaW5hbGl6ZU5hdmlnYXRpb24odG9Mb2NhdGlvbiwgZnJvbSwgaXNQdXNoLCByZXBsYWNlLCBkYXRhKSB7XHJcbiAgICAgICAgLy8gYSBtb3JlIHJlY2VudCBuYXZpZ2F0aW9uIHRvb2sgcGxhY2VcclxuICAgICAgICBjb25zdCBlcnJvciA9IGNoZWNrQ2FuY2VsZWROYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20pO1xyXG4gICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICAgIC8vIG9ubHkgY29uc2lkZXIgYXMgcHVzaCBpZiBpdCdzIG5vdCB0aGUgZmlyc3QgbmF2aWdhdGlvblxyXG4gICAgICAgIGNvbnN0IGlzRmlyc3ROYXZpZ2F0aW9uID0gZnJvbSA9PT0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9ICFpc0Jyb3dzZXIgPyB7fSA6IGhpc3Rvcnkuc3RhdGU7XHJcbiAgICAgICAgLy8gY2hhbmdlIFVSTCBvbmx5IGlmIHRoZSB1c2VyIGRpZCBhIHB1c2gvcmVwbGFjZSBhbmQgaWYgaXQncyBub3QgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBiZWNhdXNlXHJcbiAgICAgICAgLy8gaXQncyBqdXN0IHJlZmxlY3RpbmcgdGhlIHVybFxyXG4gICAgICAgIGlmIChpc1B1c2gpIHtcclxuICAgICAgICAgICAgLy8gb24gdGhlIGluaXRpYWwgbmF2aWdhdGlvbiwgd2Ugd2FudCB0byByZXVzZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIGZyb21cclxuICAgICAgICAgICAgLy8gaGlzdG9yeSBzdGF0ZSBpZiBpdCBleGlzdHNcclxuICAgICAgICAgICAgaWYgKHJlcGxhY2UgfHwgaXNGaXJzdE5hdmlnYXRpb24pXHJcbiAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LnJlcGxhY2UodG9Mb2NhdGlvbi5mdWxsUGF0aCwgYXNzaWduKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGlzRmlyc3ROYXZpZ2F0aW9uICYmIHN0YXRlICYmIHN0YXRlLnNjcm9sbCxcclxuICAgICAgICAgICAgICAgIH0sIGRhdGEpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5wdXNoKHRvTG9jYXRpb24uZnVsbFBhdGgsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhY2NlcHQgY3VycmVudCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgY3VycmVudFJvdXRlLnZhbHVlID0gdG9Mb2NhdGlvbjtcclxuICAgICAgICBoYW5kbGVTY3JvbGwodG9Mb2NhdGlvbiwgZnJvbSwgaXNQdXNoLCBpc0ZpcnN0TmF2aWdhdGlvbik7XHJcbiAgICAgICAgbWFya0FzUmVhZHkoKTtcclxuICAgIH1cclxuICAgIGxldCByZW1vdmVIaXN0b3J5TGlzdGVuZXI7XHJcbiAgICAvLyBhdHRhY2ggbGlzdGVuZXIgdG8gaGlzdG9yeSB0byB0cmlnZ2VyIG5hdmlnYXRpb25zXHJcbiAgICBmdW5jdGlvbiBzZXR1cExpc3RlbmVycygpIHtcclxuICAgICAgICAvLyBhdm9pZCBzZXR0aW5nIHVwIGxpc3RlbmVycyB0d2ljZSBkdWUgdG8gYW4gaW52YWxpZCBmaXJzdCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgaWYgKHJlbW92ZUhpc3RvcnlMaXN0ZW5lcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IHJvdXRlckhpc3RvcnkubGlzdGVuKCh0bywgX2Zyb20sIGluZm8pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyb3V0ZXIubGlzdGVuaW5nKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyBjYW5ub3QgYmUgYSByZWRpcmVjdCByb3V0ZSBiZWNhdXNlIGl0IHdhcyBpbiBoaXN0b3J5XHJcbiAgICAgICAgICAgIGNvbnN0IHRvTG9jYXRpb24gPSByZXNvbHZlKHRvKTtcclxuICAgICAgICAgICAgLy8gZHVlIHRvIGR5bmFtaWMgcm91dGluZywgYW5kIHRvIGhhc2ggaGlzdG9yeSB3aXRoIG1hbnVhbCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgICAgIC8vIChtYW51YWxseSBjaGFuZ2luZyB0aGUgdXJsIG9yIGNhbGxpbmcgaGlzdG9yeS5oYXNoID0gJyMvc29tZXdoZXJlJyksXHJcbiAgICAgICAgICAgIC8vIHRoZXJlIGNvdWxkIGJlIGEgcmVkaXJlY3QgcmVjb3JkIGluIGhpc3RvcnlcclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBoYW5kbGVSZWRpcmVjdFJlY29yZCh0b0xvY2F0aW9uKTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbihzaG91bGRSZWRpcmVjdCwgeyByZXBsYWNlOiB0cnVlIH0pLCB0b0xvY2F0aW9uKS5jYXRjaChub29wKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwZW5kaW5nTG9jYXRpb24gPSB0b0xvY2F0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudFJvdXRlLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBzaG91bGQgYmUgbW92ZWQgdG8gd2ViIGhpc3Rvcnk/XHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIHNhdmVTY3JvbGxQb3NpdGlvbihnZXRTY3JvbGxLZXkoZnJvbS5mdWxsUGF0aCwgaW5mby5kZWx0YSksIGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYXZpZ2F0ZSh0b0xvY2F0aW9uLCBmcm9tKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IsIDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8gfCA4IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9DQU5DRUxMRUQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IsIDIgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgY291bGQgY2FsbCBpZiAoaW5mby5kZWx0YSkgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWxzZSkgYnV0IHRoaXMgaXMgYnVnIHByb25lIGFzIHdlIGhhdmUgbm8gd2F5IHRvIHdhaXQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmF2aWdhdGlvbiB0byBiZSBmaW5pc2hlZCBiZWZvcmUgY2FsbGluZyBwdXNoV2l0aFJlZGlyZWN0LiBVc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgc2V0VGltZW91dCBvZiAxNm1zIHNlZW1zIHRvIHdvcmsgYnV0IHRoZXJlIGlzIG5vIGd1YXJhbnRlZSBmb3JcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCB0byB3b3JrIG9uIGV2ZXJ5IGJyb3dzZXIuIFNvIGluc3RlYWQgd2UgZG8gbm90IHJlc3RvcmUgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBhbmQgdHJpZ2dlciBhIG5ldyBuYXZpZ2F0aW9uIGFzIHJlcXVlc3RlZCBieSB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0aW9uIGd1YXJkLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBlcnJvciBpcyBhbHJlYWR5IGhhbmRsZWQgYnkgcm91dGVyLnB1c2ggd2UganVzdCB3YW50IHRvIGF2b2lkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9nZ2luZyB0aGUgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICBwdXNoV2l0aFJlZGlyZWN0KGVycm9yLnRvLCB0b0xvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYW4gdW5jYXVnaHQgcmVqZWN0aW9uLCBsZXQgcHVzaCBjYWxsIHRyaWdnZXJFcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZmFpbHVyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbCBjaGFuZ2UgaW4gaGFzaCBoaXN0b3J5ICM5MTYgZW5kaW5nIHVwIGluIHRoZSBVUkwgbm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoYW5naW5nLCBidXQgaXQgd2FzIGNoYW5nZWQgYnkgdGhlIG1hbnVhbCB1cmwgY2hhbmdlLCBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIG1hbnVhbGx5IGNoYW5nZSBpdCBvdXJzZWx2ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZmFpbHVyZSwgNCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCAqLyB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqLykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpbmZvLmRlbHRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIHRoZSB0aGVuIGJyYW5jaFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHJlc3RvcmUgaGlzdG9yeSBvbiB1bmtub3duIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LmdvKC1pbmZvLmRlbHRhLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1bnJlY29nbml6ZWQgZXJyb3IsIHRyYW5zZmVyIHRvIHRoZSBnbG9iYWwgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXJFcnJvcihlcnJvciwgdG9Mb2NhdGlvbiwgZnJvbSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZmFpbHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmFpbHVyZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZU5hdmlnYXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIG5hdmlnYXRpb24sIGFsbCBtYXRjaGVkIGNvbXBvbmVudHMgYXJlIHJlc29sdmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvTG9jYXRpb24sIGZyb20sIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8vIHJldmVydCB0aGUgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5kZWx0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIG5ldyBuYXZpZ2F0aW9uIGhhcyBiZWVuIHRyaWdnZXJlZCwgc28gd2UgZG8gbm90IHdhbnQgdG8gcmV2ZXJ0LCB0aGF0IHdpbGwgY2hhbmdlIHRoZSBjdXJyZW50IGhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50cnkgd2hpbGUgYSBkaWZmZXJlbnQgcm91dGUgaXMgZGlzcGxheWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8gfCAxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFudWFsIGNoYW5nZSBpbiBoYXNoIGhpc3RvcnkgIzkxNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIGxpa2UgYSBwdXNoIGJ1dCBsYWNrcyB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LmdvKC0xLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckFmdGVyRWFjaCh0b0xvY2F0aW9uLCBmcm9tLCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChub29wKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIEluaXRpYWxpemF0aW9uIGFuZCBFcnJvcnNcclxuICAgIGxldCByZWFkeUhhbmRsZXJzID0gdXNlQ2FsbGJhY2tzKCk7XHJcbiAgICBsZXQgZXJyb3JIYW5kbGVycyA9IHVzZUNhbGxiYWNrcygpO1xyXG4gICAgbGV0IHJlYWR5O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGVycm9ySGFuZGxlcnMgYWRkZWQgdmlhIG9uRXJyb3IgYW5kIHRocm93cyB0aGUgZXJyb3IgYXMgd2VsbFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIGVycm9yIHRvIHRocm93XHJcbiAgICAgKiBAcGFyYW0gdG8gLSBsb2NhdGlvbiB3ZSB3ZXJlIG5hdmlnYXRpbmcgdG8gd2hlbiB0aGUgZXJyb3IgaGFwcGVuZWRcclxuICAgICAqIEBwYXJhbSBmcm9tIC0gbG9jYXRpb24gd2Ugd2VyZSBuYXZpZ2F0aW5nIGZyb20gd2hlbiB0aGUgZXJyb3IgaGFwcGVuZWRcclxuICAgICAqIEByZXR1cm5zIHRoZSBlcnJvciBhcyBhIHJlamVjdGVkIHByb21pc2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdHJpZ2dlckVycm9yKGVycm9yLCB0bywgZnJvbSkge1xyXG4gICAgICAgIG1hcmtBc1JlYWR5KGVycm9yKTtcclxuICAgICAgICBjb25zdCBsaXN0ID0gZXJyb3JIYW5kbGVycy5saXN0KCk7XHJcbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxpc3QuZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoZXJyb3IsIHRvLCBmcm9tKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKCd1bmNhdWdodCBlcnJvciBkdXJpbmcgcm91dGUgbmF2aWdhdGlvbjonKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzUmVhZHkoKSB7XHJcbiAgICAgICAgaWYgKHJlYWR5ICYmIGN1cnJlbnRSb3V0ZS52YWx1ZSAhPT0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRClcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnMuYWRkKFtyZXNvbHZlLCByZWplY3RdKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1hcmtBc1JlYWR5KGVycikge1xyXG4gICAgICAgIGlmICghcmVhZHkpIHtcclxuICAgICAgICAgICAgLy8gc3RpbGwgbm90IHJlYWR5IGlmIGFuIGVycm9yIGhhcHBlbmVkXHJcbiAgICAgICAgICAgIHJlYWR5ID0gIWVycjtcclxuICAgICAgICAgICAgc2V0dXBMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgcmVhZHlIYW5kbGVyc1xyXG4gICAgICAgICAgICAgICAgLmxpc3QoKVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtyZXNvbHZlLCByZWplY3RdKSA9PiAoZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKCkpKTtcclxuICAgICAgICAgICAgcmVhZHlIYW5kbGVycy5yZXNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXJyO1xyXG4gICAgfVxyXG4gICAgLy8gU2Nyb2xsIGJlaGF2aW9yXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVTY3JvbGwodG8sIGZyb20sIGlzUHVzaCwgaXNGaXJzdE5hdmlnYXRpb24pIHtcclxuICAgICAgICBjb25zdCB7IHNjcm9sbEJlaGF2aW9yIH0gPSBvcHRpb25zO1xyXG4gICAgICAgIGlmICghaXNCcm93c2VyIHx8ICFzY3JvbGxCZWhhdmlvcilcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gKCFpc1B1c2ggJiYgZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihnZXRTY3JvbGxLZXkodG8uZnVsbFBhdGgsIDApKSkgfHxcclxuICAgICAgICAgICAgKChpc0ZpcnN0TmF2aWdhdGlvbiB8fCAhaXNQdXNoKSAmJlxyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5zdGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5zdGF0ZS5zY3JvbGwpIHx8XHJcbiAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIG5leHRUaWNrKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gc2Nyb2xsQmVoYXZpb3IodG8sIGZyb20sIHNjcm9sbFBvc2l0aW9uKSlcclxuICAgICAgICAgICAgLnRoZW4ocG9zaXRpb24gPT4gcG9zaXRpb24gJiYgc2Nyb2xsVG9Qb3NpdGlvbihwb3NpdGlvbikpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdHJpZ2dlckVycm9yKGVyciwgdG8sIGZyb20pKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGdvID0gKGRlbHRhKSA9PiByb3V0ZXJIaXN0b3J5LmdvKGRlbHRhKTtcclxuICAgIGxldCBzdGFydGVkO1xyXG4gICAgY29uc3QgaW5zdGFsbGVkQXBwcyA9IG5ldyBTZXQoKTtcclxuICAgIGNvbnN0IHJvdXRlciA9IHtcclxuICAgICAgICBjdXJyZW50Um91dGUsXHJcbiAgICAgICAgbGlzdGVuaW5nOiB0cnVlLFxyXG4gICAgICAgIGFkZFJvdXRlLFxyXG4gICAgICAgIHJlbW92ZVJvdXRlLFxyXG4gICAgICAgIGhhc1JvdXRlLFxyXG4gICAgICAgIGdldFJvdXRlcyxcclxuICAgICAgICByZXNvbHZlLFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgcHVzaCxcclxuICAgICAgICByZXBsYWNlLFxyXG4gICAgICAgIGdvLFxyXG4gICAgICAgIGJhY2s6ICgpID0+IGdvKC0xKSxcclxuICAgICAgICBmb3J3YXJkOiAoKSA9PiBnbygxKSxcclxuICAgICAgICBiZWZvcmVFYWNoOiBiZWZvcmVHdWFyZHMuYWRkLFxyXG4gICAgICAgIGJlZm9yZVJlc29sdmU6IGJlZm9yZVJlc29sdmVHdWFyZHMuYWRkLFxyXG4gICAgICAgIGFmdGVyRWFjaDogYWZ0ZXJHdWFyZHMuYWRkLFxyXG4gICAgICAgIG9uRXJyb3I6IGVycm9ySGFuZGxlcnMuYWRkLFxyXG4gICAgICAgIGlzUmVhZHksXHJcbiAgICAgICAgaW5zdGFsbChhcHApIHtcclxuICAgICAgICAgICAgY29uc3Qgcm91dGVyID0gdGhpcztcclxuICAgICAgICAgICAgYXBwLmNvbXBvbmVudCgnUm91dGVyTGluaycsIFJvdXRlckxpbmspO1xyXG4gICAgICAgICAgICBhcHAuY29tcG9uZW50KCdSb3V0ZXJWaWV3JywgUm91dGVyVmlldyk7XHJcbiAgICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcm91dGVyID0gcm91dGVyO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLCAnJHJvdXRlJywge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdW5yZWYoY3VycmVudFJvdXRlKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgaW5pdGlhbCBuYXZpZ2F0aW9uIGlzIG9ubHkgbmVjZXNzYXJ5IG9uIGNsaWVudCwgb24gc2VydmVyIGl0IGRvZXNuJ3RcclxuICAgICAgICAgICAgLy8gbWFrZSBzZW5zZSBiZWNhdXNlIGl0IHdpbGwgY3JlYXRlIGFuIGV4dHJhIHVubmVjZXNzYXJ5IG5hdmlnYXRpb24gYW5kIGNvdWxkXHJcbiAgICAgICAgICAgIC8vIGxlYWQgdG8gcHJvYmxlbXNcclxuICAgICAgICAgICAgaWYgKGlzQnJvd3NlciAmJlxyXG4gICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBjbGllbnQgc2lkZSB0byBhdm9pZCBwdXNoaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBtdWx0aXBsZSB0aW1lcyB3aGVuIHRoZSByb3V0ZXIgaXMgdXNlZCBpbiBtdWx0aXBsZSBhcHBzXHJcbiAgICAgICAgICAgICAgICAhc3RhcnRlZCAmJlxyXG4gICAgICAgICAgICAgICAgY3VycmVudFJvdXRlLnZhbHVlID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWUgYWJvdmVcclxuICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcHVzaChyb3V0ZXJIaXN0b3J5LmxvY2F0aW9uKS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ1VuZXhwZWN0ZWQgZXJyb3Igd2hlbiBzdGFydGluZyB0aGUgcm91dGVyOicsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZWFjdGl2ZVJvdXRlID0ge307XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgbWF0Y2hlc1xyXG4gICAgICAgICAgICAgICAgcmVhY3RpdmVSb3V0ZVtrZXldID0gY29tcHV0ZWQoKCkgPT4gY3VycmVudFJvdXRlLnZhbHVlW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFwcC5wcm92aWRlKHJvdXRlcktleSwgcm91dGVyKTtcclxuICAgICAgICAgICAgYXBwLnByb3ZpZGUocm91dGVMb2NhdGlvbktleSwgcmVhY3RpdmUocmVhY3RpdmVSb3V0ZSkpO1xyXG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZXJWaWV3TG9jYXRpb25LZXksIGN1cnJlbnRSb3V0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVubW91bnRBcHAgPSBhcHAudW5tb3VudDtcclxuICAgICAgICAgICAgaW5zdGFsbGVkQXBwcy5hZGQoYXBwKTtcclxuICAgICAgICAgICAgYXBwLnVubW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YWxsZWRBcHBzLmRlbGV0ZShhcHApO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBpcyBub3QgYXR0YWNoZWQgdG8gYW4gYXBwIGFueW1vcmVcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YWxsZWRBcHBzLnNpemUgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW52YWxpZGF0ZSB0aGUgY3VycmVudCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVIaXN0b3J5TGlzdGVuZXIgJiYgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um91dGUudmFsdWUgPSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdW5tb3VudEFwcCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIHVwZGF0ZWQgc28gaXQgY2FuIGJlIHVzZWQgYnkgdnVlLXRlcm11aVxyXG4gICAgICAgICAgICBpZiAoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pICYmIGlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAgICAgYWRkRGV2dG9vbHMoYXBwLCByb3V0ZXIsIG1hdGNoZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gcm91dGVyO1xyXG59XHJcbmZ1bmN0aW9uIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKSB7XHJcbiAgICByZXR1cm4gZ3VhcmRzLnJlZHVjZSgocHJvbWlzZSwgZ3VhcmQpID0+IHByb21pc2UudGhlbigoKSA9PiBndWFyZCgpKSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RDaGFuZ2luZ1JlY29yZHModG8sIGZyb20pIHtcclxuICAgIGNvbnN0IGxlYXZpbmdSZWNvcmRzID0gW107XHJcbiAgICBjb25zdCB1cGRhdGluZ1JlY29yZHMgPSBbXTtcclxuICAgIGNvbnN0IGVudGVyaW5nUmVjb3JkcyA9IFtdO1xyXG4gICAgY29uc3QgbGVuID0gTWF0aC5tYXgoZnJvbS5tYXRjaGVkLmxlbmd0aCwgdG8ubWF0Y2hlZC5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHJlY29yZEZyb20gPSBmcm9tLm1hdGNoZWRbaV07XHJcbiAgICAgICAgaWYgKHJlY29yZEZyb20pIHtcclxuICAgICAgICAgICAgaWYgKHRvLm1hdGNoZWQuZmluZChyZWNvcmQgPT4gaXNTYW1lUm91dGVSZWNvcmQocmVjb3JkLCByZWNvcmRGcm9tKSkpXHJcbiAgICAgICAgICAgICAgICB1cGRhdGluZ1JlY29yZHMucHVzaChyZWNvcmRGcm9tKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbGVhdmluZ1JlY29yZHMucHVzaChyZWNvcmRGcm9tKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVjb3JkVG8gPSB0by5tYXRjaGVkW2ldO1xyXG4gICAgICAgIGlmIChyZWNvcmRUbykge1xyXG4gICAgICAgICAgICAvLyB0aGUgdHlwZSBkb2Vzbid0IG1hdHRlciBiZWNhdXNlIHdlIGFyZSBjb21wYXJpbmcgcGVyIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICBpZiAoIWZyb20ubWF0Y2hlZC5maW5kKHJlY29yZCA9PiBpc1NhbWVSb3V0ZVJlY29yZChyZWNvcmQsIHJlY29yZFRvKSkpIHtcclxuICAgICAgICAgICAgICAgIGVudGVyaW5nUmVjb3Jkcy5wdXNoKHJlY29yZFRvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBbbGVhdmluZ1JlY29yZHMsIHVwZGF0aW5nUmVjb3JkcywgZW50ZXJpbmdSZWNvcmRzXTtcclxufVxuXG4vKipcclxuICogUmV0dXJucyB0aGUgcm91dGVyIGluc3RhbmNlLiBFcXVpdmFsZW50IHRvIHVzaW5nIGAkcm91dGVyYCBpbnNpZGVcclxuICogdGVtcGxhdGVzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXNlUm91dGVyKCkge1xyXG4gICAgcmV0dXJuIGluamVjdChyb3V0ZXJLZXkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHJvdXRlIGxvY2F0aW9uLiBFcXVpdmFsZW50IHRvIHVzaW5nIGAkcm91dGVgIGluc2lkZVxyXG4gKiB0ZW1wbGF0ZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VSb3V0ZSgpIHtcclxuICAgIHJldHVybiBpbmplY3Qocm91dGVMb2NhdGlvbktleSk7XHJcbn1cblxuZXhwb3J0IHsgTmF2aWdhdGlvbkZhaWx1cmVUeXBlLCBSb3V0ZXJMaW5rLCBSb3V0ZXJWaWV3LCBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEIGFzIFNUQVJUX0xPQ0FUSU9OLCBjcmVhdGVNZW1vcnlIaXN0b3J5LCBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVJvdXRlck1hdGNoZXIsIGNyZWF0ZVdlYkhhc2hIaXN0b3J5LCBjcmVhdGVXZWJIaXN0b3J5LCBpc05hdmlnYXRpb25GYWlsdXJlLCBsb2FkUm91dGVMb2NhdGlvbiwgbWF0Y2hlZFJvdXRlS2V5LCBvbkJlZm9yZVJvdXRlTGVhdmUsIG9uQmVmb3JlUm91dGVVcGRhdGUsIHBhcnNlUXVlcnksIHJvdXRlTG9jYXRpb25LZXksIHJvdXRlcktleSwgcm91dGVyVmlld0xvY2F0aW9uS2V5LCBzdHJpbmdpZnlRdWVyeSwgdXNlTGluaywgdXNlUm91dGUsIHVzZVJvdXRlciwgdmlld0RlcHRoS2V5IH07XG4iLCI8dGVtcGxhdGU+XHJcbiAgPGRpdiBjbGFzcz1cImNhcmQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgPGgxIGNsYXNzPVwiZGlzcGxheS00XCI+QWRkIFVzZXJzPC9oMT5cclxuICAgIDxmb3JtIGNsYXNzPVwidy01MFwiPlxyXG4gICAgICA8IS0tIE5hbWUgaW5wdXQgLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWZsb2F0aW5nIG1iLTRcIj5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgIGlkPVwibmFtZVwiXHJcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICA6Y2xhc3M9XCJ0aGlzLnVzZXJzLm5hbWVfdmFsaWRcIlxyXG4gICAgICAgICAgdi1tb2RlbD1cInRoaXMudXNlcnMubmV3X3VzZXIubmFtZVwiXHJcbiAgICAgICAgICBAY2hhbmdlPVwidGhpcy51c2Vycy5jaGVja19uYW1lX3ZhbGlkKHRoaXMudXNlcnMubmV3X3VzZXIubmFtZSlcIlxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZhbGlkLWZlZWRiYWNrXCI+TG9va3MgZ29vZCE8L2Rpdj5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWxhYmVsXCIgZm9yPVwibmFtZVwiPk5hbWU8L2xhYmVsPlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwhLS0gRW1haWwgaW5wdXQgLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWZsb2F0aW5nIG1iLTRcIj5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgIGlkPVwiZW1haWxcIlxyXG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgOmNsYXNzPVwidGhpcy51c2Vycy5lbWFpbF92YWxpZFwiXHJcbiAgICAgICAgICB2LW1vZGVsPVwidGhpcy51c2Vycy5uZXdfdXNlci5lbWFpbFwiXHJcbiAgICAgICAgICBAY2hhbmdlPVwidGhpcy51c2Vycy5jaGVja19lbWFpbF92YWxpZCh0aGlzLnVzZXJzLm5ld191c2VyLmVtYWlsKVwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidmFsaWQtZmVlZGJhY2tcIj5Mb29rcyBnb29kITwvZGl2PlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIiBmb3I9XCJlbWFpbFwiPkVtYWlsIGFkZHJlc3M8L2xhYmVsPlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwhLS0gUm9sZSBpbnB1dCAtLT5cclxuICAgICAgPGRpdiBjbGFzcz1cIm1iLTRcIj5cclxuICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICBjbGFzcz1cImZvcm0tc2VsZWN0XCJcclxuICAgICAgICAgIDpjbGFzcz1cInRoaXMucm9sZV92YWxpZFwiXHJcbiAgICAgICAgICBAY2hhbmdlPVwidGhpcy51c2Vycy5jaGVja19yb2xlX3ZhbGlkKClcIlxyXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlJvbGVcIlxyXG4gICAgICAgICAgdi1tb2RlbD1cInRoaXMudXNlcnMubmV3X3VzZXIucm9sZVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkPlNlbGVjdCB0aGUgcm9sZTwvb3B0aW9uPlxyXG4gICAgICAgICAgPG9wdGlvblxyXG4gICAgICAgICAgICB2LWlmPVwiXHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyLnJvbGVfbmFtZSA9PSAnc3VwZXIgdXNlcicgfHxcclxuICAgICAgICAgICAgICB0aGlzLnVzZXIucm9sZV9uYW1lID09ICdobyB1c2VyJyB8fFxyXG4gICAgICAgICAgICAgIHRoaXMudXNlci5yb2xlX25hbWUgPT0gJ3N1cHBvcnQnXHJcbiAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICAgIHZhbHVlPVwidXNlclwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIFVzZXJcclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgICAgPG9wdGlvblxyXG4gICAgICAgICAgICB2LWlmPVwiXHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyLnJvbGVfbmFtZSA9PSAnc3VwZXIgdXNlcicgfHxcclxuICAgICAgICAgICAgICB0aGlzLnVzZXIucm9sZV9uYW1lID09ICdobyB1c2VyJ1xyXG4gICAgICAgICAgICBcIlxyXG4gICAgICAgICAgICB2YWx1ZT1cInN1cHBvcnRcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICBTdXBwb3J0XHJcbiAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgIDxvcHRpb24gdi1pZj1cInRoaXMudXNlci5yb2xlX25hbWUgPT0gJ3N1cGVyIHVzZXInXCIgdmFsdWU9XCJobyB1c2VyXCI+XHJcbiAgICAgICAgICAgIGhvIHVzZXJcclxuICAgICAgICAgIDwvb3B0aW9uPlxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2YWxpZC1mZWVkYmFja1wiPkxvb2tzIGdvb2QhPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPCEtLSBTdWJtaXQgYnV0dG9uIC0tPlxyXG4gICAgICA8YnV0dG9uXHJcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWJsb2NrIG1iLTRcIlxyXG4gICAgICAgIEBjbGljaz1cIlxyXG4gICAgICAgICAgdGhpcy5hZGRfdXNlcigpO1xyXG4gICAgICAgICAgdGhpcy51c2Vycy5wb3B1bGF0ZV91c2VyX2xpc3QoKTtcclxuICAgICAgICBcIlxyXG4gICAgICA+XHJcbiAgICAgICAgQ3JlYXRlIHVzZXJcclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8L2Zvcm0+XHJcbiAgPC9kaXY+XHJcbiAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyXCI+XHJcbiAgICAgICAgPHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtaG92ZXJcIj5cclxuICAgICAgICAgIDx0aGVhZCBjbGFzcz1cInRoZWFkLWRhcmtcIj5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPklkICM8L3RoPlxyXG4gICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPk5hbWU8L3RoPlxyXG4gICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPkVtYWlsPC90aD5cclxuICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5BY3Rpb25zPC90aD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgIDx0ciB2LWZvcj1cInVzZXIgaW4gdXNlcnMudXNlcl9saXN0XCIgOmtleT1cInVzZXIuaWRcIj5cclxuICAgICAgICAgICAgICA8dGggc2NvcGU9XCJyb3dcIj57eyB1c2VyLmlkIH19PC90aD5cclxuICAgICAgICAgICAgICA8dGQ+e3sgdXNlci5uYW1lIH19PC90ZD5cclxuICAgICAgICAgICAgICA8dGQ+e3sgdXNlci5lbWFpbCB9fTwvdGQ+XHJcbiAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3NcIj5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1wZW5jaWwtc3F1YXJlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgIHwgRWRpdDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgdi1vbjpjbGljaz1cInRoaXMudXNlcnMuZGVsZXRlX3VzZXIodXNlci5pZClcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiPjwvaT5cclxuICAgICAgICAgICAgICAgICB8IERlbGV0ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLXVubG9ja1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgfCBVbmxvY2s8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJiaSBiaS1zaGllbGQtbG9ja1wiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgfCBSZXNldCBNRkE8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGRhdGEoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuZWVkc1Z1ZVJlZnJlc2g6IHsgXCJkYXRhXCI6IGZhbHNlLCBcImtlZXBMb29waW5nXCI6IGZhbHNlIH0sXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgYWRkX3VzZXIoKSB7XHJcbiAgICAgIHRoaXMudXNlcnMuYXBpX2NyZWF0ZV91c2VyX2RiKCk7XHJcbiAgICB9LFxyXG4gICAgdnVlUmVmcmVzaCgpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICEoXHJcbiAgICAgICAgICBbXCJzdXBlciB1c2VyXCIsIFwiaG8gdXNlclwiLCBcInN1cHBvcnRcIl0uaW5jbHVkZXModGhpcy51c2VyLnJvbGVfbmFtZSkgJiZcclxuICAgICAgICAgIHRoaXMudXNlci5sb2dnZWRfaW5cclxuICAgICAgICApXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwibG9naW5cIik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nKSB7XHJcbiAgICAgICAgY29uc3QgbXlUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnZ1ZVJlZnJlc2gsIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxuICBwcm9wczogW1widXNlcnNcIiwgXCJ1c2VyXCIsIFwicm9sZXNcIl0sXHJcbiAgY3JlYXRlZCgpIHtcclxuICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudnVlUmVmcmVzaCgpO1xyXG4gICAgdGhpcy51c2Vycy5wb3B1bGF0ZV91c2VyX2xpc3QoKTtcclxuICAgIHRoaXMucm9sZXMuZ2V0X3JvbGVzX2Zyb21fYXBpKCk7XHJcbiAgfSxcclxuICBiZWZvcmVVbm1vdW50KCkge1xyXG4gICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gZmFsc2VcclxuICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZT5cclxuLmNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMnJlbSAwcmVtO1xyXG59XHJcblxyXG50ZCB7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG5cclxudGgge1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuPC9zdHlsZT4iLCI8dGVtcGxhdGU+XHJcbiAgPG1haW4+XHJcbiAgICA8ZGl2IGNsYXNzPVwibXQtM1wiPlxyXG4gICAgICA8dWwgY2xhc3M9XCJsaXN0LWdyb3VwXCI+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGRpc3BsYXktNVwiPlxyXG4gICAgICAgICAgSG9tZXBhZ2UgLSBEVCBTcXVhZCBTY2FmZm9sZGluZyBUZW1wbGF0ZVxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+XHJcbiAgICAgICAgICBQbGVhc2UgbWFrZSBzdXJlIHRvIHJlYWQgdGhyb3VnaCB0aGUgUkVBRE1FIGZvciBleHBsaWNpdCBpbnN0cnVjdGlvbnMuXHJcbiAgICAgICAgPC9saT5cclxuICAgICAgPC91bD5cclxuICAgIDwvZGl2PlxyXG4gIDwvbWFpbj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbmVlZHNWdWVSZWZyZXNoOiB7IFwiZGF0YVwiOiBmYWxzZSwgXCJrZWVwTG9vcGluZ1wiOiBmYWxzZSB9LFxyXG4gICAgICB9XHJcbiAgfSxcclxuICBwcm9wczogW1xyXG4gICAgXCJ1c2VyXCIsXHJcbiAgICBcInVzZXJzXCJcclxuICBdLFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHZ1ZV9yZWZyZXNoX2hvbWUoKSB7XHJcbiAgICAgIGlmICghdGhpcy51c2VyLmxvZ2dlZF9pbikge1xyXG4gICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwibG9naW5cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm5lZWRzVnVlUmVmcmVzaC5rZWVwTG9vcGluZykge1xyXG4gICAgICAgIGNvbnN0IG15VGltZW91dCA9IHNldFRpbWVvdXQodGhpcy52dWVfcmVmcmVzaF9ob21lLCA1MDApO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY3JlYXRlZCgpIHtcclxuICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudnVlX3JlZnJlc2hfaG9tZSgpO1xyXG4gIH0sXHJcbiAgYmVmb3JlVW5tb3VudCgpIHtcclxuICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nID0gZmFsc2U7XHJcbiAgfSxcclxufTtcclxuPC9zY3JpcHQ+IiwiPHRlbXBsYXRlPlxyXG4gIDxkaXYgY2xhc3M9XCJtaW4tdmgtMTAwIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3cgdy0xMDBcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0yIGNvbC1sZy0zIGNvbC14bC00XCI+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTggY29sLWxnLTYgY29sLXhsLTRcIj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgIHB4LTBcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBjbGFzcz1cImNhcmQtaW1nLXRvcCBtLTRcIiBzcmM9XCIuLi9hc3NldHMvZHRfc3F1YWRfbG9nby5wbmdcIiBhbHQ9XCJMb2dvXCIgc3R5bGU9XCJ3aWR0aDo5MHB4O1wiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keSBib3JkZXIgYm9yZGVyLTEgcm91bmRlZCBtLTMgcGItMSBtYi0wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtaWY9XCIhdGhpcy51c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWRcIj5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+RW1haWwgYWRkcmVzczwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwiZW1haWxcIiBpZD1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgdi1tb2RlbD1cInVzZXIubG9naW5fZW1haWxcIlxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIC8+XHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTFcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+UGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2LWlmPVwicGFzc3dvcmRfdmlzaWJsZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBuYW1lPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJ0aGlzLnVzZXIubG9naW5fcGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdi1lbHNlIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwidGhpcy51c2VyLmxvZ2luX3Bhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xIGFsaWduLWNlbnRlclwiPjxicj48cCBjbGFzcz1cIm10LTEgbWItMVwiPjxpIGNsYXNzPVwiYmkgYmktZXllXCIgdi1vbjpjbGljaz1cInBhc3N3b3JkX3Zpc2libGU9IXBhc3N3b3JkX3Zpc2libGVcIiBzdHlsZT1cImZvbnQtc2l6ZTogMS44cmVtO1wiPjwvaT48L3A+IDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNSBtci0wIG10LTEgYWxpZ24tc2VsZi1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJtYi0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWNoZWNrLWxhYmVsIHRleHQtY2VudGVyXCIgZm9yPVwiZGVmYXVsdENoZWNrMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbD5JJ20gaGFwcHkgd2l0aCB0aGUgPHN0cm9uZz5EYXRhIFVzYWdlPC9zdHJvbmc+PGJyPih0aWNrIHRvIGVuYWJsZSBMb2dpbik8L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEgbXItMCBtdC0xIGFsaWduLXNlbGYtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZm9ybS1jaGVja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRhdGFfdXNhZ2VfY2hlY2tlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCJkYXRhX3VzYWdlX2NoZWNrZWRcIiB2LW1vZGVsPVwiZGF0YV91c2FnZV9jaGVja2VkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgZC1ncmlkIGdhcC0xIG10LTFcIj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWxnIG15LTFcIiBAY2xpY2s9XCJ0aGlzLmxvZ2luKClcIlxyXG4gICAgICAgICAgICAgICAgICA6ZGlzYWJsZWQ9JygoZGF0YV91c2FnZV9jaGVja2VkLmxlbmd0aCA9PSAwKSB8fCAodGhpcy51c2VyLmxvZ2luX2VtYWlsLmxlbmd0aCA9PSAwKSB8fCAodGhpcy51c2VyLmxvZ2luX3Bhc3N3b3JkLmxlbmd0aCA9PSAwKSknPkxvZ2luPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG10LTMgbWItMFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBkLWdyaWQgZ2FwLTFcIj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIG15LTFcIlxyXG4gICAgICAgICAgICAgICAgICAgIDpkaXNhYmxlZD0nKHRoaXMudXNlci5sb2dpbl9lbWFpbC5sZW5ndGggPT0gMCknXHJcbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwidGhpcy51c2VyLmFwaV9yZXNldF9wYXNzd29yZF9yZXF1ZXN0KHRoaXMudXNlci5sb2dpbl9lbWFpbClcIj5TZXQgLyBSZXNldCBZb3VyXHJcbiAgICAgICAgICAgICAgICAgICAgUGFzc3dvcmQgZm9yIHRoZSBlbWFpbCBhYm92ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8IS0tIG1mYSBzdHVmZiBoZXJlIC0tPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5IG14LTMgbXktMFwiXHJcbiAgICAgICAgICAgICAgdi1pZj1cInRoaXMudXNlci5wYXNzd29yZF9hdXRob3Jpc2VkICYmICF0aGlzLnVzZXIubWZhX2F1dGhvcmlzZWRcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1ncmlkIGdhcC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIHYtaWY9XCIhdGhpcy51c2VyLm1mYV9zZWNyZXRfY29uZmlybWVkICYmIHRoaXMudXNlci5wYXNzd29yZF9hdXRob3Jpc2VkXCI+Rmlyc3RcclxuICAgICAgICAgICAgICAgICAgICAgIHNldCB1cCBNRkEgYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgYWJvdmUgdGhlIHFyLWNvZGUgYW5kIHRoZW4uLi48L3NwYW4+XHJcblxyXG4gICAgICAgICAgICAgICAgICA8cD5FbnRlciB0aGUgY29kZSBmcm9tIHlvdXIgYXV0aGVudGljYXRvciBhbmQgcHJlc3MgW2VudGVyXSBvciBjbGljayB0aGUgYnV0dG9uPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIj42IERpZ2l0IENvZGU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBpZD1cIm1mYV9hdXRoZW50aWNhdG9yX2NvZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIiBuYW1lPVwibWZhX2F1dGhlbnRpY2F0b3JfY29kZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJ0aGlzLnVzZXIubWZhX2F1dGhlbnRpY2F0b3JfY29kZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTUZBIEF1dGhlbnRpY2F0b3IgY29kZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBrZXl1cC5lbnRlcj1cInRoaXMudXNlci5jaGVja19tZmFfYXV0aGVudGljYXRvcl9jb2RlKClcIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWxnIG15LTFcIlxyXG4gICAgICAgICAgICAgICAgICAgIEBjbGljaz1cInRoaXMudXNlci5jaGVja19tZmFfYXV0aGVudGljYXRvcl9jb2RlKClcIj5DaGVjayBhdXRoZW50aWNhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5IGJvcmRlciBib3JkZXItMSByb3VuZGVkIG0tM1wiXHJcbiAgICAgICAgICAgICAgdi1pZj1cIiF0aGlzLnVzZXIubWZhX3NlY3JldF9jb25maXJtZWQgJiYgdGhpcy51c2VyLnBhc3N3b3JkX2F1dGhvcmlzZWRcIj5cclxuICAgICAgICAgICAgICA8aDM+U2V0IHVwIE1GQVxyXG4gICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyBidG4tc21cIiB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vdmltZW8uY29tLzc5OTExMzkyNy81NzAzOWRkNWQ1XCIgcm9sZT1cImJ1dHRvblwiPjIgbWluLiBleHBsYWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgIHZpZGVvPC9hPlxyXG4gICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgPHA+SXQncyBub3cgYSByZXF1aXJlbWVudCB0aGF0IGFsbCBzeXN0ZW1zIHVzZWQgd2l0aGluIHRoZSBWb2xrc3dhZ2VuIEdyb3VwIG11c3QgYmUgc2VjdXJlZFxyXG4gICAgICAgICAgICAgICAgICB3aXRoIFwiTXVsdGkgRmFjdG9yIEF1dGhlbnRpY2F0aW9uXCJcclxuICAgICAgICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICBTY2FuIHRoaXMgUVIgQ29kZSB3aXRoIHRoZSBNaWNyb3NvZnQgb3IgR29vZ2xlIEF1dGhlbnRpY2F0b3IgYW5kIGVudGVyIHRoZSA2IGRpZ2l0XHJcbiAgICAgICAgICAgICAgICAgIE1GQSBBdXRoZW50aWNhdG9yIENvZGVcclxuICAgICAgICAgICAgICAgICAgZm9yIHRoZSA8c3Ryb25nPlZvbGtzd2FnZW4gUmVhZGluZXNzIFRyYWNrZXI8L3N0cm9uZz4gaW4gdGhlIGZpZWxkIGFib3ZlXHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8Y2FudmFzIGNsYXNzPVwiaW1nLWZsdWlkIHctNTBcIiBpZD1cInFyX2NvZGVfY2FudmFzXCIgd2lkdGg9XCI0OTBcIiBoZWlnaHQ9XCI0OTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCIgYm9yZGVyOiAxcHggc29saWQgYmxhY2tcIj48L2NhbnZhcz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtLTNcIiB2LWlmPVwidGhpcy51c2VyLmxvZ2dlZF9pbiAmJiB0aGlzLm1mYV9hdXRob3Jpc2VkXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZ3JpZCBnYXAtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZyBteS0xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwidXNlci5sb2dvdXQoKVwiPkxvZ291dDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5IGJvcmRlciBib3JkZXItMSByb3VuZGVkIG0tM1wiIHYtaWY9XCIoIXRoaXMudXNlci5wYXNzd29yZF9hdXRob3Jpc2VkKVwiPlxyXG4gICAgICAgICAgICAgIDxoNiBjbGFzcz1cImNhcmQtdGl0bGVcIj5EYXRhIFVzYWdlPC9oNj5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInNtYWxsIFwiPkJ5IHNpZ25pbmcgaW4sIHlvdSBjb25maXJtIHRoYXQgeW91IGFyZSBhbiBhdXRob3Jpc2VkIHVzZXIgYW5kIHVzaW5nIHRoaXNcclxuICAgICAgICAgICAgICAgICAgc3lzdGVtIGluIGFcclxuICAgICAgICAgICAgICAgICAgYnVzaW5lc3MgY29udGV4dC4gVGhlIG9ubHlcclxuICAgICAgICAgICAgICAgICAgcGVyc29uYWwgaW5mb3JtYXRpb24gaXQgY29udGFpbnMgaXMgeW91ciBuYW1lIGFuZCBlbWFpbCBhZGRyZXNzPC9wPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzPVwic21hbGwgXCI+V2Ugd2lsbCBvbmx5IHVzZSB0aGUgZGF0YSB0byBtb25pdG9yIHRoZSBwcm9ncmVzcyBtYWRlIG9uIGtleSB0YXNrcyA8L3A+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzbWFsbCBcIj5UaGVyZSBpcyBubyBwZXJzb25hbGx5IGlkZW50aWZpYWJsZSBzZW5zaXRpdmUgaW5mb3JtYXRpb24gc3RvcmVkIGJ5IGRlc2lnblxyXG4gICAgICAgICAgICAgICAgICBpblxyXG4gICAgICAgICAgICAgICAgICB0aGVcclxuICAgICAgICAgICAgICAgICAgc3lzdGVtIGFuZCBpdCdzIHlvdXIgcmVzcG9uc2liaWxpdHkgdG8gbm90IGVudGVyIGRhdGEgdGhhdCBpcyBwZXJzb25hbGx5XHJcbiAgICAgICAgICAgICAgICAgIHNlbnNpdGl2ZTwvcD5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInNtYWxsIFwiPjxzdHJvbmc+IFlvdSBtdXN0IGtlZXAgeW91ciBwYXNzd29yZCBzZWNyZXQgYW5kIG5vdCBzaGFyZSBpdCB3aXRoIGFueW9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgZWxzZTwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmVlZHNWdWVSZWZyZXNoOiB7IGRhdGE6IGZhbHNlLCBrZWVwTG9vcGluZzogZmFsc2UgfSxcclxuICAgICAgbWZhX3FyX2ltYWdlX3JlbmRlcmVkOiBmYWxzZSxcclxuICAgICAgcGFzc3dvcmRfdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIGRhdGFfdXNhZ2VfY2hlY2tlZDogW10sXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgZ29fdG9faW5kZXhfaWZfbG9nZ2VkX2luKCkge1xyXG4gICAgICBpZiAodGhpcy51c2VyLmxvZ2dlZF9pbikge1xyXG4gICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKFwiaW5kZXhcIilcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBsb2dpbigpIHtcclxuICAgICAgdGhpcy51c2VyLmxvZ2luKCk7XHJcbiAgICAgIHRoaXMuZ29fdG9faW5kZXhfaWZfbG9nZ2VkX2luKCk7XHJcbiAgICB9LFxyXG4gICAgdnVlX3JlZnJlc2hfbG9naW4oKSB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW5zdWRlIHZ1ZV9yZWZyZXNoX2xvZ2luIGxvZ2luXCIpXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSA9XHJcbiAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhICsgXCIgXCIgKyB0aGlzLnVzZXIubWZhX2F1dGhvcmlzZWQ7XHJcbiAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSA9XHJcbiAgICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhICsgXCIgXCIgKyB0aGlzLnVzZXIucGFzc3dvcmRfYXV0aG9yaXNlZDtcclxuICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgKyBcIiBcIiArIHRoaXMudXNlci5tZmFfcXJfaW1hZ2UubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgPVxyXG4gICAgICAgICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2guZGF0YSArIFwiIFwiICsgdGhpcy51c2VyLm1mYV9xcl9pbWFnZV9yZW5kZXJlZDtcclxuICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgKyBcIiBcIiArIHRoaXMudXNlci5tZmFfYXV0aG9yaXNlZDtcclxuICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgKyBcIiBcIiArIHRoaXMudXNlci5tZmFfc2VjcmV0X2NvbmZpcm1lZDtcclxuICAgICAgICB0aGlzLm5lZWRzVnVlUmVmcmVzaC5kYXRhID1cclxuICAgICAgICAgIHRoaXMubmVlZHNWdWVSZWZyZXNoLmRhdGEgKyBcIiBcIiArIHRoaXMudXNlci5sb2dnZWRfaW47XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ2dWUgcmVmcmVzaCBkYXRhIGNhbm5vdCBiZSBjYWxjdWxhdGVkXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlci5tZmFfcXJfaW1hZ2UpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMudXNlci5tZmFfcXJfaW1hZ2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tZmFfcXJfaW1hZ2VfcmVuZGVyZWQpIHtcclxuICAgICAgICAgIHRoaXMucmVuZGVyX3FyX2NvZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnVzZXIubG9nZ2VkX2luKSB7XHJcbiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goXCJpbmRleFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMubmVlZHNWdWVSZWZyZXNoLmtlZXBMb29waW5nKSB7XHJcbiAgICAgICAgY29uc3QgbXlUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnZ1ZV9yZWZyZXNoX2xvZ2luLCA1MDApO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gY2hlY2tfbG9nZ2VkX2luKCkge1xyXG4gICAgLy8gICAvLyB0aGlzLnVzZXJzLmN1cnJlbnRfdXNlciA9IHRoaXMudXNlci5jaGVja19sb2dnZWRfaW4oKTtcclxuICAgIC8vICAgaWYgKHRoaXMudXNlci5sb2dnZWRfaW4pIHtcclxuICAgIC8vICAgICB0aGlzLiRyb3V0ZXIucHVzaChcImluZGV4XCIpXHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgY29uc29sZS5sb2coXCJpbnNpZGUgY2hlY2tfbG9nZ2VkX2luIGxvZ2ludmlld1wiKVxyXG4gICAgLy8gICB0aGlzLmxvZ2luX3RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY2hlY2tfbG9nZ2VkX2luLCA1MDAwKTtcclxuICAgIC8vIH0sXHJcbiAgICByZW5kZXJfcXJfY29kZSgpIHtcclxuICAgICAgLy8gaHR0cHM6Ly9jb2RlcGVuLmlvL3JlYmVsY2hyaXMvcGVuL1pFV1JvTWdcclxuXHJcbiAgICAgIC8vIGNvbnN0IGhlaWdodCA9IHRoaXMuc2VjcmV0X2FuZF9pbWFnZS5pbWFnZS5sZW5ndGhcclxuICAgICAgLy8gY29uc3Qgd2lkdGggPSB0aGlzLnNlY3JldF9hbmRfaW1hZ2UuaW1hZ2VbMF0ubGVuZ3RoXHJcbiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMudXNlci5tZmFfcXJfaW1hZ2UubGVuZ3RoO1xyXG4gICAgICBjb25zdCB3aWR0aCA9IHRoaXMudXNlci5tZmFfcXJfaW1hZ2VbMF0ubGVuZ3RoO1xyXG5cclxuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicXJfY29kZV9jYW52YXNcIik7XHJcblxyXG4gICAgICAvLyByZXNpemUgdGhlIGNhbnZhc1xyXG4gICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgIC8vIGdldCBhbiBhcnJheSBvZiB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gICAgICAvLyBkcmF3IG5ld2x5IG1vZGlmaWVkIHBpeGVscyBiYWNrIG9udG8gdGhlIGNhbnZhc1xyXG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgIHZhciBteV9pbWFnZV9kYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgLy8gcHJlcGFyZSBkYXRhXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBteV9pbWFnZV9kYXRhLmRhdGE7XHJcblxyXG4gICAgICBmb3IgKHZhciByb3dfaW5kZXggPSAwOyByb3dfaW5kZXggPCBoZWlnaHQ7IHJvd19pbmRleCsrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgY29sX2luZGV4ID0gMDsgY29sX2luZGV4IDwgd2lkdGg7IGNvbF9pbmRleCsrKSB7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudXNlci5tZmFfcXJfaW1hZ2Vbcm93X2luZGV4XVtjb2xfaW5kZXhdO1xyXG4gICAgICAgICAgaWYgKCFbMCwgMjU1XS5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgZGF0YV9pbmRleCA9IHJvd19pbmRleCAqIHdpZHRoICogNCArIGNvbF9pbmRleCAqIDQ7XHJcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYERhdGEgbGVuZ3RoIGlzOiAke2RhdGEubGVuZ3RofS4gV2UgYXJlIG9uIGRhdGFfaW5kZXg6ICR7ZGF0YV9pbmRleH0gUm93OiAke3Jvd19pbmRleH0sIENvbDogJHtjb2xfaW5kZXh9IGlzIHNldCB0byB2YWx1ZTogJHt2YWx1ZX1gO1xyXG5cclxuICAgICAgICAgIGRhdGFbZGF0YV9pbmRleF0gPSB2YWx1ZTtcclxuICAgICAgICAgIGRhdGFbZGF0YV9pbmRleCArIDFdID0gdmFsdWU7XHJcbiAgICAgICAgICBkYXRhW2RhdGFfaW5kZXggKyAyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgZGF0YVtkYXRhX2luZGV4ICsgM10gPSAyNTU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKG15X2ltYWdlX2RhdGEsIDAsIDApO1xyXG5cclxuICAgICAgdGhpcy5tZmFfcXJfaW1hZ2VfcmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHByb3BzOiBbXCJ1c2Vyc1wiLCBcInVzZXJcIiwgXCJyb2xlc1wiXSxcclxuICBjcmVhdGVkKCkge1xyXG4gICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2gua2VlcExvb3BpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy52dWVfcmVmcmVzaF9sb2dpbigpO1xyXG4gICAgLy8gdGhpcy5jaGVja19sb2dnZWRfaW4oKTtcclxuICB9LFxyXG4gIGJlZm9yZVVubW91bnQoKSB7XHJcbiAgICAvLyB3ZSBhcmUgbGVhdmluZyB0aGUgcGFnZSBzbyBkb24ndCBuZWVkIHRvIGtlZXAgcmVmZXJzaGluZyB0aGUgbG9jYWwgbGlzdFxyXG4gICAgdGhpcy5uZWVkc1Z1ZVJlZnJlc2gua2VlcExvb3BpbmcgPSBmYWxzZTtcclxuICAgIC8vIG5lZWQgdG8gc2NyYXAgY2hlY2tfbG9nZ2VkX2luMiBhcyB3ZWxsXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2dpbl90aW1lb3V0KVxyXG4gIH0sXHJcbn07XHJcbjwvc2NyaXB0PiIsIjx0ZW1wbGF0ZT5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwibWluLXZoLTEwMCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyB3LTEwMFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTIgY29sLWxnLTMgY29sLXhsLTRcIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtOCBjb2wtbGctNiBjb2wteGwtNFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgbXktMiBweC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYXJkLXRpdGxlXCI+UGFzc3dvcmQgU2V0IC8gUmVzZXQ8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHYtaWY9XCJ0aGlzLmlucHV0LnBhc3N3b3JkX3Jlc2V0X3Rva2VuID4gMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIj5UaGUgbGluayB5b3UgaGF2ZSBjbGlja2VkIG9uIGlzIG9ubHkgdmFsaWQgZm9yIGEgc2hvcnQgd2hpbGUuIElmIGl0IGhhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVkIG91dCwgeW91IHdpbGwgZ2V0IGEgcmVqZWN0aW9uIG1lc3NhZ2UgYW5kIHlvdSB3aWxsIG5lZWQgdG8gc2VuZCBhbm90aGVyIHJlcXVlc3QgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluIGxvZ2luIHBhZ2UgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJjYXJkLXRleHRcIj5Zb3UgYXJlIGFib3V0IHRvIHNldCAvIHJlc2V0IHlvdXIgcGFzc3dvcmQuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPkEgcGFzc3dvcmQgY29tcGxleGl0eSBhbGdvcml0aG0gaXMgaW4gcGxhY2Ugc28gY2hvb3NlIGNhcmVmdWxseSBhY2NvcmRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIHRoZXNlIHJ1bGVzLiBZb3VyIHBhc3N3b3JkIG11c3Q6PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+YmUgYmV0d2VlbiA4IGFuZCA2NCBjaGFyYWN0ZXJzIGxvbmc8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmNvbnRhaW4gYW4gdXBwZXJjYXNlIGNoYXJhY3RlcjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+Y29udGFpbiBhIGxvd2VyY2FzZSBjaGFyYWN0ZXI8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmNvbnRhaW4gYSBudW1lcmljYWwgY2hhcmFjdGVyPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5ub3QgaGF2ZSBtb3JlIHRoYW4gaGFsZiB0aGUgY2hhcmFjdGVycyBhcyB0aGUgc2FtZSBjaGFyYWN0ZXI8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPm5vdCBiZSBvbmUgb2YgdGhlIHBhc3N3b3JkcyB0aGF0IGFyZSBrbm93biB0byBiZSBpbnNlY3VyZSAoXCJwYXNzd29yZDEyM1wiIGZvciBleGFtcGxlKTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPklmIHlvdXIgcGFzc3dvcmQgZmFpbHMgYW55IG9mIHRoZXNlIHRlc3RzLCB0aGVyZSB3aWxsIGJlIGEgcmVqZWN0aW9uIG1lc3NhZ2UuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImNhcmQtdGV4dFwiPldlIHJlY29tbWVuZCB1c2luZyBhIHBhc3N3b3JkIG1hbmFnZXIgdG8gY2hvb3NlIHNlY3VyZSBwYXNzd29yZHMgYW5kIGhlbHBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlvdVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlIHRoZW0gaW4gYSBjb252ZW5pZW50IHdheS48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+RW50ZXIgbmV3IHBhc3N3b3JkPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIDpjbGFzcz1cInRoaXMudXNlcnMucGFzc3dvcmRfdmFsaWRcIiB0eXBlPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiB2LW1vZGVsPVwiaW5wdXQucGFzc3dvcmRfMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIEBjaGFuZ2U9XCJ0aGlzLnVzZXJzLmNoZWNrX3Bhc3N3b3JkX3ZhbGlkKHRoaXMuaW5wdXQucGFzc3dvcmRfMSlcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZhbGlkLWZlZWRiYWNrXCI+U3Ryb25nIGVub3VnaDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10ZXh0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+Q29uZmlybSBuZXcgcGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCIgdi1tb2RlbD1cImlucHV0LnBhc3N3b3JkXzJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWdyaWQgZ2FwLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZyBteS0xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCJ0aGlzLnVzZXIuYXBpX3Jlc2V0X3Bhc3N3b3JkKHRoaXMuaW5wdXQpXCI+U2V0IC8gUmVzZXQgWW91ciBQYXNzd29yZDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWdyaWQgZ2FwLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJvdXRlci1saW5rIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgdG89XCIvXCI+SGVscCAmIEluZm88L3JvdXRlci1saW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtMiBjb2wtbGctMyBjb2wteGwtNFwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIG5hbWU6ICdQYXNzd29yZFJlc2V0VmlldycsXHJcbiAgICBkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlucHV0OiB7XHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9yZXNldF90b2tlbjogdGhpcy4kcm91dGUucXVlcnkucGFzc3dvcmRfcmVzZXRfdG9rZW4sXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF8xOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfMjogXCJcIixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcblxyXG4gICAgfSxcclxuICAgIHByb3BzOiBbXCJ1c2VyXCIsICd1c2VycyddLFxyXG59XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlIHNjb3BlZD5cclxuXHJcbjwvc3R5bGU+IiwiaW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIaXN0b3J5IH0gZnJvbSAndnVlLXJvdXRlcidcclxuaW1wb3J0IENydWRWaWV3IGZyb20gJy4uL3ZpZXdzL0NydWRWaWV3LnZ1ZSdcclxuaW1wb3J0IEhvbWVWaWV3IGZyb20gJy4uL3ZpZXdzL0hvbWVWaWV3LnZ1ZSdcclxuaW1wb3J0IExvZ2luVmlldyBmcm9tICcuLi92aWV3cy9Mb2dpblZpZXcudnVlJ1xyXG5pbXBvcnQgUGFzc3dvcmRSZXNldFZpZXcgZnJvbSAnLi4vdmlld3MvUGFzc3dvcmRSZXNldFZpZXcudnVlJ1xyXG5cclxuY29uc3Qgcm91dGVyID0gY3JlYXRlUm91dGVyKHtcclxuICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KGltcG9ydC5tZXRhLmVudi5CQVNFX1VSTCksXHJcbiAgcm91dGVzOiBbXHJcbiAgICB7XHJcbiAgICAgIHBhdGg6ICcvJyxcclxuICAgICAgbmFtZTogJ2hvbWUnLFxyXG4gICAgICBjb21wb25lbnQ6IEhvbWVWaWV3XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwYXRoOiAnL2luZGV4JyxcclxuICAgICAgbmFtZTogJ2luZGV4JyxcclxuICAgICAgY29tcG9uZW50OiBIb21lVmlld1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcGF0aDogJy9jcnVkJyxcclxuICAgICAgbmFtZTogJ2NydWQnLFxyXG4gICAgICBjb21wb25lbnQ6IENydWRWaWV3XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwYXRoOiAnL2xvZ2luJyxcclxuICAgICAgbmFtZTogJ2xvZ2luJyxcclxuICAgICAgY29tcG9uZW50OiBMb2dpblZpZXdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHBhdGg6ICcvcGFzc3dvcmRyZXNldHZpZXcnLFxyXG4gICAgICBuYW1lOiAncGFzc3dvcmRyZXNldCcsXHJcbiAgICAgIGNvbXBvbmVudDogUGFzc3dvcmRSZXNldFZpZXcsXHJcbiAgICB9LFxyXG4gIF1cclxufSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxyXG4iLCJleHBvcnQgdmFyIHRvcCA9ICd0b3AnO1xuZXhwb3J0IHZhciBib3R0b20gPSAnYm90dG9tJztcbmV4cG9ydCB2YXIgcmlnaHQgPSAncmlnaHQnO1xuZXhwb3J0IHZhciBsZWZ0ID0gJ2xlZnQnO1xuZXhwb3J0IHZhciBhdXRvID0gJ2F1dG8nO1xuZXhwb3J0IHZhciBiYXNlUGxhY2VtZW50cyA9IFt0b3AsIGJvdHRvbSwgcmlnaHQsIGxlZnRdO1xuZXhwb3J0IHZhciBzdGFydCA9ICdzdGFydCc7XG5leHBvcnQgdmFyIGVuZCA9ICdlbmQnO1xuZXhwb3J0IHZhciBjbGlwcGluZ1BhcmVudHMgPSAnY2xpcHBpbmdQYXJlbnRzJztcbmV4cG9ydCB2YXIgdmlld3BvcnQgPSAndmlld3BvcnQnO1xuZXhwb3J0IHZhciBwb3BwZXIgPSAncG9wcGVyJztcbmV4cG9ydCB2YXIgcmVmZXJlbmNlID0gJ3JlZmVyZW5jZSc7XG5leHBvcnQgdmFyIHZhcmlhdGlvblBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovYmFzZVBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTtcbmV4cG9ydCB2YXIgcGxhY2VtZW50cyA9IC8qI19fUFVSRV9fKi9bXS5jb25jYXQoYmFzZVBsYWNlbWVudHMsIFthdXRvXSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50LCBwbGFjZW1lbnQgKyBcIi1cIiArIHN0YXJ0LCBwbGFjZW1lbnQgKyBcIi1cIiArIGVuZF0pO1xufSwgW10pOyAvLyBtb2RpZmllcnMgdGhhdCBuZWVkIHRvIHJlYWQgdGhlIERPTVxuXG5leHBvcnQgdmFyIGJlZm9yZVJlYWQgPSAnYmVmb3JlUmVhZCc7XG5leHBvcnQgdmFyIHJlYWQgPSAncmVhZCc7XG5leHBvcnQgdmFyIGFmdGVyUmVhZCA9ICdhZnRlclJlYWQnOyAvLyBwdXJlLWxvZ2ljIG1vZGlmaWVyc1xuXG5leHBvcnQgdmFyIGJlZm9yZU1haW4gPSAnYmVmb3JlTWFpbic7XG5leHBvcnQgdmFyIG1haW4gPSAnbWFpbic7XG5leHBvcnQgdmFyIGFmdGVyTWFpbiA9ICdhZnRlck1haW4nOyAvLyBtb2RpZmllciB3aXRoIHRoZSBwdXJwb3NlIHRvIHdyaXRlIHRvIHRoZSBET00gKG9yIHdyaXRlIGludG8gYSBmcmFtZXdvcmsgc3RhdGUpXG5cbmV4cG9ydCB2YXIgYmVmb3JlV3JpdGUgPSAnYmVmb3JlV3JpdGUnO1xuZXhwb3J0IHZhciB3cml0ZSA9ICd3cml0ZSc7XG5leHBvcnQgdmFyIGFmdGVyV3JpdGUgPSAnYWZ0ZXJXcml0ZSc7XG5leHBvcnQgdmFyIG1vZGlmaWVyUGhhc2VzID0gW2JlZm9yZVJlYWQsIHJlYWQsIGFmdGVyUmVhZCwgYmVmb3JlTWFpbiwgbWFpbiwgYWZ0ZXJNYWluLCBiZWZvcmVXcml0ZSwgd3JpdGUsIGFmdGVyV3JpdGVdOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE5vZGVOYW1lKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQgPyAoZWxlbWVudC5ub2RlTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSA6IG51bGw7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICBpZiAobm9kZS50b1N0cmluZygpICE9PSAnW29iamVjdCBXaW5kb3ddJykge1xuICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIHJldHVybiBvd25lckRvY3VtZW50ID8gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cgOiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn0iLCJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5FbGVtZW50O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5IVE1MRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaXNTaGFkb3dSb290KG5vZGUpIHtcbiAgLy8gSUUgMTEgaGFzIG5vIFNoYWRvd1Jvb3RcbiAgaWYgKHR5cGVvZiBTaGFkb3dSb290ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBPd25FbGVtZW50ID0gZ2V0V2luZG93KG5vZGUpLlNoYWRvd1Jvb3Q7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdDtcbn1cblxuZXhwb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50LCBpc1NoYWRvd1Jvb3QgfTsiLCJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiOyAvLyBUaGlzIG1vZGlmaWVyIHRha2VzIHRoZSBzdHlsZXMgcHJlcGFyZWQgYnkgdGhlIGBjb21wdXRlU3R5bGVzYCBtb2RpZmllclxuLy8gYW5kIGFwcGxpZXMgdGhlbSB0byB0aGUgSFRNTEVsZW1lbnRzIHN1Y2ggYXMgcG9wcGVyIGFuZCBhcnJvd1xuXG5mdW5jdGlvbiBhcHBseVN0eWxlcyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGU7XG4gIE9iamVjdC5rZXlzKHN0YXRlLmVsZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHN0eWxlID0gc3RhdGUuc3R5bGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBhdHRyaWJ1dGVzID0gc3RhdGUuYXR0cmlidXRlc1tuYW1lXSB8fCB7fTtcbiAgICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW25hbWVdOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAhZ2V0Tm9kZU5hbWUoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEZsb3cgZG9lc24ndCBzdXBwb3J0IHRvIGV4dGVuZCB0aGlzIHByb3BlcnR5LCBidXQgaXQncyB0aGUgbW9zdFxuICAgIC8vIGVmZmVjdGl2ZSB3YXkgdG8gYXBwbHkgc3R5bGVzIHRvIGFuIEhUTUxFbGVtZW50XG4gICAgLy8gJEZsb3dGaXhNZVtjYW5ub3Qtd3JpdGVdXG5cblxuICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlO1xuICB2YXIgaW5pdGlhbFN0eWxlcyA9IHtcbiAgICBwb3BwZXI6IHtcbiAgICAgIHBvc2l0aW9uOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgbGVmdDogJzAnLFxuICAgICAgdG9wOiAnMCcsXG4gICAgICBtYXJnaW46ICcwJ1xuICAgIH0sXG4gICAgYXJyb3c6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgfSxcbiAgICByZWZlcmVuY2U6IHt9XG4gIH07XG4gIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLCBpbml0aWFsU3R5bGVzLnBvcHBlcik7XG4gIHN0YXRlLnN0eWxlcyA9IGluaXRpYWxTdHlsZXM7XG5cbiAgaWYgKHN0YXRlLmVsZW1lbnRzLmFycm93KSB7XG4gICAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5hcnJvdy5zdHlsZSwgaW5pdGlhbFN0eWxlcy5hcnJvdyk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIE9iamVjdC5rZXlzKHN0YXRlLmVsZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW25hbWVdO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgICAgdmFyIHN0eWxlUHJvcGVydGllcyA9IE9iamVjdC5rZXlzKHN0YXRlLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IHN0YXRlLnN0eWxlc1tuYW1lXSA6IGluaXRpYWxTdHlsZXNbbmFtZV0pOyAvLyBTZXQgYWxsIHZhbHVlcyB0byBhbiBlbXB0eSBzdHJpbmcgdG8gdW5zZXQgdGhlbVxuXG4gICAgICB2YXIgc3R5bGUgPSBzdHlsZVByb3BlcnRpZXMucmVkdWNlKGZ1bmN0aW9uIChzdHlsZSwgcHJvcGVydHkpIHtcbiAgICAgICAgc3R5bGVbcHJvcGVydHldID0gJyc7XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH0sIHt9KTsgLy8gYXJyb3cgaXMgb3B0aW9uYWwgKyB2aXJ0dWFsIGVsZW1lbnRzXG5cbiAgICAgIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAhZ2V0Tm9kZU5hbWUoZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdhcHBseVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnd3JpdGUnLFxuICBmbjogYXBwbHlTdHlsZXMsXG4gIGVmZmVjdDogZWZmZWN0LFxuICByZXF1aXJlczogWydjb21wdXRlU3R5bGVzJ11cbn07IiwiaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdO1xufSIsImV4cG9ydCB2YXIgbWF4ID0gTWF0aC5tYXg7XG5leHBvcnQgdmFyIG1pbiA9IE1hdGgubWluO1xuZXhwb3J0IHZhciByb3VuZCA9IE1hdGgucm91bmQ7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VUFTdHJpbmcoKSB7XG4gIHZhciB1YURhdGEgPSBuYXZpZ2F0b3IudXNlckFnZW50RGF0YTtcblxuICBpZiAodWFEYXRhICE9IG51bGwgJiYgdWFEYXRhLmJyYW5kcykge1xuICAgIHJldHVybiB1YURhdGEuYnJhbmRzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uYnJhbmQgKyBcIi9cIiArIGl0ZW0udmVyc2lvbjtcbiAgICB9KS5qb2luKCcgJyk7XG4gIH1cblxuICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbn0iLCJpbXBvcnQgZ2V0VUFTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL3VzZXJBZ2VudC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNMYXlvdXRWaWV3cG9ydCgpIHtcbiAgcmV0dXJuICEvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xufSIsImltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgaW5jbHVkZVNjYWxlLCBpc0ZpeGVkU3RyYXRlZ3kpIHtcbiAgaWYgKGluY2x1ZGVTY2FsZSA9PT0gdm9pZCAwKSB7XG4gICAgaW5jbHVkZVNjYWxlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoaXNGaXhlZFN0cmF0ZWd5ID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkU3RyYXRlZ3kgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBjbGllbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IDE7XG4gIHZhciBzY2FsZVkgPSAxO1xuXG4gIGlmIChpbmNsdWRlU2NhbGUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIHNjYWxlWCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwID8gcm91bmQoY2xpZW50UmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDEgOiAxO1xuICAgIHNjYWxlWSA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMCA/IHJvdW5kKGNsaWVudFJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDEgOiAxO1xuICB9XG5cbiAgdmFyIF9yZWYgPSBpc0VsZW1lbnQoZWxlbWVudCkgPyBnZXRXaW5kb3coZWxlbWVudCkgOiB3aW5kb3csXG4gICAgICB2aXN1YWxWaWV3cG9ydCA9IF9yZWYudmlzdWFsVmlld3BvcnQ7XG5cbiAgdmFyIGFkZFZpc3VhbE9mZnNldHMgPSAhaXNMYXlvdXRWaWV3cG9ydCgpICYmIGlzRml4ZWRTdHJhdGVneTtcbiAgdmFyIHggPSAoY2xpZW50UmVjdC5sZWZ0ICsgKGFkZFZpc3VhbE9mZnNldHMgJiYgdmlzdWFsVmlld3BvcnQgPyB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IDogMCkpIC8gc2NhbGVYO1xuICB2YXIgeSA9IChjbGllbnRSZWN0LnRvcCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wIDogMCkpIC8gc2NhbGVZO1xuICB2YXIgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoIC8gc2NhbGVYO1xuICB2YXIgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQgLyBzY2FsZVk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHRvcDogeSxcbiAgICByaWdodDogeCArIHdpZHRoLFxuICAgIGJvdHRvbTogeSArIGhlaWdodCxcbiAgICBsZWZ0OiB4LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7IC8vIFJldHVybnMgdGhlIGxheW91dCByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC4gTGF5b3V0XG4vLyBtZWFucyBpdCBkb2Vzbid0IHRha2UgaW50byBhY2NvdW50IHRyYW5zZm9ybXMuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldExheW91dFJlY3QoZWxlbWVudCkge1xuICB2YXIgY2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KTsgLy8gVXNlIHRoZSBjbGllbnRSZWN0IHNpemVzIGlmIGl0J3Mgbm90IGJlZW4gdHJhbnNmb3JtZWQuXG4gIC8vIEZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTIyM1xuXG4gIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICBpZiAoTWF0aC5hYnMoY2xpZW50UmVjdC53aWR0aCAtIHdpZHRoKSA8PSAxKSB7XG4gICAgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoO1xuICB9XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3QuaGVpZ2h0IC0gaGVpZ2h0KSA8PSAxKSB7XG4gICAgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IGVsZW1lbnQub2Zmc2V0TGVmdCxcbiAgICB5OiBlbGVtZW50Lm9mZnNldFRvcCxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHRcbiAgfTtcbn0iLCJpbXBvcnQgeyBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb250YWlucyhwYXJlbnQsIGNoaWxkKSB7XG4gIHZhciByb290Tm9kZSA9IGNoaWxkLmdldFJvb3ROb2RlICYmIGNoaWxkLmdldFJvb3ROb2RlKCk7IC8vIEZpcnN0LCBhdHRlbXB0IHdpdGggZmFzdGVyIG5hdGl2ZSBtZXRob2RcblxuICBpZiAocGFyZW50LmNvbnRhaW5zKGNoaWxkKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIHRoZW4gZmFsbGJhY2sgdG8gY3VzdG9tIGltcGxlbWVudGF0aW9uIHdpdGggU2hhZG93IERPTSBzdXBwb3J0XG4gIGVsc2UgaWYgKHJvb3ROb2RlICYmIGlzU2hhZG93Um9vdChyb290Tm9kZSkpIHtcbiAgICAgIHZhciBuZXh0ID0gY2hpbGQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG5leHQgJiYgcGFyZW50LmlzU2FtZU5vZGUobmV4dCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ106IG5lZWQgYSBiZXR0ZXIgd2F5IHRvIGhhbmRsZSB0aGlzLi4uXG5cblxuICAgICAgICBuZXh0ID0gbmV4dC5wYXJlbnROb2RlIHx8IG5leHQuaG9zdDtcbiAgICAgIH0gd2hpbGUgKG5leHQpO1xuICAgIH0gLy8gR2l2ZSB1cCwgdGhlIHJlc3VsdCBpcyBmYWxzZVxuXG5cbiAgcmV0dXJuIGZhbHNlO1xufSIsImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldFdpbmRvdyhlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xufSIsImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUYWJsZUVsZW1lbnQoZWxlbWVudCkge1xuICByZXR1cm4gWyd0YWJsZScsICd0ZCcsICd0aCddLmluZGV4T2YoZ2V0Tm9kZU5hbWUoZWxlbWVudCkpID49IDA7XG59IiwiaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpIHtcbiAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICByZXR1cm4gKChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgZWxlbWVudC5kb2N1bWVudCkgfHwgd2luZG93LmRvY3VtZW50KS5kb2N1bWVudEVsZW1lbnQ7XG59IiwiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gIGlmIChnZXROb2RlTmFtZShlbGVtZW50KSA9PT0gJ2h0bWwnKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gKC8vIHRoaXMgaXMgYSBxdWlja2VyIChidXQgbGVzcyB0eXBlIHNhZmUpIHdheSB0byBzYXZlIHF1aXRlIHNvbWUgYnl0ZXMgZnJvbSB0aGUgYnVuZGxlXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXVxuICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgIGVsZW1lbnQuYXNzaWduZWRTbG90IHx8IC8vIHN0ZXAgaW50byB0aGUgc2hhZG93IERPTSBvZiB0aGUgcGFyZW50IG9mIGEgc2xvdHRlZCBub2RlXG4gICAgZWxlbWVudC5wYXJlbnROb2RlIHx8ICggLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWRcbiAgICBpc1NoYWRvd1Jvb3QoZWxlbWVudCkgPyBlbGVtZW50Lmhvc3QgOiBudWxsKSB8fCAvLyBTaGFkb3dSb290IGRldGVjdGVkXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IEhUTUxFbGVtZW50IGlzIGEgTm9kZVxuICAgIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSAvLyBmYWxsYmFja1xuXG4gICk7XG59IiwiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGlzVGFibGVFbGVtZW50IGZyb20gXCIuL2lzVGFibGVFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgZ2V0VUFTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL3VzZXJBZ2VudC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRUcnVlT2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvODM3XG4gIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50Lm9mZnNldFBhcmVudDtcbn0gLy8gYC5vZmZzZXRQYXJlbnRgIHJlcG9ydHMgYG51bGxgIGZvciBmaXhlZCBlbGVtZW50cywgd2hpbGUgYWJzb2x1dGUgZWxlbWVudHNcbi8vIHJldHVybiB0aGUgY29udGFpbmluZyBibG9ja1xuXG5cbmZ1bmN0aW9uIGdldENvbnRhaW5pbmdCbG9jayhlbGVtZW50KSB7XG4gIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG4gIHZhciBpc0lFID0gL1RyaWRlbnQvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xuXG4gIGlmIChpc0lFICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAvLyBJbiBJRSA5LCAxMCBhbmQgMTEgZml4ZWQgZWxlbWVudHMgY29udGFpbmluZyBibG9jayBpcyBhbHdheXMgZXN0YWJsaXNoZWQgYnkgdGhlIHZpZXdwb3J0XG4gICAgdmFyIGVsZW1lbnRDc3MgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgaWYgKGVsZW1lbnRDc3MucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjdXJyZW50Tm9kZSA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG5cbiAgaWYgKGlzU2hhZG93Um9vdChjdXJyZW50Tm9kZSkpIHtcbiAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLmhvc3Q7XG4gIH1cblxuICB3aGlsZSAoaXNIVE1MRWxlbWVudChjdXJyZW50Tm9kZSkgJiYgWydodG1sJywgJ2JvZHknXS5pbmRleE9mKGdldE5vZGVOYW1lKGN1cnJlbnROb2RlKSkgPCAwKSB7XG4gICAgdmFyIGNzcyA9IGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpOyAvLyBUaGlzIGlzIG5vbi1leGhhdXN0aXZlIGJ1dCBjb3ZlcnMgdGhlIG1vc3QgY29tbW9uIENTUyBwcm9wZXJ0aWVzIHRoYXRcbiAgICAvLyBjcmVhdGUgYSBjb250YWluaW5nIGJsb2NrLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9Db250YWluaW5nX2Jsb2NrI2lkZW50aWZ5aW5nX3RoZV9jb250YWluaW5nX2Jsb2NrXG5cbiAgICBpZiAoY3NzLnRyYW5zZm9ybSAhPT0gJ25vbmUnIHx8IGNzcy5wZXJzcGVjdGl2ZSAhPT0gJ25vbmUnIHx8IGNzcy5jb250YWluID09PSAncGFpbnQnIHx8IFsndHJhbnNmb3JtJywgJ3BlcnNwZWN0aXZlJ10uaW5kZXhPZihjc3Mud2lsbENoYW5nZSkgIT09IC0xIHx8IGlzRmlyZWZveCAmJiBjc3Mud2lsbENoYW5nZSA9PT0gJ2ZpbHRlcicgfHwgaXNGaXJlZm94ICYmIGNzcy5maWx0ZXIgJiYgY3NzLmZpbHRlciAhPT0gJ25vbmUnKSB7XG4gICAgICByZXR1cm4gY3VycmVudE5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0gLy8gR2V0cyB0aGUgY2xvc2VzdCBhbmNlc3RvciBwb3NpdGlvbmVkIGVsZW1lbnQuIEhhbmRsZXMgc29tZSBlZGdlIGNhc2VzLFxuLy8gc3VjaCBhcyB0YWJsZSBhbmNlc3RvcnMgYW5kIGNyb3NzIGJyb3dzZXIgYnVncy5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICB2YXIgd2luZG93ID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50KTtcblxuICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmIGlzVGFibGVFbGVtZW50KG9mZnNldFBhcmVudCkgJiYgZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQob2Zmc2V0UGFyZW50KTtcbiAgfVxuXG4gIGlmIChvZmZzZXRQYXJlbnQgJiYgKGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgPT09ICdodG1sJyB8fCBnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnYm9keScgJiYgZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJykpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldFBhcmVudCB8fCBnZXRDb250YWluaW5nQmxvY2soZWxlbWVudCkgfHwgd2luZG93O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIFsndG9wJywgJ2JvdHRvbSddLmluZGV4T2YocGxhY2VtZW50KSA+PSAwID8gJ3gnIDogJ3knO1xufSIsImltcG9ydCB7IG1heCBhcyBtYXRoTWF4LCBtaW4gYXMgbWF0aE1pbiB9IGZyb20gXCIuL21hdGguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KSB7XG4gIHJldHVybiBtYXRoTWF4KG1pbiwgbWF0aE1pbih2YWx1ZSwgbWF4KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluTWF4Q2xhbXAobWluLCB2YWx1ZSwgbWF4KSB7XG4gIHZhciB2ID0gd2l0aGluKG1pbiwgdmFsdWUsIG1heCk7XG4gIHJldHVybiB2ID4gbWF4ID8gbWF4IDogdjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRGcmVzaFNpZGVPYmplY3QoKSB7XG4gIHJldHVybiB7XG4gICAgdG9wOiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBsZWZ0OiAwXG4gIH07XG59IiwiaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi9nZXRGcmVzaFNpZGVPYmplY3QuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlUGFkZGluZ09iamVjdChwYWRkaW5nT2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBnZXRGcmVzaFNpZGVPYmplY3QoKSwgcGFkZGluZ09iamVjdCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwYW5kVG9IYXNoTWFwKHZhbHVlLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzaE1hcCwga2V5KSB7XG4gICAgaGFzaE1hcFtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGhhc2hNYXA7XG4gIH0sIHt9KTtcbn0iLCJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcIi4uL2RvbS11dGlscy9jb250YWlucy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB3aXRoaW4gfSBmcm9tIFwiLi4vdXRpbHMvd2l0aGluLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuLi91dGlscy9tZXJnZVBhZGRpbmdPYmplY3QuanNcIjtcbmltcG9ydCBleHBhbmRUb0hhc2hNYXAgZnJvbSBcIi4uL3V0aWxzL2V4cGFuZFRvSGFzaE1hcC5qc1wiO1xuaW1wb3J0IHsgbGVmdCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB0b3AsIGJvdHRvbSB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciB0b1BhZGRpbmdPYmplY3QgPSBmdW5jdGlvbiB0b1BhZGRpbmdPYmplY3QocGFkZGluZywgc3RhdGUpIHtcbiAgcGFkZGluZyA9IHR5cGVvZiBwYWRkaW5nID09PSAnZnVuY3Rpb24nID8gcGFkZGluZyhPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5yZWN0cywge1xuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pKSA6IHBhZGRpbmc7XG4gIHJldHVybiBtZXJnZVBhZGRpbmdPYmplY3QodHlwZW9mIHBhZGRpbmcgIT09ICdudW1iZXInID8gcGFkZGluZyA6IGV4cGFuZFRvSGFzaE1hcChwYWRkaW5nLCBiYXNlUGxhY2VtZW50cykpO1xufTtcblxuZnVuY3Rpb24gYXJyb3coX3JlZikge1xuICB2YXIgX3N0YXRlJG1vZGlmaWVyc0RhdGEkO1xuXG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcbiAgdmFyIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93O1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cztcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciBheGlzID0gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpO1xuICB2YXIgaXNWZXJ0aWNhbCA9IFtsZWZ0LCByaWdodF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwO1xuICB2YXIgbGVuID0gaXNWZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICBpZiAoIWFycm93RWxlbWVudCB8fCAhcG9wcGVyT2Zmc2V0cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwYWRkaW5nT2JqZWN0ID0gdG9QYWRkaW5nT2JqZWN0KG9wdGlvbnMucGFkZGluZywgc3RhdGUpO1xuICB2YXIgYXJyb3dSZWN0ID0gZ2V0TGF5b3V0UmVjdChhcnJvd0VsZW1lbnQpO1xuICB2YXIgbWluUHJvcCA9IGF4aXMgPT09ICd5JyA/IHRvcCA6IGxlZnQ7XG4gIHZhciBtYXhQcm9wID0gYXhpcyA9PT0gJ3knID8gYm90dG9tIDogcmlnaHQ7XG4gIHZhciBlbmREaWZmID0gc3RhdGUucmVjdHMucmVmZXJlbmNlW2xlbl0gKyBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbYXhpc10gLSBwb3BwZXJPZmZzZXRzW2F4aXNdIC0gc3RhdGUucmVjdHMucG9wcGVyW2xlbl07XG4gIHZhciBzdGFydERpZmYgPSBwb3BwZXJPZmZzZXRzW2F4aXNdIC0gc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdO1xuICB2YXIgYXJyb3dPZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQoYXJyb3dFbGVtZW50KTtcbiAgdmFyIGNsaWVudFNpemUgPSBhcnJvd09mZnNldFBhcmVudCA/IGF4aXMgPT09ICd5JyA/IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudEhlaWdodCB8fCAwIDogYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50V2lkdGggfHwgMCA6IDA7XG4gIHZhciBjZW50ZXJUb1JlZmVyZW5jZSA9IGVuZERpZmYgLyAyIC0gc3RhcnREaWZmIC8gMjsgLy8gTWFrZSBzdXJlIHRoZSBhcnJvdyBkb2Vzbid0IG92ZXJmbG93IHRoZSBwb3BwZXIgaWYgdGhlIGNlbnRlciBwb2ludCBpc1xuICAvLyBvdXRzaWRlIG9mIHRoZSBwb3BwZXIgYm91bmRzXG5cbiAgdmFyIG1pbiA9IHBhZGRpbmdPYmplY3RbbWluUHJvcF07XG4gIHZhciBtYXggPSBjbGllbnRTaXplIC0gYXJyb3dSZWN0W2xlbl0gLSBwYWRkaW5nT2JqZWN0W21heFByb3BdO1xuICB2YXIgY2VudGVyID0gY2xpZW50U2l6ZSAvIDIgLSBhcnJvd1JlY3RbbGVuXSAvIDIgKyBjZW50ZXJUb1JlZmVyZW5jZTtcbiAgdmFyIG9mZnNldCA9IHdpdGhpbihtaW4sIGNlbnRlciwgbWF4KTsgLy8gUHJldmVudHMgYnJlYWtpbmcgc3ludGF4IGhpZ2hsaWdodGluZy4uLlxuXG4gIHZhciBheGlzUHJvcCA9IGF4aXM7XG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSAoX3N0YXRlJG1vZGlmaWVyc0RhdGEkID0ge30sIF9zdGF0ZSRtb2RpZmllcnNEYXRhJFtheGlzUHJvcF0gPSBvZmZzZXQsIF9zdGF0ZSRtb2RpZmllcnNEYXRhJC5jZW50ZXJPZmZzZXQgPSBvZmZzZXQgLSBjZW50ZXIsIF9zdGF0ZSRtb2RpZmllcnNEYXRhJCk7XG59XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmMi5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCxcbiAgICAgIGFycm93RWxlbWVudCA9IF9vcHRpb25zJGVsZW1lbnQgPT09IHZvaWQgMCA/ICdbZGF0YS1wb3BwZXItYXJyb3ddJyA6IF9vcHRpb25zJGVsZW1lbnQ7XG5cbiAgaWYgKGFycm93RWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIENTUyBzZWxlY3RvclxuXG5cbiAgaWYgKHR5cGVvZiBhcnJvd0VsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMucG9wcGVyLnF1ZXJ5U2VsZWN0b3IoYXJyb3dFbGVtZW50KTtcblxuICAgIGlmICghYXJyb3dFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGlmICghaXNIVE1MRWxlbWVudChhcnJvd0VsZW1lbnQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFsnUG9wcGVyOiBcImFycm93XCIgZWxlbWVudCBtdXN0IGJlIGFuIEhUTUxFbGVtZW50IChub3QgYW4gU1ZHRWxlbWVudCkuJywgJ1RvIHVzZSBhbiBTVkcgYXJyb3csIHdyYXAgaXQgaW4gYW4gSFRNTEVsZW1lbnQgdGhhdCB3aWxsIGJlIHVzZWQgYXMnLCAndGhlIGFycm93LiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb250YWlucyhzdGF0ZS5lbGVtZW50cy5wb3BwZXIsIGFycm93RWxlbWVudCkpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFsnUG9wcGVyOiBcImFycm93XCIgbW9kaWZpZXJcXCdzIGBlbGVtZW50YCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIHBvcHBlcicsICdlbGVtZW50LiddLmpvaW4oJyAnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3RhdGUuZWxlbWVudHMuYXJyb3cgPSBhcnJvd0VsZW1lbnQ7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdhcnJvdycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBhcnJvdyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ3BvcHBlck9mZnNldHMnXSxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydwcmV2ZW50T3ZlcmZsb3cnXVxufTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQuc3BsaXQoJy0nKVsxXTtcbn0iLCJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHVuc2V0U2lkZXMgPSB7XG4gIHRvcDogJ2F1dG8nLFxuICByaWdodDogJ2F1dG8nLFxuICBib3R0b206ICdhdXRvJyxcbiAgbGVmdDogJ2F1dG8nXG59OyAvLyBSb3VuZCB0aGUgb2Zmc2V0cyB0byB0aGUgbmVhcmVzdCBzdWl0YWJsZSBzdWJwaXhlbCBiYXNlZCBvbiB0aGUgRFBSLlxuLy8gWm9vbWluZyBjYW4gY2hhbmdlIHRoZSBEUFIsIGJ1dCBpdCBzZWVtcyB0byByZXBvcnQgYSB2YWx1ZSB0aGF0IHdpbGxcbi8vIGNsZWFubHkgZGl2aWRlIHRoZSB2YWx1ZXMgaW50byB0aGUgYXBwcm9wcmlhdGUgc3VicGl4ZWxzLlxuXG5mdW5jdGlvbiByb3VuZE9mZnNldHNCeURQUihfcmVmKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueTtcbiAgdmFyIHdpbiA9IHdpbmRvdztcbiAgdmFyIGRwciA9IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gIHJldHVybiB7XG4gICAgeDogcm91bmQoeCAqIGRwcikgLyBkcHIgfHwgMCxcbiAgICB5OiByb3VuZCh5ICogZHByKSAvIGRwciB8fCAwXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBUb1N0eWxlcyhfcmVmMikge1xuICB2YXIgX09iamVjdCRhc3NpZ24yO1xuXG4gIHZhciBwb3BwZXIgPSBfcmVmMi5wb3BwZXIsXG4gICAgICBwb3BwZXJSZWN0ID0gX3JlZjIucG9wcGVyUmVjdCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYyLnBsYWNlbWVudCxcbiAgICAgIHZhcmlhdGlvbiA9IF9yZWYyLnZhcmlhdGlvbixcbiAgICAgIG9mZnNldHMgPSBfcmVmMi5vZmZzZXRzLFxuICAgICAgcG9zaXRpb24gPSBfcmVmMi5wb3NpdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9yZWYyLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGFkYXB0aXZlID0gX3JlZjIuYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHMgPSBfcmVmMi5yb3VuZE9mZnNldHMsXG4gICAgICBpc0ZpeGVkID0gX3JlZjIuaXNGaXhlZDtcbiAgdmFyIF9vZmZzZXRzJHggPSBvZmZzZXRzLngsXG4gICAgICB4ID0gX29mZnNldHMkeCA9PT0gdm9pZCAwID8gMCA6IF9vZmZzZXRzJHgsXG4gICAgICBfb2Zmc2V0cyR5ID0gb2Zmc2V0cy55LFxuICAgICAgeSA9IF9vZmZzZXRzJHkgPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR5O1xuXG4gIHZhciBfcmVmMyA9IHR5cGVvZiByb3VuZE9mZnNldHMgPT09ICdmdW5jdGlvbicgPyByb3VuZE9mZnNldHMoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9KSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjMueDtcbiAgeSA9IF9yZWYzLnk7XG4gIHZhciBoYXNYID0gb2Zmc2V0cy5oYXNPd25Qcm9wZXJ0eSgneCcpO1xuICB2YXIgaGFzWSA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3knKTtcbiAgdmFyIHNpZGVYID0gbGVmdDtcbiAgdmFyIHNpZGVZID0gdG9wO1xuICB2YXIgd2luID0gd2luZG93O1xuXG4gIGlmIChhZGFwdGl2ZSkge1xuICAgIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKTtcbiAgICB2YXIgaGVpZ2h0UHJvcCA9ICdjbGllbnRIZWlnaHQnO1xuICAgIHZhciB3aWR0aFByb3AgPSAnY2xpZW50V2lkdGgnO1xuXG4gICAgaWYgKG9mZnNldFBhcmVudCA9PT0gZ2V0V2luZG93KHBvcHBlcikpIHtcbiAgICAgIG9mZnNldFBhcmVudCA9IGdldERvY3VtZW50RWxlbWVudChwb3BwZXIpO1xuXG4gICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uICE9PSAnc3RhdGljJyAmJiBwb3NpdGlvbiA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgICBoZWlnaHRQcm9wID0gJ3Njcm9sbEhlaWdodCc7XG4gICAgICAgIHdpZHRoUHJvcCA9ICdzY3JvbGxXaWR0aCc7XG4gICAgICB9XG4gICAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYXN0XTogZm9yY2UgdHlwZSByZWZpbmVtZW50LCB3ZSBjb21wYXJlIG9mZnNldFBhcmVudCB3aXRoIHdpbmRvdyBhYm92ZSwgYnV0IEZsb3cgZG9lc24ndCBkZXRlY3QgaXRcblxuXG4gICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50O1xuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gdG9wIHx8IChwbGFjZW1lbnQgPT09IGxlZnQgfHwgcGxhY2VtZW50ID09PSByaWdodCkgJiYgdmFyaWF0aW9uID09PSBlbmQpIHtcbiAgICAgIHNpZGVZID0gYm90dG9tO1xuICAgICAgdmFyIG9mZnNldFkgPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC5oZWlnaHQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFtoZWlnaHRQcm9wXTtcbiAgICAgIHkgLT0gb2Zmc2V0WSAtIHBvcHBlclJlY3QuaGVpZ2h0O1xuICAgICAgeSAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gbGVmdCB8fCAocGxhY2VtZW50ID09PSB0b3AgfHwgcGxhY2VtZW50ID09PSBib3R0b20pICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWCA9IHJpZ2h0O1xuICAgICAgdmFyIG9mZnNldFggPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC53aWR0aCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgb2Zmc2V0UGFyZW50W3dpZHRoUHJvcF07XG4gICAgICB4IC09IG9mZnNldFggLSBwb3BwZXJSZWN0LndpZHRoO1xuICAgICAgeCAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIHBvc2l0aW9uOiBwb3NpdGlvblxuICB9LCBhZGFwdGl2ZSAmJiB1bnNldFNpZGVzKTtcblxuICB2YXIgX3JlZjQgPSByb3VuZE9mZnNldHMgPT09IHRydWUgPyByb3VuZE9mZnNldHNCeURQUih7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH0pIDoge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xuXG4gIHggPSBfcmVmNC54O1xuICB5ID0gX3JlZjQueTtcblxuICBpZiAoZ3B1QWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIF9PYmplY3QkYXNzaWduO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduID0ge30sIF9PYmplY3QkYXNzaWduW3NpZGVZXSA9IGhhc1kgPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ25bc2lkZVhdID0gaGFzWCA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbi50cmFuc2Zvcm0gPSAod2luLmRldmljZVBpeGVsUmF0aW8gfHwgMSkgPD0gMSA/IFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgpXCIgOiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgsIDApXCIsIF9PYmplY3QkYXNzaWduKSk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24yID0ge30sIF9PYmplY3QkYXNzaWduMltzaWRlWV0gPSBoYXNZID8geSArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjJbc2lkZVhdID0gaGFzWCA/IHggKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yLnRyYW5zZm9ybSA9ICcnLCBfT2JqZWN0JGFzc2lnbjIpKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVN0eWxlcyhfcmVmNSkge1xuICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmNS5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID0gb3B0aW9ucy5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRncHVBY2NlbGVyYXQsXG4gICAgICBfb3B0aW9ucyRhZGFwdGl2ZSA9IG9wdGlvbnMuYWRhcHRpdmUsXG4gICAgICBhZGFwdGl2ZSA9IF9vcHRpb25zJGFkYXB0aXZlID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWRhcHRpdmUsXG4gICAgICBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPSBvcHRpb25zLnJvdW5kT2Zmc2V0cyxcbiAgICAgIHJvdW5kT2Zmc2V0cyA9IF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJvdW5kT2Zmc2V0cztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgdmFyIHRyYW5zaXRpb25Qcm9wZXJ0eSA9IGdldENvbXB1dGVkU3R5bGUoc3RhdGUuZWxlbWVudHMucG9wcGVyKS50cmFuc2l0aW9uUHJvcGVydHkgfHwgJyc7XG5cbiAgICBpZiAoYWRhcHRpdmUgJiYgWyd0cmFuc2Zvcm0nLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0J10uc29tZShmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uUHJvcGVydHkuaW5kZXhPZihwcm9wZXJ0eSkgPj0gMDtcbiAgICB9KSkge1xuICAgICAgY29uc29sZS53YXJuKFsnUG9wcGVyOiBEZXRlY3RlZCBDU1MgdHJhbnNpdGlvbnMgb24gYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcnLCAnQ1NTIHByb3BlcnRpZXM6IFwidHJhbnNmb3JtXCIsIFwidG9wXCIsIFwicmlnaHRcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIuJywgJ1xcblxcbicsICdEaXNhYmxlIHRoZSBcImNvbXB1dGVTdHlsZXNcIiBtb2RpZmllclxcJ3MgYGFkYXB0aXZlYCBvcHRpb24gdG8gYWxsb3cnLCAnZm9yIHNtb290aCB0cmFuc2l0aW9ucywgb3IgcmVtb3ZlIHRoZXNlIHByb3BlcnRpZXMgZnJvbSB0aGUgQ1NTJywgJ3RyYW5zaXRpb24gZGVjbGFyYXRpb24gb24gdGhlIHBvcHBlciBlbGVtZW50IGlmIG9ubHkgdHJhbnNpdGlvbmluZycsICdvcGFjaXR5IG9yIGJhY2tncm91bmQtY29sb3IgZm9yIGV4YW1wbGUuJywgJ1xcblxcbicsICdXZSByZWNvbW1lbmQgdXNpbmcgdGhlIHBvcHBlciBlbGVtZW50IGFzIGEgd3JhcHBlciBhcm91bmQgYW4gaW5uZXInLCAnZWxlbWVudCB0aGF0IGNhbiBoYXZlIGFueSBDU1MgcHJvcGVydHkgdHJhbnNpdGlvbmVkIGZvciBhbmltYXRpb25zLiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IHtcbiAgICBwbGFjZW1lbnQ6IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KSxcbiAgICB2YXJpYXRpb246IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHBvcHBlcjogc3RhdGUuZWxlbWVudHMucG9wcGVyLFxuICAgIHBvcHBlclJlY3Q6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBncHVBY2NlbGVyYXRpb246IGdwdUFjY2VsZXJhdGlvbixcbiAgICBpc0ZpeGVkOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnXG4gIH07XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5wb3BwZXIsIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLFxuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBhZGFwdGl2ZTogYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLmFycm93ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLmFycm93LCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3csXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGFkYXB0aXZlOiBmYWxzZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcGxhY2VtZW50Jzogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnYmVmb3JlV3JpdGUnLFxuICBmbjogY29tcHV0ZVN0eWxlcyxcbiAgZGF0YToge31cbn07IiwiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciBwYXNzaXZlID0ge1xuICBwYXNzaXZlOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgaW5zdGFuY2UgPSBfcmVmLmluc3RhbmNlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJHNjcm9sbCA9IG9wdGlvbnMuc2Nyb2xsLFxuICAgICAgc2Nyb2xsID0gX29wdGlvbnMkc2Nyb2xsID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkc2Nyb2xsLFxuICAgICAgX29wdGlvbnMkcmVzaXplID0gb3B0aW9ucy5yZXNpemUsXG4gICAgICByZXNpemUgPSBfb3B0aW9ucyRyZXNpemUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRyZXNpemU7XG4gIHZhciB3aW5kb3cgPSBnZXRXaW5kb3coc3RhdGUuZWxlbWVudHMucG9wcGVyKTtcbiAgdmFyIHNjcm9sbFBhcmVudHMgPSBbXS5jb25jYXQoc3RhdGUuc2Nyb2xsUGFyZW50cy5yZWZlcmVuY2UsIHN0YXRlLnNjcm9sbFBhcmVudHMucG9wcGVyKTtcblxuICBpZiAoc2Nyb2xsKSB7XG4gICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgIHNjcm9sbFBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJlc2l6ZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsKSB7XG4gICAgICBzY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHNjcm9sbFBhcmVudCkge1xuICAgICAgICBzY3JvbGxQYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXNpemUpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH1cbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2V2ZW50TGlzdGVuZXJzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBmdW5jdGlvbiBmbigpIHt9LFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgZGF0YToge31cbn07IiwidmFyIGhhc2ggPSB7XG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCcsXG4gIGJvdHRvbTogJ3RvcCcsXG4gIHRvcDogJ2JvdHRvbSdcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZywgZnVuY3Rpb24gKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gaGFzaFttYXRjaGVkXTtcbiAgfSk7XG59IiwidmFyIGhhc2ggPSB7XG4gIHN0YXJ0OiAnZW5kJyxcbiAgZW5kOiAnc3RhcnQnXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvc3RhcnR8ZW5kL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGwobm9kZSkge1xuICB2YXIgd2luID0gZ2V0V2luZG93KG5vZGUpO1xuICB2YXIgc2Nyb2xsTGVmdCA9IHdpbi5wYWdlWE9mZnNldDtcbiAgdmFyIHNjcm9sbFRvcCA9IHdpbi5wYWdlWU9mZnNldDtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wXG4gIH07XG59IiwiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSB7XG4gIC8vIElmIDxodG1sPiBoYXMgYSBDU1Mgd2lkdGggZ3JlYXRlciB0aGFuIHRoZSB2aWV3cG9ydCwgdGhlbiB0aGlzIHdpbGwgYmVcbiAgLy8gaW5jb3JyZWN0IGZvciBSVEwuXG4gIC8vIFBvcHBlciAxIGlzIGJyb2tlbiBpbiB0aGlzIGNhc2UgYW5kIG5ldmVyIGhhZCBhIGJ1ZyByZXBvcnQgc28gbGV0J3MgYXNzdW1lXG4gIC8vIGl0J3Mgbm90IGFuIGlzc3VlLiBJIGRvbid0IHRoaW5rIGFueW9uZSBldmVyIHNwZWNpZmllcyB3aWR0aCBvbiA8aHRtbD5cbiAgLy8gYW55d2F5LlxuICAvLyBCcm93c2VycyB3aGVyZSB0aGUgbGVmdCBzY3JvbGxiYXIgZG9lc24ndCBjYXVzZSBhbiBpc3N1ZSByZXBvcnQgYDBgIGZvclxuICAvLyB0aGlzIChlLmcuIEVkZ2UgMjAxOSwgSUUxMSwgU2FmYXJpKVxuICByZXR1cm4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkubGVmdCArIGdldFdpbmRvd1Njcm9sbChlbGVtZW50KS5zY3JvbGxMZWZ0O1xufSIsImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGlzTGF5b3V0Vmlld3BvcnQgZnJvbSBcIi4vaXNMYXlvdXRWaWV3cG9ydC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSB7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgdmlzdWFsVmlld3BvcnQgPSB3aW4udmlzdWFsVmlld3BvcnQ7XG4gIHZhciB3aWR0aCA9IGh0bWwuY2xpZW50V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBodG1sLmNsaWVudEhlaWdodDtcbiAgdmFyIHggPSAwO1xuICB2YXIgeSA9IDA7XG5cbiAgaWYgKHZpc3VhbFZpZXdwb3J0KSB7XG4gICAgd2lkdGggPSB2aXN1YWxWaWV3cG9ydC53aWR0aDtcbiAgICBoZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7XG4gICAgdmFyIGxheW91dFZpZXdwb3J0ID0gaXNMYXlvdXRWaWV3cG9ydCgpO1xuXG4gICAgaWYgKGxheW91dFZpZXdwb3J0IHx8ICFsYXlvdXRWaWV3cG9ydCAmJiBzdHJhdGVneSA9PT0gJ2ZpeGVkJykge1xuICAgICAgeCA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldExlZnQ7XG4gICAgICB5ID0gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHggKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpLFxuICAgIHk6IHlcbiAgfTtcbn0iLCJpbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmltcG9ydCB7IG1heCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIEdldHMgdGhlIGVudGlyZSBzaXplIG9mIHRoZSBzY3JvbGxhYmxlIGRvY3VtZW50IGFyZWEsIGV2ZW4gZXh0ZW5kaW5nIG91dHNpZGVcbi8vIG9mIHRoZSBgPGh0bWw+YCBhbmQgYDxib2R5PmAgcmVjdCBib3VuZHMgaWYgaG9yaXpvbnRhbGx5IHNjcm9sbGFibGVcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIF9lbGVtZW50JG93bmVyRG9jdW1lbjtcblxuICB2YXIgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgdmFyIHdpblNjcm9sbCA9IGdldFdpbmRvd1Njcm9sbChlbGVtZW50KTtcbiAgdmFyIGJvZHkgPSAoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHk7XG4gIHZhciB3aWR0aCA9IG1heChodG1sLnNjcm9sbFdpZHRoLCBodG1sLmNsaWVudFdpZHRoLCBib2R5ID8gYm9keS5zY3JvbGxXaWR0aCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCk7XG4gIHZhciBoZWlnaHQgPSBtYXgoaHRtbC5zY3JvbGxIZWlnaHQsIGh0bWwuY2xpZW50SGVpZ2h0LCBib2R5ID8gYm9keS5zY3JvbGxIZWlnaHQgOiAwLCBib2R5ID8gYm9keS5jbGllbnRIZWlnaHQgOiAwKTtcbiAgdmFyIHggPSAtd2luU2Nyb2xsLnNjcm9sbExlZnQgKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpO1xuICB2YXIgeSA9IC13aW5TY3JvbGwuc2Nyb2xsVG9wO1xuXG4gIGlmIChnZXRDb21wdXRlZFN0eWxlKGJvZHkgfHwgaHRtbCkuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgIHggKz0gbWF4KGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCkgLSB3aWR0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsImltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2Nyb2xsUGFyZW50KGVsZW1lbnQpIHtcbiAgLy8gRmlyZWZveCB3YW50cyB1cyB0byBjaGVjayBgLXhgIGFuZCBgLXlgIHZhcmlhdGlvbnMgYXMgd2VsbFxuICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgb3ZlcmZsb3cgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyxcbiAgICAgIG92ZXJmbG93WCA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WCxcbiAgICAgIG92ZXJmbG93WSA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WTtcblxuICByZXR1cm4gL2F1dG98c2Nyb2xsfG92ZXJsYXl8aGlkZGVuLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKTtcbn0iLCJpbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChub2RlKSB7XG4gIGlmIChbJ2h0bWwnLCAnYm9keScsICcjZG9jdW1lbnQnXS5pbmRleE9mKGdldE5vZGVOYW1lKG5vZGUpKSA+PSAwKSB7XG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQuYm9keTtcbiAgfVxuXG4gIGlmIChpc0hUTUxFbGVtZW50KG5vZGUpICYmIGlzU2Nyb2xsUGFyZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gZ2V0U2Nyb2xsUGFyZW50KGdldFBhcmVudE5vZGUobm9kZSkpO1xufSIsImltcG9ydCBnZXRTY3JvbGxQYXJlbnQgZnJvbSBcIi4vZ2V0U2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG4vKlxuZ2l2ZW4gYSBET00gZWxlbWVudCwgcmV0dXJuIHRoZSBsaXN0IG9mIGFsbCBzY3JvbGwgcGFyZW50cywgdXAgdGhlIGxpc3Qgb2YgYW5jZXNvcnNcbnVudGlsIHdlIGdldCB0byB0aGUgdG9wIHdpbmRvdyBvYmplY3QuIFRoaXMgbGlzdCBpcyB3aGF0IHdlIGF0dGFjaCBzY3JvbGwgbGlzdGVuZXJzXG50bywgYmVjYXVzZSBpZiBhbnkgb2YgdGhlc2UgcGFyZW50IGVsZW1lbnRzIHNjcm9sbCwgd2UnbGwgbmVlZCB0byByZS1jYWxjdWxhdGUgdGhlXG5yZWZlcmVuY2UgZWxlbWVudCdzIHBvc2l0aW9uLlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGlzdFNjcm9sbFBhcmVudHMoZWxlbWVudCwgbGlzdCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIGlmIChsaXN0ID09PSB2b2lkIDApIHtcbiAgICBsaXN0ID0gW107XG4gIH1cblxuICB2YXIgc2Nyb2xsUGFyZW50ID0gZ2V0U2Nyb2xsUGFyZW50KGVsZW1lbnQpO1xuICB2YXIgaXNCb2R5ID0gc2Nyb2xsUGFyZW50ID09PSAoKF9lbGVtZW50JG93bmVyRG9jdW1lbiA9IGVsZW1lbnQub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lbGVtZW50JG93bmVyRG9jdW1lbi5ib2R5KTtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhzY3JvbGxQYXJlbnQpO1xuICB2YXIgdGFyZ2V0ID0gaXNCb2R5ID8gW3dpbl0uY29uY2F0KHdpbi52aXN1YWxWaWV3cG9ydCB8fCBbXSwgaXNTY3JvbGxQYXJlbnQoc2Nyb2xsUGFyZW50KSA/IHNjcm9sbFBhcmVudCA6IFtdKSA6IHNjcm9sbFBhcmVudDtcbiAgdmFyIHVwZGF0ZWRMaXN0ID0gbGlzdC5jb25jYXQodGFyZ2V0KTtcbiAgcmV0dXJuIGlzQm9keSA/IHVwZGF0ZWRMaXN0IDogLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IGlzQm9keSB0ZWxscyB1cyB0YXJnZXQgd2lsbCBiZSBhbiBIVE1MRWxlbWVudCBoZXJlXG4gIHVwZGF0ZWRMaXN0LmNvbmNhdChsaXN0U2Nyb2xsUGFyZW50cyhnZXRQYXJlbnROb2RlKHRhcmdldCkpKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZWN0VG9DbGllbnRSZWN0KHJlY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY3QsIHtcbiAgICBsZWZ0OiByZWN0LngsXG4gICAgdG9wOiByZWN0LnksXG4gICAgcmlnaHQ6IHJlY3QueCArIHJlY3Qud2lkdGgsXG4gICAgYm90dG9tOiByZWN0LnkgKyByZWN0LmhlaWdodFxuICB9KTtcbn0iLCJpbXBvcnQgeyB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldFZpZXdwb3J0UmVjdCBmcm9tIFwiLi9nZXRWaWV3cG9ydFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudFJlY3QgZnJvbSBcIi4vZ2V0RG9jdW1lbnRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwiLi9jb250YWlucy5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi4vdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IHsgbWF4LCBtaW4gfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBmYWxzZSwgc3RyYXRlZ3kgPT09ICdmaXhlZCcpO1xuICByZWN0LnRvcCA9IHJlY3QudG9wICsgZWxlbWVudC5jbGllbnRUb3A7XG4gIHJlY3QubGVmdCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcbiAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgcmVjdC53aWR0aCA9IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3QuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJlY3QueCA9IHJlY3QubGVmdDtcbiAgcmVjdC55ID0gcmVjdC50b3A7XG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpIHtcbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50ID09PSB2aWV3cG9ydCA/IHJlY3RUb0NsaWVudFJlY3QoZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSkgOiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpID8gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSA6IHJlY3RUb0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkpO1xufSAvLyBBIFwiY2xpcHBpbmcgcGFyZW50XCIgaXMgYW4gb3ZlcmZsb3dhYmxlIGNvbnRhaW5lciB3aXRoIHRoZSBjaGFyYWN0ZXJpc3RpYyBvZlxuLy8gY2xpcHBpbmcgKG9yIGhpZGluZykgb3ZlcmZsb3dpbmcgZWxlbWVudHMgd2l0aCBhIHBvc2l0aW9uIGRpZmZlcmVudCBmcm9tXG4vLyBgaW5pdGlhbGBcblxuXG5mdW5jdGlvbiBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkge1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gbGlzdFNjcm9sbFBhcmVudHMoZ2V0UGFyZW50Tm9kZShlbGVtZW50KSk7XG4gIHZhciBjYW5Fc2NhcGVDbGlwcGluZyA9IFsnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24pID49IDA7XG4gIHZhciBjbGlwcGVyRWxlbWVudCA9IGNhbkVzY2FwZUNsaXBwaW5nICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkgPyBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkgOiBlbGVtZW50O1xuXG4gIGlmICghaXNFbGVtZW50KGNsaXBwZXJFbGVtZW50KSkge1xuICAgIHJldHVybiBbXTtcbiAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMTQxNFxuXG5cbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaXBwaW5nUGFyZW50KSB7XG4gICAgcmV0dXJuIGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgJiYgY29udGFpbnMoY2xpcHBpbmdQYXJlbnQsIGNsaXBwZXJFbGVtZW50KSAmJiBnZXROb2RlTmFtZShjbGlwcGluZ1BhcmVudCkgIT09ICdib2R5JztcbiAgfSk7XG59IC8vIEdldHMgdGhlIG1heGltdW0gYXJlYSB0aGF0IHRoZSBlbGVtZW50IGlzIHZpc2libGUgaW4gZHVlIHRvIGFueSBudW1iZXIgb2Zcbi8vIGNsaXBwaW5nIHBhcmVudHNcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDbGlwcGluZ1JlY3QoZWxlbWVudCwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpIHtcbiAgdmFyIG1haW5DbGlwcGluZ1BhcmVudHMgPSBib3VuZGFyeSA9PT0gJ2NsaXBwaW5nUGFyZW50cycgPyBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkgOiBbXS5jb25jYXQoYm91bmRhcnkpO1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gW10uY29uY2F0KG1haW5DbGlwcGluZ1BhcmVudHMsIFtyb290Qm91bmRhcnldKTtcbiAgdmFyIGZpcnN0Q2xpcHBpbmdQYXJlbnQgPSBjbGlwcGluZ1BhcmVudHNbMF07XG4gIHZhciBjbGlwcGluZ1JlY3QgPSBjbGlwcGluZ1BhcmVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2NSZWN0LCBjbGlwcGluZ1BhcmVudCkge1xuICAgIHZhciByZWN0ID0gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KTtcbiAgICBhY2NSZWN0LnRvcCA9IG1heChyZWN0LnRvcCwgYWNjUmVjdC50b3ApO1xuICAgIGFjY1JlY3QucmlnaHQgPSBtaW4ocmVjdC5yaWdodCwgYWNjUmVjdC5yaWdodCk7XG4gICAgYWNjUmVjdC5ib3R0b20gPSBtaW4ocmVjdC5ib3R0b20sIGFjY1JlY3QuYm90dG9tKTtcbiAgICBhY2NSZWN0LmxlZnQgPSBtYXgocmVjdC5sZWZ0LCBhY2NSZWN0LmxlZnQpO1xuICAgIHJldHVybiBhY2NSZWN0O1xuICB9LCBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBmaXJzdENsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkpO1xuICBjbGlwcGluZ1JlY3Qud2lkdGggPSBjbGlwcGluZ1JlY3QucmlnaHQgLSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LmhlaWdodCA9IGNsaXBwaW5nUmVjdC5ib3R0b20gLSBjbGlwcGluZ1JlY3QudG9wO1xuICBjbGlwcGluZ1JlY3QueCA9IGNsaXBwaW5nUmVjdC5sZWZ0O1xuICBjbGlwcGluZ1JlY3QueSA9IGNsaXBwaW5nUmVjdC50b3A7XG4gIHJldHVybiBjbGlwcGluZ1JlY3Q7XG59IiwiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4vZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHN0YXJ0LCBlbmQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHJlZmVyZW5jZSA9IF9yZWYucmVmZXJlbmNlLFxuICAgICAgZWxlbWVudCA9IF9yZWYuZWxlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYucGxhY2VtZW50O1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IHBsYWNlbWVudCA/IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciB2YXJpYXRpb24gPSBwbGFjZW1lbnQgPyBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciBjb21tb25YID0gcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGggLyAyIC0gZWxlbWVudC53aWR0aCAvIDI7XG4gIHZhciBjb21tb25ZID0gcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0IC8gMiAtIGVsZW1lbnQuaGVpZ2h0IC8gMjtcbiAgdmFyIG9mZnNldHM7XG5cbiAgc3dpdGNoIChiYXNlUGxhY2VtZW50KSB7XG4gICAgY2FzZSB0b3A6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiBjb21tb25YLFxuICAgICAgICB5OiByZWZlcmVuY2UueSAtIGVsZW1lbnQuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGJvdHRvbTpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55ICsgcmVmZXJlbmNlLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSByaWdodDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54ICsgcmVmZXJlbmNlLndpZHRoLFxuICAgICAgICB5OiBjb21tb25ZXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGxlZnQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCAtIGVsZW1lbnQud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnlcbiAgICAgIH07XG4gIH1cblxuICB2YXIgbWFpbkF4aXMgPSBiYXNlUGxhY2VtZW50ID8gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpIDogbnVsbDtcblxuICBpZiAobWFpbkF4aXMgIT0gbnVsbCkge1xuICAgIHZhciBsZW4gPSBtYWluQXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgc3dpdGNoICh2YXJpYXRpb24pIHtcbiAgICAgIGNhc2Ugc3RhcnQ6XG4gICAgICAgIG9mZnNldHNbbWFpbkF4aXNdID0gb2Zmc2V0c1ttYWluQXhpc10gLSAocmVmZXJlbmNlW2xlbl0gLyAyIC0gZWxlbWVudFtsZW5dIC8gMik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGVuZDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSArIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9mZnNldHM7XG59IiwiaW1wb3J0IGdldENsaXBwaW5nUmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENsaXBwaW5nUmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBjbGlwcGluZ1BhcmVudHMsIHJlZmVyZW5jZSwgcG9wcGVyLCBib3R0b20sIHRvcCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi9leHBhbmRUb0hhc2hNYXAuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zJHBsYWNlbWVudCA9PT0gdm9pZCAwID8gc3RhdGUucGxhY2VtZW50IDogX29wdGlvbnMkcGxhY2VtZW50LFxuICAgICAgX29wdGlvbnMkc3RyYXRlZ3kgPSBfb3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIHN0cmF0ZWd5ID0gX29wdGlvbnMkc3RyYXRlZ3kgPT09IHZvaWQgMCA/IHN0YXRlLnN0cmF0ZWd5IDogX29wdGlvbnMkc3RyYXRlZ3ksXG4gICAgICBfb3B0aW9ucyRib3VuZGFyeSA9IF9vcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucyRib3VuZGFyeSA9PT0gdm9pZCAwID8gY2xpcHBpbmdQYXJlbnRzIDogX29wdGlvbnMkYm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRyb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucyRyb290Qm91bmRhcnkgPT09IHZvaWQgMCA/IHZpZXdwb3J0IDogX29wdGlvbnMkcm9vdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZWxlbWVudENvbnRlID0gX29wdGlvbnMuZWxlbWVudENvbnRleHQsXG4gICAgICBlbGVtZW50Q29udGV4dCA9IF9vcHRpb25zJGVsZW1lbnRDb250ZSA9PT0gdm9pZCAwID8gcG9wcGVyIDogX29wdGlvbnMkZWxlbWVudENvbnRlLFxuICAgICAgX29wdGlvbnMkYWx0Qm91bmRhcnkgPSBfb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMkYWx0Qm91bmRhcnkgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGlvbnMkYWx0Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucyRwYWRkaW5nID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkcGFkZGluZztcbiAgdmFyIHBhZGRpbmdPYmplY3QgPSBtZXJnZVBhZGRpbmdPYmplY3QodHlwZW9mIHBhZGRpbmcgIT09ICdudW1iZXInID8gcGFkZGluZyA6IGV4cGFuZFRvSGFzaE1hcChwYWRkaW5nLCBiYXNlUGxhY2VtZW50cykpO1xuICB2YXIgYWx0Q29udGV4dCA9IGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgPyByZWZlcmVuY2UgOiBwb3BwZXI7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW2FsdEJvdW5kYXJ5ID8gYWx0Q29udGV4dCA6IGVsZW1lbnRDb250ZXh0XTtcbiAgdmFyIGNsaXBwaW5nQ2xpZW50UmVjdCA9IGdldENsaXBwaW5nUmVjdChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50IDogZWxlbWVudC5jb250ZXh0RWxlbWVudCB8fCBnZXREb2N1bWVudEVsZW1lbnQoc3RhdGUuZWxlbWVudHMucG9wcGVyKSwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpO1xuICB2YXIgcmVmZXJlbmNlQ2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzdGF0ZS5lbGVtZW50cy5yZWZlcmVuY2UpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgZWxlbWVudDogcG9wcGVyUmVjdCxcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KTtcbiAgdmFyIHBvcHBlckNsaWVudFJlY3QgPSByZWN0VG9DbGllbnRSZWN0KE9iamVjdC5hc3NpZ24oe30sIHBvcHBlclJlY3QsIHBvcHBlck9mZnNldHMpKTtcbiAgdmFyIGVsZW1lbnRDbGllbnRSZWN0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHBvcHBlckNsaWVudFJlY3QgOiByZWZlcmVuY2VDbGllbnRSZWN0OyAvLyBwb3NpdGl2ZSA9IG92ZXJmbG93aW5nIHRoZSBjbGlwcGluZyByZWN0XG4gIC8vIDAgb3IgbmVnYXRpdmUgPSB3aXRoaW4gdGhlIGNsaXBwaW5nIHJlY3RcblxuICB2YXIgb3ZlcmZsb3dPZmZzZXRzID0ge1xuICAgIHRvcDogY2xpcHBpbmdDbGllbnRSZWN0LnRvcCAtIGVsZW1lbnRDbGllbnRSZWN0LnRvcCArIHBhZGRpbmdPYmplY3QudG9wLFxuICAgIGJvdHRvbTogZWxlbWVudENsaWVudFJlY3QuYm90dG9tIC0gY2xpcHBpbmdDbGllbnRSZWN0LmJvdHRvbSArIHBhZGRpbmdPYmplY3QuYm90dG9tLFxuICAgIGxlZnQ6IGNsaXBwaW5nQ2xpZW50UmVjdC5sZWZ0IC0gZWxlbWVudENsaWVudFJlY3QubGVmdCArIHBhZGRpbmdPYmplY3QubGVmdCxcbiAgICByaWdodDogZWxlbWVudENsaWVudFJlY3QucmlnaHQgLSBjbGlwcGluZ0NsaWVudFJlY3QucmlnaHQgKyBwYWRkaW5nT2JqZWN0LnJpZ2h0XG4gIH07XG4gIHZhciBvZmZzZXREYXRhID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQ7IC8vIE9mZnNldHMgY2FuIGJlIGFwcGxpZWQgb25seSB0byB0aGUgcG9wcGVyIGVsZW1lbnRcblxuICBpZiAoZWxlbWVudENvbnRleHQgPT09IHBvcHBlciAmJiBvZmZzZXREYXRhKSB7XG4gICAgdmFyIG9mZnNldCA9IG9mZnNldERhdGFbcGxhY2VtZW50XTtcbiAgICBPYmplY3Qua2V5cyhvdmVyZmxvd09mZnNldHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIG11bHRpcGx5ID0gW3JpZ2h0LCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gMSA6IC0xO1xuICAgICAgdmFyIGF4aXMgPSBbdG9wLCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gJ3knIDogJ3gnO1xuICAgICAgb3ZlcmZsb3dPZmZzZXRzW2tleV0gKz0gb2Zmc2V0W2F4aXNdICogbXVsdGlwbHk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3ZlcmZsb3dPZmZzZXRzO1xufSIsImltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4vZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyB2YXJpYXRpb25QbGFjZW1lbnRzLCBiYXNlUGxhY2VtZW50cywgcGxhY2VtZW50cyBhcyBhbGxQbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgcGxhY2VtZW50ID0gX29wdGlvbnMucGxhY2VtZW50LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnMgPSBfb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9IF9vcHRpb25zLmFsbG93ZWRBdXRvUGxhY2VtZW50cyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9PT0gdm9pZCAwID8gYWxsUGxhY2VtZW50cyA6IF9vcHRpb25zJGFsbG93ZWRBdXRvUDtcbiAgdmFyIHZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpO1xuICB2YXIgcGxhY2VtZW50cyA9IHZhcmlhdGlvbiA/IGZsaXBWYXJpYXRpb25zID8gdmFyaWF0aW9uUGxhY2VtZW50cyA6IHZhcmlhdGlvblBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgPT09IHZhcmlhdGlvbjtcbiAgfSkgOiBiYXNlUGxhY2VtZW50cztcbiAgdmFyIGFsbG93ZWRQbGFjZW1lbnRzID0gcGxhY2VtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhbGxvd2VkQXV0b1BsYWNlbWVudHMuaW5kZXhPZihwbGFjZW1lbnQpID49IDA7XG4gIH0pO1xuXG4gIGlmIChhbGxvd2VkUGxhY2VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHM7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFsnUG9wcGVyOiBUaGUgYGFsbG93ZWRBdXRvUGxhY2VtZW50c2Agb3B0aW9uIGRpZCBub3QgYWxsb3cgYW55JywgJ3BsYWNlbWVudHMuIEVuc3VyZSB0aGUgYHBsYWNlbWVudGAgb3B0aW9uIG1hdGNoZXMgdGhlIHZhcmlhdGlvbicsICdvZiB0aGUgYWxsb3dlZCBwbGFjZW1lbnRzLicsICdGb3IgZXhhbXBsZSwgXCJhdXRvXCIgY2Fubm90IGJlIHVzZWQgdG8gYWxsb3cgXCJib3R0b20tc3RhcnRcIi4nLCAnVXNlIFwiYXV0by1zdGFydFwiIGluc3RlYWQuJ10uam9pbignICcpKTtcbiAgICB9XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV06IEZsb3cgc2VlbXMgdG8gaGF2ZSBwcm9ibGVtcyB3aXRoIHR3byBhcnJheSB1bmlvbnMuLi5cblxuXG4gIHZhciBvdmVyZmxvd3MgPSBhbGxvd2VkUGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgYWNjW3BsYWNlbWVudF0gPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KVtnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCldO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG92ZXJmbG93cykuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBvdmVyZmxvd3NbYV0gLSBvdmVyZmxvd3NbYl07XG4gIH0pO1xufSIsImltcG9ydCBnZXRPcHBvc2l0ZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgY29tcHV0ZUF1dG9QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVBdXRvUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyBib3R0b20sIHRvcCwgc3RhcnQsIHJpZ2h0LCBsZWZ0LCBhdXRvIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5mdW5jdGlvbiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwbGFjZW1lbnQpIHtcbiAgaWYgKGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0bykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHZhciBvcHBvc2l0ZVBsYWNlbWVudCA9IGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHJldHVybiBbZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSwgb3Bwb3NpdGVQbGFjZW1lbnQsIGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KG9wcG9zaXRlUGxhY2VtZW50KV07XG59XG5cbmZ1bmN0aW9uIGZsaXAoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgPSBvcHRpb25zLmZhbGxiYWNrUGxhY2VtZW50cyxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9IG9wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBmbGlwVmFyaWF0aW9ucyA9IF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGZsaXBWYXJpYXRpbyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IG9wdGlvbnMuYWxsb3dlZEF1dG9QbGFjZW1lbnRzO1xuICB2YXIgcHJlZmVycmVkUGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwcmVmZXJyZWRQbGFjZW1lbnQpO1xuICB2YXIgaXNCYXNlUGxhY2VtZW50ID0gYmFzZVBsYWNlbWVudCA9PT0gcHJlZmVycmVkUGxhY2VtZW50O1xuICB2YXIgZmFsbGJhY2tQbGFjZW1lbnRzID0gc3BlY2lmaWVkRmFsbGJhY2tQbGFjZW1lbnRzIHx8IChpc0Jhc2VQbGFjZW1lbnQgfHwgIWZsaXBWYXJpYXRpb25zID8gW2dldE9wcG9zaXRlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCldIDogZ2V0RXhwYW5kZWRGYWxsYmFja1BsYWNlbWVudHMocHJlZmVycmVkUGxhY2VtZW50KSk7XG4gIHZhciBwbGFjZW1lbnRzID0gW3ByZWZlcnJlZFBsYWNlbWVudF0uY29uY2F0KGZhbGxiYWNrUGxhY2VtZW50cykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0byA/IGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zOiBmbGlwVmFyaWF0aW9ucyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50czogYWxsb3dlZEF1dG9QbGFjZW1lbnRzXG4gICAgfSkgOiBwbGFjZW1lbnQpO1xuICB9LCBbXSk7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGNoZWNrc01hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIG1ha2VGYWxsYmFja0NoZWNrcyA9IHRydWU7XG4gIHZhciBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzWzBdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGxhY2VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwbGFjZW1lbnQgPSBwbGFjZW1lbnRzW2ldO1xuXG4gICAgdmFyIF9iYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuXG4gICAgdmFyIGlzU3RhcnRWYXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA9PT0gc3RhcnQ7XG4gICAgdmFyIGlzVmVydGljYWwgPSBbdG9wLCBib3R0b21dLmluZGV4T2YoX2Jhc2VQbGFjZW1lbnQpID49IDA7XG4gICAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnd2lkdGgnIDogJ2hlaWdodCc7XG4gICAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSk7XG4gICAgdmFyIG1haW5WYXJpYXRpb25TaWRlID0gaXNWZXJ0aWNhbCA/IGlzU3RhcnRWYXJpYXRpb24gPyByaWdodCA6IGxlZnQgOiBpc1N0YXJ0VmFyaWF0aW9uID8gYm90dG9tIDogdG9wO1xuXG4gICAgaWYgKHJlZmVyZW5jZVJlY3RbbGVuXSA+IHBvcHBlclJlY3RbbGVuXSkge1xuICAgICAgbWFpblZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgfVxuXG4gICAgdmFyIGFsdFZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgdmFyIGNoZWNrcyA9IFtdO1xuXG4gICAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W19iYXNlUGxhY2VtZW50XSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgICBjaGVja3MucHVzaChvdmVyZmxvd1ttYWluVmFyaWF0aW9uU2lkZV0gPD0gMCwgb3ZlcmZsb3dbYWx0VmFyaWF0aW9uU2lkZV0gPD0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGNoZWNrcy5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgIHJldHVybiBjaGVjaztcbiAgICB9KSkge1xuICAgICAgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50O1xuICAgICAgbWFrZUZhbGxiYWNrQ2hlY2tzID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjaGVja3NNYXAuc2V0KHBsYWNlbWVudCwgY2hlY2tzKTtcbiAgfVxuXG4gIGlmIChtYWtlRmFsbGJhY2tDaGVja3MpIHtcbiAgICAvLyBgMmAgbWF5IGJlIGRlc2lyZWQgaW4gc29tZSBjYXNlcyDigJMgcmVzZWFyY2ggbGF0ZXJcbiAgICB2YXIgbnVtYmVyT2ZDaGVja3MgPSBmbGlwVmFyaWF0aW9ucyA/IDMgOiAxO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2kpIHtcbiAgICAgIHZhciBmaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50cy5maW5kKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICAgICAgdmFyIGNoZWNrcyA9IGNoZWNrc01hcC5nZXQocGxhY2VtZW50KTtcblxuICAgICAgICBpZiAoY2hlY2tzKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrcy5zbGljZSgwLCBfaSkuZXZlcnkoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZml0dGluZ1BsYWNlbWVudCkge1xuICAgICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBmaXR0aW5nUGxhY2VtZW50O1xuICAgICAgICByZXR1cm4gXCJicmVha1wiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBfaSA9IG51bWJlck9mQ2hlY2tzOyBfaSA+IDA7IF9pLS0pIHtcbiAgICAgIHZhciBfcmV0ID0gX2xvb3AoX2kpO1xuXG4gICAgICBpZiAoX3JldCA9PT0gXCJicmVha1wiKSBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUucGxhY2VtZW50ICE9PSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQpIHtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdLl9za2lwID0gdHJ1ZTtcbiAgICBzdGF0ZS5wbGFjZW1lbnQgPSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgc3RhdGUucmVzZXQgPSB0cnVlO1xuICB9XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdmbGlwJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IGZsaXAsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsnb2Zmc2V0J10sXG4gIGRhdGE6IHtcbiAgICBfc2tpcDogZmFsc2VcbiAgfVxufTsiLCJpbXBvcnQgeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcblxuZnVuY3Rpb24gZ2V0U2lkZU9mZnNldHMob3ZlcmZsb3csIHJlY3QsIHByZXZlbnRlZE9mZnNldHMpIHtcbiAgaWYgKHByZXZlbnRlZE9mZnNldHMgPT09IHZvaWQgMCkge1xuICAgIHByZXZlbnRlZE9mZnNldHMgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogb3ZlcmZsb3cudG9wIC0gcmVjdC5oZWlnaHQgLSBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgcmlnaHQ6IG92ZXJmbG93LnJpZ2h0IC0gcmVjdC53aWR0aCArIHByZXZlbnRlZE9mZnNldHMueCxcbiAgICBib3R0b206IG92ZXJmbG93LmJvdHRvbSAtIHJlY3QuaGVpZ2h0ICsgcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIGxlZnQ6IG92ZXJmbG93LmxlZnQgLSByZWN0LndpZHRoIC0gcHJldmVudGVkT2Zmc2V0cy54XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChvdmVyZmxvdykge1xuICByZXR1cm4gW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0uc29tZShmdW5jdGlvbiAoc2lkZSkge1xuICAgIHJldHVybiBvdmVyZmxvd1tzaWRlXSA+PSAwO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGlkZShfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBwcmV2ZW50ZWRPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wcmV2ZW50T3ZlcmZsb3c7XG4gIHZhciByZWZlcmVuY2VPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgZWxlbWVudENvbnRleHQ6ICdyZWZlcmVuY2UnXG4gIH0pO1xuICB2YXIgcG9wcGVyQWx0T3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGFsdEJvdW5kYXJ5OiB0cnVlXG4gIH0pO1xuICB2YXIgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocmVmZXJlbmNlT3ZlcmZsb3csIHJlZmVyZW5jZVJlY3QpO1xuICB2YXIgcG9wcGVyRXNjYXBlT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHBvcHBlckFsdE92ZXJmbG93LCBwb3BwZXJSZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKTtcbiAgdmFyIGlzUmVmZXJlbmNlSGlkZGVuID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyk7XG4gIHZhciBoYXNQb3BwZXJFc2NhcGVkID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHBvcHBlckVzY2FwZU9mZnNldHMpO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0ge1xuICAgIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0czogcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzLFxuICAgIHBvcHBlckVzY2FwZU9mZnNldHM6IHBvcHBlckVzY2FwZU9mZnNldHMsXG4gICAgaXNSZWZlcmVuY2VIaWRkZW46IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgIGhhc1BvcHBlckVzY2FwZWQ6IGhhc1BvcHBlckVzY2FwZWRcbiAgfTtcbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1yZWZlcmVuY2UtaGlkZGVuJzogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgJ2RhdGEtcG9wcGVyLWVzY2FwZWQnOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnaGlkZScsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J10sXG4gIGZuOiBoaWRlXG59OyIsImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBwbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgcmVjdHMsIG9mZnNldCkge1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgdmFyIGludmVydERpc3RhbmNlID0gW2xlZnQsIHRvcF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwID8gLTEgOiAxO1xuXG4gIHZhciBfcmVmID0gdHlwZW9mIG9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IG9mZnNldChPYmplY3QuYXNzaWduKHt9LCByZWN0cywge1xuICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gIH0pKSA6IG9mZnNldCxcbiAgICAgIHNraWRkaW5nID0gX3JlZlswXSxcbiAgICAgIGRpc3RhbmNlID0gX3JlZlsxXTtcblxuICBza2lkZGluZyA9IHNraWRkaW5nIHx8IDA7XG4gIGRpc3RhbmNlID0gKGRpc3RhbmNlIHx8IDApICogaW52ZXJ0RGlzdGFuY2U7XG4gIHJldHVybiBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IHtcbiAgICB4OiBkaXN0YW5jZSxcbiAgICB5OiBza2lkZGluZ1xuICB9IDoge1xuICAgIHg6IHNraWRkaW5nLFxuICAgIHk6IGRpc3RhbmNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIG9mZnNldChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmMi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYyLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRvZmZzZXQgPSBvcHRpb25zLm9mZnNldCxcbiAgICAgIG9mZnNldCA9IF9vcHRpb25zJG9mZnNldCA9PT0gdm9pZCAwID8gWzAsIDBdIDogX29wdGlvbnMkb2Zmc2V0O1xuICB2YXIgZGF0YSA9IHBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGlzdGFuY2VBbmRTa2lkZGluZ1RvWFkocGxhY2VtZW50LCBzdGF0ZS5yZWN0cywgb2Zmc2V0KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHZhciBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQgPSBkYXRhW3N0YXRlLnBsYWNlbWVudF0sXG4gICAgICB4ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50LngsXG4gICAgICB5ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50Lnk7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnggKz0geDtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueSArPSB5O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdvZmZzZXQnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIGZuOiBvZmZzZXRcbn07IiwiaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuLi91dGlscy9jb21wdXRlT2Zmc2V0cy5qc1wiO1xuXG5mdW5jdGlvbiBwb3BwZXJPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIC8vIE9mZnNldHMgYXJlIHRoZSBhY3R1YWwgcG9zaXRpb24gdGhlIHBvcHBlciBuZWVkcyB0byBoYXZlIHRvIGJlXG4gIC8vIHByb3Blcmx5IHBvc2l0aW9uZWQgbmVhciBpdHMgcmVmZXJlbmNlIGVsZW1lbnRcbiAgLy8gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBwbGFjZW1lbnQsIGFuZCB3aWxsIGJlIGFkanVzdGVkIGJ5XG4gIC8vIHRoZSBtb2RpZmllcnMgaW4gdGhlIG5leHQgc3RlcFxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gY29tcHV0ZU9mZnNldHMoe1xuICAgIHJlZmVyZW5jZTogc3RhdGUucmVjdHMucmVmZXJlbmNlLFxuICAgIGVsZW1lbnQ6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3BvcHBlck9mZnNldHMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3JlYWQnLFxuICBmbjogcG9wcGVyT2Zmc2V0cyxcbiAgZGF0YToge31cbn07IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QWx0QXhpcyhheGlzKSB7XG4gIHJldHVybiBheGlzID09PSAneCcgPyAneScgOiAneCc7XG59IiwiaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCBzdGFydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEFsdEF4aXMgZnJvbSBcIi4uL3V0aWxzL2dldEFsdEF4aXMuanNcIjtcbmltcG9ydCB7IHdpdGhpbiwgd2l0aGluTWF4Q2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvd2l0aGluLmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi4vdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBtaW4gYXMgbWF0aE1pbiwgbWF4IGFzIG1hdGhNYXggfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBwcmV2ZW50T3ZlcmZsb3coX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXIgPSBvcHRpb25zLnRldGhlcixcbiAgICAgIHRldGhlciA9IF9vcHRpb25zJHRldGhlciA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHRldGhlcixcbiAgICAgIF9vcHRpb25zJHRldGhlck9mZnNldCA9IG9wdGlvbnMudGV0aGVyT2Zmc2V0LFxuICAgICAgdGV0aGVyT2Zmc2V0ID0gX29wdGlvbnMkdGV0aGVyT2Zmc2V0ID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkdGV0aGVyT2Zmc2V0O1xuICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeVxuICB9KTtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24oc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIGlzQmFzZVBsYWNlbWVudCA9ICF2YXJpYXRpb247XG4gIHZhciBtYWluQXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGFsdEF4aXMgPSBnZXRBbHRBeGlzKG1haW5BeGlzKTtcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIHRldGhlck9mZnNldFZhbHVlID0gdHlwZW9mIHRldGhlck9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IHRldGhlck9mZnNldChPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5yZWN0cywge1xuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pKSA6IHRldGhlck9mZnNldDtcbiAgdmFyIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXRWYWx1ZSA9PT0gJ251bWJlcicgPyB7XG4gICAgbWFpbkF4aXM6IHRldGhlck9mZnNldFZhbHVlLFxuICAgIGFsdEF4aXM6IHRldGhlck9mZnNldFZhbHVlXG4gIH0gOiBPYmplY3QuYXNzaWduKHtcbiAgICBtYWluQXhpczogMCxcbiAgICBhbHRBeGlzOiAwXG4gIH0sIHRldGhlck9mZnNldFZhbHVlKTtcbiAgdmFyIG9mZnNldE1vZGlmaWVyU3RhdGUgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldCA/IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0W3N0YXRlLnBsYWNlbWVudF0gOiBudWxsO1xuICB2YXIgZGF0YSA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBpZiAoIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQ7XG5cbiAgICB2YXIgbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gdG9wIDogbGVmdDtcbiAgICB2YXIgYWx0U2lkZSA9IG1haW5BeGlzID09PSAneScgPyBib3R0b20gOiByaWdodDtcbiAgICB2YXIgbGVuID0gbWFpbkF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICB2YXIgb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1ttYWluQXhpc107XG4gICAgdmFyIG1pbiA9IG9mZnNldCArIG92ZXJmbG93W21haW5TaWRlXTtcbiAgICB2YXIgbWF4ID0gb2Zmc2V0IC0gb3ZlcmZsb3dbYWx0U2lkZV07XG4gICAgdmFyIGFkZGl0aXZlID0gdGV0aGVyID8gLXBvcHBlclJlY3RbbGVuXSAvIDIgOiAwO1xuICAgIHZhciBtaW5MZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gcmVmZXJlbmNlUmVjdFtsZW5dIDogcG9wcGVyUmVjdFtsZW5dO1xuICAgIHZhciBtYXhMZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gLXBvcHBlclJlY3RbbGVuXSA6IC1yZWZlcmVuY2VSZWN0W2xlbl07IC8vIFdlIG5lZWQgdG8gaW5jbHVkZSB0aGUgYXJyb3cgaW4gdGhlIGNhbGN1bGF0aW9uIHNvIHRoZSBhcnJvdyBkb2Vzbid0IGdvXG4gICAgLy8gb3V0c2lkZSB0aGUgcmVmZXJlbmNlIGJvdW5kc1xuXG4gICAgdmFyIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93O1xuICAgIHZhciBhcnJvd1JlY3QgPSB0ZXRoZXIgJiYgYXJyb3dFbGVtZW50ID8gZ2V0TGF5b3V0UmVjdChhcnJvd0VsZW1lbnQpIDoge1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICAgIHZhciBhcnJvd1BhZGRpbmdPYmplY3QgPSBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10gPyBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10ucGFkZGluZyA6IGdldEZyZXNoU2lkZU9iamVjdCgpO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNaW4gPSBhcnJvd1BhZGRpbmdPYmplY3RbbWFpblNpZGVdO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNYXggPSBhcnJvd1BhZGRpbmdPYmplY3RbYWx0U2lkZV07IC8vIElmIHRoZSByZWZlcmVuY2UgbGVuZ3RoIGlzIHNtYWxsZXIgdGhhbiB0aGUgYXJyb3cgbGVuZ3RoLCB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gaW5jbHVkZSBpdHMgZnVsbCBzaXplIGluIHRoZSBjYWxjdWxhdGlvbi4gSWYgdGhlIHJlZmVyZW5jZSBpcyBzbWFsbFxuICAgIC8vIGFuZCBuZWFyIHRoZSBlZGdlIG9mIGEgYm91bmRhcnksIHRoZSBwb3BwZXIgY2FuIG92ZXJmbG93IGV2ZW4gaWYgdGhlXG4gICAgLy8gcmVmZXJlbmNlIGlzIG5vdCBvdmVyZmxvd2luZyBhcyB3ZWxsIChlLmcuIHZpcnR1YWwgZWxlbWVudHMgd2l0aCBub1xuICAgIC8vIHdpZHRoIG9yIGhlaWdodClcblxuICAgIHZhciBhcnJvd0xlbiA9IHdpdGhpbigwLCByZWZlcmVuY2VSZWN0W2xlbl0sIGFycm93UmVjdFtsZW5dKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gcmVmZXJlbmNlUmVjdFtsZW5dIC8gMiAtIGFkZGl0aXZlIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXMgOiBtaW5MZW4gLSBhcnJvd0xlbiAtIGFycm93UGFkZGluZ01pbiAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcztcbiAgICB2YXIgbWF4T2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gLXJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgKyBhZGRpdGl2ZSArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWF4TGVuICsgYXJyb3dMZW4gKyBhcnJvd1BhZGRpbmdNYXggKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3cgJiYgZ2V0T2Zmc2V0UGFyZW50KHN0YXRlLmVsZW1lbnRzLmFycm93KTtcbiAgICB2YXIgY2xpZW50T2Zmc2V0ID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBtYWluQXhpcyA9PT0gJ3knID8gYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50VG9wIHx8IDAgOiBhcnJvd09mZnNldFBhcmVudC5jbGllbnRMZWZ0IHx8IDAgOiAwO1xuICAgIHZhciBvZmZzZXRNb2RpZmllclZhbHVlID0gKF9vZmZzZXRNb2RpZmllclN0YXRlJCA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbbWFpbkF4aXNdKSAhPSBudWxsID8gX29mZnNldE1vZGlmaWVyU3RhdGUkIDogMDtcbiAgICB2YXIgdGV0aGVyTWluID0gb2Zmc2V0ICsgbWluT2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZSAtIGNsaWVudE9mZnNldDtcbiAgICB2YXIgdGV0aGVyTWF4ID0gb2Zmc2V0ICsgbWF4T2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZTtcbiAgICB2YXIgcHJldmVudGVkT2Zmc2V0ID0gd2l0aGluKHRldGhlciA/IG1hdGhNaW4obWluLCB0ZXRoZXJNaW4pIDogbWluLCBvZmZzZXQsIHRldGhlciA/IG1hdGhNYXgobWF4LCB0ZXRoZXJNYXgpIDogbWF4KTtcbiAgICBwb3BwZXJPZmZzZXRzW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldDtcbiAgICBkYXRhW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldCAtIG9mZnNldDtcbiAgfVxuXG4gIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkMjtcblxuICAgIHZhciBfbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gdG9wIDogbGVmdDtcblxuICAgIHZhciBfYWx0U2lkZSA9IG1haW5BeGlzID09PSAneCcgPyBib3R0b20gOiByaWdodDtcblxuICAgIHZhciBfb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1thbHRBeGlzXTtcblxuICAgIHZhciBfbGVuID0gYWx0QXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgdmFyIF9taW4gPSBfb2Zmc2V0ICsgb3ZlcmZsb3dbX21haW5TaWRlXTtcblxuICAgIHZhciBfbWF4ID0gX29mZnNldCAtIG92ZXJmbG93W19hbHRTaWRlXTtcblxuICAgIHZhciBpc09yaWdpblNpZGUgPSBbdG9wLCBsZWZ0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpICE9PSAtMTtcblxuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyID0gb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogb2Zmc2V0TW9kaWZpZXJTdGF0ZVthbHRBeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJDIgOiAwO1xuXG4gICAgdmFyIF90ZXRoZXJNaW4gPSBpc09yaWdpblNpZGUgPyBfbWluIDogX29mZnNldCAtIHJlZmVyZW5jZVJlY3RbX2xlbl0gLSBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcztcblxuICAgIHZhciBfdGV0aGVyTWF4ID0gaXNPcmlnaW5TaWRlID8gX29mZnNldCArIHJlZmVyZW5jZVJlY3RbX2xlbl0gKyBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcyA6IF9tYXg7XG5cbiAgICB2YXIgX3ByZXZlbnRlZE9mZnNldCA9IHRldGhlciAmJiBpc09yaWdpblNpZGUgPyB3aXRoaW5NYXhDbGFtcChfdGV0aGVyTWluLCBfb2Zmc2V0LCBfdGV0aGVyTWF4KSA6IHdpdGhpbih0ZXRoZXIgPyBfdGV0aGVyTWluIDogX21pbiwgX29mZnNldCwgdGV0aGVyID8gX3RldGhlck1heCA6IF9tYXgpO1xuXG4gICAgcG9wcGVyT2Zmc2V0c1thbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVthbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQgLSBfb2Zmc2V0O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogcHJldmVudE92ZXJmbG93LFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ29mZnNldCddXG59OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEhUTUxFbGVtZW50U2Nyb2xsKGVsZW1lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBlbGVtZW50LnNjcm9sbExlZnQsXG4gICAgc2Nyb2xsVG9wOiBlbGVtZW50LnNjcm9sbFRvcFxuICB9O1xufSIsImltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRIVE1MRWxlbWVudFNjcm9sbCBmcm9tIFwiLi9nZXRIVE1MRWxlbWVudFNjcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZVNjcm9sbChub2RlKSB7XG4gIGlmIChub2RlID09PSBnZXRXaW5kb3cobm9kZSkgfHwgIWlzSFRNTEVsZW1lbnQobm9kZSkpIHtcbiAgICByZXR1cm4gZ2V0V2luZG93U2Nyb2xsKG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRIVE1MRWxlbWVudFNjcm9sbChub2RlKTtcbiAgfVxufSIsImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZVNjcm9sbCBmcm9tIFwiLi9nZXROb2RlU2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIGlzRWxlbWVudFNjYWxlZChlbGVtZW50KSB7XG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IHJvdW5kKHJlY3Qud2lkdGgpIC8gZWxlbWVudC5vZmZzZXRXaWR0aCB8fCAxO1xuICB2YXIgc2NhbGVZID0gcm91bmQocmVjdC5oZWlnaHQpIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQgfHwgMTtcbiAgcmV0dXJuIHNjYWxlWCAhPT0gMSB8fCBzY2FsZVkgIT09IDE7XG59IC8vIFJldHVybnMgdGhlIGNvbXBvc2l0ZSByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC5cbi8vIENvbXBvc2l0ZSBtZWFucyBpdCB0YWtlcyBpbnRvIGFjY291bnQgdHJhbnNmb3JtcyBhcyB3ZWxsIGFzIGxheW91dC5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wb3NpdGVSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnQsIGlzRml4ZWQpIHtcbiAgaWYgKGlzRml4ZWQgPT09IHZvaWQgMCkge1xuICAgIGlzRml4ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBpc09mZnNldFBhcmVudEFuRWxlbWVudCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudElzU2NhbGVkID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGlzRWxlbWVudFNjYWxlZChvZmZzZXRQYXJlbnQpO1xuICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZ2V0RG9jdW1lbnRFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnRJc1NjYWxlZCwgaXNGaXhlZCk7XG4gIHZhciBzY3JvbGwgPSB7XG4gICAgc2Nyb2xsTGVmdDogMCxcbiAgICBzY3JvbGxUb3A6IDBcbiAgfTtcbiAgdmFyIG9mZnNldHMgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50IHx8ICFpc09mZnNldFBhcmVudEFuRWxlbWVudCAmJiAhaXNGaXhlZCkge1xuICAgIGlmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpICE9PSAnYm9keScgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy8xMDc4XG4gICAgaXNTY3JvbGxQYXJlbnQoZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChvZmZzZXRQYXJlbnQpO1xuICAgIH1cblxuICAgIGlmIChpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCkpIHtcbiAgICAgIG9mZnNldHMgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qob2Zmc2V0UGFyZW50LCB0cnVlKTtcbiAgICAgIG9mZnNldHMueCArPSBvZmZzZXRQYXJlbnQuY2xpZW50TGVmdDtcbiAgICAgIG9mZnNldHMueSArPSBvZmZzZXRQYXJlbnQuY2xpZW50VG9wO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICBvZmZzZXRzLnggPSBnZXRXaW5kb3dTY3JvbGxCYXJYKGRvY3VtZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiByZWN0LmxlZnQgKyBzY3JvbGwuc2Nyb2xsTGVmdCAtIG9mZnNldHMueCxcbiAgICB5OiByZWN0LnRvcCArIHNjcm9sbC5zY3JvbGxUb3AgLSBvZmZzZXRzLnksXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodFxuICB9O1xufSIsImltcG9ydCB7IG1vZGlmaWVyUGhhc2VzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDk4NzUyNTVcblxuZnVuY3Rpb24gb3JkZXIobW9kaWZpZXJzKSB7XG4gIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gIHZhciB2aXNpdGVkID0gbmV3IFNldCgpO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIG1hcC5zZXQobW9kaWZpZXIubmFtZSwgbW9kaWZpZXIpO1xuICB9KTsgLy8gT24gdmlzaXRpbmcgb2JqZWN0LCBjaGVjayBmb3IgaXRzIGRlcGVuZGVuY2llcyBhbmQgdmlzaXQgdGhlbSByZWN1cnNpdmVseVxuXG4gIGZ1bmN0aW9uIHNvcnQobW9kaWZpZXIpIHtcbiAgICB2aXNpdGVkLmFkZChtb2RpZmllci5uYW1lKTtcbiAgICB2YXIgcmVxdWlyZXMgPSBbXS5jb25jYXQobW9kaWZpZXIucmVxdWlyZXMgfHwgW10sIG1vZGlmaWVyLnJlcXVpcmVzSWZFeGlzdHMgfHwgW10pO1xuICAgIHJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKGRlcCkge1xuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhkZXApKSB7XG4gICAgICAgIHZhciBkZXBNb2RpZmllciA9IG1hcC5nZXQoZGVwKTtcblxuICAgICAgICBpZiAoZGVwTW9kaWZpZXIpIHtcbiAgICAgICAgICBzb3J0KGRlcE1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJlc3VsdC5wdXNoKG1vZGlmaWVyKTtcbiAgfVxuXG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIGlmICghdmlzaXRlZC5oYXMobW9kaWZpZXIubmFtZSkpIHtcbiAgICAgIC8vIGNoZWNrIGZvciB2aXNpdGVkIG9iamVjdFxuICAgICAgc29ydChtb2RpZmllcik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3JkZXJNb2RpZmllcnMobW9kaWZpZXJzKSB7XG4gIC8vIG9yZGVyIGJhc2VkIG9uIGRlcGVuZGVuY2llc1xuICB2YXIgb3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyKG1vZGlmaWVycyk7IC8vIG9yZGVyIGJhc2VkIG9uIHBoYXNlXG5cbiAgcmV0dXJuIG1vZGlmaWVyUGhhc2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwaGFzZSkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9yZGVyZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgICAgcmV0dXJuIG1vZGlmaWVyLnBoYXNlID09PSBwaGFzZTtcbiAgICB9KSk7XG4gIH0sIFtdKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICB2YXIgcGVuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXBlbmRpbmcpIHtcbiAgICAgIHBlbmRpbmcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwZW5kaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc29sdmUoZm4oKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlbmRpbmc7XG4gIH07XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VCeU5hbWUobW9kaWZpZXJzKSB7XG4gIHZhciBtZXJnZWQgPSBtb2RpZmllcnMucmVkdWNlKGZ1bmN0aW9uIChtZXJnZWQsIGN1cnJlbnQpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBtZXJnZWRbY3VycmVudC5uYW1lXTtcbiAgICBtZXJnZWRbY3VycmVudC5uYW1lXSA9IGV4aXN0aW5nID8gT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcsIGN1cnJlbnQsIHtcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLm9wdGlvbnMsIGN1cnJlbnQub3B0aW9ucyksXG4gICAgICBkYXRhOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5kYXRhLCBjdXJyZW50LmRhdGEpXG4gICAgfSkgOiBjdXJyZW50O1xuICAgIHJldHVybiBtZXJnZWQ7XG4gIH0sIHt9KTsgLy8gSUUxMSBkb2VzIG5vdCBzdXBwb3J0IE9iamVjdC52YWx1ZXNcblxuICByZXR1cm4gT2JqZWN0LmtleXMobWVyZ2VkKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBtZXJnZWRba2V5XTtcbiAgfSk7XG59IiwiaW1wb3J0IGdldENvbXBvc2l0ZVJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldENvbXBvc2l0ZVJlY3QuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgb3JkZXJNb2RpZmllcnMgZnJvbSBcIi4vdXRpbHMvb3JkZXJNb2RpZmllcnMuanNcIjtcbmltcG9ydCBkZWJvdW5jZSBmcm9tIFwiLi91dGlscy9kZWJvdW5jZS5qc1wiO1xuaW1wb3J0IHZhbGlkYXRlTW9kaWZpZXJzIGZyb20gXCIuL3V0aWxzL3ZhbGlkYXRlTW9kaWZpZXJzLmpzXCI7XG5pbXBvcnQgdW5pcXVlQnkgZnJvbSBcIi4vdXRpbHMvdW5pcXVlQnkuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBtZXJnZUJ5TmFtZSBmcm9tIFwiLi91dGlscy9tZXJnZUJ5TmFtZS5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuL2VudW1zLmpzXCI7XG52YXIgSU5WQUxJRF9FTEVNRU5UX0VSUk9SID0gJ1BvcHBlcjogSW52YWxpZCByZWZlcmVuY2Ugb3IgcG9wcGVyIGFyZ3VtZW50IHByb3ZpZGVkLiBUaGV5IG11c3QgYmUgZWl0aGVyIGEgRE9NIGVsZW1lbnQgb3IgdmlydHVhbCBlbGVtZW50Lic7XG52YXIgSU5GSU5JVEVfTE9PUF9FUlJPUiA9ICdQb3BwZXI6IEFuIGluZmluaXRlIGxvb3AgaW4gdGhlIG1vZGlmaWVycyBjeWNsZSBoYXMgYmVlbiBkZXRlY3RlZCEgVGhlIGN5Y2xlIGhhcyBiZWVuIGludGVycnVwdGVkIHRvIHByZXZlbnQgYSBicm93c2VyIGNyYXNoLic7XG52YXIgREVGQVVMVF9PUFRJT05TID0ge1xuICBwbGFjZW1lbnQ6ICdib3R0b20nLFxuICBtb2RpZmllcnM6IFtdLFxuICBzdHJhdGVneTogJ2Fic29sdXRlJ1xufTtcblxuZnVuY3Rpb24gYXJlVmFsaWRFbGVtZW50cygpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiAhYXJncy5zb21lKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuICEoZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPT09ICdmdW5jdGlvbicpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvcHBlckdlbmVyYXRvcihnZW5lcmF0b3JPcHRpb25zKSB7XG4gIGlmIChnZW5lcmF0b3JPcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBnZW5lcmF0b3JPcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX2dlbmVyYXRvck9wdGlvbnMgPSBnZW5lcmF0b3JPcHRpb25zLFxuICAgICAgX2dlbmVyYXRvck9wdGlvbnMkZGVmID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE1vZGlmaWVycyxcbiAgICAgIGRlZmF1bHRNb2RpZmllcnMgPSBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPT09IHZvaWQgMCA/IFtdIDogX2dlbmVyYXRvck9wdGlvbnMkZGVmLFxuICAgICAgX2dlbmVyYXRvck9wdGlvbnMkZGVmMiA9IF9nZW5lcmF0b3JPcHRpb25zLmRlZmF1bHRPcHRpb25zLFxuICAgICAgZGVmYXVsdE9wdGlvbnMgPSBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID09PSB2b2lkIDAgPyBERUZBVUxUX09QVElPTlMgOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyO1xuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUG9wcGVyKHJlZmVyZW5jZSwgcG9wcGVyLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xuICAgIH1cblxuICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gICAgICBvcmRlcmVkTW9kaWZpZXJzOiBbXSxcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUywgZGVmYXVsdE9wdGlvbnMpLFxuICAgICAgbW9kaWZpZXJzRGF0YToge30sXG4gICAgICBlbGVtZW50czoge1xuICAgICAgICByZWZlcmVuY2U6IHJlZmVyZW5jZSxcbiAgICAgICAgcG9wcGVyOiBwb3BwZXJcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVzOiB7fSxcbiAgICAgIHN0eWxlczoge31cbiAgICB9O1xuICAgIHZhciBlZmZlY3RDbGVhbnVwRm5zID0gW107XG4gICAgdmFyIGlzRGVzdHJveWVkID0gZmFsc2U7XG4gICAgdmFyIGluc3RhbmNlID0ge1xuICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgc2V0T3B0aW9uczogZnVuY3Rpb24gc2V0T3B0aW9ucyhzZXRPcHRpb25zQWN0aW9uKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHNldE9wdGlvbnNBY3Rpb24gPT09ICdmdW5jdGlvbicgPyBzZXRPcHRpb25zQWN0aW9uKHN0YXRlLm9wdGlvbnMpIDogc2V0T3B0aW9uc0FjdGlvbjtcbiAgICAgICAgY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICBzdGF0ZS5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIHN0YXRlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICBzdGF0ZS5zY3JvbGxQYXJlbnRzID0ge1xuICAgICAgICAgIHJlZmVyZW5jZTogaXNFbGVtZW50KHJlZmVyZW5jZSkgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UpIDogcmVmZXJlbmNlLmNvbnRleHRFbGVtZW50ID8gbGlzdFNjcm9sbFBhcmVudHMocmVmZXJlbmNlLmNvbnRleHRFbGVtZW50KSA6IFtdLFxuICAgICAgICAgIHBvcHBlcjogbGlzdFNjcm9sbFBhcmVudHMocG9wcGVyKVxuICAgICAgICB9OyAvLyBPcmRlcnMgdGhlIG1vZGlmaWVycyBiYXNlZCBvbiB0aGVpciBkZXBlbmRlbmNpZXMgYW5kIGBwaGFzZWBcbiAgICAgICAgLy8gcHJvcGVydGllc1xuXG4gICAgICAgIHZhciBvcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJNb2RpZmllcnMobWVyZ2VCeU5hbWUoW10uY29uY2F0KGRlZmF1bHRNb2RpZmllcnMsIHN0YXRlLm9wdGlvbnMubW9kaWZpZXJzKSkpOyAvLyBTdHJpcCBvdXQgZGlzYWJsZWQgbW9kaWZpZXJzXG5cbiAgICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgcmV0dXJuIG0uZW5hYmxlZDtcbiAgICAgICAgfSk7IC8vIFZhbGlkYXRlIHRoZSBwcm92aWRlZCBtb2RpZmllcnMgc28gdGhhdCB0aGUgY29uc3VtZXIgd2lsbCBnZXQgd2FybmVkXG4gICAgICAgIC8vIGlmIG9uZSBvZiB0aGUgbW9kaWZpZXJzIGlzIGludmFsaWQgZm9yIGFueSByZWFzb25cblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgICAgdmFyIG1vZGlmaWVycyA9IHVuaXF1ZUJ5KFtdLmNvbmNhdChvcmRlcmVkTW9kaWZpZXJzLCBzdGF0ZS5vcHRpb25zLm1vZGlmaWVycyksIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYubmFtZTtcbiAgICAgICAgICAgIHJldHVybiBuYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhbGlkYXRlTW9kaWZpZXJzKG1vZGlmaWVycyk7XG5cbiAgICAgICAgICBpZiAoZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5vcHRpb25zLnBsYWNlbWVudCkgPT09IGF1dG8pIHtcbiAgICAgICAgICAgIHZhciBmbGlwTW9kaWZpZXIgPSBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZjIubmFtZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgPT09ICdmbGlwJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIWZsaXBNb2RpZmllcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFsnUG9wcGVyOiBcImF1dG9cIiBwbGFjZW1lbnRzIHJlcXVpcmUgdGhlIFwiZmxpcFwiIG1vZGlmaWVyIGJlJywgJ3ByZXNlbnQgYW5kIGVuYWJsZWQgdG8gd29yay4nXS5qb2luKCcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocG9wcGVyKSxcbiAgICAgICAgICAgICAgbWFyZ2luVG9wID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luVG9wLFxuICAgICAgICAgICAgICBtYXJnaW5SaWdodCA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpblJpZ2h0LFxuICAgICAgICAgICAgICBtYXJnaW5Cb3R0b20gPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5Cb3R0b20sXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5MZWZ0OyAvLyBXZSBubyBsb25nZXIgdGFrZSBpbnRvIGFjY291bnQgYG1hcmdpbnNgIG9uIHRoZSBwb3BwZXIsIGFuZCBpdCBjYW5cbiAgICAgICAgICAvLyBjYXVzZSBidWdzIHdpdGggcG9zaXRpb25pbmcsIHNvIHdlJ2xsIHdhcm4gdGhlIGNvbnN1bWVyXG5cblxuICAgICAgICAgIGlmIChbbWFyZ2luVG9wLCBtYXJnaW5SaWdodCwgbWFyZ2luQm90dG9tLCBtYXJnaW5MZWZ0XS5zb21lKGZ1bmN0aW9uIChtYXJnaW4pIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG1hcmdpbik7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihbJ1BvcHBlcjogQ1NTIFwibWFyZ2luXCIgc3R5bGVzIGNhbm5vdCBiZSB1c2VkIHRvIGFwcGx5IHBhZGRpbmcnLCAnYmV0d2VlbiB0aGUgcG9wcGVyIGFuZCBpdHMgcmVmZXJlbmNlIGVsZW1lbnQgb3IgYm91bmRhcnkuJywgJ1RvIHJlcGxpY2F0ZSBtYXJnaW4sIHVzZSB0aGUgYG9mZnNldGAgbW9kaWZpZXIsIGFzIHdlbGwgYXMnLCAndGhlIGBwYWRkaW5nYCBvcHRpb24gaW4gdGhlIGBwcmV2ZW50T3ZlcmZsb3dgIGFuZCBgZmxpcGAnLCAnbW9kaWZpZXJzLiddLmpvaW4oJyAnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcnVuTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAvLyBTeW5jIHVwZGF0ZSDigJMgaXQgd2lsbCBhbHdheXMgYmUgZXhlY3V0ZWQsIGV2ZW4gaWYgbm90IG5lY2Vzc2FyeS4gVGhpc1xuICAgICAgLy8gaXMgdXNlZnVsIGZvciBsb3cgZnJlcXVlbmN5IHVwZGF0ZXMgd2hlcmUgc3luYyBiZWhhdmlvciBzaW1wbGlmaWVzIHRoZVxuICAgICAgLy8gbG9naWMuXG4gICAgICAvLyBGb3IgaGlnaCBmcmVxdWVuY3kgdXBkYXRlcyAoZS5nLiBgcmVzaXplYCBhbmQgYHNjcm9sbGAgZXZlbnRzKSwgYWx3YXlzXG4gICAgICAvLyBwcmVmZXIgdGhlIGFzeW5jIFBvcHBlciN1cGRhdGUgbWV0aG9kXG4gICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoKSB7XG4gICAgICAgIGlmIChpc0Rlc3Ryb3llZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfc3RhdGUkZWxlbWVudHMgPSBzdGF0ZS5lbGVtZW50cyxcbiAgICAgICAgICAgIHJlZmVyZW5jZSA9IF9zdGF0ZSRlbGVtZW50cy5yZWZlcmVuY2UsXG4gICAgICAgICAgICBwb3BwZXIgPSBfc3RhdGUkZWxlbWVudHMucG9wcGVyOyAvLyBEb24ndCBwcm9jZWVkIGlmIGByZWZlcmVuY2VgIG9yIGBwb3BwZXJgIGFyZSBub3QgdmFsaWQgZWxlbWVudHNcbiAgICAgICAgLy8gYW55bW9yZVxuXG4gICAgICAgIGlmICghYXJlVmFsaWRFbGVtZW50cyhyZWZlcmVuY2UsIHBvcHBlcikpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKElOVkFMSURfRUxFTUVOVF9FUlJPUik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFN0b3JlIHRoZSByZWZlcmVuY2UgYW5kIHBvcHBlciByZWN0cyB0byBiZSByZWFkIGJ5IG1vZGlmaWVyc1xuXG5cbiAgICAgICAgc3RhdGUucmVjdHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBnZXRDb21wb3NpdGVSZWN0KHJlZmVyZW5jZSwgZ2V0T2Zmc2V0UGFyZW50KHBvcHBlciksIHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3kgPT09ICdmaXhlZCcpLFxuICAgICAgICAgIHBvcHBlcjogZ2V0TGF5b3V0UmVjdChwb3BwZXIpXG4gICAgICAgIH07IC8vIE1vZGlmaWVycyBoYXZlIHRoZSBhYmlsaXR5IHRvIHJlc2V0IHRoZSBjdXJyZW50IHVwZGF0ZSBjeWNsZS4gVGhlXG4gICAgICAgIC8vIG1vc3QgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIGlzIHRoZSBgZmxpcGAgbW9kaWZpZXIgY2hhbmdpbmcgdGhlXG4gICAgICAgIC8vIHBsYWNlbWVudCwgd2hpY2ggdGhlbiBuZWVkcyB0byByZS1ydW4gYWxsIHRoZSBtb2RpZmllcnMsIGJlY2F1c2UgdGhlXG4gICAgICAgIC8vIGxvZ2ljIHdhcyBwcmV2aW91c2x5IHJhbiBmb3IgdGhlIHByZXZpb3VzIHBsYWNlbWVudCBhbmQgaXMgdGhlcmVmb3JlXG4gICAgICAgIC8vIHN0YWxlL2luY29ycmVjdFxuXG4gICAgICAgIHN0YXRlLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnBsYWNlbWVudCA9IHN0YXRlLm9wdGlvbnMucGxhY2VtZW50OyAvLyBPbiBlYWNoIHVwZGF0ZSBjeWNsZSwgdGhlIGBtb2RpZmllcnNEYXRhYCBwcm9wZXJ0eSBmb3IgZWFjaCBtb2RpZmllclxuICAgICAgICAvLyBpcyBmaWxsZWQgd2l0aCB0aGUgaW5pdGlhbCBkYXRhIHNwZWNpZmllZCBieSB0aGUgbW9kaWZpZXIuIFRoaXMgbWVhbnNcbiAgICAgICAgLy8gaXQgZG9lc24ndCBwZXJzaXN0IGFuZCBpcyBmcmVzaCBvbiBlYWNoIHVwZGF0ZS5cbiAgICAgICAgLy8gVG8gZW5zdXJlIHBlcnNpc3RlbnQgZGF0YSwgdXNlIGAke25hbWV9I3BlcnNpc3RlbnRgXG5cbiAgICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgICAgICAgIHJldHVybiBzdGF0ZS5tb2RpZmllcnNEYXRhW21vZGlmaWVyLm5hbWVdID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kaWZpZXIuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgX19kZWJ1Z19sb29wc19fID0gMDtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgICAgICBfX2RlYnVnX2xvb3BzX18gKz0gMTtcblxuICAgICAgICAgICAgaWYgKF9fZGVidWdfbG9vcHNfXyA+IDEwMCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKElORklOSVRFX0xPT1BfRVJST1IpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3RhdGUucmVzZXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHN0YXRlLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9zdGF0ZSRvcmRlcmVkTW9kaWZpZSA9IHN0YXRlLm9yZGVyZWRNb2RpZmllcnNbaW5kZXhdLFxuICAgICAgICAgICAgICBmbiA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5mbixcbiAgICAgICAgICAgICAgX3N0YXRlJG9yZGVyZWRNb2RpZmllMiA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5vcHRpb25zLFxuICAgICAgICAgICAgICBfb3B0aW9ucyA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIgPT09IHZvaWQgMCA/IHt9IDogX3N0YXRlJG9yZGVyZWRNb2RpZmllMixcbiAgICAgICAgICAgICAgbmFtZSA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5uYW1lO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3RhdGUgPSBmbih7XG4gICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgICAgb3B0aW9uczogX29wdGlvbnMsXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZVxuICAgICAgICAgICAgfSkgfHwgc3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gQXN5bmMgYW5kIG9wdGltaXN0aWNhbGx5IG9wdGltaXplZCB1cGRhdGUg4oCTIGl0IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGlmXG4gICAgICAvLyBub3QgbmVjZXNzYXJ5IChkZWJvdW5jZWQgdG8gcnVuIGF0IG1vc3Qgb25jZS1wZXItdGljaylcbiAgICAgIHVwZGF0ZTogZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgIHJlc29sdmUoc3RhdGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICBpc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghYXJlVmFsaWRFbGVtZW50cyhyZWZlcmVuY2UsIHBvcHBlcikpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihJTlZBTElEX0VMRU1FTlRfRVJST1IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgaW5zdGFuY2Uuc2V0T3B0aW9ucyhvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgaWYgKCFpc0Rlc3Ryb3llZCAmJiBvcHRpb25zLm9uRmlyc3RVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5vbkZpcnN0VXBkYXRlKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gZXhlY3V0ZSBhcmJpdHJhcnkgY29kZSBiZWZvcmUgdGhlIGZpcnN0XG4gICAgLy8gdXBkYXRlIGN5Y2xlIHJ1bnMuIFRoZXkgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgdXBkYXRlXG4gICAgLy8gY3ljbGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gYSBtb2RpZmllciBhZGRzIHNvbWUgcGVyc2lzdGVudCBkYXRhIHRoYXRcbiAgICAvLyBvdGhlciBtb2RpZmllcnMgbmVlZCB0byB1c2UsIGJ1dCB0aGUgbW9kaWZpZXIgaXMgcnVuIGFmdGVyIHRoZSBkZXBlbmRlbnRcbiAgICAvLyBvbmUuXG5cbiAgICBmdW5jdGlvbiBydW5Nb2RpZmllckVmZmVjdHMoKSB7XG4gICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgIHZhciBuYW1lID0gX3JlZjMubmFtZSxcbiAgICAgICAgICAgIF9yZWYzJG9wdGlvbnMgPSBfcmVmMy5vcHRpb25zLFxuICAgICAgICAgICAgb3B0aW9ucyA9IF9yZWYzJG9wdGlvbnMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjMkb3B0aW9ucyxcbiAgICAgICAgICAgIGVmZmVjdCA9IF9yZWYzLmVmZmVjdDtcblxuICAgICAgICBpZiAodHlwZW9mIGVmZmVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciBjbGVhbnVwRm4gPSBlZmZlY3Qoe1xuICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHZhciBub29wRm4gPSBmdW5jdGlvbiBub29wRm4oKSB7fTtcblxuICAgICAgICAgIGVmZmVjdENsZWFudXBGbnMucHVzaChjbGVhbnVwRm4gfHwgbm9vcEZuKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpIHtcbiAgICAgIGVmZmVjdENsZWFudXBGbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICB9KTtcbiAgICAgIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG59XG5leHBvcnQgdmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3IoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBkZXRlY3RPdmVyZmxvdyB9OyIsImltcG9ydCB7IHBvcHBlckdlbmVyYXRvciwgZGV0ZWN0T3ZlcmZsb3cgfSBmcm9tIFwiLi9jcmVhdGVQb3BwZXIuanNcIjtcbmltcG9ydCBldmVudExpc3RlbmVycyBmcm9tIFwiLi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmltcG9ydCBwb3BwZXJPZmZzZXRzIGZyb20gXCIuL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzXCI7XG5pbXBvcnQgY29tcHV0ZVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qc1wiO1xuaW1wb3J0IGFwcGx5U3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9hcHBseVN0eWxlcy5qc1wiO1xudmFyIGRlZmF1bHRNb2RpZmllcnMgPSBbZXZlbnRMaXN0ZW5lcnMsIHBvcHBlck9mZnNldHMsIGNvbXB1dGVTdHlsZXMsIGFwcGx5U3R5bGVzXTtcbnZhciBjcmVhdGVQb3BwZXIgPSAvKiNfX1BVUkVfXyovcG9wcGVyR2VuZXJhdG9yKHtcbiAgZGVmYXVsdE1vZGlmaWVyczogZGVmYXVsdE1vZGlmaWVyc1xufSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IHsgY3JlYXRlUG9wcGVyLCBwb3BwZXJHZW5lcmF0b3IsIGRlZmF1bHRNb2RpZmllcnMsIGRldGVjdE92ZXJmbG93IH07IiwiaW1wb3J0IHsgcG9wcGVyR2VuZXJhdG9yLCBkZXRlY3RPdmVyZmxvdyB9IGZyb20gXCIuL2NyZWF0ZVBvcHBlci5qc1wiO1xuaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qc1wiO1xuaW1wb3J0IHBvcHBlck9mZnNldHMgZnJvbSBcIi4vbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanNcIjtcbmltcG9ydCBjb21wdXRlU3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9jb21wdXRlU3R5bGVzLmpzXCI7XG5pbXBvcnQgYXBwbHlTdHlsZXMgZnJvbSBcIi4vbW9kaWZpZXJzL2FwcGx5U3R5bGVzLmpzXCI7XG5pbXBvcnQgb2Zmc2V0IGZyb20gXCIuL21vZGlmaWVycy9vZmZzZXQuanNcIjtcbmltcG9ydCBmbGlwIGZyb20gXCIuL21vZGlmaWVycy9mbGlwLmpzXCI7XG5pbXBvcnQgcHJldmVudE92ZXJmbG93IGZyb20gXCIuL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBhcnJvdyBmcm9tIFwiLi9tb2RpZmllcnMvYXJyb3cuanNcIjtcbmltcG9ydCBoaWRlIGZyb20gXCIuL21vZGlmaWVycy9oaWRlLmpzXCI7XG52YXIgZGVmYXVsdE1vZGlmaWVycyA9IFtldmVudExpc3RlbmVycywgcG9wcGVyT2Zmc2V0cywgY29tcHV0ZVN0eWxlcywgYXBwbHlTdHlsZXMsIG9mZnNldCwgZmxpcCwgcHJldmVudE92ZXJmbG93LCBhcnJvdywgaGlkZV07XG52YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcih7XG4gIGRlZmF1bHRNb2RpZmllcnM6IGRlZmF1bHRNb2RpZmllcnNcbn0pOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciwgcG9wcGVyR2VuZXJhdG9yLCBkZWZhdWx0TW9kaWZpZXJzLCBkZXRlY3RPdmVyZmxvdyB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciBhcyBjcmVhdGVQb3BwZXJMaXRlIH0gZnJvbSBcIi4vcG9wcGVyLWxpdGUuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgKiBmcm9tIFwiLi9tb2RpZmllcnMvaW5kZXguanNcIjsiLCIvKiFcbiAgKiBCb290c3RyYXAgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdAcG9wcGVyanMvY29yZScpKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ0Bwb3BwZXJqcy9jb3JlJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLmJvb3RzdHJhcCA9IGZhY3RvcnkoZ2xvYmFsLlBvcHBlcikpO1xufSkodGhpcywgKGZ1bmN0aW9uIChQb3BwZXIpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIF9pbnRlcm9wTmFtZXNwYWNlKGUpIHtcbiAgICBpZiAoZSAmJiBlLl9fZXNNb2R1bGUpIHJldHVybiBlO1xuICAgIGNvbnN0IG4gPSBPYmplY3QuY3JlYXRlKG51bGwsIHsgW1N5bWJvbC50b1N0cmluZ1RhZ106IHsgdmFsdWU6ICdNb2R1bGUnIH0gfSk7XG4gICAgaWYgKGUpIHtcbiAgICAgIGZvciAoY29uc3QgayBpbiBlKSB7XG4gICAgICAgIGlmIChrICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICBjb25zdCBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBrKTtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgaywgZC5nZXQgPyBkIDoge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogKCkgPT4gZVtrXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG4uZGVmYXVsdCA9IGU7XG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUobik7XG4gIH1cblxuICBjb25zdCBQb3BwZXJfX25hbWVzcGFjZSA9IC8qI19fUFVSRV9fKi9faW50ZXJvcE5hbWVzcGFjZShQb3BwZXIpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IHV0aWwvaW5kZXguanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICBjb25zdCBNQVhfVUlEID0gMTAwMDAwMDtcbiAgY29uc3QgTUlMTElTRUNPTkRTX01VTFRJUExJRVIgPSAxMDAwO1xuICBjb25zdCBUUkFOU0lUSU9OX0VORCA9ICd0cmFuc2l0aW9uZW5kJzsgLy8gU2hvdXQtb3V0IEFuZ3VzIENyb2xsIChodHRwczovL2dvby5nbC9weHdRR3ApXG5cbiAgY29uc3QgdG9UeXBlID0gb2JqZWN0ID0+IHtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYCR7b2JqZWN0fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpLm1hdGNoKC9cXHMoW2Etel0rKS9pKVsxXS50b0xvd2VyQ2FzZSgpO1xuICB9O1xuICAvKipcbiAgICogUHVibGljIFV0aWwgQVBJXG4gICAqL1xuXG5cbiAgY29uc3QgZ2V0VUlEID0gcHJlZml4ID0+IHtcbiAgICBkbyB7XG4gICAgICBwcmVmaXggKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1VJRCk7XG4gICAgfSB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSk7XG5cbiAgICByZXR1cm4gcHJlZml4O1xuICB9O1xuXG4gIGNvbnN0IGdldFNlbGVjdG9yID0gZWxlbWVudCA9PiB7XG4gICAgbGV0IHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGFyZ2V0Jyk7XG5cbiAgICBpZiAoIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSAnIycpIHtcbiAgICAgIGxldCBocmVmQXR0cmlidXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTsgLy8gVGhlIG9ubHkgdmFsaWQgY29udGVudCB0aGF0IGNvdWxkIGRvdWJsZSBhcyBhIHNlbGVjdG9yIGFyZSBJRHMgb3IgY2xhc3NlcyxcbiAgICAgIC8vIHNvIGV2ZXJ5dGhpbmcgc3RhcnRpbmcgd2l0aCBgI2Agb3IgYC5gLiBJZiBhIFwicmVhbFwiIFVSTCBpcyB1c2VkIGFzIHRoZSBzZWxlY3RvcixcbiAgICAgIC8vIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yYCB3aWxsIHJpZ2h0ZnVsbHkgY29tcGxhaW4gaXQgaXMgaW52YWxpZC5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzMyMjczXG5cbiAgICAgIGlmICghaHJlZkF0dHJpYnV0ZSB8fCAhaHJlZkF0dHJpYnV0ZS5pbmNsdWRlcygnIycpICYmICFocmVmQXR0cmlidXRlLnN0YXJ0c1dpdGgoJy4nKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gLy8gSnVzdCBpbiBjYXNlIHNvbWUgQ01TIHB1dHMgb3V0IGEgZnVsbCBVUkwgd2l0aCB0aGUgYW5jaG9yIGFwcGVuZGVkXG5cblxuICAgICAgaWYgKGhyZWZBdHRyaWJ1dGUuaW5jbHVkZXMoJyMnKSAmJiAhaHJlZkF0dHJpYnV0ZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgaHJlZkF0dHJpYnV0ZSA9IGAjJHtocmVmQXR0cmlidXRlLnNwbGl0KCcjJylbMV19YDtcbiAgICAgIH1cblxuICAgICAgc2VsZWN0b3IgPSBocmVmQXR0cmlidXRlICYmIGhyZWZBdHRyaWJ1dGUgIT09ICcjJyA/IGhyZWZBdHRyaWJ1dGUudHJpbSgpIDogbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0b3I7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCA9IGVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gZ2V0U2VsZWN0b3IoZWxlbWVudCk7XG5cbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCBnZXRFbGVtZW50RnJvbVNlbGVjdG9yID0gZWxlbWVudCA9PiB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBnZXRTZWxlY3RvcihlbGVtZW50KTtcbiAgICByZXR1cm4gc2VsZWN0b3IgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA6IG51bGw7XG4gIH07XG5cbiAgY29uc3QgZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQgPSBlbGVtZW50ID0+IHtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gR2V0IHRyYW5zaXRpb24tZHVyYXRpb24gb2YgdGhlIGVsZW1lbnRcblxuXG4gICAgbGV0IHtcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgIHRyYW5zaXRpb25EZWxheVxuICAgIH0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICBjb25zdCBmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiA9IE51bWJlci5wYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgY29uc3QgZmxvYXRUcmFuc2l0aW9uRGVsYXkgPSBOdW1iZXIucGFyc2VGbG9hdCh0cmFuc2l0aW9uRGVsYXkpOyAvLyBSZXR1cm4gMCBpZiBlbGVtZW50IG9yIHRyYW5zaXRpb24gZHVyYXRpb24gaXMgbm90IGZvdW5kXG5cbiAgICBpZiAoIWZsb2F0VHJhbnNpdGlvbkR1cmF0aW9uICYmICFmbG9hdFRyYW5zaXRpb25EZWxheSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSAvLyBJZiBtdWx0aXBsZSBkdXJhdGlvbnMgYXJlIGRlZmluZWQsIHRha2UgdGhlIGZpcnN0XG5cblxuICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbi5zcGxpdCgnLCcpWzBdO1xuICAgIHRyYW5zaXRpb25EZWxheSA9IHRyYW5zaXRpb25EZWxheS5zcGxpdCgnLCcpWzBdO1xuICAgIHJldHVybiAoTnVtYmVyLnBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKSArIE51bWJlci5wYXJzZUZsb2F0KHRyYW5zaXRpb25EZWxheSkpICogTUlMTElTRUNPTkRTX01VTFRJUExJRVI7XG4gIH07XG5cbiAgY29uc3QgdHJpZ2dlclRyYW5zaXRpb25FbmQgPSBlbGVtZW50ID0+IHtcbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFRSQU5TSVRJT05fRU5EKSk7XG4gIH07XG5cbiAgY29uc3QgaXNFbGVtZW50ID0gb2JqZWN0ID0+IHtcbiAgICBpZiAoIW9iamVjdCB8fCB0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb2JqZWN0LmpxdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9iamVjdCA9IG9iamVjdFswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZW9mIG9iamVjdC5ub2RlVHlwZSAhPT0gJ3VuZGVmaW5lZCc7XG4gIH07XG5cbiAgY29uc3QgZ2V0RWxlbWVudCA9IG9iamVjdCA9PiB7XG4gICAgLy8gaXQncyBhIGpRdWVyeSBvYmplY3Qgb3IgYSBub2RlIGVsZW1lbnRcbiAgICBpZiAoaXNFbGVtZW50KG9iamVjdCkpIHtcbiAgICAgIHJldHVybiBvYmplY3QuanF1ZXJ5ID8gb2JqZWN0WzBdIDogb2JqZWN0O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnc3RyaW5nJyAmJiBvYmplY3QubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2JqZWN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCBpc1Zpc2libGUgPSBlbGVtZW50ID0+IHtcbiAgICBpZiAoIWlzRWxlbWVudChlbGVtZW50KSB8fCBlbGVtZW50LmdldENsaWVudFJlY3RzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudElzVmlzaWJsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgndmlzaWJpbGl0eScpID09PSAndmlzaWJsZSc7IC8vIEhhbmRsZSBgZGV0YWlsc2AgZWxlbWVudCBhcyBpdHMgY29udGVudCBtYXkgZmFsc2llIGFwcGVhciB2aXNpYmxlIHdoZW4gaXQgaXMgY2xvc2VkXG5cbiAgICBjb25zdCBjbG9zZWREZXRhaWxzID0gZWxlbWVudC5jbG9zZXN0KCdkZXRhaWxzOm5vdChbb3Blbl0pJyk7XG5cbiAgICBpZiAoIWNsb3NlZERldGFpbHMpIHtcbiAgICAgIHJldHVybiBlbGVtZW50SXNWaXNpYmxlO1xuICAgIH1cblxuICAgIGlmIChjbG9zZWREZXRhaWxzICE9PSBlbGVtZW50KSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gZWxlbWVudC5jbG9zZXN0KCdzdW1tYXJ5Jyk7XG5cbiAgICAgIGlmIChzdW1tYXJ5ICYmIHN1bW1hcnkucGFyZW50Tm9kZSAhPT0gY2xvc2VkRGV0YWlscykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdW1tYXJ5ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudElzVmlzaWJsZTtcbiAgfTtcblxuICBjb25zdCBpc0Rpc2FibGVkID0gZWxlbWVudCA9PiB7XG4gICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZWxlbWVudC5kaXNhYmxlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmRpc2FibGVkO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSAhPT0gJ2ZhbHNlJztcbiAgfTtcblxuICBjb25zdCBmaW5kU2hhZG93Um9vdCA9IGVsZW1lbnQgPT4ge1xuICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmF0dGFjaFNoYWRvdykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSAvLyBDYW4gZmluZCB0aGUgc2hhZG93IHJvb3Qgb3RoZXJ3aXNlIGl0J2xsIHJldHVybiB0aGUgZG9jdW1lbnRcblxuXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LmdldFJvb3ROb2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCByb290ID0gZWxlbWVudC5nZXRSb290Tm9kZSgpO1xuICAgICAgcmV0dXJuIHJvb3QgaW5zdGFuY2VvZiBTaGFkb3dSb290ID8gcm9vdCA6IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9IC8vIHdoZW4gd2UgZG9uJ3QgZmluZCBhIHNoYWRvdyByb290XG5cblxuICAgIGlmICghZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gZmluZFNoYWRvd1Jvb3QoZWxlbWVudC5wYXJlbnROb2RlKTtcbiAgfTtcblxuICBjb25zdCBub29wID0gKCkgPT4ge307XG4gIC8qKlxuICAgKiBUcmljayB0byByZXN0YXJ0IGFuIGVsZW1lbnQncyBhbmltYXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcmV0dXJuIHZvaWRcbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5jaGFyaXN0aGVvLmlvL2Jsb2cvMjAyMS8wMi9yZXN0YXJ0LWEtY3NzLWFuaW1hdGlvbi13aXRoLWphdmFzY3JpcHQvI3Jlc3RhcnRpbmctYS1jc3MtYW5pbWF0aW9uXG4gICAqL1xuXG5cbiAgY29uc3QgcmVmbG93ID0gZWxlbWVudCA9PiB7XG4gICAgZWxlbWVudC5vZmZzZXRIZWlnaHQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gIH07XG5cbiAgY29uc3QgZ2V0alF1ZXJ5ID0gKCkgPT4ge1xuICAgIGlmICh3aW5kb3cualF1ZXJ5ICYmICFkb2N1bWVudC5ib2R5Lmhhc0F0dHJpYnV0ZSgnZGF0YS1icy1uby1qcXVlcnknKSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5qUXVlcnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgRE9NQ29udGVudExvYWRlZENhbGxiYWNrcyA9IFtdO1xuXG4gIGNvbnN0IG9uRE9NQ29udGVudExvYWRlZCA9IGNhbGxiYWNrID0+IHtcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgICAvLyBhZGQgbGlzdGVuZXIgb24gdGhlIGZpcnN0IGNhbGwgd2hlbiB0aGUgZG9jdW1lbnQgaXMgaW4gbG9hZGluZyBzdGF0ZVxuICAgICAgaWYgKCFET01Db250ZW50TG9hZGVkQ2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgRE9NQ29udGVudExvYWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBET01Db250ZW50TG9hZGVkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBpc1JUTCA9ICgpID0+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kaXIgPT09ICdydGwnO1xuXG4gIGNvbnN0IGRlZmluZUpRdWVyeVBsdWdpbiA9IHBsdWdpbiA9PiB7XG4gICAgb25ET01Db250ZW50TG9hZGVkKCgpID0+IHtcbiAgICAgIGNvbnN0ICQgPSBnZXRqUXVlcnkoKTtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXG4gICAgICBpZiAoJCkge1xuICAgICAgICBjb25zdCBuYW1lID0gcGx1Z2luLk5BTUU7XG4gICAgICAgIGNvbnN0IEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bbmFtZV07XG4gICAgICAgICQuZm5bbmFtZV0gPSBwbHVnaW4ualF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICAkLmZuW25hbWVdLkNvbnN0cnVjdG9yID0gcGx1Z2luO1xuXG4gICAgICAgICQuZm5bbmFtZV0ubm9Db25mbGljdCA9ICgpID0+IHtcbiAgICAgICAgICAkLmZuW25hbWVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICAgIHJldHVybiBwbHVnaW4ualF1ZXJ5SW50ZXJmYWNlO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGV4ZWN1dGUgPSBjYWxsYmFjayA9PiB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZXhlY3V0ZUFmdGVyVHJhbnNpdGlvbiA9IChjYWxsYmFjaywgdHJhbnNpdGlvbkVsZW1lbnQsIHdhaXRGb3JUcmFuc2l0aW9uID0gdHJ1ZSkgPT4ge1xuICAgIGlmICghd2FpdEZvclRyYW5zaXRpb24pIHtcbiAgICAgIGV4ZWN1dGUoY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGR1cmF0aW9uUGFkZGluZyA9IDU7XG4gICAgY29uc3QgZW11bGF0ZWREdXJhdGlvbiA9IGdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRyYW5zaXRpb25FbGVtZW50KSArIGR1cmF0aW9uUGFkZGluZztcbiAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG5cbiAgICBjb25zdCBoYW5kbGVyID0gKHtcbiAgICAgIHRhcmdldFxuICAgIH0pID0+IHtcbiAgICAgIGlmICh0YXJnZXQgIT09IHRyYW5zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIHRyYW5zaXRpb25FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoVFJBTlNJVElPTl9FTkQsIGhhbmRsZXIpO1xuICAgICAgZXhlY3V0ZShjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHRyYW5zaXRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoVFJBTlNJVElPTl9FTkQsIGhhbmRsZXIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgdHJpZ2dlclRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sIGVtdWxhdGVkRHVyYXRpb24pO1xuICB9O1xuICAvKipcbiAgICogUmV0dXJuIHRoZSBwcmV2aW91cy9uZXh0IGVsZW1lbnQgb2YgYSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5fSBsaXN0ICAgIFRoZSBsaXN0IG9mIGVsZW1lbnRzXG4gICAqIEBwYXJhbSBhY3RpdmVFbGVtZW50ICAgVGhlIGFjdGl2ZSBlbGVtZW50XG4gICAqIEBwYXJhbSBzaG91bGRHZXROZXh0ICAgQ2hvb3NlIHRvIGdldCBuZXh0IG9yIHByZXZpb3VzIGVsZW1lbnRcbiAgICogQHBhcmFtIGlzQ3ljbGVBbGxvd2VkXG4gICAqIEByZXR1cm4ge0VsZW1lbnR8ZWxlbX0gVGhlIHByb3BlciBlbGVtZW50XG4gICAqL1xuXG5cbiAgY29uc3QgZ2V0TmV4dEFjdGl2ZUVsZW1lbnQgPSAobGlzdCwgYWN0aXZlRWxlbWVudCwgc2hvdWxkR2V0TmV4dCwgaXNDeWNsZUFsbG93ZWQpID0+IHtcbiAgICBjb25zdCBsaXN0TGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGluZGV4ID0gbGlzdC5pbmRleE9mKGFjdGl2ZUVsZW1lbnQpOyAvLyBpZiB0aGUgZWxlbWVudCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbGlzdCByZXR1cm4gYW4gZWxlbWVudFxuICAgIC8vIGRlcGVuZGluZyBvbiB0aGUgZGlyZWN0aW9uIGFuZCBpZiBjeWNsZSBpcyBhbGxvd2VkXG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gIXNob3VsZEdldE5leHQgJiYgaXNDeWNsZUFsbG93ZWQgPyBsaXN0W2xpc3RMZW5ndGggLSAxXSA6IGxpc3RbMF07XG4gICAgfVxuXG4gICAgaW5kZXggKz0gc2hvdWxkR2V0TmV4dCA/IDEgOiAtMTtcblxuICAgIGlmIChpc0N5Y2xlQWxsb3dlZCkge1xuICAgICAgaW5kZXggPSAoaW5kZXggKyBsaXN0TGVuZ3RoKSAlIGxpc3RMZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RbTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIGxpc3RMZW5ndGggLSAxKSldO1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGRvbS9ldmVudC1oYW5kbGVyLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBuYW1lc3BhY2VSZWdleCA9IC9bXi5dKig/PVxcLi4qKVxcLnwuKi87XG4gIGNvbnN0IHN0cmlwTmFtZVJlZ2V4ID0gL1xcLi4qLztcbiAgY29uc3Qgc3RyaXBVaWRSZWdleCA9IC86OlxcZCskLztcbiAgY29uc3QgZXZlbnRSZWdpc3RyeSA9IHt9OyAvLyBFdmVudHMgc3RvcmFnZVxuXG4gIGxldCB1aWRFdmVudCA9IDE7XG4gIGNvbnN0IGN1c3RvbUV2ZW50cyA9IHtcbiAgICBtb3VzZWVudGVyOiAnbW91c2VvdmVyJyxcbiAgICBtb3VzZWxlYXZlOiAnbW91c2VvdXQnXG4gIH07XG4gIGNvbnN0IG5hdGl2ZUV2ZW50cyA9IG5ldyBTZXQoWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZXVwJywgJ21vdXNlZG93bicsICdjb250ZXh0bWVudScsICdtb3VzZXdoZWVsJywgJ0RPTU1vdXNlU2Nyb2xsJywgJ21vdXNlb3ZlcicsICdtb3VzZW91dCcsICdtb3VzZW1vdmUnLCAnc2VsZWN0c3RhcnQnLCAnc2VsZWN0ZW5kJywgJ2tleWRvd24nLCAna2V5cHJlc3MnLCAna2V5dXAnLCAnb3JpZW50YXRpb25jaGFuZ2UnLCAndG91Y2hzdGFydCcsICd0b3VjaG1vdmUnLCAndG91Y2hlbmQnLCAndG91Y2hjYW5jZWwnLCAncG9pbnRlcmRvd24nLCAncG9pbnRlcm1vdmUnLCAncG9pbnRlcnVwJywgJ3BvaW50ZXJsZWF2ZScsICdwb2ludGVyY2FuY2VsJywgJ2dlc3R1cmVzdGFydCcsICdnZXN0dXJlY2hhbmdlJywgJ2dlc3R1cmVlbmQnLCAnZm9jdXMnLCAnYmx1cicsICdjaGFuZ2UnLCAncmVzZXQnLCAnc2VsZWN0JywgJ3N1Ym1pdCcsICdmb2N1c2luJywgJ2ZvY3Vzb3V0JywgJ2xvYWQnLCAndW5sb2FkJywgJ2JlZm9yZXVubG9hZCcsICdyZXNpemUnLCAnbW92ZScsICdET01Db250ZW50TG9hZGVkJywgJ3JlYWR5c3RhdGVjaGFuZ2UnLCAnZXJyb3InLCAnYWJvcnQnLCAnc2Nyb2xsJ10pO1xuICAvKipcbiAgICogUHJpdmF0ZSBtZXRob2RzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1ha2VFdmVudFVpZChlbGVtZW50LCB1aWQpIHtcbiAgICByZXR1cm4gdWlkICYmIGAke3VpZH06OiR7dWlkRXZlbnQrK31gIHx8IGVsZW1lbnQudWlkRXZlbnQgfHwgdWlkRXZlbnQrKztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEVsZW1lbnRFdmVudHMoZWxlbWVudCkge1xuICAgIGNvbnN0IHVpZCA9IG1ha2VFdmVudFVpZChlbGVtZW50KTtcbiAgICBlbGVtZW50LnVpZEV2ZW50ID0gdWlkO1xuICAgIGV2ZW50UmVnaXN0cnlbdWlkXSA9IGV2ZW50UmVnaXN0cnlbdWlkXSB8fCB7fTtcbiAgICByZXR1cm4gZXZlbnRSZWdpc3RyeVt1aWRdO1xuICB9XG5cbiAgZnVuY3Rpb24gYm9vdHN0cmFwSGFuZGxlcihlbGVtZW50LCBmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG4gICAgICBoeWRyYXRlT2JqKGV2ZW50LCB7XG4gICAgICAgIGRlbGVnYXRlVGFyZ2V0OiBlbGVtZW50XG4gICAgICB9KTtcblxuICAgICAgaWYgKGhhbmRsZXIub25lT2ZmKSB7XG4gICAgICAgIEV2ZW50SGFuZGxlci5vZmYoZWxlbWVudCwgZXZlbnQudHlwZSwgZm4pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4uYXBwbHkoZWxlbWVudCwgW2V2ZW50XSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJvb3RzdHJhcERlbGVnYXRpb25IYW5kbGVyKGVsZW1lbnQsIHNlbGVjdG9yLCBmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG4gICAgICBjb25zdCBkb21FbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cbiAgICAgIGZvciAobGV0IHtcbiAgICAgICAgdGFyZ2V0XG4gICAgICB9ID0gZXZlbnQ7IHRhcmdldCAmJiB0YXJnZXQgIT09IHRoaXM7IHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZG9tRWxlbWVudCBvZiBkb21FbGVtZW50cykge1xuICAgICAgICAgIGlmIChkb21FbGVtZW50ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGh5ZHJhdGVPYmooZXZlbnQsIHtcbiAgICAgICAgICAgIGRlbGVnYXRlVGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChoYW5kbGVyLm9uZU9mZikge1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLm9mZihlbGVtZW50LCBldmVudC50eXBlLCBzZWxlY3RvciwgZm4pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0YXJnZXQsIFtldmVudF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKGV2ZW50cywgY2FsbGFibGUsIGRlbGVnYXRpb25TZWxlY3RvciA9IG51bGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhldmVudHMpLmZpbmQoZXZlbnQgPT4gZXZlbnQuY2FsbGFibGUgPT09IGNhbGxhYmxlICYmIGV2ZW50LmRlbGVnYXRpb25TZWxlY3RvciA9PT0gZGVsZWdhdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmFtZXRlcnMob3JpZ2luYWxUeXBlRXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbikge1xuICAgIGNvbnN0IGlzRGVsZWdhdGVkID0gdHlwZW9mIGhhbmRsZXIgPT09ICdzdHJpbmcnOyAvLyB0b2RvOiB0b29sdGlwIHBhc3NlcyBgZmFsc2VgIGluc3RlYWQgb2Ygc2VsZWN0b3IsIHNvIHdlIG5lZWQgdG8gY2hlY2tcblxuICAgIGNvbnN0IGNhbGxhYmxlID0gaXNEZWxlZ2F0ZWQgPyBkZWxlZ2F0aW9uRnVuY3Rpb24gOiBoYW5kbGVyIHx8IGRlbGVnYXRpb25GdW5jdGlvbjtcbiAgICBsZXQgdHlwZUV2ZW50ID0gZ2V0VHlwZUV2ZW50KG9yaWdpbmFsVHlwZUV2ZW50KTtcblxuICAgIGlmICghbmF0aXZlRXZlbnRzLmhhcyh0eXBlRXZlbnQpKSB7XG4gICAgICB0eXBlRXZlbnQgPSBvcmlnaW5hbFR5cGVFdmVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gW2lzRGVsZWdhdGVkLCBjYWxsYWJsZSwgdHlwZUV2ZW50XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEhhbmRsZXIoZWxlbWVudCwgb3JpZ2luYWxUeXBlRXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbiwgb25lT2ZmKSB7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbFR5cGVFdmVudCAhPT0gJ3N0cmluZycgfHwgIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgW2lzRGVsZWdhdGVkLCBjYWxsYWJsZSwgdHlwZUV2ZW50XSA9IG5vcm1hbGl6ZVBhcmFtZXRlcnMob3JpZ2luYWxUeXBlRXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbik7IC8vIGluIGNhc2Ugb2YgbW91c2VlbnRlciBvciBtb3VzZWxlYXZlIHdyYXAgdGhlIGhhbmRsZXIgd2l0aGluIGEgZnVuY3Rpb24gdGhhdCBjaGVja3MgZm9yIGl0cyBET00gcG9zaXRpb25cbiAgICAvLyB0aGlzIHByZXZlbnRzIHRoZSBoYW5kbGVyIGZyb20gYmVpbmcgZGlzcGF0Y2hlZCB0aGUgc2FtZSB3YXkgYXMgbW91c2VvdmVyIG9yIG1vdXNlb3V0IGRvZXNcblxuICAgIGlmIChvcmlnaW5hbFR5cGVFdmVudCBpbiBjdXN0b21FdmVudHMpIHtcbiAgICAgIGNvbnN0IHdyYXBGdW5jdGlvbiA9IGZuID0+IHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmICghZXZlbnQucmVsYXRlZFRhcmdldCB8fCBldmVudC5yZWxhdGVkVGFyZ2V0ICE9PSBldmVudC5kZWxlZ2F0ZVRhcmdldCAmJiAhZXZlbnQuZGVsZWdhdGVUYXJnZXQuY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjYWxsYWJsZSA9IHdyYXBGdW5jdGlvbihjYWxsYWJsZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnRzID0gZ2V0RWxlbWVudEV2ZW50cyhlbGVtZW50KTtcbiAgICBjb25zdCBoYW5kbGVycyA9IGV2ZW50c1t0eXBlRXZlbnRdIHx8IChldmVudHNbdHlwZUV2ZW50XSA9IHt9KTtcbiAgICBjb25zdCBwcmV2aW91c0Z1bmN0aW9uID0gZmluZEhhbmRsZXIoaGFuZGxlcnMsIGNhbGxhYmxlLCBpc0RlbGVnYXRlZCA/IGhhbmRsZXIgOiBudWxsKTtcblxuICAgIGlmIChwcmV2aW91c0Z1bmN0aW9uKSB7XG4gICAgICBwcmV2aW91c0Z1bmN0aW9uLm9uZU9mZiA9IHByZXZpb3VzRnVuY3Rpb24ub25lT2ZmICYmIG9uZU9mZjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1aWQgPSBtYWtlRXZlbnRVaWQoY2FsbGFibGUsIG9yaWdpbmFsVHlwZUV2ZW50LnJlcGxhY2UobmFtZXNwYWNlUmVnZXgsICcnKSk7XG4gICAgY29uc3QgZm4gPSBpc0RlbGVnYXRlZCA/IGJvb3RzdHJhcERlbGVnYXRpb25IYW5kbGVyKGVsZW1lbnQsIGhhbmRsZXIsIGNhbGxhYmxlKSA6IGJvb3RzdHJhcEhhbmRsZXIoZWxlbWVudCwgY2FsbGFibGUpO1xuICAgIGZuLmRlbGVnYXRpb25TZWxlY3RvciA9IGlzRGVsZWdhdGVkID8gaGFuZGxlciA6IG51bGw7XG4gICAgZm4uY2FsbGFibGUgPSBjYWxsYWJsZTtcbiAgICBmbi5vbmVPZmYgPSBvbmVPZmY7XG4gICAgZm4udWlkRXZlbnQgPSB1aWQ7XG4gICAgaGFuZGxlcnNbdWlkXSA9IGZuO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlRXZlbnQsIGZuLCBpc0RlbGVnYXRlZCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cywgdHlwZUV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uU2VsZWN0b3IpIHtcbiAgICBjb25zdCBmbiA9IGZpbmRIYW5kbGVyKGV2ZW50c1t0eXBlRXZlbnRdLCBoYW5kbGVyLCBkZWxlZ2F0aW9uU2VsZWN0b3IpO1xuXG4gICAgaWYgKCFmbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlRXZlbnQsIGZuLCBCb29sZWFuKGRlbGVnYXRpb25TZWxlY3RvcikpO1xuICAgIGRlbGV0ZSBldmVudHNbdHlwZUV2ZW50XVtmbi51aWRFdmVudF07XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVOYW1lc3BhY2VkSGFuZGxlcnMoZWxlbWVudCwgZXZlbnRzLCB0eXBlRXZlbnQsIG5hbWVzcGFjZSkge1xuICAgIGNvbnN0IHN0b3JlRWxlbWVudEV2ZW50ID0gZXZlbnRzW3R5cGVFdmVudF0gfHwge307XG5cbiAgICBmb3IgKGNvbnN0IGhhbmRsZXJLZXkgb2YgT2JqZWN0LmtleXMoc3RvcmVFbGVtZW50RXZlbnQpKSB7XG4gICAgICBpZiAoaGFuZGxlcktleS5pbmNsdWRlcyhuYW1lc3BhY2UpKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gc3RvcmVFbGVtZW50RXZlbnRbaGFuZGxlcktleV07XG4gICAgICAgIHJlbW92ZUhhbmRsZXIoZWxlbWVudCwgZXZlbnRzLCB0eXBlRXZlbnQsIGV2ZW50LmNhbGxhYmxlLCBldmVudC5kZWxlZ2F0aW9uU2VsZWN0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFR5cGVFdmVudChldmVudCkge1xuICAgIC8vIGFsbG93IHRvIGdldCB0aGUgbmF0aXZlIGV2ZW50cyBmcm9tIG5hbWVzcGFjZWQgZXZlbnRzICgnY2xpY2suYnMuYnV0dG9uJyAtLT4gJ2NsaWNrJylcbiAgICBldmVudCA9IGV2ZW50LnJlcGxhY2Uoc3RyaXBOYW1lUmVnZXgsICcnKTtcbiAgICByZXR1cm4gY3VzdG9tRXZlbnRzW2V2ZW50XSB8fCBldmVudDtcbiAgfVxuXG4gIGNvbnN0IEV2ZW50SGFuZGxlciA9IHtcbiAgICBvbihlbGVtZW50LCBldmVudCwgaGFuZGxlciwgZGVsZWdhdGlvbkZ1bmN0aW9uKSB7XG4gICAgICBhZGRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgb25lKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24pIHtcbiAgICAgIGFkZEhhbmRsZXIoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbiwgdHJ1ZSk7XG4gICAgfSxcblxuICAgIG9mZihlbGVtZW50LCBvcmlnaW5hbFR5cGVFdmVudCwgaGFuZGxlciwgZGVsZWdhdGlvbkZ1bmN0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIG9yaWdpbmFsVHlwZUV2ZW50ICE9PSAnc3RyaW5nJyB8fCAhZWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtpc0RlbGVnYXRlZCwgY2FsbGFibGUsIHR5cGVFdmVudF0gPSBub3JtYWxpemVQYXJhbWV0ZXJzKG9yaWdpbmFsVHlwZUV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24pO1xuICAgICAgY29uc3QgaW5OYW1lc3BhY2UgPSB0eXBlRXZlbnQgIT09IG9yaWdpbmFsVHlwZUV2ZW50O1xuICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RWxlbWVudEV2ZW50cyhlbGVtZW50KTtcbiAgICAgIGNvbnN0IHN0b3JlRWxlbWVudEV2ZW50ID0gZXZlbnRzW3R5cGVFdmVudF0gfHwge307XG4gICAgICBjb25zdCBpc05hbWVzcGFjZSA9IG9yaWdpbmFsVHlwZUV2ZW50LnN0YXJ0c1dpdGgoJy4nKTtcblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYWJsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gU2ltcGxlc3QgY2FzZTogaGFuZGxlciBpcyBwYXNzZWQsIHJlbW92ZSB0aGF0IGxpc3RlbmVyIE9OTFkuXG4gICAgICAgIGlmICghT2JqZWN0LmtleXMoc3RvcmVFbGVtZW50RXZlbnQpLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZUhhbmRsZXIoZWxlbWVudCwgZXZlbnRzLCB0eXBlRXZlbnQsIGNhbGxhYmxlLCBpc0RlbGVnYXRlZCA/IGhhbmRsZXIgOiBudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOYW1lc3BhY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50RXZlbnQgb2YgT2JqZWN0LmtleXMoZXZlbnRzKSkge1xuICAgICAgICAgIHJlbW92ZU5hbWVzcGFjZWRIYW5kbGVycyhlbGVtZW50LCBldmVudHMsIGVsZW1lbnRFdmVudCwgb3JpZ2luYWxUeXBlRXZlbnQuc2xpY2UoMSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3Qga2V5SGFuZGxlcnMgb2YgT2JqZWN0LmtleXMoc3RvcmVFbGVtZW50RXZlbnQpKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJLZXkgPSBrZXlIYW5kbGVycy5yZXBsYWNlKHN0cmlwVWlkUmVnZXgsICcnKTtcblxuICAgICAgICBpZiAoIWluTmFtZXNwYWNlIHx8IG9yaWdpbmFsVHlwZUV2ZW50LmluY2x1ZGVzKGhhbmRsZXJLZXkpKSB7XG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBzdG9yZUVsZW1lbnRFdmVudFtrZXlIYW5kbGVyc107XG4gICAgICAgICAgcmVtb3ZlSGFuZGxlcihlbGVtZW50LCBldmVudHMsIHR5cGVFdmVudCwgZXZlbnQuY2FsbGFibGUsIGV2ZW50LmRlbGVnYXRpb25TZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdHJpZ2dlcihlbGVtZW50LCBldmVudCwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3N0cmluZycgfHwgIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0ICQgPSBnZXRqUXVlcnkoKTtcbiAgICAgIGNvbnN0IHR5cGVFdmVudCA9IGdldFR5cGVFdmVudChldmVudCk7XG4gICAgICBjb25zdCBpbk5hbWVzcGFjZSA9IGV2ZW50ICE9PSB0eXBlRXZlbnQ7XG4gICAgICBsZXQgalF1ZXJ5RXZlbnQgPSBudWxsO1xuICAgICAgbGV0IGJ1YmJsZXMgPSB0cnVlO1xuICAgICAgbGV0IG5hdGl2ZURpc3BhdGNoID0gdHJ1ZTtcbiAgICAgIGxldCBkZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG5cbiAgICAgIGlmIChpbk5hbWVzcGFjZSAmJiAkKSB7XG4gICAgICAgIGpRdWVyeUV2ZW50ID0gJC5FdmVudChldmVudCwgYXJncyk7XG4gICAgICAgICQoZWxlbWVudCkudHJpZ2dlcihqUXVlcnlFdmVudCk7XG4gICAgICAgIGJ1YmJsZXMgPSAhalF1ZXJ5RXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtcbiAgICAgICAgbmF0aXZlRGlzcGF0Y2ggPSAhalF1ZXJ5RXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKTtcbiAgICAgICAgZGVmYXVsdFByZXZlbnRlZCA9IGpRdWVyeUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpO1xuICAgICAgfVxuXG4gICAgICBsZXQgZXZ0ID0gbmV3IEV2ZW50KGV2ZW50LCB7XG4gICAgICAgIGJ1YmJsZXMsXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgZXZ0ID0gaHlkcmF0ZU9iaihldnQsIGFyZ3MpO1xuXG4gICAgICBpZiAoZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5hdGl2ZURpc3BhdGNoKSB7XG4gICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgJiYgalF1ZXJ5RXZlbnQpIHtcbiAgICAgICAgalF1ZXJ5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG5cbiAgfTtcblxuICBmdW5jdGlvbiBoeWRyYXRlT2JqKG9iaiwgbWV0YSkge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG1ldGEgfHwge30pKSB7XG4gICAgICB0cnkge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgICAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cbiAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBkb20vZGF0YS5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cbiAgY29uc3QgZWxlbWVudE1hcCA9IG5ldyBNYXAoKTtcbiAgY29uc3QgRGF0YSA9IHtcbiAgICBzZXQoZWxlbWVudCwga2V5LCBpbnN0YW5jZSkge1xuICAgICAgaWYgKCFlbGVtZW50TWFwLmhhcyhlbGVtZW50KSkge1xuICAgICAgICBlbGVtZW50TWFwLnNldChlbGVtZW50LCBuZXcgTWFwKCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnN0YW5jZU1hcCA9IGVsZW1lbnRNYXAuZ2V0KGVsZW1lbnQpOyAvLyBtYWtlIGl0IGNsZWFyIHdlIG9ubHkgd2FudCBvbmUgaW5zdGFuY2UgcGVyIGVsZW1lbnRcbiAgICAgIC8vIGNhbiBiZSByZW1vdmVkIGxhdGVyIHdoZW4gbXVsdGlwbGUga2V5L2luc3RhbmNlcyBhcmUgZmluZSB0byBiZSB1c2VkXG5cbiAgICAgIGlmICghaW5zdGFuY2VNYXAuaGFzKGtleSkgJiYgaW5zdGFuY2VNYXAuc2l6ZSAhPT0gMCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmVycm9yKGBCb290c3RyYXAgZG9lc24ndCBhbGxvdyBtb3JlIHRoYW4gb25lIGluc3RhbmNlIHBlciBlbGVtZW50LiBCb3VuZCBpbnN0YW5jZTogJHtBcnJheS5mcm9tKGluc3RhbmNlTWFwLmtleXMoKSlbMF19LmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGluc3RhbmNlTWFwLnNldChrZXksIGluc3RhbmNlKTtcbiAgICB9LFxuXG4gICAgZ2V0KGVsZW1lbnQsIGtleSkge1xuICAgICAgaWYgKGVsZW1lbnRNYXAuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50TWFwLmdldChlbGVtZW50KS5nZXQoa2V5KSB8fCBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgcmVtb3ZlKGVsZW1lbnQsIGtleSkge1xuICAgICAgaWYgKCFlbGVtZW50TWFwLmhhcyhlbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluc3RhbmNlTWFwID0gZWxlbWVudE1hcC5nZXQoZWxlbWVudCk7XG4gICAgICBpbnN0YW5jZU1hcC5kZWxldGUoa2V5KTsgLy8gZnJlZSB1cCBlbGVtZW50IHJlZmVyZW5jZXMgaWYgdGhlcmUgYXJlIG5vIGluc3RhbmNlcyBsZWZ0IGZvciBhbiBlbGVtZW50XG5cbiAgICAgIGlmIChpbnN0YW5jZU1hcC5zaXplID09PSAwKSB7XG4gICAgICAgIGVsZW1lbnRNYXAuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGRvbS9tYW5pcHVsYXRvci5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGEodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSBOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICdudWxsJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG4gICAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGFLZXkoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5yZXBsYWNlKC9bQS1aXS9nLCBjaHIgPT4gYC0ke2Noci50b0xvd2VyQ2FzZSgpfWApO1xuICB9XG5cbiAgY29uc3QgTWFuaXB1bGF0b3IgPSB7XG4gICAgc2V0RGF0YUF0dHJpYnV0ZShlbGVtZW50LCBrZXksIHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gLCB2YWx1ZSk7XG4gICAgfSxcblxuICAgIHJlbW92ZURhdGFBdHRyaWJ1dGUoZWxlbWVudCwga2V5KSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gKTtcbiAgICB9LFxuXG4gICAgZ2V0RGF0YUF0dHJpYnV0ZXMoZWxlbWVudCkge1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgY29uc3QgYnNLZXlzID0gT2JqZWN0LmtleXMoZWxlbWVudC5kYXRhc2V0KS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKCdicycpICYmICFrZXkuc3RhcnRzV2l0aCgnYnNDb25maWcnKSk7XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGJzS2V5cykge1xuICAgICAgICBsZXQgcHVyZUtleSA9IGtleS5yZXBsYWNlKC9eYnMvLCAnJyk7XG4gICAgICAgIHB1cmVLZXkgPSBwdXJlS2V5LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgcHVyZUtleS5zbGljZSgxLCBwdXJlS2V5Lmxlbmd0aCk7XG4gICAgICAgIGF0dHJpYnV0ZXNbcHVyZUtleV0gPSBub3JtYWxpemVEYXRhKGVsZW1lbnQuZGF0YXNldFtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfSxcblxuICAgIGdldERhdGFBdHRyaWJ1dGUoZWxlbWVudCwga2V5KSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplRGF0YShlbGVtZW50LmdldEF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gKSk7XG4gICAgfVxuXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC9jb25maWcuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBDb25maWcge1xuICAgIC8vIEdldHRlcnNcbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBoYXZlIHRvIGltcGxlbWVudCB0aGUgc3RhdGljIG1ldGhvZCBcIk5BTUVcIiwgZm9yIGVhY2ggY29tcG9uZW50IScpO1xuICAgIH1cblxuICAgIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSB0aGlzLl9tZXJnZUNvbmZpZ09iaihjb25maWcpO1xuICAgICAgY29uZmlnID0gdGhpcy5fY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpO1xuXG4gICAgICB0aGlzLl90eXBlQ2hlY2tDb25maWcoY29uZmlnKTtcblxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBfY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpIHtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgX21lcmdlQ29uZmlnT2JqKGNvbmZpZywgZWxlbWVudCkge1xuICAgICAgY29uc3QganNvbkNvbmZpZyA9IGlzRWxlbWVudChlbGVtZW50KSA/IE1hbmlwdWxhdG9yLmdldERhdGFBdHRyaWJ1dGUoZWxlbWVudCwgJ2NvbmZpZycpIDoge307IC8vIHRyeSB0byBwYXJzZVxuXG4gICAgICByZXR1cm4geyAuLi50aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsXG4gICAgICAgIC4uLih0eXBlb2YganNvbkNvbmZpZyA9PT0gJ29iamVjdCcgPyBqc29uQ29uZmlnIDoge30pLFxuICAgICAgICAuLi4oaXNFbGVtZW50KGVsZW1lbnQpID8gTWFuaXB1bGF0b3IuZ2V0RGF0YUF0dHJpYnV0ZXMoZWxlbWVudCkgOiB7fSksXG4gICAgICAgIC4uLih0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IHt9KVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBfdHlwZUNoZWNrQ29uZmlnKGNvbmZpZywgY29uZmlnVHlwZXMgPSB0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IG9mIE9iamVjdC5rZXlzKGNvbmZpZ1R5cGVzKSkge1xuICAgICAgICBjb25zdCBleHBlY3RlZFR5cGVzID0gY29uZmlnVHlwZXNbcHJvcGVydHldO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1twcm9wZXJ0eV07XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IGlzRWxlbWVudCh2YWx1ZSkgPyAnZWxlbWVudCcgOiB0b1R5cGUodmFsdWUpO1xuXG4gICAgICAgIGlmICghbmV3IFJlZ0V4cChleHBlY3RlZFR5cGVzKS50ZXN0KHZhbHVlVHlwZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke3RoaXMuY29uc3RydWN0b3IuTkFNRS50b1VwcGVyQ2FzZSgpfTogT3B0aW9uIFwiJHtwcm9wZXJ0eX1cIiBwcm92aWRlZCB0eXBlIFwiJHt2YWx1ZVR5cGV9XCIgYnV0IGV4cGVjdGVkIHR5cGUgXCIke2V4cGVjdGVkVHlwZXN9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGJhc2UtY29tcG9uZW50LmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBWRVJTSU9OID0gJzUuMi4zJztcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgQmFzZUNvbXBvbmVudCBleHRlbmRzIENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgZWxlbWVudCA9IGdldEVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICBEYXRhLnNldCh0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBkaXNwb3NlKCkge1xuICAgICAgRGF0YS5yZW1vdmUodGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7XG4gICAgICBFdmVudEhhbmRsZXIub2ZmKHRoaXMuX2VsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuRVZFTlRfS0VZKTtcblxuICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcbiAgICAgICAgdGhpc1twcm9wZXJ0eU5hbWVdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfcXVldWVDYWxsYmFjayhjYWxsYmFjaywgZWxlbWVudCwgaXNBbmltYXRlZCA9IHRydWUpIHtcbiAgICAgIGV4ZWN1dGVBZnRlclRyYW5zaXRpb24oY2FsbGJhY2ssIGVsZW1lbnQsIGlzQW5pbWF0ZWQpO1xuICAgIH1cblxuICAgIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSB0aGlzLl9tZXJnZUNvbmZpZ09iaihjb25maWcsIHRoaXMuX2VsZW1lbnQpO1xuICAgICAgY29uZmlnID0gdGhpcy5fY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpO1xuXG4gICAgICB0aGlzLl90eXBlQ2hlY2tDb25maWcoY29uZmlnKTtcblxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIERhdGEuZ2V0KGdldEVsZW1lbnQoZWxlbWVudCksIHRoaXMuREFUQV9LRVkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZUluc3RhbmNlKGVsZW1lbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZShlbGVtZW50KSB8fCBuZXcgdGhpcyhlbGVtZW50LCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGwpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgVkVSU0lPTigpIHtcbiAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgREFUQV9LRVkoKSB7XG4gICAgICByZXR1cm4gYGJzLiR7dGhpcy5OQU1FfWA7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBFVkVOVF9LRVkoKSB7XG4gICAgICByZXR1cm4gYC4ke3RoaXMuREFUQV9LRVl9YDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZXZlbnROYW1lKG5hbWUpIHtcbiAgICAgIHJldHVybiBgJHtuYW1lfSR7dGhpcy5FVkVOVF9LRVl9YDtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IHV0aWwvY29tcG9uZW50LWZ1bmN0aW9ucy5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cbiAgY29uc3QgZW5hYmxlRGlzbWlzc1RyaWdnZXIgPSAoY29tcG9uZW50LCBtZXRob2QgPSAnaGlkZScpID0+IHtcbiAgICBjb25zdCBjbGlja0V2ZW50ID0gYGNsaWNrLmRpc21pc3Mke2NvbXBvbmVudC5FVkVOVF9LRVl9YDtcbiAgICBjb25zdCBuYW1lID0gY29tcG9uZW50Lk5BTUU7XG4gICAgRXZlbnRIYW5kbGVyLm9uKGRvY3VtZW50LCBjbGlja0V2ZW50LCBgW2RhdGEtYnMtZGlzbWlzcz1cIiR7bmFtZX1cIl1gLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChbJ0EnLCAnQVJFQSddLmluY2x1ZGVzKHRoaXMudGFnTmFtZSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGlzYWJsZWQodGhpcykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0YXJnZXQgPSBnZXRFbGVtZW50RnJvbVNlbGVjdG9yKHRoaXMpIHx8IHRoaXMuY2xvc2VzdChgLiR7bmFtZX1gKTtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gY29tcG9uZW50LmdldE9yQ3JlYXRlSW5zdGFuY2UodGFyZ2V0KTsgLy8gTWV0aG9kIGFyZ3VtZW50IGlzIGxlZnQsIGZvciBBbGVydCBhbmQgb25seSwgYXMgaXQgZG9lc24ndCBpbXBsZW1lbnQgdGhlICdoaWRlJyBtZXRob2RcblxuICAgICAgaW5zdGFuY2VbbWV0aG9kXSgpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGFsZXJ0LmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FJGYgPSAnYWxlcnQnO1xuICBjb25zdCBEQVRBX0tFWSRhID0gJ2JzLmFsZXJ0JztcbiAgY29uc3QgRVZFTlRfS0VZJGIgPSBgLiR7REFUQV9LRVkkYX1gO1xuICBjb25zdCBFVkVOVF9DTE9TRSA9IGBjbG9zZSR7RVZFTlRfS0VZJGJ9YDtcbiAgY29uc3QgRVZFTlRfQ0xPU0VEID0gYGNsb3NlZCR7RVZFTlRfS0VZJGJ9YDtcbiAgY29uc3QgQ0xBU1NfTkFNRV9GQURFJDUgPSAnZmFkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQ4ID0gJ3Nob3cnO1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBBbGVydCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICAgIC8vIEdldHRlcnNcbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRSRmO1xuICAgIH0gLy8gUHVibGljXG5cblxuICAgIGNsb3NlKCkge1xuICAgICAgY29uc3QgY2xvc2VFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0NMT1NFKTtcblxuICAgICAgaWYgKGNsb3NlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX1NIT1ckOCk7XG5cbiAgICAgIGNvbnN0IGlzQW5pbWF0ZWQgPSB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0ZBREUkNSk7XG5cbiAgICAgIHRoaXMuX3F1ZXVlQ2FsbGJhY2soKCkgPT4gdGhpcy5fZGVzdHJveUVsZW1lbnQoKSwgdGhpcy5fZWxlbWVudCwgaXNBbmltYXRlZCk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9kZXN0cm95RWxlbWVudCgpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0NMT1NFRCk7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBBbGVydC5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCB8fCBjb25maWcuc3RhcnRzV2l0aCgnXycpIHx8IGNvbmZpZyA9PT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10odGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBlbmFibGVEaXNtaXNzVHJpZ2dlcihBbGVydCwgJ2Nsb3NlJyk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgZGVmaW5lSlF1ZXJ5UGx1Z2luKEFsZXJ0KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBidXR0b24uanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuXG4gIGNvbnN0IE5BTUUkZSA9ICdidXR0b24nO1xuICBjb25zdCBEQVRBX0tFWSQ5ID0gJ2JzLmJ1dHRvbic7XG4gIGNvbnN0IEVWRU5UX0tFWSRhID0gYC4ke0RBVEFfS0VZJDl9YDtcbiAgY29uc3QgREFUQV9BUElfS0VZJDYgPSAnLmRhdGEtYXBpJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9BQ1RJVkUkMyA9ICdhY3RpdmUnO1xuICBjb25zdCBTRUxFQ1RPUl9EQVRBX1RPR0dMRSQ1ID0gJ1tkYXRhLWJzLXRvZ2dsZT1cImJ1dHRvblwiXSc7XG4gIGNvbnN0IEVWRU5UX0NMSUNLX0RBVEFfQVBJJDYgPSBgY2xpY2ske0VWRU5UX0tFWSRhfSR7REFUQV9BUElfS0VZJDZ9YDtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgQnV0dG9uIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gICAgLy8gR2V0dGVyc1xuICAgIHN0YXRpYyBnZXQgTkFNRSgpIHtcbiAgICAgIHJldHVybiBOQU1FJGU7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgdG9nZ2xlKCkge1xuICAgICAgLy8gVG9nZ2xlIGNsYXNzIGFuZCBzeW5jIHRoZSBgYXJpYS1wcmVzc2VkYCBhdHRyaWJ1dGUgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBgLnRvZ2dsZSgpYCBtZXRob2RcbiAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfTkFNRV9BQ1RJVkUkMykpO1xuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEJ1dHRvbi5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpO1xuXG4gICAgICAgIGlmIChjb25maWcgPT09ICd0b2dnbGUnKSB7XG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBEYXRhIEFQSSBpbXBsZW1lbnRhdGlvblxuICAgKi9cblxuXG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNiwgU0VMRUNUT1JfREFUQV9UT0dHTEUkNSwgZXZlbnQgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoU0VMRUNUT1JfREFUQV9UT0dHTEUkNSk7XG4gICAgY29uc3QgZGF0YSA9IEJ1dHRvbi5nZXRPckNyZWF0ZUluc3RhbmNlKGJ1dHRvbik7XG4gICAgZGF0YS50b2dnbGUoKTtcbiAgfSk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgZGVmaW5lSlF1ZXJ5UGx1Z2luKEJ1dHRvbik7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogZG9tL3NlbGVjdG9yLWVuZ2luZS5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgU2VsZWN0b3JFbmdpbmUgPSB7XG4gICAgZmluZChzZWxlY3RvciwgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdCguLi5FbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLmNhbGwoZWxlbWVudCwgc2VsZWN0b3IpKTtcbiAgICB9LFxuXG4gICAgZmluZE9uZShzZWxlY3RvciwgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IuY2FsbChlbGVtZW50LCBzZWxlY3Rvcik7XG4gICAgfSxcblxuICAgIGNoaWxkcmVuKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KC4uLmVsZW1lbnQuY2hpbGRyZW4pLmZpbHRlcihjaGlsZCA9PiBjaGlsZC5tYXRjaGVzKHNlbGVjdG9yKSk7XG4gICAgfSxcblxuICAgIHBhcmVudHMoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgIGxldCBhbmNlc3RvciA9IGVsZW1lbnQucGFyZW50Tm9kZS5jbG9zZXN0KHNlbGVjdG9yKTtcblxuICAgICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICAgIHBhcmVudHMucHVzaChhbmNlc3Rvcik7XG4gICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50Tm9kZS5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcmVudHM7XG4gICAgfSxcblxuICAgIHByZXYoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgIGxldCBwcmV2aW91cyA9IGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgd2hpbGUgKHByZXZpb3VzKSB7XG4gICAgICAgIGlmIChwcmV2aW91cy5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBbcHJldmlvdXNdO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldmlvdXMgPSBwcmV2aW91cy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfSxcblxuICAgIC8vIFRPRE86IHRoaXMgaXMgbm93IHVudXNlZDsgcmVtb3ZlIGxhdGVyIGFsb25nIHdpdGggcHJldigpXG4gICAgbmV4dChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgbGV0IG5leHQgPSBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgaWYgKG5leHQubWF0Y2hlcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICByZXR1cm4gW25leHRdO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV4dCA9IG5leHQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfSxcblxuICAgIGZvY3VzYWJsZUNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGZvY3VzYWJsZXMgPSBbJ2EnLCAnYnV0dG9uJywgJ2lucHV0JywgJ3RleHRhcmVhJywgJ3NlbGVjdCcsICdkZXRhaWxzJywgJ1t0YWJpbmRleF0nLCAnW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0nXS5tYXAoc2VsZWN0b3IgPT4gYCR7c2VsZWN0b3J9Om5vdChbdGFiaW5kZXhePVwiLVwiXSlgKS5qb2luKCcsJyk7XG4gICAgICByZXR1cm4gdGhpcy5maW5kKGZvY3VzYWJsZXMsIGVsZW1lbnQpLmZpbHRlcihlbCA9PiAhaXNEaXNhYmxlZChlbCkgJiYgaXNWaXNpYmxlKGVsKSk7XG4gICAgfVxuXG4gIH07XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC9zd2lwZS5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSRkID0gJ3N3aXBlJztcbiAgY29uc3QgRVZFTlRfS0VZJDkgPSAnLmJzLnN3aXBlJztcbiAgY29uc3QgRVZFTlRfVE9VQ0hTVEFSVCA9IGB0b3VjaHN0YXJ0JHtFVkVOVF9LRVkkOX1gO1xuICBjb25zdCBFVkVOVF9UT1VDSE1PVkUgPSBgdG91Y2htb3ZlJHtFVkVOVF9LRVkkOX1gO1xuICBjb25zdCBFVkVOVF9UT1VDSEVORCA9IGB0b3VjaGVuZCR7RVZFTlRfS0VZJDl9YDtcbiAgY29uc3QgRVZFTlRfUE9JTlRFUkRPV04gPSBgcG9pbnRlcmRvd24ke0VWRU5UX0tFWSQ5fWA7XG4gIGNvbnN0IEVWRU5UX1BPSU5URVJVUCA9IGBwb2ludGVydXAke0VWRU5UX0tFWSQ5fWA7XG4gIGNvbnN0IFBPSU5URVJfVFlQRV9UT1VDSCA9ICd0b3VjaCc7XG4gIGNvbnN0IFBPSU5URVJfVFlQRV9QRU4gPSAncGVuJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9QT0lOVEVSX0VWRU5UID0gJ3BvaW50ZXItZXZlbnQnO1xuICBjb25zdCBTV0lQRV9USFJFU0hPTEQgPSA0MDtcbiAgY29uc3QgRGVmYXVsdCRjID0ge1xuICAgIGVuZENhbGxiYWNrOiBudWxsLFxuICAgIGxlZnRDYWxsYmFjazogbnVsbCxcbiAgICByaWdodENhbGxiYWNrOiBudWxsXG4gIH07XG4gIGNvbnN0IERlZmF1bHRUeXBlJGMgPSB7XG4gICAgZW5kQ2FsbGJhY2s6ICcoZnVuY3Rpb258bnVsbCknLFxuICAgIGxlZnRDYWxsYmFjazogJyhmdW5jdGlvbnxudWxsKScsXG4gICAgcmlnaHRDYWxsYmFjazogJyhmdW5jdGlvbnxudWxsKSdcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgU3dpcGUgZXh0ZW5kcyBDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICBpZiAoIWVsZW1lbnQgfHwgIVN3aXBlLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX2RlbHRhWCA9IDA7XG4gICAgICB0aGlzLl9zdXBwb3J0UG9pbnRlckV2ZW50cyA9IEJvb2xlYW4od2luZG93LlBvaW50ZXJFdmVudCk7XG5cbiAgICAgIHRoaXMuX2luaXRFdmVudHMoKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQkYztcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJGM7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkZDtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBkaXNwb3NlKCkge1xuICAgICAgRXZlbnRIYW5kbGVyLm9mZih0aGlzLl9lbGVtZW50LCBFVkVOVF9LRVkkOSk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9zdGFydChldmVudCkge1xuICAgICAgaWYgKCF0aGlzLl9zdXBwb3J0UG9pbnRlckV2ZW50cykge1xuICAgICAgICB0aGlzLl9kZWx0YVggPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2V2ZW50SXNQb2ludGVyUGVuVG91Y2goZXZlbnQpKSB7XG4gICAgICAgIHRoaXMuX2RlbHRhWCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2VuZChldmVudCkge1xuICAgICAgaWYgKHRoaXMuX2V2ZW50SXNQb2ludGVyUGVuVG91Y2goZXZlbnQpKSB7XG4gICAgICAgIHRoaXMuX2RlbHRhWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLl9kZWx0YVg7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hhbmRsZVN3aXBlKCk7XG5cbiAgICAgIGV4ZWN1dGUodGhpcy5fY29uZmlnLmVuZENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBfbW92ZShldmVudCkge1xuICAgICAgdGhpcy5fZGVsdGFYID0gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA+IDEgPyAwIDogZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIC0gdGhpcy5fZGVsdGFYO1xuICAgIH1cblxuICAgIF9oYW5kbGVTd2lwZSgpIHtcbiAgICAgIGNvbnN0IGFic0RlbHRhWCA9IE1hdGguYWJzKHRoaXMuX2RlbHRhWCk7XG5cbiAgICAgIGlmIChhYnNEZWx0YVggPD0gU1dJUEVfVEhSRVNIT0xEKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGlyZWN0aW9uID0gYWJzRGVsdGFYIC8gdGhpcy5fZGVsdGFYO1xuICAgICAgdGhpcy5fZGVsdGFYID0gMDtcblxuICAgICAgaWYgKCFkaXJlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBleGVjdXRlKGRpcmVjdGlvbiA+IDAgPyB0aGlzLl9jb25maWcucmlnaHRDYWxsYmFjayA6IHRoaXMuX2NvbmZpZy5sZWZ0Q2FsbGJhY2spO1xuICAgIH1cblxuICAgIF9pbml0RXZlbnRzKCkge1xuICAgICAgaWYgKHRoaXMuX3N1cHBvcnRQb2ludGVyRXZlbnRzKSB7XG4gICAgICAgIEV2ZW50SGFuZGxlci5vbih0aGlzLl9lbGVtZW50LCBFVkVOVF9QT0lOVEVSRE9XTiwgZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1BPSU5URVJVUCwgZXZlbnQgPT4gdGhpcy5fZW5kKGV2ZW50KSk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfUE9JTlRFUl9FVkVOVCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfVE9VQ0hTVEFSVCwgZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1RPVUNITU9WRSwgZXZlbnQgPT4gdGhpcy5fbW92ZShldmVudCkpO1xuICAgICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfVE9VQ0hFTkQsIGV2ZW50ID0+IHRoaXMuX2VuZChldmVudCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9ldmVudElzUG9pbnRlclBlblRvdWNoKGV2ZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3VwcG9ydFBvaW50ZXJFdmVudHMgJiYgKGV2ZW50LnBvaW50ZXJUeXBlID09PSBQT0lOVEVSX1RZUEVfUEVOIHx8IGV2ZW50LnBvaW50ZXJUeXBlID09PSBQT0lOVEVSX1RZUEVfVE9VQ0gpO1xuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBpc1N1cHBvcnRlZCgpIHtcbiAgICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMDtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGNhcm91c2VsLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FJGMgPSAnY2Fyb3VzZWwnO1xuICBjb25zdCBEQVRBX0tFWSQ4ID0gJ2JzLmNhcm91c2VsJztcbiAgY29uc3QgRVZFTlRfS0VZJDggPSBgLiR7REFUQV9LRVkkOH1gO1xuICBjb25zdCBEQVRBX0FQSV9LRVkkNSA9ICcuZGF0YS1hcGknO1xuICBjb25zdCBBUlJPV19MRUZUX0tFWSQxID0gJ0Fycm93TGVmdCc7XG4gIGNvbnN0IEFSUk9XX1JJR0hUX0tFWSQxID0gJ0Fycm93UmlnaHQnO1xuICBjb25zdCBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUID0gNTAwOyAvLyBUaW1lIGZvciBtb3VzZSBjb21wYXQgZXZlbnRzIHRvIGZpcmUgYWZ0ZXIgdG91Y2hcblxuICBjb25zdCBPUkRFUl9ORVhUID0gJ25leHQnO1xuICBjb25zdCBPUkRFUl9QUkVWID0gJ3ByZXYnO1xuICBjb25zdCBESVJFQ1RJT05fTEVGVCA9ICdsZWZ0JztcbiAgY29uc3QgRElSRUNUSU9OX1JJR0hUID0gJ3JpZ2h0JztcbiAgY29uc3QgRVZFTlRfU0xJREUgPSBgc2xpZGUke0VWRU5UX0tFWSQ4fWA7XG4gIGNvbnN0IEVWRU5UX1NMSUQgPSBgc2xpZCR7RVZFTlRfS0VZJDh9YDtcbiAgY29uc3QgRVZFTlRfS0VZRE9XTiQxID0gYGtleWRvd24ke0VWRU5UX0tFWSQ4fWA7XG4gIGNvbnN0IEVWRU5UX01PVVNFRU5URVIkMSA9IGBtb3VzZWVudGVyJHtFVkVOVF9LRVkkOH1gO1xuICBjb25zdCBFVkVOVF9NT1VTRUxFQVZFJDEgPSBgbW91c2VsZWF2ZSR7RVZFTlRfS0VZJDh9YDtcbiAgY29uc3QgRVZFTlRfRFJBR19TVEFSVCA9IGBkcmFnc3RhcnQke0VWRU5UX0tFWSQ4fWA7XG4gIGNvbnN0IEVWRU5UX0xPQURfREFUQV9BUEkkMyA9IGBsb2FkJHtFVkVOVF9LRVkkOH0ke0RBVEFfQVBJX0tFWSQ1fWA7XG4gIGNvbnN0IEVWRU5UX0NMSUNLX0RBVEFfQVBJJDUgPSBgY2xpY2ske0VWRU5UX0tFWSQ4fSR7REFUQV9BUElfS0VZJDV9YDtcbiAgY29uc3QgQ0xBU1NfTkFNRV9DQVJPVVNFTCA9ICdjYXJvdXNlbCc7XG4gIGNvbnN0IENMQVNTX05BTUVfQUNUSVZFJDIgPSAnYWN0aXZlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9TTElERSA9ICdzbGlkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfRU5EID0gJ2Nhcm91c2VsLWl0ZW0tZW5kJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9TVEFSVCA9ICdjYXJvdXNlbC1pdGVtLXN0YXJ0JztcbiAgY29uc3QgQ0xBU1NfTkFNRV9ORVhUID0gJ2Nhcm91c2VsLWl0ZW0tbmV4dCc7XG4gIGNvbnN0IENMQVNTX05BTUVfUFJFViA9ICdjYXJvdXNlbC1pdGVtLXByZXYnO1xuICBjb25zdCBTRUxFQ1RPUl9BQ1RJVkUgPSAnLmFjdGl2ZSc7XG4gIGNvbnN0IFNFTEVDVE9SX0lURU0gPSAnLmNhcm91c2VsLWl0ZW0nO1xuICBjb25zdCBTRUxFQ1RPUl9BQ1RJVkVfSVRFTSA9IFNFTEVDVE9SX0FDVElWRSArIFNFTEVDVE9SX0lURU07XG4gIGNvbnN0IFNFTEVDVE9SX0lURU1fSU1HID0gJy5jYXJvdXNlbC1pdGVtIGltZyc7XG4gIGNvbnN0IFNFTEVDVE9SX0lORElDQVRPUlMgPSAnLmNhcm91c2VsLWluZGljYXRvcnMnO1xuICBjb25zdCBTRUxFQ1RPUl9EQVRBX1NMSURFID0gJ1tkYXRhLWJzLXNsaWRlXSwgW2RhdGEtYnMtc2xpZGUtdG9dJztcbiAgY29uc3QgU0VMRUNUT1JfREFUQV9SSURFID0gJ1tkYXRhLWJzLXJpZGU9XCJjYXJvdXNlbFwiXSc7XG4gIGNvbnN0IEtFWV9UT19ESVJFQ1RJT04gPSB7XG4gICAgW0FSUk9XX0xFRlRfS0VZJDFdOiBESVJFQ1RJT05fUklHSFQsXG4gICAgW0FSUk9XX1JJR0hUX0tFWSQxXTogRElSRUNUSU9OX0xFRlRcbiAgfTtcbiAgY29uc3QgRGVmYXVsdCRiID0ge1xuICAgIGludGVydmFsOiA1MDAwLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIHBhdXNlOiAnaG92ZXInLFxuICAgIHJpZGU6IGZhbHNlLFxuICAgIHRvdWNoOiB0cnVlLFxuICAgIHdyYXA6IHRydWVcbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUkYiA9IHtcbiAgICBpbnRlcnZhbDogJyhudW1iZXJ8Ym9vbGVhbiknLFxuICAgIC8vIFRPRE86djYgcmVtb3ZlIGJvb2xlYW4gc3VwcG9ydFxuICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG4gICAgcGF1c2U6ICcoc3RyaW5nfGJvb2xlYW4pJyxcbiAgICByaWRlOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAgdG91Y2g6ICdib29sZWFuJyxcbiAgICB3cmFwOiAnYm9vbGVhbidcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgQ2Fyb3VzZWwgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy50b3VjaFRpbWVvdXQgPSBudWxsO1xuICAgICAgdGhpcy5fc3dpcGVIZWxwZXIgPSBudWxsO1xuICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSBTZWxlY3RvckVuZ2luZS5maW5kT25lKFNFTEVDVE9SX0lORElDQVRPUlMsIHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLnJpZGUgPT09IENMQVNTX05BTUVfQ0FST1VTRUwpIHtcbiAgICAgICAgdGhpcy5jeWNsZSgpO1xuICAgICAgfVxuICAgIH0gLy8gR2V0dGVyc1xuXG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdCRiO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGUkYjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRSRjO1xuICAgIH0gLy8gUHVibGljXG5cblxuICAgIG5leHQoKSB7XG4gICAgICB0aGlzLl9zbGlkZShPUkRFUl9ORVhUKTtcbiAgICB9XG5cbiAgICBuZXh0V2hlblZpc2libGUoKSB7XG4gICAgICAvLyBGSVhNRSBUT0RPIHVzZSBgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlYFxuICAgICAgLy8gRG9uJ3QgY2FsbCBuZXh0IHdoZW4gdGhlIHBhZ2UgaXNuJ3QgdmlzaWJsZVxuICAgICAgLy8gb3IgdGhlIGNhcm91c2VsIG9yIGl0cyBwYXJlbnQgaXNuJ3QgdmlzaWJsZVxuICAgICAgaWYgKCFkb2N1bWVudC5oaWRkZW4gJiYgaXNWaXNpYmxlKHRoaXMuX2VsZW1lbnQpKSB7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByZXYoKSB7XG4gICAgICB0aGlzLl9zbGlkZShPUkRFUl9QUkVWKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgdHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICB9XG5cbiAgICBjeWNsZSgpIHtcbiAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcblxuICAgICAgdGhpcy5fdXBkYXRlSW50ZXJ2YWwoKTtcblxuICAgICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLm5leHRXaGVuVmlzaWJsZSgpLCB0aGlzLl9jb25maWcuaW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIF9tYXliZUVuYWJsZUN5Y2xlKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25maWcucmlkZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uZSh0aGlzLl9lbGVtZW50LCBFVkVOVF9TTElELCAoKSA9PiB0aGlzLmN5Y2xlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICB9XG5cbiAgICB0byhpbmRleCkge1xuICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLl9nZXRJdGVtcygpO1xuXG4gICAgICBpZiAoaW5kZXggPiBpdGVtcy5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uZSh0aGlzLl9lbGVtZW50LCBFVkVOVF9TTElELCAoKSA9PiB0aGlzLnRvKGluZGV4KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fZ2V0QWN0aXZlKCkpO1xuXG4gICAgICBpZiAoYWN0aXZlSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JkZXIgPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gT1JERVJfTkVYVCA6IE9SREVSX1BSRVY7XG5cbiAgICAgIHRoaXMuX3NsaWRlKG9yZGVyLCBpdGVtc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICBpZiAodGhpcy5fc3dpcGVIZWxwZXIpIHtcbiAgICAgICAgdGhpcy5fc3dpcGVIZWxwZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9jb25maWdBZnRlck1lcmdlKGNvbmZpZykge1xuICAgICAgY29uZmlnLmRlZmF1bHRJbnRlcnZhbCA9IGNvbmZpZy5pbnRlcnZhbDtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfS0VZRE9XTiQxLCBldmVudCA9PiB0aGlzLl9rZXlkb3duKGV2ZW50KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucGF1c2UgPT09ICdob3ZlcicpIHtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX01PVVNFRU5URVIkMSwgKCkgPT4gdGhpcy5wYXVzZSgpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX01PVVNFTEVBVkUkMSwgKCkgPT4gdGhpcy5fbWF5YmVFbmFibGVDeWNsZSgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b3VjaCAmJiBTd2lwZS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHRoaXMuX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfYWRkVG91Y2hFdmVudExpc3RlbmVycygpIHtcbiAgICAgIGZvciAoY29uc3QgaW1nIG9mIFNlbGVjdG9yRW5naW5lLmZpbmQoU0VMRUNUT1JfSVRFTV9JTUcsIHRoaXMuX2VsZW1lbnQpKSB7XG4gICAgICAgIEV2ZW50SGFuZGxlci5vbihpbWcsIEVWRU5UX0RSQUdfU1RBUlQsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmRDYWxsQmFjayA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5wYXVzZSAhPT0gJ2hvdmVyJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBJZiBpdCdzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2UsIG1vdXNlZW50ZXIvbGVhdmUgYXJlIGZpcmVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgdGhlIG1vdXNlIGNvbXBhdGliaWxpdHkgZXZlbnRzIG9uIGZpcnN0IHRhcCAtIHRoZSBjYXJvdXNlbFxuICAgICAgICAvLyB3b3VsZCBzdG9wIGN5Y2xpbmcgdW50aWwgdXNlciB0YXBwZWQgb3V0IG9mIGl0O1xuICAgICAgICAvLyBoZXJlLCB3ZSBsaXN0ZW4gZm9yIHRvdWNoZW5kLCBleHBsaWNpdGx5IHBhdXNlIHRoZSBjYXJvdXNlbFxuICAgICAgICAvLyAoYXMgaWYgaXQncyB0aGUgc2Vjb25kIHRpbWUgd2UgdGFwIG9uIGl0LCBtb3VzZWVudGVyIGNvbXBhdCBldmVudFxuICAgICAgICAvLyBpcyBOT1QgZmlyZWQpIGFuZCBhZnRlciBhIHRpbWVvdXQgKHRvIGFsbG93IGZvciBtb3VzZSBjb21wYXRpYmlsaXR5XG4gICAgICAgIC8vIGV2ZW50cyB0byBmaXJlKSB3ZSBleHBsaWNpdGx5IHJlc3RhcnQgY3ljbGluZ1xuXG5cbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLnRvdWNoVGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fbWF5YmVFbmFibGVDeWNsZSgpLCBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUICsgdGhpcy5fY29uZmlnLmludGVydmFsKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHN3aXBlQ29uZmlnID0ge1xuICAgICAgICBsZWZ0Q2FsbGJhY2s6ICgpID0+IHRoaXMuX3NsaWRlKHRoaXMuX2RpcmVjdGlvblRvT3JkZXIoRElSRUNUSU9OX0xFRlQpKSxcbiAgICAgICAgcmlnaHRDYWxsYmFjazogKCkgPT4gdGhpcy5fc2xpZGUodGhpcy5fZGlyZWN0aW9uVG9PcmRlcihESVJFQ1RJT05fUklHSFQpKSxcbiAgICAgICAgZW5kQ2FsbGJhY2s6IGVuZENhbGxCYWNrXG4gICAgICB9O1xuICAgICAgdGhpcy5fc3dpcGVIZWxwZXIgPSBuZXcgU3dpcGUodGhpcy5fZWxlbWVudCwgc3dpcGVDb25maWcpO1xuICAgIH1cblxuICAgIF9rZXlkb3duKGV2ZW50KSB7XG4gICAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBLRVlfVE9fRElSRUNUSU9OW2V2ZW50LmtleV07XG5cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLl9zbGlkZSh0aGlzLl9kaXJlY3Rpb25Ub09yZGVyKGRpcmVjdGlvbikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9nZXRJdGVtSW5kZXgoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldEl0ZW1zKCkuaW5kZXhPZihlbGVtZW50KTtcbiAgICB9XG5cbiAgICBfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChpbmRleCkge1xuICAgICAgaWYgKCF0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjdGl2ZUluZGljYXRvciA9IFNlbGVjdG9yRW5naW5lLmZpbmRPbmUoU0VMRUNUT1JfQUNUSVZFLCB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCk7XG4gICAgICBhY3RpdmVJbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX0FDVElWRSQyKTtcbiAgICAgIGFjdGl2ZUluZGljYXRvci5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcpO1xuICAgICAgY29uc3QgbmV3QWN0aXZlSW5kaWNhdG9yID0gU2VsZWN0b3JFbmdpbmUuZmluZE9uZShgW2RhdGEtYnMtc2xpZGUtdG89XCIke2luZGV4fVwiXWAsIHRoaXMuX2luZGljYXRvcnNFbGVtZW50KTtcblxuICAgICAgaWYgKG5ld0FjdGl2ZUluZGljYXRvcikge1xuICAgICAgICBuZXdBY3RpdmVJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0FDVElWRSQyKTtcbiAgICAgICAgbmV3QWN0aXZlSW5kaWNhdG9yLnNldEF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50JywgJ3RydWUnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlSW50ZXJ2YWwoKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fYWN0aXZlRWxlbWVudCB8fCB0aGlzLl9nZXRBY3RpdmUoKTtcblxuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudEludGVydmFsID0gTnVtYmVyLnBhcnNlSW50KGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLWludGVydmFsJyksIDEwKTtcbiAgICAgIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCA9IGVsZW1lbnRJbnRlcnZhbCB8fCB0aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsO1xuICAgIH1cblxuICAgIF9zbGlkZShvcmRlciwgZWxlbWVudCA9IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gdGhpcy5fZ2V0QWN0aXZlKCk7XG5cbiAgICAgIGNvbnN0IGlzTmV4dCA9IG9yZGVyID09PSBPUkRFUl9ORVhUO1xuICAgICAgY29uc3QgbmV4dEVsZW1lbnQgPSBlbGVtZW50IHx8IGdldE5leHRBY3RpdmVFbGVtZW50KHRoaXMuX2dldEl0ZW1zKCksIGFjdGl2ZUVsZW1lbnQsIGlzTmV4dCwgdGhpcy5fY29uZmlnLndyYXApO1xuXG4gICAgICBpZiAobmV4dEVsZW1lbnQgPT09IGFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0RWxlbWVudEluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KG5leHRFbGVtZW50KTtcblxuICAgICAgY29uc3QgdHJpZ2dlckV2ZW50ID0gZXZlbnROYW1lID0+IHtcbiAgICAgICAgcmV0dXJuIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIGV2ZW50TmFtZSwge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG5leHRFbGVtZW50LFxuICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5fb3JkZXJUb0RpcmVjdGlvbihvcmRlciksXG4gICAgICAgICAgZnJvbTogdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpLFxuICAgICAgICAgIHRvOiBuZXh0RWxlbWVudEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgY29uc3Qgc2xpZGVFdmVudCA9IHRyaWdnZXJFdmVudChFVkVOVF9TTElERSk7XG5cbiAgICAgIGlmIChzbGlkZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFjdGl2ZUVsZW1lbnQgfHwgIW5leHRFbGVtZW50KSB7XG4gICAgICAgIC8vIFNvbWUgd2VpcmRuZXNzIGlzIGhhcHBlbmluZywgc28gd2UgYmFpbFxuICAgICAgICAvLyB0b2RvOiBjaGFuZ2UgdGVzdHMgdGhhdCB1c2UgZW1wdHkgZGl2cyB0byBhdm9pZCB0aGlzIGNoZWNrXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNDeWNsaW5nID0gQm9vbGVhbih0aGlzLl9pbnRlcnZhbCk7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICB0aGlzLl9pc1NsaWRpbmcgPSB0cnVlO1xuXG4gICAgICB0aGlzLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KG5leHRFbGVtZW50SW5kZXgpO1xuXG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbmV4dEVsZW1lbnQ7XG4gICAgICBjb25zdCBkaXJlY3Rpb25hbENsYXNzTmFtZSA9IGlzTmV4dCA/IENMQVNTX05BTUVfU1RBUlQgOiBDTEFTU19OQU1FX0VORDtcbiAgICAgIGNvbnN0IG9yZGVyQ2xhc3NOYW1lID0gaXNOZXh0ID8gQ0xBU1NfTkFNRV9ORVhUIDogQ0xBU1NfTkFNRV9QUkVWO1xuICAgICAgbmV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcmRlckNsYXNzTmFtZSk7XG4gICAgICByZWZsb3cobmV4dEVsZW1lbnQpO1xuICAgICAgYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcbiAgICAgIG5leHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuXG4gICAgICBjb25zdCBjb21wbGV0ZUNhbGxCYWNrID0gKCkgPT4ge1xuICAgICAgICBuZXh0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGRpcmVjdGlvbmFsQ2xhc3NOYW1lLCBvcmRlckNsYXNzTmFtZSk7XG4gICAgICAgIG5leHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUkMik7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX0FDVElWRSQyLCBvcmRlckNsYXNzTmFtZSwgZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdHJpZ2dlckV2ZW50KEVWRU5UX1NMSUQpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZUNhbGxCYWNrLCBhY3RpdmVFbGVtZW50LCB0aGlzLl9pc0FuaW1hdGVkKCkpO1xuXG4gICAgICBpZiAoaXNDeWNsaW5nKSB7XG4gICAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaXNBbmltYXRlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX1NMSURFKTtcbiAgICB9XG5cbiAgICBfZ2V0QWN0aXZlKCkge1xuICAgICAgcmV0dXJuIFNlbGVjdG9yRW5naW5lLmZpbmRPbmUoU0VMRUNUT1JfQUNUSVZFX0lURU0sIHRoaXMuX2VsZW1lbnQpO1xuICAgIH1cblxuICAgIF9nZXRJdGVtcygpIHtcbiAgICAgIHJldHVybiBTZWxlY3RvckVuZ2luZS5maW5kKFNFTEVDVE9SX0lURU0sIHRoaXMuX2VsZW1lbnQpO1xuICAgIH1cblxuICAgIF9jbGVhckludGVydmFsKCkge1xuICAgICAgaWYgKHRoaXMuX2ludGVydmFsKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2RpcmVjdGlvblRvT3JkZXIoZGlyZWN0aW9uKSB7XG4gICAgICBpZiAoaXNSVEwoKSkge1xuICAgICAgICByZXR1cm4gZGlyZWN0aW9uID09PSBESVJFQ1RJT05fTEVGVCA/IE9SREVSX1BSRVYgOiBPUkRFUl9ORVhUO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGlyZWN0aW9uID09PSBESVJFQ1RJT05fTEVGVCA/IE9SREVSX05FWFQgOiBPUkRFUl9QUkVWO1xuICAgIH1cblxuICAgIF9vcmRlclRvRGlyZWN0aW9uKG9yZGVyKSB7XG4gICAgICBpZiAoaXNSVEwoKSkge1xuICAgICAgICByZXR1cm4gb3JkZXIgPT09IE9SREVSX1BSRVYgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9yZGVyID09PSBPUkRFUl9QUkVWID8gRElSRUNUSU9OX1JJR0hUIDogRElSRUNUSU9OX0xFRlQ7XG4gICAgfSAvLyBTdGF0aWNcblxuXG4gICAgc3RhdGljIGpRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gQ2Fyb3VzZWwuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCBjb25maWcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIGRhdGEudG8oY29uZmlnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQgfHwgY29uZmlnLnN0YXJ0c1dpdGgoJ18nKSB8fCBjb25maWcgPT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBEYXRhIEFQSSBpbXBsZW1lbnRhdGlvblxuICAgKi9cblxuXG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNSwgU0VMRUNUT1JfREFUQV9TTElERSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0RWxlbWVudEZyb21TZWxlY3Rvcih0aGlzKTtcblxuICAgIGlmICghdGFyZ2V0IHx8ICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfQ0FST1VTRUwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBjYXJvdXNlbCA9IENhcm91c2VsLmdldE9yQ3JlYXRlSW5zdGFuY2UodGFyZ2V0KTtcbiAgICBjb25zdCBzbGlkZUluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtc2xpZGUtdG8nKTtcblxuICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICBjYXJvdXNlbC50byhzbGlkZUluZGV4KTtcblxuICAgICAgY2Fyb3VzZWwuX21heWJlRW5hYmxlQ3ljbGUoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChNYW5pcHVsYXRvci5nZXREYXRhQXR0cmlidXRlKHRoaXMsICdzbGlkZScpID09PSAnbmV4dCcpIHtcbiAgICAgIGNhcm91c2VsLm5leHQoKTtcblxuICAgICAgY2Fyb3VzZWwuX21heWJlRW5hYmxlQ3ljbGUoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhcm91c2VsLnByZXYoKTtcblxuICAgIGNhcm91c2VsLl9tYXliZUVuYWJsZUN5Y2xlKCk7XG4gIH0pO1xuICBFdmVudEhhbmRsZXIub24od2luZG93LCBFVkVOVF9MT0FEX0RBVEFfQVBJJDMsICgpID0+IHtcbiAgICBjb25zdCBjYXJvdXNlbHMgPSBTZWxlY3RvckVuZ2luZS5maW5kKFNFTEVDVE9SX0RBVEFfUklERSk7XG5cbiAgICBmb3IgKGNvbnN0IGNhcm91c2VsIG9mIGNhcm91c2Vscykge1xuICAgICAgQ2Fyb3VzZWwuZ2V0T3JDcmVhdGVJbnN0YW5jZShjYXJvdXNlbCk7XG4gICAgfVxuICB9KTtcbiAgLyoqXG4gICAqIGpRdWVyeVxuICAgKi9cblxuICBkZWZpbmVKUXVlcnlQbHVnaW4oQ2Fyb3VzZWwpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGNvbGxhcHNlLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FJGIgPSAnY29sbGFwc2UnO1xuICBjb25zdCBEQVRBX0tFWSQ3ID0gJ2JzLmNvbGxhcHNlJztcbiAgY29uc3QgRVZFTlRfS0VZJDcgPSBgLiR7REFUQV9LRVkkN31gO1xuICBjb25zdCBEQVRBX0FQSV9LRVkkNCA9ICcuZGF0YS1hcGknO1xuICBjb25zdCBFVkVOVF9TSE9XJDYgPSBgc2hvdyR7RVZFTlRfS0VZJDd9YDtcbiAgY29uc3QgRVZFTlRfU0hPV04kNiA9IGBzaG93biR7RVZFTlRfS0VZJDd9YDtcbiAgY29uc3QgRVZFTlRfSElERSQ2ID0gYGhpZGUke0VWRU5UX0tFWSQ3fWA7XG4gIGNvbnN0IEVWRU5UX0hJRERFTiQ2ID0gYGhpZGRlbiR7RVZFTlRfS0VZJDd9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNCA9IGBjbGljayR7RVZFTlRfS0VZJDd9JHtEQVRBX0FQSV9LRVkkNH1gO1xuICBjb25zdCBDTEFTU19OQU1FX1NIT1ckNyA9ICdzaG93JztcbiAgY29uc3QgQ0xBU1NfTkFNRV9DT0xMQVBTRSA9ICdjb2xsYXBzZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfQ09MTEFQU0lORyA9ICdjb2xsYXBzaW5nJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9DT0xMQVBTRUQgPSAnY29sbGFwc2VkJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9ERUVQRVJfQ0hJTERSRU4gPSBgOnNjb3BlIC4ke0NMQVNTX05BTUVfQ09MTEFQU0V9IC4ke0NMQVNTX05BTUVfQ09MTEFQU0V9YDtcbiAgY29uc3QgQ0xBU1NfTkFNRV9IT1JJWk9OVEFMID0gJ2NvbGxhcHNlLWhvcml6b250YWwnO1xuICBjb25zdCBXSURUSCA9ICd3aWR0aCc7XG4gIGNvbnN0IEhFSUdIVCA9ICdoZWlnaHQnO1xuICBjb25zdCBTRUxFQ1RPUl9BQ1RJVkVTID0gJy5jb2xsYXBzZS5zaG93LCAuY29sbGFwc2UuY29sbGFwc2luZyc7XG4gIGNvbnN0IFNFTEVDVE9SX0RBVEFfVE9HR0xFJDQgPSAnW2RhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIl0nO1xuICBjb25zdCBEZWZhdWx0JGEgPSB7XG4gICAgcGFyZW50OiBudWxsLFxuICAgIHRvZ2dsZTogdHJ1ZVxuICB9O1xuICBjb25zdCBEZWZhdWx0VHlwZSRhID0ge1xuICAgIHBhcmVudDogJyhudWxsfGVsZW1lbnQpJyxcbiAgICB0b2dnbGU6ICdib29sZWFuJ1xuICB9O1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBDb2xsYXBzZSBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgc3VwZXIoZWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fdHJpZ2dlckFycmF5ID0gW107XG4gICAgICBjb25zdCB0b2dnbGVMaXN0ID0gU2VsZWN0b3JFbmdpbmUuZmluZChTRUxFQ1RPUl9EQVRBX1RPR0dMRSQ0KTtcblxuICAgICAgZm9yIChjb25zdCBlbGVtIG9mIHRvZ2dsZUxpc3QpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBnZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW0pO1xuICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0gU2VsZWN0b3JFbmdpbmUuZmluZChzZWxlY3RvcikuZmlsdGVyKGZvdW5kRWxlbWVudCA9PiBmb3VuZEVsZW1lbnQgPT09IHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCAmJiBmaWx0ZXJFbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJBcnJheS5wdXNoKGVsZW0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2luaXRpYWxpemVDaGlsZHJlbigpO1xuXG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX3RyaWdnZXJBcnJheSwgdGhpcy5faXNTaG93bigpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQkYTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJGE7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkYjtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICB0b2dnbGUoKSB7XG4gICAgICBpZiAodGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgdGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGFjdGl2ZUNoaWxkcmVuID0gW107IC8vIGZpbmQgYWN0aXZlIGNoaWxkcmVuXG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucGFyZW50KSB7XG4gICAgICAgIGFjdGl2ZUNoaWxkcmVuID0gdGhpcy5fZ2V0Rmlyc3RMZXZlbENoaWxkcmVuKFNFTEVDVE9SX0FDVElWRVMpLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQgIT09IHRoaXMuX2VsZW1lbnQpLm1hcChlbGVtZW50ID0+IENvbGxhcHNlLmdldE9yQ3JlYXRlSW5zdGFuY2UoZWxlbWVudCwge1xuICAgICAgICAgIHRvZ2dsZTogZmFsc2VcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlQ2hpbGRyZW4ubGVuZ3RoICYmIGFjdGl2ZUNoaWxkcmVuWzBdLl9pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydEV2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfU0hPVyQ2KTtcblxuICAgICAgaWYgKHN0YXJ0RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgYWN0aXZlSW5zdGFuY2Ugb2YgYWN0aXZlQ2hpbGRyZW4pIHtcbiAgICAgICAgYWN0aXZlSW5zdGFuY2UuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQ09MTEFQU0UpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblxuICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX3RyaWdnZXJBcnJheSwgdHJ1ZSk7XG5cbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTRSwgQ0xBU1NfTkFNRV9TSE9XJDcpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9ICcnO1xuICAgICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9TSE9XTiQ2KTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNhcGl0YWxpemVkRGltZW5zaW9uID0gZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoMSk7XG4gICAgICBjb25zdCBzY3JvbGxTaXplID0gYHNjcm9sbCR7Y2FwaXRhbGl6ZWREaW1lbnNpb259YDtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZSwgdGhpcy5fZWxlbWVudCwgdHJ1ZSk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IGAke3RoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV19cHhgO1xuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICF0aGlzLl9pc1Nob3duKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydEV2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfSElERSQ2KTtcblxuICAgICAgaWYgKHN0YXJ0RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuX2dldERpbWVuc2lvbigpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSBgJHt0aGlzLl9lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2RpbWVuc2lvbl19cHhgO1xuICAgICAgcmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQ09MTEFQU0UsIENMQVNTX05BTUVfU0hPVyQ3KTtcblxuICAgICAgZm9yIChjb25zdCB0cmlnZ2VyIG9mIHRoaXMuX3RyaWdnZXJBcnJheSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZ2V0RWxlbWVudEZyb21TZWxlY3Rvcih0cmlnZ2VyKTtcblxuICAgICAgICBpZiAoZWxlbWVudCAmJiAhdGhpcy5faXNTaG93bihlbGVtZW50KSkge1xuICAgICAgICAgIHRoaXMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhbdHJpZ2dlcl0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSB0cnVlO1xuXG4gICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQ09MTEFQU0lORyk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfQ09MTEFQU0UpO1xuXG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJRERFTiQ2KTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9ICcnO1xuXG4gICAgICB0aGlzLl9xdWV1ZUNhbGxiYWNrKGNvbXBsZXRlLCB0aGlzLl9lbGVtZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBfaXNTaG93bihlbGVtZW50ID0gdGhpcy5fZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfU0hPVyQ3KTtcbiAgICB9IC8vIFByaXZhdGVcblxuXG4gICAgX2NvbmZpZ0FmdGVyTWVyZ2UoY29uZmlnKSB7XG4gICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gQ29lcmNlIHN0cmluZyB2YWx1ZXNcblxuICAgICAgY29uZmlnLnBhcmVudCA9IGdldEVsZW1lbnQoY29uZmlnLnBhcmVudCk7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIF9nZXREaW1lbnNpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9IT1JJWk9OVEFMKSA/IFdJRFRIIDogSEVJR0hUO1xuICAgIH1cblxuICAgIF9pbml0aWFsaXplQ2hpbGRyZW4oKSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuX2dldEZpcnN0TGV2ZWxDaGlsZHJlbihTRUxFQ1RPUl9EQVRBX1RPR0dMRSQ0KTtcblxuICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGNoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZ2V0RWxlbWVudEZyb21TZWxlY3RvcihlbGVtZW50KTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoW2VsZW1lbnRdLCB0aGlzLl9pc1Nob3duKHNlbGVjdGVkKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0Rmlyc3RMZXZlbENoaWxkcmVuKHNlbGVjdG9yKSB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IFNlbGVjdG9yRW5naW5lLmZpbmQoQ0xBU1NfTkFNRV9ERUVQRVJfQ0hJTERSRU4sIHRoaXMuX2NvbmZpZy5wYXJlbnQpOyAvLyByZW1vdmUgY2hpbGRyZW4gaWYgZ3JlYXRlciBkZXB0aFxuXG4gICAgICByZXR1cm4gU2VsZWN0b3JFbmdpbmUuZmluZChzZWxlY3RvciwgdGhpcy5fY29uZmlnLnBhcmVudCkuZmlsdGVyKGVsZW1lbnQgPT4gIWNoaWxkcmVuLmluY2x1ZGVzKGVsZW1lbnQpKTtcbiAgICB9XG5cbiAgICBfYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRyaWdnZXJBcnJheSwgaXNPcGVuKSB7XG4gICAgICBpZiAoIXRyaWdnZXJBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdHJpZ2dlckFycmF5KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19OQU1FX0NPTExBUFNFRCwgIWlzT3Blbik7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcbiAgICAgIH1cbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgY29uc3QgX2NvbmZpZyA9IHt9O1xuXG4gICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycgJiYgL3Nob3d8aGlkZS8udGVzdChjb25maWcpKSB7XG4gICAgICAgIF9jb25maWcudG9nZ2xlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gQ29sbGFwc2UuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCBfY29uZmlnKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBEYXRhIEFQSSBpbXBsZW1lbnRhdGlvblxuICAgKi9cblxuXG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNCwgU0VMRUNUT1JfREFUQV9UT0dHTEUkNCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gcHJldmVudERlZmF1bHQgb25seSBmb3IgPGE+IGVsZW1lbnRzICh3aGljaCBjaGFuZ2UgdGhlIFVSTCkgbm90IGluc2lkZSB0aGUgY29sbGFwc2libGUgZWxlbWVudFxuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gJ0EnIHx8IGV2ZW50LmRlbGVnYXRlVGFyZ2V0ICYmIGV2ZW50LmRlbGVnYXRlVGFyZ2V0LnRhZ05hbWUgPT09ICdBJykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RvciA9IGdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG4gICAgY29uc3Qgc2VsZWN0b3JFbGVtZW50cyA9IFNlbGVjdG9yRW5naW5lLmZpbmQoc2VsZWN0b3IpO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHNlbGVjdG9yRWxlbWVudHMpIHtcbiAgICAgIENvbGxhcHNlLmdldE9yQ3JlYXRlSW5zdGFuY2UoZWxlbWVudCwge1xuICAgICAgICB0b2dnbGU6IGZhbHNlXG4gICAgICB9KS50b2dnbGUoKTtcbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogalF1ZXJ5XG4gICAqL1xuXG4gIGRlZmluZUpRdWVyeVBsdWdpbihDb2xsYXBzZSk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogZHJvcGRvd24uanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuXG4gIGNvbnN0IE5BTUUkYSA9ICdkcm9wZG93bic7XG4gIGNvbnN0IERBVEFfS0VZJDYgPSAnYnMuZHJvcGRvd24nO1xuICBjb25zdCBFVkVOVF9LRVkkNiA9IGAuJHtEQVRBX0tFWSQ2fWA7XG4gIGNvbnN0IERBVEFfQVBJX0tFWSQzID0gJy5kYXRhLWFwaSc7XG4gIGNvbnN0IEVTQ0FQRV9LRVkkMiA9ICdFc2NhcGUnO1xuICBjb25zdCBUQUJfS0VZJDEgPSAnVGFiJztcbiAgY29uc3QgQVJST1dfVVBfS0VZJDEgPSAnQXJyb3dVcCc7XG4gIGNvbnN0IEFSUk9XX0RPV05fS0VZJDEgPSAnQXJyb3dEb3duJztcbiAgY29uc3QgUklHSFRfTU9VU0VfQlVUVE9OID0gMjsgLy8gTW91c2VFdmVudC5idXR0b24gdmFsdWUgZm9yIHRoZSBzZWNvbmRhcnkgYnV0dG9uLCB1c3VhbGx5IHRoZSByaWdodCBidXR0b25cblxuICBjb25zdCBFVkVOVF9ISURFJDUgPSBgaGlkZSR7RVZFTlRfS0VZJDZ9YDtcbiAgY29uc3QgRVZFTlRfSElEREVOJDUgPSBgaGlkZGVuJHtFVkVOVF9LRVkkNn1gO1xuICBjb25zdCBFVkVOVF9TSE9XJDUgPSBgc2hvdyR7RVZFTlRfS0VZJDZ9YDtcbiAgY29uc3QgRVZFTlRfU0hPV04kNSA9IGBzaG93biR7RVZFTlRfS0VZJDZ9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMyA9IGBjbGljayR7RVZFTlRfS0VZJDZ9JHtEQVRBX0FQSV9LRVkkM31gO1xuICBjb25zdCBFVkVOVF9LRVlET1dOX0RBVEFfQVBJID0gYGtleWRvd24ke0VWRU5UX0tFWSQ2fSR7REFUQV9BUElfS0VZJDN9YDtcbiAgY29uc3QgRVZFTlRfS0VZVVBfREFUQV9BUEkgPSBga2V5dXAke0VWRU5UX0tFWSQ2fSR7REFUQV9BUElfS0VZJDN9YDtcbiAgY29uc3QgQ0xBU1NfTkFNRV9TSE9XJDYgPSAnc2hvdyc7XG4gIGNvbnN0IENMQVNTX05BTUVfRFJPUFVQID0gJ2Ryb3B1cCc7XG4gIGNvbnN0IENMQVNTX05BTUVfRFJPUEVORCA9ICdkcm9wZW5kJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9EUk9QU1RBUlQgPSAnZHJvcHN0YXJ0JztcbiAgY29uc3QgQ0xBU1NfTkFNRV9EUk9QVVBfQ0VOVEVSID0gJ2Ryb3B1cC1jZW50ZXInO1xuICBjb25zdCBDTEFTU19OQU1FX0RST1BET1dOX0NFTlRFUiA9ICdkcm9wZG93bi1jZW50ZXInO1xuICBjb25zdCBTRUxFQ1RPUl9EQVRBX1RPR0dMRSQzID0gJ1tkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCJdOm5vdCguZGlzYWJsZWQpOm5vdCg6ZGlzYWJsZWQpJztcbiAgY29uc3QgU0VMRUNUT1JfREFUQV9UT0dHTEVfU0hPV04gPSBgJHtTRUxFQ1RPUl9EQVRBX1RPR0dMRSQzfS4ke0NMQVNTX05BTUVfU0hPVyQ2fWA7XG4gIGNvbnN0IFNFTEVDVE9SX01FTlUgPSAnLmRyb3Bkb3duLW1lbnUnO1xuICBjb25zdCBTRUxFQ1RPUl9OQVZCQVIgPSAnLm5hdmJhcic7XG4gIGNvbnN0IFNFTEVDVE9SX05BVkJBUl9OQVYgPSAnLm5hdmJhci1uYXYnO1xuICBjb25zdCBTRUxFQ1RPUl9WSVNJQkxFX0lURU1TID0gJy5kcm9wZG93bi1tZW51IC5kcm9wZG93bi1pdGVtOm5vdCguZGlzYWJsZWQpOm5vdCg6ZGlzYWJsZWQpJztcbiAgY29uc3QgUExBQ0VNRU5UX1RPUCA9IGlzUlRMKCkgPyAndG9wLWVuZCcgOiAndG9wLXN0YXJ0JztcbiAgY29uc3QgUExBQ0VNRU5UX1RPUEVORCA9IGlzUlRMKCkgPyAndG9wLXN0YXJ0JyA6ICd0b3AtZW5kJztcbiAgY29uc3QgUExBQ0VNRU5UX0JPVFRPTSA9IGlzUlRMKCkgPyAnYm90dG9tLWVuZCcgOiAnYm90dG9tLXN0YXJ0JztcbiAgY29uc3QgUExBQ0VNRU5UX0JPVFRPTUVORCA9IGlzUlRMKCkgPyAnYm90dG9tLXN0YXJ0JyA6ICdib3R0b20tZW5kJztcbiAgY29uc3QgUExBQ0VNRU5UX1JJR0hUID0gaXNSVEwoKSA/ICdsZWZ0LXN0YXJ0JyA6ICdyaWdodC1zdGFydCc7XG4gIGNvbnN0IFBMQUNFTUVOVF9MRUZUID0gaXNSVEwoKSA/ICdyaWdodC1zdGFydCcgOiAnbGVmdC1zdGFydCc7XG4gIGNvbnN0IFBMQUNFTUVOVF9UT1BDRU5URVIgPSAndG9wJztcbiAgY29uc3QgUExBQ0VNRU5UX0JPVFRPTUNFTlRFUiA9ICdib3R0b20nO1xuICBjb25zdCBEZWZhdWx0JDkgPSB7XG4gICAgYXV0b0Nsb3NlOiB0cnVlLFxuICAgIGJvdW5kYXJ5OiAnY2xpcHBpbmdQYXJlbnRzJyxcbiAgICBkaXNwbGF5OiAnZHluYW1pYycsXG4gICAgb2Zmc2V0OiBbMCwgMl0sXG4gICAgcG9wcGVyQ29uZmlnOiBudWxsLFxuICAgIHJlZmVyZW5jZTogJ3RvZ2dsZSdcbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUkOSA9IHtcbiAgICBhdXRvQ2xvc2U6ICcoYm9vbGVhbnxzdHJpbmcpJyxcbiAgICBib3VuZGFyeTogJyhzdHJpbmd8ZWxlbWVudCknLFxuICAgIGRpc3BsYXk6ICdzdHJpbmcnLFxuICAgIG9mZnNldDogJyhhcnJheXxzdHJpbmd8ZnVuY3Rpb24pJyxcbiAgICBwb3BwZXJDb25maWc6ICcobnVsbHxvYmplY3R8ZnVuY3Rpb24pJyxcbiAgICByZWZlcmVuY2U6ICcoc3RyaW5nfGVsZW1lbnR8b2JqZWN0KSdcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgRHJvcGRvd24gZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0aGlzLl9wb3BwZXIgPSBudWxsO1xuICAgICAgdGhpcy5fcGFyZW50ID0gdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlOyAvLyBkcm9wZG93biB3cmFwcGVyXG4gICAgICAvLyB0b2RvOiB2NiByZXZlcnQgIzM3MDExICYgY2hhbmdlIG1hcmt1cCBodHRwczovL2dldGJvb3RzdHJhcC5jb20vZG9jcy81LjIvZm9ybXMvaW5wdXQtZ3JvdXAvXG5cbiAgICAgIHRoaXMuX21lbnUgPSBTZWxlY3RvckVuZ2luZS5uZXh0KHRoaXMuX2VsZW1lbnQsIFNFTEVDVE9SX01FTlUpWzBdIHx8IFNlbGVjdG9yRW5naW5lLnByZXYodGhpcy5fZWxlbWVudCwgU0VMRUNUT1JfTUVOVSlbMF0gfHwgU2VsZWN0b3JFbmdpbmUuZmluZE9uZShTRUxFQ1RPUl9NRU5VLCB0aGlzLl9wYXJlbnQpO1xuICAgICAgdGhpcy5faW5OYXZiYXIgPSB0aGlzLl9kZXRlY3ROYXZiYXIoKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQkOTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJDk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkYTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICB0b2dnbGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXNTaG93bigpID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3coKTtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgaWYgKGlzRGlzYWJsZWQodGhpcy5fZWxlbWVudCkgfHwgdGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogdGhpcy5fZWxlbWVudFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNob3dFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1NIT1ckNSwgcmVsYXRlZFRhcmdldCk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NyZWF0ZVBvcHBlcigpOyAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgYWRkIGV4dHJhXG4gICAgICAvLyBlbXB0eSBtb3VzZW92ZXIgbGlzdGVuZXJzIHRvIHRoZSBib2R5J3MgaW1tZWRpYXRlIGNoaWxkcmVuO1xuICAgICAgLy8gb25seSBuZWVkZWQgYmVjYXVzZSBvZiBicm9rZW4gZXZlbnQgZGVsZWdhdGlvbiBvbiBpT1NcbiAgICAgIC8vIGh0dHBzOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAxNC8wMi9tb3VzZV9ldmVudF9idWIuaHRtbFxuXG5cbiAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgIXRoaXMuX3BhcmVudC5jbG9zZXN0KFNFTEVDVE9SX05BVkJBUl9OQVYpKSB7XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBbXS5jb25jYXQoLi4uZG9jdW1lbnQuYm9keS5jaGlsZHJlbikpIHtcbiAgICAgICAgICBFdmVudEhhbmRsZXIub24oZWxlbWVudCwgJ21vdXNlb3ZlcicsIG5vb3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblxuICAgICAgdGhpcy5fbWVudS5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfU0hPVyQ2KTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfU0hPVyQ2KTtcblxuICAgICAgRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfU0hPV04kNSwgcmVsYXRlZFRhcmdldCk7XG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgIGlmIChpc0Rpc2FibGVkKHRoaXMuX2VsZW1lbnQpIHx8ICF0aGlzLl9pc1Nob3duKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0ge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9jb21wbGV0ZUhpZGUocmVsYXRlZFRhcmdldCk7XG4gICAgfVxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIGlmICh0aGlzLl9wb3BwZXIpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgIH1cblxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7XG5cbiAgICAgIGlmICh0aGlzLl9wb3BwZXIpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLnVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfY29tcGxldGVIaWRlKHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGhpZGVFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJREUkNSwgcmVsYXRlZFRhcmdldCk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSByZW1vdmUgdGhlIGV4dHJhXG4gICAgICAvLyBlbXB0eSBtb3VzZW92ZXIgbGlzdGVuZXJzIHdlIGFkZGVkIGZvciBpT1Mgc3VwcG9ydFxuXG5cbiAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIFtdLmNvbmNhdCguLi5kb2N1bWVudC5ib2R5LmNoaWxkcmVuKSkge1xuICAgICAgICAgIEV2ZW50SGFuZGxlci5vZmYoZWxlbWVudCwgJ21vdXNlb3ZlcicsIG5vb3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9wb3BwZXIpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbWVudS5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPVyQ2KTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPVyQ2KTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcblxuICAgICAgTWFuaXB1bGF0b3IucmVtb3ZlRGF0YUF0dHJpYnV0ZSh0aGlzLl9tZW51LCAncG9wcGVyJyk7XG4gICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9ISURERU4kNSwgcmVsYXRlZFRhcmdldCk7XG4gICAgfVxuXG4gICAgX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IHN1cGVyLl9nZXRDb25maWcoY29uZmlnKTtcblxuICAgICAgaWYgKHR5cGVvZiBjb25maWcucmVmZXJlbmNlID09PSAnb2JqZWN0JyAmJiAhaXNFbGVtZW50KGNvbmZpZy5yZWZlcmVuY2UpICYmIHR5cGVvZiBjb25maWcucmVmZXJlbmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBQb3BwZXIgdmlydHVhbCBlbGVtZW50cyByZXF1aXJlIGEgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG1ldGhvZFxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke05BTUUkYS50b1VwcGVyQ2FzZSgpfTogT3B0aW9uIFwicmVmZXJlbmNlXCIgcHJvdmlkZWQgdHlwZSBcIm9iamVjdFwiIHdpdGhvdXQgYSByZXF1aXJlZCBcImdldEJvdW5kaW5nQ2xpZW50UmVjdFwiIG1ldGhvZC5gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBfY3JlYXRlUG9wcGVyKCkge1xuICAgICAgaWYgKHR5cGVvZiBQb3BwZXJfX25hbWVzcGFjZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9vdHN0cmFwXFwncyBkcm9wZG93bnMgcmVxdWlyZSBQb3BwZXIgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZyknKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50O1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLnJlZmVyZW5jZSA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuX3BhcmVudDtcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpKSB7XG4gICAgICAgIHJlZmVyZW5jZUVsZW1lbnQgPSBnZXRFbGVtZW50KHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLnJlZmVyZW5jZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuX2NvbmZpZy5yZWZlcmVuY2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvcHBlckNvbmZpZyA9IHRoaXMuX2dldFBvcHBlckNvbmZpZygpO1xuXG4gICAgICB0aGlzLl9wb3BwZXIgPSBQb3BwZXJfX25hbWVzcGFjZS5jcmVhdGVQb3BwZXIocmVmZXJlbmNlRWxlbWVudCwgdGhpcy5fbWVudSwgcG9wcGVyQ29uZmlnKTtcbiAgICB9XG5cbiAgICBfaXNTaG93bigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tZW51LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX1NIT1ckNik7XG4gICAgfVxuXG4gICAgX2dldFBsYWNlbWVudCgpIHtcbiAgICAgIGNvbnN0IHBhcmVudERyb3Bkb3duID0gdGhpcy5fcGFyZW50O1xuXG4gICAgICBpZiAocGFyZW50RHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfRFJPUEVORCkpIHtcbiAgICAgICAgcmV0dXJuIFBMQUNFTUVOVF9SSUdIVDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudERyb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0RST1BTVEFSVCkpIHtcbiAgICAgICAgcmV0dXJuIFBMQUNFTUVOVF9MRUZUO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50RHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfRFJPUFVQX0NFTlRFUikpIHtcbiAgICAgICAgcmV0dXJuIFBMQUNFTUVOVF9UT1BDRU5URVI7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnREcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9EUk9QRE9XTl9DRU5URVIpKSB7XG4gICAgICAgIHJldHVybiBQTEFDRU1FTlRfQk9UVE9NQ0VOVEVSO1xuICAgICAgfSAvLyBXZSBuZWVkIHRvIHRyaW0gdGhlIHZhbHVlIGJlY2F1c2UgY3VzdG9tIHByb3BlcnRpZXMgY2FuIGFsc28gaW5jbHVkZSBzcGFjZXNcblxuXG4gICAgICBjb25zdCBpc0VuZCA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5fbWVudSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1wb3NpdGlvbicpLnRyaW0oKSA9PT0gJ2VuZCc7XG5cbiAgICAgIGlmIChwYXJlbnREcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9EUk9QVVApKSB7XG4gICAgICAgIHJldHVybiBpc0VuZCA/IFBMQUNFTUVOVF9UT1BFTkQgOiBQTEFDRU1FTlRfVE9QO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNFbmQgPyBQTEFDRU1FTlRfQk9UVE9NRU5EIDogUExBQ0VNRU5UX0JPVFRPTTtcbiAgICB9XG5cbiAgICBfZGV0ZWN0TmF2YmFyKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQuY2xvc2VzdChTRUxFQ1RPUl9OQVZCQVIpICE9PSBudWxsO1xuICAgIH1cblxuICAgIF9nZXRPZmZzZXQoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIG9mZnNldFxuICAgICAgfSA9IHRoaXMuX2NvbmZpZztcblxuICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBvZmZzZXQuc3BsaXQoJywnKS5tYXAodmFsdWUgPT4gTnVtYmVyLnBhcnNlSW50KHZhbHVlLCAxMCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9mZnNldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gcG9wcGVyRGF0YSA9PiBvZmZzZXQocG9wcGVyRGF0YSwgdGhpcy5fZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgX2dldFBvcHBlckNvbmZpZygpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRCc1BvcHBlckNvbmZpZyA9IHtcbiAgICAgICAgcGxhY2VtZW50OiB0aGlzLl9nZXRQbGFjZW1lbnQoKSxcbiAgICAgICAgbW9kaWZpZXJzOiBbe1xuICAgICAgICAgIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGJvdW5kYXJ5OiB0aGlzLl9jb25maWcuYm91bmRhcnlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBuYW1lOiAnb2Zmc2V0JyxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMuX2dldE9mZnNldCgpXG4gICAgICAgICAgfVxuICAgICAgICB9XVxuICAgICAgfTsgLy8gRGlzYWJsZSBQb3BwZXIgaWYgd2UgaGF2ZSBhIHN0YXRpYyBkaXNwbGF5IG9yIERyb3Bkb3duIGlzIGluIE5hdmJhclxuXG4gICAgICBpZiAodGhpcy5faW5OYXZiYXIgfHwgdGhpcy5fY29uZmlnLmRpc3BsYXkgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIE1hbmlwdWxhdG9yLnNldERhdGFBdHRyaWJ1dGUodGhpcy5fbWVudSwgJ3BvcHBlcicsICdzdGF0aWMnKTsgLy8gdG9kbzp2NiByZW1vdmVcblxuICAgICAgICBkZWZhdWx0QnNQb3BwZXJDb25maWcubW9kaWZpZXJzID0gW3tcbiAgICAgICAgICBuYW1lOiAnYXBwbHlTdHlsZXMnLFxuICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyAuLi5kZWZhdWx0QnNQb3BwZXJDb25maWcsXG4gICAgICAgIC4uLih0eXBlb2YgdGhpcy5fY29uZmlnLnBvcHBlckNvbmZpZyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcoZGVmYXVsdEJzUG9wcGVyQ29uZmlnKSA6IHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcpXG4gICAgICB9O1xuICAgIH1cblxuICAgIF9zZWxlY3RNZW51SXRlbSh7XG4gICAgICBrZXksXG4gICAgICB0YXJnZXRcbiAgICB9KSB7XG4gICAgICBjb25zdCBpdGVtcyA9IFNlbGVjdG9yRW5naW5lLmZpbmQoU0VMRUNUT1JfVklTSUJMRV9JVEVNUywgdGhpcy5fbWVudSkuZmlsdGVyKGVsZW1lbnQgPT4gaXNWaXNpYmxlKGVsZW1lbnQpKTtcblxuICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBpZiB0YXJnZXQgaXNuJ3QgaW5jbHVkZWQgaW4gaXRlbXMgKGUuZy4gd2hlbiBleHBhbmRpbmcgdGhlIGRyb3Bkb3duKVxuICAgICAgLy8gYWxsb3cgY3ljbGluZyB0byBnZXQgdGhlIGxhc3QgaXRlbSBpbiBjYXNlIGtleSBlcXVhbHMgQVJST1dfVVBfS0VZXG5cblxuICAgICAgZ2V0TmV4dEFjdGl2ZUVsZW1lbnQoaXRlbXMsIHRhcmdldCwga2V5ID09PSBBUlJPV19ET1dOX0tFWSQxLCAhaXRlbXMuaW5jbHVkZXModGFyZ2V0KSkuZm9jdXMoKTtcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBEcm9wZG93bi5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMsIGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkIFwiJHtjb25maWd9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGNsZWFyTWVudXMoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5idXR0b24gPT09IFJJR0hUX01PVVNFX0JVVFRPTiB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LmtleSAhPT0gVEFCX0tFWSQxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3BlblRvZ2dsZXMgPSBTZWxlY3RvckVuZ2luZS5maW5kKFNFTEVDVE9SX0RBVEFfVE9HR0xFX1NIT1dOKTtcblxuICAgICAgZm9yIChjb25zdCB0b2dnbGUgb2Ygb3BlblRvZ2dsZXMpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IERyb3Bkb3duLmdldEluc3RhbmNlKHRvZ2dsZSk7XG5cbiAgICAgICAgaWYgKCFjb250ZXh0IHx8IGNvbnRleHQuX2NvbmZpZy5hdXRvQ2xvc2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgY29uc3QgaXNNZW51VGFyZ2V0ID0gY29tcG9zZWRQYXRoLmluY2x1ZGVzKGNvbnRleHQuX21lbnUpO1xuXG4gICAgICAgIGlmIChjb21wb3NlZFBhdGguaW5jbHVkZXMoY29udGV4dC5fZWxlbWVudCkgfHwgY29udGV4dC5fY29uZmlnLmF1dG9DbG9zZSA9PT0gJ2luc2lkZScgJiYgIWlzTWVudVRhcmdldCB8fCBjb250ZXh0Ll9jb25maWcuYXV0b0Nsb3NlID09PSAnb3V0c2lkZScgJiYgaXNNZW51VGFyZ2V0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gVGFiIG5hdmlnYXRpb24gdGhyb3VnaCB0aGUgZHJvcGRvd24gbWVudSBvciBldmVudHMgZnJvbSBjb250YWluZWQgaW5wdXRzIHNob3VsZG4ndCBjbG9zZSB0aGUgbWVudVxuXG5cbiAgICAgICAgaWYgKGNvbnRleHQuX21lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJiAoZXZlbnQudHlwZSA9PT0gJ2tleXVwJyAmJiBldmVudC5rZXkgPT09IFRBQl9LRVkkMSB8fCAvaW5wdXR8c2VsZWN0fG9wdGlvbnx0ZXh0YXJlYXxmb3JtL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0ge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IGNvbnRleHQuX2VsZW1lbnRcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQuY2xpY2tFdmVudCA9IGV2ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5fY29tcGxldGVIaWRlKHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkYXRhQXBpS2V5ZG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICAgIC8vIElmIG5vdCBhbiBVUCB8IERPV04gfCBFU0NBUEUga2V5ID0+IG5vdCBhIGRyb3Bkb3duIGNvbW1hbmRcbiAgICAgIC8vIElmIGlucHV0L3RleHRhcmVhICYmIGlmIGtleSBpcyBvdGhlciB0aGFuIEVTQ0FQRSA9PiBub3QgYSBkcm9wZG93biBjb21tYW5kXG4gICAgICBjb25zdCBpc0lucHV0ID0gL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSk7XG4gICAgICBjb25zdCBpc0VzY2FwZUV2ZW50ID0gZXZlbnQua2V5ID09PSBFU0NBUEVfS0VZJDI7XG4gICAgICBjb25zdCBpc1VwT3JEb3duRXZlbnQgPSBbQVJST1dfVVBfS0VZJDEsIEFSUk9XX0RPV05fS0VZJDFdLmluY2x1ZGVzKGV2ZW50LmtleSk7XG5cbiAgICAgIGlmICghaXNVcE9yRG93bkV2ZW50ICYmICFpc0VzY2FwZUV2ZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzSW5wdXQgJiYgIWlzRXNjYXBlRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyB0b2RvOiB2NiByZXZlcnQgIzM3MDExICYgY2hhbmdlIG1hcmt1cCBodHRwczovL2dldGJvb3RzdHJhcC5jb20vZG9jcy81LjIvZm9ybXMvaW5wdXQtZ3JvdXAvXG5cbiAgICAgIGNvbnN0IGdldFRvZ2dsZUJ1dHRvbiA9IHRoaXMubWF0Y2hlcyhTRUxFQ1RPUl9EQVRBX1RPR0dMRSQzKSA/IHRoaXMgOiBTZWxlY3RvckVuZ2luZS5wcmV2KHRoaXMsIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDMpWzBdIHx8IFNlbGVjdG9yRW5naW5lLm5leHQodGhpcywgU0VMRUNUT1JfREFUQV9UT0dHTEUkMylbMF0gfHwgU2VsZWN0b3JFbmdpbmUuZmluZE9uZShTRUxFQ1RPUl9EQVRBX1RPR0dMRSQzLCBldmVudC5kZWxlZ2F0ZVRhcmdldC5wYXJlbnROb2RlKTtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gRHJvcGRvd24uZ2V0T3JDcmVhdGVJbnN0YW5jZShnZXRUb2dnbGVCdXR0b24pO1xuXG4gICAgICBpZiAoaXNVcE9yRG93bkV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpbnN0YW5jZS5zaG93KCk7XG5cbiAgICAgICAgaW5zdGFuY2UuX3NlbGVjdE1lbnVJdGVtKGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnN0YW5jZS5faXNTaG93bigpKSB7XG4gICAgICAgIC8vIGVsc2UgaXMgZXNjYXBlIGFuZCB3ZSBjaGVjayBpZiBpdCBpcyBzaG93blxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuICAgICAgICBnZXRUb2dnbGVCdXR0b24uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBFdmVudEhhbmRsZXIub24oZG9jdW1lbnQsIEVWRU5UX0tFWURPV05fREFUQV9BUEksIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDMsIERyb3Bkb3duLmRhdGFBcGlLZXlkb3duSGFuZGxlcik7XG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfS0VZRE9XTl9EQVRBX0FQSSwgU0VMRUNUT1JfTUVOVSwgRHJvcGRvd24uZGF0YUFwaUtleWRvd25IYW5kbGVyKTtcbiAgRXZlbnRIYW5kbGVyLm9uKGRvY3VtZW50LCBFVkVOVF9DTElDS19EQVRBX0FQSSQzLCBEcm9wZG93bi5jbGVhck1lbnVzKTtcbiAgRXZlbnRIYW5kbGVyLm9uKGRvY3VtZW50LCBFVkVOVF9LRVlVUF9EQVRBX0FQSSwgRHJvcGRvd24uY2xlYXJNZW51cyk7XG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMywgU0VMRUNUT1JfREFUQV9UT0dHTEUkMywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBEcm9wZG93bi5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpLnRvZ2dsZSgpO1xuICB9KTtcbiAgLyoqXG4gICAqIGpRdWVyeVxuICAgKi9cblxuICBkZWZpbmVKUXVlcnlQbHVnaW4oRHJvcGRvd24pO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IHV0aWwvc2Nyb2xsQmFyLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBTRUxFQ1RPUl9GSVhFRF9DT05URU5UID0gJy5maXhlZC10b3AsIC5maXhlZC1ib3R0b20sIC5pcy1maXhlZCwgLnN0aWNreS10b3AnO1xuICBjb25zdCBTRUxFQ1RPUl9TVElDS1lfQ09OVEVOVCA9ICcuc3RpY2t5LXRvcCc7XG4gIGNvbnN0IFBST1BFUlRZX1BBRERJTkcgPSAncGFkZGluZy1yaWdodCc7XG4gIGNvbnN0IFBST1BFUlRZX01BUkdJTiA9ICdtYXJnaW4tcmlnaHQnO1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBTY3JvbGxCYXJIZWxwZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgZ2V0V2lkdGgoKSB7XG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L2lubmVyV2lkdGgjdXNhZ2Vfbm90ZXNcbiAgICAgIGNvbnN0IGRvY3VtZW50V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICByZXR1cm4gTWF0aC5hYnMod2luZG93LmlubmVyV2lkdGggLSBkb2N1bWVudFdpZHRoKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG5cbiAgICAgIHRoaXMuX2Rpc2FibGVPdmVyRmxvdygpOyAvLyBnaXZlIHBhZGRpbmcgdG8gZWxlbWVudCB0byBiYWxhbmNlIHRoZSBoaWRkZW4gc2Nyb2xsYmFyIHdpZHRoXG5cblxuICAgICAgdGhpcy5fc2V0RWxlbWVudEF0dHJpYnV0ZXModGhpcy5fZWxlbWVudCwgUFJPUEVSVFlfUEFERElORywgY2FsY3VsYXRlZFZhbHVlID0+IGNhbGN1bGF0ZWRWYWx1ZSArIHdpZHRoKTsgLy8gdHJpY2s6IFdlIGFkanVzdCBwb3NpdGl2ZSBwYWRkaW5nUmlnaHQgYW5kIG5lZ2F0aXZlIG1hcmdpblJpZ2h0IHRvIHN0aWNreS10b3AgZWxlbWVudHMgdG8ga2VlcCBzaG93aW5nIGZ1bGx3aWR0aFxuXG5cbiAgICAgIHRoaXMuX3NldEVsZW1lbnRBdHRyaWJ1dGVzKFNFTEVDVE9SX0ZJWEVEX0NPTlRFTlQsIFBST1BFUlRZX1BBRERJTkcsIGNhbGN1bGF0ZWRWYWx1ZSA9PiBjYWxjdWxhdGVkVmFsdWUgKyB3aWR0aCk7XG5cbiAgICAgIHRoaXMuX3NldEVsZW1lbnRBdHRyaWJ1dGVzKFNFTEVDVE9SX1NUSUNLWV9DT05URU5ULCBQUk9QRVJUWV9NQVJHSU4sIGNhbGN1bGF0ZWRWYWx1ZSA9PiBjYWxjdWxhdGVkVmFsdWUgLSB3aWR0aCk7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQsICdvdmVyZmxvdycpO1xuXG4gICAgICB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQsIFBST1BFUlRZX1BBRERJTkcpO1xuXG4gICAgICB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKFNFTEVDVE9SX0ZJWEVEX0NPTlRFTlQsIFBST1BFUlRZX1BBRERJTkcpO1xuXG4gICAgICB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKFNFTEVDVE9SX1NUSUNLWV9DT05URU5ULCBQUk9QRVJUWV9NQVJHSU4pO1xuICAgIH1cblxuICAgIGlzT3ZlcmZsb3dpbmcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRXaWR0aCgpID4gMDtcbiAgICB9IC8vIFByaXZhdGVcblxuXG4gICAgX2Rpc2FibGVPdmVyRmxvdygpIHtcbiAgICAgIHRoaXMuX3NhdmVJbml0aWFsQXR0cmlidXRlKHRoaXMuX2VsZW1lbnQsICdvdmVyZmxvdycpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfVxuXG4gICAgX3NldEVsZW1lbnRBdHRyaWJ1dGVzKHNlbGVjdG9yLCBzdHlsZVByb3BlcnR5LCBjYWxsYmFjaykge1xuICAgICAgY29uc3Qgc2Nyb2xsYmFyV2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG5cbiAgICAgIGNvbnN0IG1hbmlwdWxhdGlvbkNhbGxCYWNrID0gZWxlbWVudCA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50ICE9PSB0aGlzLl9lbGVtZW50ICYmIHdpbmRvdy5pbm5lcldpZHRoID4gZWxlbWVudC5jbGllbnRXaWR0aCArIHNjcm9sbGJhcldpZHRoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2F2ZUluaXRpYWxBdHRyaWJ1dGUoZWxlbWVudCwgc3R5bGVQcm9wZXJ0eSk7XG5cbiAgICAgICAgY29uc3QgY2FsY3VsYXRlZFZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZVByb3BlcnR5KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShzdHlsZVByb3BlcnR5LCBgJHtjYWxsYmFjayhOdW1iZXIucGFyc2VGbG9hdChjYWxjdWxhdGVkVmFsdWUpKX1weGApO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fYXBwbHlNYW5pcHVsYXRpb25DYWxsYmFjayhzZWxlY3RvciwgbWFuaXB1bGF0aW9uQ2FsbEJhY2spO1xuICAgIH1cblxuICAgIF9zYXZlSW5pdGlhbEF0dHJpYnV0ZShlbGVtZW50LCBzdHlsZVByb3BlcnR5KSB7XG4gICAgICBjb25zdCBhY3R1YWxWYWx1ZSA9IGVsZW1lbnQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZVByb3BlcnR5KTtcblxuICAgICAgaWYgKGFjdHVhbFZhbHVlKSB7XG4gICAgICAgIE1hbmlwdWxhdG9yLnNldERhdGFBdHRyaWJ1dGUoZWxlbWVudCwgc3R5bGVQcm9wZXJ0eSwgYWN0dWFsVmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHNlbGVjdG9yLCBzdHlsZVByb3BlcnR5KSB7XG4gICAgICBjb25zdCBtYW5pcHVsYXRpb25DYWxsQmFjayA9IGVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IE1hbmlwdWxhdG9yLmdldERhdGFBdHRyaWJ1dGUoZWxlbWVudCwgc3R5bGVQcm9wZXJ0eSk7IC8vIFdlIG9ubHkgd2FudCB0byByZW1vdmUgdGhlIHByb3BlcnR5IGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGA7IHRoZSB2YWx1ZSBjYW4gYWxzbyBiZSB6ZXJvXG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShzdHlsZVByb3BlcnR5KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBNYW5pcHVsYXRvci5yZW1vdmVEYXRhQXR0cmlidXRlKGVsZW1lbnQsIHN0eWxlUHJvcGVydHkpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHN0eWxlUHJvcGVydHksIHZhbHVlKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2FwcGx5TWFuaXB1bGF0aW9uQ2FsbGJhY2soc2VsZWN0b3IsIG1hbmlwdWxhdGlvbkNhbGxCYWNrKTtcbiAgICB9XG5cbiAgICBfYXBwbHlNYW5pcHVsYXRpb25DYWxsYmFjayhzZWxlY3RvciwgY2FsbEJhY2spIHtcbiAgICAgIGlmIChpc0VsZW1lbnQoc2VsZWN0b3IpKSB7XG4gICAgICAgIGNhbGxCYWNrKHNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHNlbCBvZiBTZWxlY3RvckVuZ2luZS5maW5kKHNlbGVjdG9yLCB0aGlzLl9lbGVtZW50KSkge1xuICAgICAgICBjYWxsQmFjayhzZWwpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC9iYWNrZHJvcC5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQ5ID0gJ2JhY2tkcm9wJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9GQURFJDQgPSAnZmFkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQ1ID0gJ3Nob3cnO1xuICBjb25zdCBFVkVOVF9NT1VTRURPV04gPSBgbW91c2Vkb3duLmJzLiR7TkFNRSQ5fWA7XG4gIGNvbnN0IERlZmF1bHQkOCA9IHtcbiAgICBjbGFzc05hbWU6ICdtb2RhbC1iYWNrZHJvcCcsXG4gICAgY2xpY2tDYWxsYmFjazogbnVsbCxcbiAgICBpc0FuaW1hdGVkOiBmYWxzZSxcbiAgICBpc1Zpc2libGU6IHRydWUsXG4gICAgLy8gaWYgZmFsc2UsIHdlIHVzZSB0aGUgYmFja2Ryb3AgaGVscGVyIHdpdGhvdXQgYWRkaW5nIGFueSBlbGVtZW50IHRvIHRoZSBkb21cbiAgICByb290RWxlbWVudDogJ2JvZHknIC8vIGdpdmUgdGhlIGNob2ljZSB0byBwbGFjZSBiYWNrZHJvcCB1bmRlciBkaWZmZXJlbnQgZWxlbWVudHNcblxuICB9O1xuICBjb25zdCBEZWZhdWx0VHlwZSQ4ID0ge1xuICAgIGNsYXNzTmFtZTogJ3N0cmluZycsXG4gICAgY2xpY2tDYWxsYmFjazogJyhmdW5jdGlvbnxudWxsKScsXG4gICAgaXNBbmltYXRlZDogJ2Jvb2xlYW4nLFxuICAgIGlzVmlzaWJsZTogJ2Jvb2xlYW4nLFxuICAgIHJvb3RFbGVtZW50OiAnKGVsZW1lbnR8c3RyaW5nKSdcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgQmFja2Ryb3AgZXh0ZW5kcyBDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5faXNBcHBlbmRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0JDg7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQ4O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgTkFNRSgpIHtcbiAgICAgIHJldHVybiBOQU1FJDk7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgc2hvdyhjYWxsYmFjaykge1xuICAgICAgaWYgKCF0aGlzLl9jb25maWcuaXNWaXNpYmxlKSB7XG4gICAgICAgIGV4ZWN1dGUoY2FsbGJhY2spO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FwcGVuZCgpO1xuXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLmlzQW5pbWF0ZWQpIHtcbiAgICAgICAgcmVmbG93KGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TSE9XJDUpO1xuXG4gICAgICB0aGlzLl9lbXVsYXRlQW5pbWF0aW9uKCgpID0+IHtcbiAgICAgICAgZXhlY3V0ZShjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlKGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5pc1Zpc2libGUpIHtcbiAgICAgICAgZXhlY3V0ZShjYWxsYmFjayk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9TSE9XJDUpO1xuXG4gICAgICB0aGlzLl9lbXVsYXRlQW5pbWF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIGV4ZWN1dGUoY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIGlmICghdGhpcy5faXNBcHBlbmRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIEV2ZW50SGFuZGxlci5vZmYodGhpcy5fZWxlbWVudCwgRVZFTlRfTU9VU0VET1dOKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcblxuICAgICAgdGhpcy5faXNBcHBlbmRlZCA9IGZhbHNlO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfZ2V0RWxlbWVudCgpIHtcbiAgICAgIGlmICghdGhpcy5fZWxlbWVudCkge1xuICAgICAgICBjb25zdCBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBiYWNrZHJvcC5jbGFzc05hbWUgPSB0aGlzLl9jb25maWcuY2xhc3NOYW1lO1xuXG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuaXNBbmltYXRlZCkge1xuICAgICAgICAgIGJhY2tkcm9wLmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9GQURFJDQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGJhY2tkcm9wO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBfY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpIHtcbiAgICAgIC8vIHVzZSBnZXRFbGVtZW50KCkgd2l0aCB0aGUgZGVmYXVsdCBcImJvZHlcIiB0byBnZXQgYSBmcmVzaCBFbGVtZW50IG9uIGVhY2ggaW5zdGFudGlhdGlvblxuICAgICAgY29uZmlnLnJvb3RFbGVtZW50ID0gZ2V0RWxlbWVudChjb25maWcucm9vdEVsZW1lbnQpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBfYXBwZW5kKCkge1xuICAgICAgaWYgKHRoaXMuX2lzQXBwZW5kZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuXG4gICAgICB0aGlzLl9jb25maWcucm9vdEVsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xuXG4gICAgICBFdmVudEhhbmRsZXIub24oZWxlbWVudCwgRVZFTlRfTU9VU0VET1dOLCAoKSA9PiB7XG4gICAgICAgIGV4ZWN1dGUodGhpcy5fY29uZmlnLmNsaWNrQ2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9pc0FwcGVuZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBfZW11bGF0ZUFuaW1hdGlvbihjYWxsYmFjaykge1xuICAgICAgZXhlY3V0ZUFmdGVyVHJhbnNpdGlvbihjYWxsYmFjaywgdGhpcy5fZ2V0RWxlbWVudCgpLCB0aGlzLl9jb25maWcuaXNBbmltYXRlZCk7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiB1dGlsL2ZvY3VzdHJhcC5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQ4ID0gJ2ZvY3VzdHJhcCc7XG4gIGNvbnN0IERBVEFfS0VZJDUgPSAnYnMuZm9jdXN0cmFwJztcbiAgY29uc3QgRVZFTlRfS0VZJDUgPSBgLiR7REFUQV9LRVkkNX1gO1xuICBjb25zdCBFVkVOVF9GT0NVU0lOJDIgPSBgZm9jdXNpbiR7RVZFTlRfS0VZJDV9YDtcbiAgY29uc3QgRVZFTlRfS0VZRE9XTl9UQUIgPSBga2V5ZG93bi50YWIke0VWRU5UX0tFWSQ1fWA7XG4gIGNvbnN0IFRBQl9LRVkgPSAnVGFiJztcbiAgY29uc3QgVEFCX05BVl9GT1JXQVJEID0gJ2ZvcndhcmQnO1xuICBjb25zdCBUQUJfTkFWX0JBQ0tXQVJEID0gJ2JhY2t3YXJkJztcbiAgY29uc3QgRGVmYXVsdCQ3ID0ge1xuICAgIGF1dG9mb2N1czogdHJ1ZSxcbiAgICB0cmFwRWxlbWVudDogbnVsbCAvLyBUaGUgZWxlbWVudCB0byB0cmFwIGZvY3VzIGluc2lkZSBvZlxuXG4gIH07XG4gIGNvbnN0IERlZmF1bHRUeXBlJDcgPSB7XG4gICAgYXV0b2ZvY3VzOiAnYm9vbGVhbicsXG4gICAgdHJhcEVsZW1lbnQ6ICdlbGVtZW50J1xuICB9O1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBGb2N1c1RyYXAgZXh0ZW5kcyBDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2xhc3RUYWJOYXZEaXJlY3Rpb24gPSBudWxsO1xuICAgIH0gLy8gR2V0dGVyc1xuXG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdCQ3O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGUkNztcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRSQ4O1xuICAgIH0gLy8gUHVibGljXG5cblxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgaWYgKHRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5hdXRvZm9jdXMpIHtcbiAgICAgICAgdGhpcy5fY29uZmlnLnRyYXBFbGVtZW50LmZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIEV2ZW50SGFuZGxlci5vZmYoZG9jdW1lbnQsIEVWRU5UX0tFWSQ1KTsgLy8gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wXG5cbiAgICAgIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfRk9DVVNJTiQyLCBldmVudCA9PiB0aGlzLl9oYW5kbGVGb2N1c2luKGV2ZW50KSk7XG4gICAgICBFdmVudEhhbmRsZXIub24oZG9jdW1lbnQsIEVWRU5UX0tFWURPV05fVEFCLCBldmVudCA9PiB0aGlzLl9oYW5kbGVLZXlkb3duKGV2ZW50KSk7XG4gICAgICB0aGlzLl9pc0FjdGl2ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgIGlmICghdGhpcy5faXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgRXZlbnRIYW5kbGVyLm9mZihkb2N1bWVudCwgRVZFTlRfS0VZJDUpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfaGFuZGxlRm9jdXNpbihldmVudCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0cmFwRWxlbWVudFxuICAgICAgfSA9IHRoaXMuX2NvbmZpZztcblxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZG9jdW1lbnQgfHwgZXZlbnQudGFyZ2V0ID09PSB0cmFwRWxlbWVudCB8fCB0cmFwRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudHMgPSBTZWxlY3RvckVuZ2luZS5mb2N1c2FibGVDaGlsZHJlbih0cmFwRWxlbWVudCk7XG5cbiAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdHJhcEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fbGFzdFRhYk5hdkRpcmVjdGlvbiA9PT0gVEFCX05BVl9CQUNLV0FSRCkge1xuICAgICAgICBlbGVtZW50c1tlbGVtZW50cy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudHNbMF0uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlS2V5ZG93bihldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleSAhPT0gVEFCX0tFWSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2xhc3RUYWJOYXZEaXJlY3Rpb24gPSBldmVudC5zaGlmdEtleSA/IFRBQl9OQVZfQkFDS1dBUkQgOiBUQUJfTkFWX0ZPUldBUkQ7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBtb2RhbC5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQ3ID0gJ21vZGFsJztcbiAgY29uc3QgREFUQV9LRVkkNCA9ICdicy5tb2RhbCc7XG4gIGNvbnN0IEVWRU5UX0tFWSQ0ID0gYC4ke0RBVEFfS0VZJDR9YDtcbiAgY29uc3QgREFUQV9BUElfS0VZJDIgPSAnLmRhdGEtYXBpJztcbiAgY29uc3QgRVNDQVBFX0tFWSQxID0gJ0VzY2FwZSc7XG4gIGNvbnN0IEVWRU5UX0hJREUkNCA9IGBoaWRlJHtFVkVOVF9LRVkkNH1gO1xuICBjb25zdCBFVkVOVF9ISURFX1BSRVZFTlRFRCQxID0gYGhpZGVQcmV2ZW50ZWQke0VWRU5UX0tFWSQ0fWA7XG4gIGNvbnN0IEVWRU5UX0hJRERFTiQ0ID0gYGhpZGRlbiR7RVZFTlRfS0VZJDR9YDtcbiAgY29uc3QgRVZFTlRfU0hPVyQ0ID0gYHNob3cke0VWRU5UX0tFWSQ0fWA7XG4gIGNvbnN0IEVWRU5UX1NIT1dOJDQgPSBgc2hvd24ke0VWRU5UX0tFWSQ0fWA7XG4gIGNvbnN0IEVWRU5UX1JFU0laRSQxID0gYHJlc2l6ZSR7RVZFTlRfS0VZJDR9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0tfRElTTUlTUyA9IGBjbGljay5kaXNtaXNzJHtFVkVOVF9LRVkkNH1gO1xuICBjb25zdCBFVkVOVF9NT1VTRURPV05fRElTTUlTUyA9IGBtb3VzZWRvd24uZGlzbWlzcyR7RVZFTlRfS0VZJDR9YDtcbiAgY29uc3QgRVZFTlRfS0VZRE9XTl9ESVNNSVNTJDEgPSBga2V5ZG93bi5kaXNtaXNzJHtFVkVOVF9LRVkkNH1gO1xuICBjb25zdCBFVkVOVF9DTElDS19EQVRBX0FQSSQyID0gYGNsaWNrJHtFVkVOVF9LRVkkNH0ke0RBVEFfQVBJX0tFWSQyfWA7XG4gIGNvbnN0IENMQVNTX05BTUVfT1BFTiA9ICdtb2RhbC1vcGVuJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9GQURFJDMgPSAnZmFkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQ0ID0gJ3Nob3cnO1xuICBjb25zdCBDTEFTU19OQU1FX1NUQVRJQyA9ICdtb2RhbC1zdGF0aWMnO1xuICBjb25zdCBPUEVOX1NFTEVDVE9SJDEgPSAnLm1vZGFsLnNob3cnO1xuICBjb25zdCBTRUxFQ1RPUl9ESUFMT0cgPSAnLm1vZGFsLWRpYWxvZyc7XG4gIGNvbnN0IFNFTEVDVE9SX01PREFMX0JPRFkgPSAnLm1vZGFsLWJvZHknO1xuICBjb25zdCBTRUxFQ1RPUl9EQVRBX1RPR0dMRSQyID0gJ1tkYXRhLWJzLXRvZ2dsZT1cIm1vZGFsXCJdJztcbiAgY29uc3QgRGVmYXVsdCQ2ID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGZvY3VzOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlXG4gIH07XG4gIGNvbnN0IERlZmF1bHRUeXBlJDYgPSB7XG4gICAgYmFja2Ryb3A6ICcoYm9vbGVhbnxzdHJpbmcpJyxcbiAgICBmb2N1czogJ2Jvb2xlYW4nLFxuICAgIGtleWJvYXJkOiAnYm9vbGVhbidcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgTW9kYWwgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0aGlzLl9kaWFsb2cgPSBTZWxlY3RvckVuZ2luZS5maW5kT25lKFNFTEVDVE9SX0RJQUxPRywgdGhpcy5fZWxlbWVudCk7XG4gICAgICB0aGlzLl9iYWNrZHJvcCA9IHRoaXMuX2luaXRpYWxpemVCYWNrRHJvcCgpO1xuICAgICAgdGhpcy5fZm9jdXN0cmFwID0gdGhpcy5faW5pdGlhbGl6ZUZvY3VzVHJhcCgpO1xuICAgICAgdGhpcy5faXNTaG93biA9IGZhbHNlO1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9zY3JvbGxCYXIgPSBuZXcgU2Nyb2xsQmFySGVscGVyKCk7XG5cbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0JDY7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQ2O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgTkFNRSgpIHtcbiAgICAgIHJldHVybiBOQU1FJDc7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pc1Nob3duID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3cocmVsYXRlZFRhcmdldCk7XG4gICAgfVxuXG4gICAgc2hvdyhyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICBpZiAodGhpcy5faXNTaG93biB8fCB0aGlzLl9pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaG93RXZlbnQgPSBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9TSE9XJDQsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzU2hvd24gPSB0cnVlO1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fc2Nyb2xsQmFyLmhpZGUoKTtcblxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfT1BFTik7XG5cbiAgICAgIHRoaXMuX2FkanVzdERpYWxvZygpO1xuXG4gICAgICB0aGlzLl9iYWNrZHJvcC5zaG93KCgpID0+IHRoaXMuX3Nob3dFbGVtZW50KHJlbGF0ZWRUYXJnZXQpKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgaWYgKCF0aGlzLl9pc1Nob3duIHx8IHRoaXMuX2lzVHJhbnNpdGlvbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhpZGVFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJREUkNCk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG5cbiAgICAgIHRoaXMuX2ZvY3VzdHJhcC5kZWFjdGl2YXRlKCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX1NIT1ckNCk7XG5cbiAgICAgIHRoaXMuX3F1ZXVlQ2FsbGJhY2soKCkgPT4gdGhpcy5faGlkZU1vZGFsKCksIHRoaXMuX2VsZW1lbnQsIHRoaXMuX2lzQW5pbWF0ZWQoKSk7XG4gICAgfVxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIGZvciAoY29uc3QgaHRtbEVsZW1lbnQgb2YgW3dpbmRvdywgdGhpcy5fZGlhbG9nXSkge1xuICAgICAgICBFdmVudEhhbmRsZXIub2ZmKGh0bWxFbGVtZW50LCBFVkVOVF9LRVkkNCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2JhY2tkcm9wLmRpc3Bvc2UoKTtcblxuICAgICAgdGhpcy5fZm9jdXN0cmFwLmRlYWN0aXZhdGUoKTtcblxuICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIGhhbmRsZVVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuX2FkanVzdERpYWxvZygpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfaW5pdGlhbGl6ZUJhY2tEcm9wKCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWNrZHJvcCh7XG4gICAgICAgIGlzVmlzaWJsZTogQm9vbGVhbih0aGlzLl9jb25maWcuYmFja2Ryb3ApLFxuICAgICAgICAvLyAnc3RhdGljJyBvcHRpb24gd2lsbCBiZSB0cmFuc2xhdGVkIHRvIHRydWUsIGFuZCBib29sZWFucyB3aWxsIGtlZXAgdGhlaXIgdmFsdWUsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRoaXMuX2lzQW5pbWF0ZWQoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2luaXRpYWxpemVGb2N1c1RyYXAoKSB7XG4gICAgICByZXR1cm4gbmV3IEZvY3VzVHJhcCh7XG4gICAgICAgIHRyYXBFbGVtZW50OiB0aGlzLl9lbGVtZW50XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfc2hvd0VsZW1lbnQocmVsYXRlZFRhcmdldCkge1xuICAgICAgLy8gdHJ5IHRvIGFwcGVuZCBkeW5hbWljIG1vZGFsXG4gICAgICBpZiAoIWRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5fZWxlbWVudCkpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGhpcy5fZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsIHRydWUpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdkaWFsb2cnKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgY29uc3QgbW9kYWxCb2R5ID0gU2VsZWN0b3JFbmdpbmUuZmluZE9uZShTRUxFQ1RPUl9NT0RBTF9CT0RZLCB0aGlzLl9kaWFsb2cpO1xuXG4gICAgICBpZiAobW9kYWxCb2R5KSB7XG4gICAgICAgIG1vZGFsQm9keS5zY3JvbGxUb3AgPSAwO1xuICAgICAgfVxuXG4gICAgICByZWZsb3codGhpcy5fZWxlbWVudCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX1NIT1ckNCk7XG5cbiAgICAgIGNvbnN0IHRyYW5zaXRpb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5mb2N1cykge1xuICAgICAgICAgIHRoaXMuX2ZvY3VzdHJhcC5hY3RpdmF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1NIT1dOJDQsIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayh0cmFuc2l0aW9uQ29tcGxldGUsIHRoaXMuX2RpYWxvZywgdGhpcy5faXNBbmltYXRlZCgpKTtcbiAgICB9XG5cbiAgICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfS0VZRE9XTl9ESVNNSVNTJDEsIGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSAhPT0gRVNDQVBFX0tFWSQxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdHJpZ2dlckJhY2tkcm9wVHJhbnNpdGlvbigpO1xuICAgICAgfSk7XG4gICAgICBFdmVudEhhbmRsZXIub24od2luZG93LCBFVkVOVF9SRVNJWkUkMSwgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faXNTaG93biAmJiAhdGhpcy5faXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX01PVVNFRE9XTl9ESVNNSVNTLCBldmVudCA9PiB7XG4gICAgICAgIC8vIGEgYmFkIHRyaWNrIHRvIHNlZ3JlZ2F0ZSBjbGlja3MgdGhhdCBtYXkgc3RhcnQgaW5zaWRlIGRpYWxvZyBidXQgZW5kIG91dHNpZGUsIGFuZCBhdm9pZCBsaXN0ZW4gdG8gc2Nyb2xsYmFyIGNsaWNrc1xuICAgICAgICBFdmVudEhhbmRsZXIub25lKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0NMSUNLX0RJU01JU1MsIGV2ZW50MiA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnQgIT09IGV2ZW50LnRhcmdldCB8fCB0aGlzLl9lbGVtZW50ICE9PSBldmVudDIudGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5iYWNrZHJvcCA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyaWdnZXJCYWNrZHJvcFRyYW5zaXRpb24oKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGlkZU1vZGFsKCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcblxuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX2JhY2tkcm9wLmhpZGUoKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9PUEVOKTtcblxuICAgICAgICB0aGlzLl9yZXNldEFkanVzdG1lbnRzKCk7XG5cbiAgICAgICAgdGhpcy5fc2Nyb2xsQmFyLnJlc2V0KCk7XG5cbiAgICAgICAgRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfSElEREVOJDQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2lzQW5pbWF0ZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9GQURFJDMpO1xuICAgIH1cblxuICAgIF90cmlnZ2VyQmFja2Ryb3BUcmFuc2l0aW9uKCkge1xuICAgICAgY29uc3QgaGlkZUV2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfSElERV9QUkVWRU5URUQkMSk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzTW9kYWxPdmVyZmxvd2luZyA9IHRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIGNvbnN0IGluaXRpYWxPdmVyZmxvd1kgPSB0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WTsgLy8gcmV0dXJuIGlmIHRoZSBmb2xsb3dpbmcgYmFja2dyb3VuZCB0cmFuc2l0aW9uIGhhc24ndCB5ZXQgY29tcGxldGVkXG5cbiAgICAgIGlmIChpbml0aWFsT3ZlcmZsb3dZID09PSAnaGlkZGVuJyB8fCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX1NUQVRJQykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TVEFUSUMpO1xuXG4gICAgICB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU1RBVElDKTtcblxuICAgICAgICB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9IGluaXRpYWxPdmVyZmxvd1k7XG4gICAgICAgIH0sIHRoaXMuX2RpYWxvZyk7XG4gICAgICB9LCB0aGlzLl9kaWFsb2cpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB0byBoYW5kbGUgb3ZlcmZsb3dpbmcgbW9kYWxzXG4gICAgICovXG5cblxuICAgIF9hZGp1c3REaWFsb2coKSB7XG4gICAgICBjb25zdCBpc01vZGFsT3ZlcmZsb3dpbmcgPSB0aGlzLl9lbGVtZW50LnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cbiAgICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID0gdGhpcy5fc2Nyb2xsQmFyLmdldFdpZHRoKCk7XG5cbiAgICAgIGNvbnN0IGlzQm9keU92ZXJmbG93aW5nID0gc2Nyb2xsYmFyV2lkdGggPiAwO1xuXG4gICAgICBpZiAoaXNCb2R5T3ZlcmZsb3dpbmcgJiYgIWlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGlzUlRMKCkgPyAncGFkZGluZ0xlZnQnIDogJ3BhZGRpbmdSaWdodCc7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gYCR7c2Nyb2xsYmFyV2lkdGh9cHhgO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzQm9keU92ZXJmbG93aW5nICYmIGlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGlzUlRMKCkgPyAncGFkZGluZ1JpZ2h0JyA6ICdwYWRkaW5nTGVmdCc7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gYCR7c2Nyb2xsYmFyV2lkdGh9cHhgO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9yZXNldEFkanVzdG1lbnRzKCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcnO1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZywgcmVsYXRlZFRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBNb2RhbC5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMsIGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkIFwiJHtjb25maWd9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGFbY29uZmlnXShyZWxhdGVkVGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBEYXRhIEFQSSBpbXBsZW1lbnRhdGlvblxuICAgKi9cblxuXG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMiwgU0VMRUNUT1JfREFUQV9UT0dHTEUkMiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0RWxlbWVudEZyb21TZWxlY3Rvcih0aGlzKTtcblxuICAgIGlmIChbJ0EnLCAnQVJFQSddLmluY2x1ZGVzKHRoaXMudGFnTmFtZSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgRXZlbnRIYW5kbGVyLm9uZSh0YXJnZXQsIEVWRU5UX1NIT1ckNCwgc2hvd0V2ZW50ID0+IHtcbiAgICAgIGlmIChzaG93RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAvLyBvbmx5IHJlZ2lzdGVyIGZvY3VzIHJlc3RvcmVyIGlmIG1vZGFsIHdpbGwgYWN0dWFsbHkgZ2V0IHNob3duXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgRXZlbnRIYW5kbGVyLm9uZSh0YXJnZXQsIEVWRU5UX0hJRERFTiQ0LCAoKSA9PiB7XG4gICAgICAgIGlmIChpc1Zpc2libGUodGhpcykpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pOyAvLyBhdm9pZCBjb25mbGljdCB3aGVuIGNsaWNraW5nIG1vZGFsIHRvZ2dsZXIgd2hpbGUgYW5vdGhlciBvbmUgaXMgb3BlblxuXG4gICAgY29uc3QgYWxyZWFkeU9wZW4gPSBTZWxlY3RvckVuZ2luZS5maW5kT25lKE9QRU5fU0VMRUNUT1IkMSk7XG5cbiAgICBpZiAoYWxyZWFkeU9wZW4pIHtcbiAgICAgIE1vZGFsLmdldEluc3RhbmNlKGFscmVhZHlPcGVuKS5oaWRlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IE1vZGFsLmdldE9yQ3JlYXRlSW5zdGFuY2UodGFyZ2V0KTtcbiAgICBkYXRhLnRvZ2dsZSh0aGlzKTtcbiAgfSk7XG4gIGVuYWJsZURpc21pc3NUcmlnZ2VyKE1vZGFsKTtcbiAgLyoqXG4gICAqIGpRdWVyeVxuICAgKi9cblxuICBkZWZpbmVKUXVlcnlQbHVnaW4oTW9kYWwpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IG9mZmNhbnZhcy5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQ2ID0gJ29mZmNhbnZhcyc7XG4gIGNvbnN0IERBVEFfS0VZJDMgPSAnYnMub2ZmY2FudmFzJztcbiAgY29uc3QgRVZFTlRfS0VZJDMgPSBgLiR7REFUQV9LRVkkM31gO1xuICBjb25zdCBEQVRBX0FQSV9LRVkkMSA9ICcuZGF0YS1hcGknO1xuICBjb25zdCBFVkVOVF9MT0FEX0RBVEFfQVBJJDIgPSBgbG9hZCR7RVZFTlRfS0VZJDN9JHtEQVRBX0FQSV9LRVkkMX1gO1xuICBjb25zdCBFU0NBUEVfS0VZID0gJ0VzY2FwZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQzID0gJ3Nob3cnO1xuICBjb25zdCBDTEFTU19OQU1FX1NIT1dJTkckMSA9ICdzaG93aW5nJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9ISURJTkcgPSAnaGlkaW5nJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9CQUNLRFJPUCA9ICdvZmZjYW52YXMtYmFja2Ryb3AnO1xuICBjb25zdCBPUEVOX1NFTEVDVE9SID0gJy5vZmZjYW52YXMuc2hvdyc7XG4gIGNvbnN0IEVWRU5UX1NIT1ckMyA9IGBzaG93JHtFVkVOVF9LRVkkM31gO1xuICBjb25zdCBFVkVOVF9TSE9XTiQzID0gYHNob3duJHtFVkVOVF9LRVkkM31gO1xuICBjb25zdCBFVkVOVF9ISURFJDMgPSBgaGlkZSR7RVZFTlRfS0VZJDN9YDtcbiAgY29uc3QgRVZFTlRfSElERV9QUkVWRU5URUQgPSBgaGlkZVByZXZlbnRlZCR7RVZFTlRfS0VZJDN9YDtcbiAgY29uc3QgRVZFTlRfSElEREVOJDMgPSBgaGlkZGVuJHtFVkVOVF9LRVkkM31gO1xuICBjb25zdCBFVkVOVF9SRVNJWkUgPSBgcmVzaXplJHtFVkVOVF9LRVkkM31gO1xuICBjb25zdCBFVkVOVF9DTElDS19EQVRBX0FQSSQxID0gYGNsaWNrJHtFVkVOVF9LRVkkM30ke0RBVEFfQVBJX0tFWSQxfWA7XG4gIGNvbnN0IEVWRU5UX0tFWURPV05fRElTTUlTUyA9IGBrZXlkb3duLmRpc21pc3Mke0VWRU5UX0tFWSQzfWA7XG4gIGNvbnN0IFNFTEVDVE9SX0RBVEFfVE9HR0xFJDEgPSAnW2RhdGEtYnMtdG9nZ2xlPVwib2ZmY2FudmFzXCJdJztcbiAgY29uc3QgRGVmYXVsdCQ1ID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIHNjcm9sbDogZmFsc2VcbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUkNSA9IHtcbiAgICBiYWNrZHJvcDogJyhib29sZWFufHN0cmluZyknLFxuICAgIGtleWJvYXJkOiAnYm9vbGVhbicsXG4gICAgc2Nyb2xsOiAnYm9vbGVhbidcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgT2ZmY2FudmFzIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICBzdXBlcihlbGVtZW50LCBjb25maWcpO1xuICAgICAgdGhpcy5faXNTaG93biA9IGZhbHNlO1xuICAgICAgdGhpcy5fYmFja2Ryb3AgPSB0aGlzLl9pbml0aWFsaXplQmFja0Ryb3AoKTtcbiAgICAgIHRoaXMuX2ZvY3VzdHJhcCA9IHRoaXMuX2luaXRpYWxpemVGb2N1c1RyYXAoKTtcblxuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQkNTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJDU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkNjtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICB0b2dnbGUocmVsYXRlZFRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTtcbiAgICB9XG5cbiAgICBzaG93KHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIGlmICh0aGlzLl9pc1Nob3duKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2hvd0V2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfU0hPVyQzLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoc2hvd0V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc1Nob3duID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fYmFja2Ryb3Auc2hvdygpO1xuXG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5zY3JvbGwpIHtcbiAgICAgICAgbmV3IFNjcm9sbEJhckhlbHBlcigpLmhpZGUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCB0cnVlKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZGlhbG9nJyk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX1NIT1dJTkckMSk7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlQ2FsbEJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fY29uZmlnLnNjcm9sbCB8fCB0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcbiAgICAgICAgICB0aGlzLl9mb2N1c3RyYXAuYWN0aXZhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX1NIT1ckMyk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPV0lORyQxKTtcblxuICAgICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9TSE9XTiQzLCB7XG4gICAgICAgICAgcmVsYXRlZFRhcmdldFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX3F1ZXVlQ2FsbGJhY2soY29tcGxldGVDYWxsQmFjaywgdGhpcy5fZWxlbWVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgIGlmICghdGhpcy5faXNTaG93bikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhpZGVFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJREUkMyk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2ZvY3VzdHJhcC5kZWFjdGl2YXRlKCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuYmx1cigpO1xuXG4gICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0hJRElORyk7XG5cbiAgICAgIHRoaXMuX2JhY2tkcm9wLmhpZGUoKTtcblxuICAgICAgY29uc3QgY29tcGxldGVDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPVyQzLCBDTEFTU19OQU1FX0hJRElORyk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuXG4gICAgICAgIGlmICghdGhpcy5fY29uZmlnLnNjcm9sbCkge1xuICAgICAgICAgIG5ldyBTY3JvbGxCYXJIZWxwZXIoKS5yZXNldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfSElEREVOJDMpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZUNhbGxiYWNrLCB0aGlzLl9lbGVtZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5fYmFja2Ryb3AuZGlzcG9zZSgpO1xuXG4gICAgICB0aGlzLl9mb2N1c3RyYXAuZGVhY3RpdmF0ZSgpO1xuXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9pbml0aWFsaXplQmFja0Ryb3AoKSB7XG4gICAgICBjb25zdCBjbGlja0NhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmJhY2tkcm9wID09PSAnc3RhdGljJykge1xuICAgICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJREVfUFJFVkVOVEVEKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH07IC8vICdzdGF0aWMnIG9wdGlvbiB3aWxsIGJlIHRyYW5zbGF0ZWQgdG8gdHJ1ZSwgYW5kIGJvb2xlYW5zIHdpbGwga2VlcCB0aGVpciB2YWx1ZVxuXG5cbiAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IEJvb2xlYW4odGhpcy5fY29uZmlnLmJhY2tkcm9wKTtcbiAgICAgIHJldHVybiBuZXcgQmFja2Ryb3Aoe1xuICAgICAgICBjbGFzc05hbWU6IENMQVNTX05BTUVfQkFDS0RST1AsXG4gICAgICAgIGlzVmlzaWJsZSxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgcm9vdEVsZW1lbnQ6IHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSxcbiAgICAgICAgY2xpY2tDYWxsYmFjazogaXNWaXNpYmxlID8gY2xpY2tDYWxsYmFjayA6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9pbml0aWFsaXplRm9jdXNUcmFwKCkge1xuICAgICAgcmV0dXJuIG5ldyBGb2N1c1RyYXAoe1xuICAgICAgICB0cmFwRWxlbWVudDogdGhpcy5fZWxlbWVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0tFWURPV05fRElTTUlTUywgZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQua2V5ICE9PSBFU0NBUEVfS0VZKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcua2V5Ym9hcmQpIHtcbiAgICAgICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9ISURFX1BSRVZFTlRFRCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9KTtcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBPZmZjYW52YXMuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCBjb25maWcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCB8fCBjb25maWcuc3RhcnRzV2l0aCgnXycpIHx8IGNvbmZpZyA9PT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10odGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBFdmVudEhhbmRsZXIub24oZG9jdW1lbnQsIEVWRU5UX0NMSUNLX0RBVEFfQVBJJDEsIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDEsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldEVsZW1lbnRGcm9tU2VsZWN0b3IodGhpcyk7XG5cbiAgICBpZiAoWydBJywgJ0FSRUEnXS5pbmNsdWRlcyh0aGlzLnRhZ05hbWUpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc2FibGVkKHRoaXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgRXZlbnRIYW5kbGVyLm9uZSh0YXJnZXQsIEVWRU5UX0hJRERFTiQzLCAoKSA9PiB7XG4gICAgICAvLyBmb2N1cyBvbiB0cmlnZ2VyIHdoZW4gaXQgaXMgY2xvc2VkXG4gICAgICBpZiAoaXNWaXNpYmxlKHRoaXMpKSB7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gYXZvaWQgY29uZmxpY3Qgd2hlbiBjbGlja2luZyBhIHRvZ2dsZXIgb2YgYW4gb2ZmY2FudmFzLCB3aGlsZSBhbm90aGVyIGlzIG9wZW5cblxuICAgIGNvbnN0IGFscmVhZHlPcGVuID0gU2VsZWN0b3JFbmdpbmUuZmluZE9uZShPUEVOX1NFTEVDVE9SKTtcblxuICAgIGlmIChhbHJlYWR5T3BlbiAmJiBhbHJlYWR5T3BlbiAhPT0gdGFyZ2V0KSB7XG4gICAgICBPZmZjYW52YXMuZ2V0SW5zdGFuY2UoYWxyZWFkeU9wZW4pLmhpZGUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gT2ZmY2FudmFzLmdldE9yQ3JlYXRlSW5zdGFuY2UodGFyZ2V0KTtcbiAgICBkYXRhLnRvZ2dsZSh0aGlzKTtcbiAgfSk7XG4gIEV2ZW50SGFuZGxlci5vbih3aW5kb3csIEVWRU5UX0xPQURfREFUQV9BUEkkMiwgKCkgPT4ge1xuICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2YgU2VsZWN0b3JFbmdpbmUuZmluZChPUEVOX1NFTEVDVE9SKSkge1xuICAgICAgT2ZmY2FudmFzLmdldE9yQ3JlYXRlSW5zdGFuY2Uoc2VsZWN0b3IpLnNob3coKTtcbiAgICB9XG4gIH0pO1xuICBFdmVudEhhbmRsZXIub24od2luZG93LCBFVkVOVF9SRVNJWkUsICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgU2VsZWN0b3JFbmdpbmUuZmluZCgnW2FyaWEtbW9kYWxdW2NsYXNzKj1zaG93XVtjbGFzcyo9b2ZmY2FudmFzLV0nKSkge1xuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgT2ZmY2FudmFzLmdldE9yQ3JlYXRlSW5zdGFuY2UoZWxlbWVudCkuaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGVuYWJsZURpc21pc3NUcmlnZ2VyKE9mZmNhbnZhcyk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgZGVmaW5lSlF1ZXJ5UGx1Z2luKE9mZmNhbnZhcyk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC9zYW5pdGl6ZXIuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICBjb25zdCB1cmlBdHRyaWJ1dGVzID0gbmV3IFNldChbJ2JhY2tncm91bmQnLCAnY2l0ZScsICdocmVmJywgJ2l0ZW10eXBlJywgJ2xvbmdkZXNjJywgJ3Bvc3RlcicsICdzcmMnLCAneGxpbms6aHJlZiddKTtcbiAgY29uc3QgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTiA9IC9eYXJpYS1bXFx3LV0qJC9pO1xuICAvKipcbiAgICogQSBwYXR0ZXJuIHRoYXQgcmVjb2duaXplcyBhIGNvbW1vbmx5IHVzZWZ1bCBzdWJzZXQgb2YgVVJMcyB0aGF0IGFyZSBzYWZlLlxuICAgKlxuICAgKiBTaG91dC1vdXQgdG8gQW5ndWxhciBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2Jsb2IvMTIuMi54L3BhY2thZ2VzL2NvcmUvc3JjL3Nhbml0aXphdGlvbi91cmxfc2FuaXRpemVyLnRzXG4gICAqL1xuXG4gIGNvbnN0IFNBRkVfVVJMX1BBVFRFUk4gPSAvXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwfHRlbHxmaWxlfHNtcyk6fFteIyYvOj9dKig/OlsjLz9dfCQpKS9pO1xuICAvKipcbiAgICogQSBwYXR0ZXJuIHRoYXQgbWF0Y2hlcyBzYWZlIGRhdGEgVVJMcy4gT25seSBtYXRjaGVzIGltYWdlLCB2aWRlbyBhbmQgYXVkaW8gdHlwZXMuXG4gICAqXG4gICAqIFNob3V0LW91dCB0byBBbmd1bGFyIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvYmxvYi8xMi4yLngvcGFja2FnZXMvY29yZS9zcmMvc2FuaXRpemF0aW9uL3VybF9zYW5pdGl6ZXIudHNcbiAgICovXG5cbiAgY29uc3QgREFUQV9VUkxfUEFUVEVSTiA9IC9eZGF0YTooPzppbWFnZVxcLyg/OmJtcHxnaWZ8anBlZ3xqcGd8cG5nfHRpZmZ8d2VicCl8dmlkZW9cXC8oPzptcGVnfG1wNHxvZ2d8d2VibSl8YXVkaW9cXC8oPzptcDN8b2dhfG9nZ3xvcHVzKSk7YmFzZTY0LFtcXGQrL2Etel0rPSokL2k7XG5cbiAgY29uc3QgYWxsb3dlZEF0dHJpYnV0ZSA9IChhdHRyaWJ1dGUsIGFsbG93ZWRBdHRyaWJ1dGVMaXN0KSA9PiB7XG4gICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKGFsbG93ZWRBdHRyaWJ1dGVMaXN0LmluY2x1ZGVzKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICBpZiAodXJpQXR0cmlidXRlcy5oYXMoYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oU0FGRV9VUkxfUEFUVEVSTi50ZXN0KGF0dHJpYnV0ZS5ub2RlVmFsdWUpIHx8IERBVEFfVVJMX1BBVFRFUk4udGVzdChhdHRyaWJ1dGUubm9kZVZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gLy8gQ2hlY2sgaWYgYSByZWd1bGFyIGV4cHJlc3Npb24gdmFsaWRhdGVzIHRoZSBhdHRyaWJ1dGUuXG5cblxuICAgIHJldHVybiBhbGxvd2VkQXR0cmlidXRlTGlzdC5maWx0ZXIoYXR0cmlidXRlUmVnZXggPT4gYXR0cmlidXRlUmVnZXggaW5zdGFuY2VvZiBSZWdFeHApLnNvbWUocmVnZXggPT4gcmVnZXgudGVzdChhdHRyaWJ1dGVOYW1lKSk7XG4gIH07XG5cbiAgY29uc3QgRGVmYXVsdEFsbG93bGlzdCA9IHtcbiAgICAvLyBHbG9iYWwgYXR0cmlidXRlcyBhbGxvd2VkIG9uIGFueSBzdXBwbGllZCBlbGVtZW50IGJlbG93LlxuICAgICcqJzogWydjbGFzcycsICdkaXInLCAnaWQnLCAnbGFuZycsICdyb2xlJywgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTl0sXG4gICAgYTogWyd0YXJnZXQnLCAnaHJlZicsICd0aXRsZScsICdyZWwnXSxcbiAgICBhcmVhOiBbXSxcbiAgICBiOiBbXSxcbiAgICBicjogW10sXG4gICAgY29sOiBbXSxcbiAgICBjb2RlOiBbXSxcbiAgICBkaXY6IFtdLFxuICAgIGVtOiBbXSxcbiAgICBocjogW10sXG4gICAgaDE6IFtdLFxuICAgIGgyOiBbXSxcbiAgICBoMzogW10sXG4gICAgaDQ6IFtdLFxuICAgIGg1OiBbXSxcbiAgICBoNjogW10sXG4gICAgaTogW10sXG4gICAgaW1nOiBbJ3NyYycsICdzcmNzZXQnLCAnYWx0JywgJ3RpdGxlJywgJ3dpZHRoJywgJ2hlaWdodCddLFxuICAgIGxpOiBbXSxcbiAgICBvbDogW10sXG4gICAgcDogW10sXG4gICAgcHJlOiBbXSxcbiAgICBzOiBbXSxcbiAgICBzbWFsbDogW10sXG4gICAgc3BhbjogW10sXG4gICAgc3ViOiBbXSxcbiAgICBzdXA6IFtdLFxuICAgIHN0cm9uZzogW10sXG4gICAgdTogW10sXG4gICAgdWw6IFtdXG4gIH07XG4gIGZ1bmN0aW9uIHNhbml0aXplSHRtbCh1bnNhZmVIdG1sLCBhbGxvd0xpc3QsIHNhbml0aXplRnVuY3Rpb24pIHtcbiAgICBpZiAoIXVuc2FmZUh0bWwubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5zYWZlSHRtbDtcbiAgICB9XG5cbiAgICBpZiAoc2FuaXRpemVGdW5jdGlvbiAmJiB0eXBlb2Ygc2FuaXRpemVGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHNhbml0aXplRnVuY3Rpb24odW5zYWZlSHRtbCk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9tUGFyc2VyID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTtcbiAgICBjb25zdCBjcmVhdGVkRG9jdW1lbnQgPSBkb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHVuc2FmZUh0bWwsICd0ZXh0L2h0bWwnKTtcbiAgICBjb25zdCBlbGVtZW50cyA9IFtdLmNvbmNhdCguLi5jcmVhdGVkRG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBlbGVtZW50TmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgaWYgKCFPYmplY3Qua2V5cyhhbGxvd0xpc3QpLmluY2x1ZGVzKGVsZW1lbnROYW1lKSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYXR0cmlidXRlTGlzdCA9IFtdLmNvbmNhdCguLi5lbGVtZW50LmF0dHJpYnV0ZXMpO1xuICAgICAgY29uc3QgYWxsb3dlZEF0dHJpYnV0ZXMgPSBbXS5jb25jYXQoYWxsb3dMaXN0WycqJ10gfHwgW10sIGFsbG93TGlzdFtlbGVtZW50TmFtZV0gfHwgW10pO1xuXG4gICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVMaXN0KSB7XG4gICAgICAgIGlmICghYWxsb3dlZEF0dHJpYnV0ZShhdHRyaWJ1dGUsIGFsbG93ZWRBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZS5ub2RlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlZERvY3VtZW50LmJvZHkuaW5uZXJIVE1MO1xuICB9XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC90ZW1wbGF0ZS1mYWN0b3J5LmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FJDUgPSAnVGVtcGxhdGVGYWN0b3J5JztcbiAgY29uc3QgRGVmYXVsdCQ0ID0ge1xuICAgIGFsbG93TGlzdDogRGVmYXVsdEFsbG93bGlzdCxcbiAgICBjb250ZW50OiB7fSxcbiAgICAvLyB7IHNlbGVjdG9yIDogdGV4dCAsICBzZWxlY3RvcjIgOiB0ZXh0MiAsIH1cbiAgICBleHRyYUNsYXNzOiAnJyxcbiAgICBodG1sOiBmYWxzZSxcbiAgICBzYW5pdGl6ZTogdHJ1ZSxcbiAgICBzYW5pdGl6ZUZuOiBudWxsLFxuICAgIHRlbXBsYXRlOiAnPGRpdj48L2Rpdj4nXG4gIH07XG4gIGNvbnN0IERlZmF1bHRUeXBlJDQgPSB7XG4gICAgYWxsb3dMaXN0OiAnb2JqZWN0JyxcbiAgICBjb250ZW50OiAnb2JqZWN0JyxcbiAgICBleHRyYUNsYXNzOiAnKHN0cmluZ3xmdW5jdGlvbiknLFxuICAgIGh0bWw6ICdib29sZWFuJyxcbiAgICBzYW5pdGl6ZTogJ2Jvb2xlYW4nLFxuICAgIHNhbml0aXplRm46ICcobnVsbHxmdW5jdGlvbiknLFxuICAgIHRlbXBsYXRlOiAnc3RyaW5nJ1xuICB9O1xuICBjb25zdCBEZWZhdWx0Q29udGVudFR5cGUgPSB7XG4gICAgZW50cnk6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb258bnVsbCknLFxuICAgIHNlbGVjdG9yOiAnKHN0cmluZ3xlbGVtZW50KSdcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgVGVtcGxhdGVGYWN0b3J5IGV4dGVuZHMgQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQkNDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkge1xuICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJDQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkNTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBnZXRDb250ZW50KCkge1xuICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5fY29uZmlnLmNvbnRlbnQpLm1hcChjb25maWcgPT4gdGhpcy5fcmVzb2x2ZVBvc3NpYmxlRnVuY3Rpb24oY29uZmlnKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgIH1cblxuICAgIGhhc0NvbnRlbnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb250ZW50KCkubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICBjaGFuZ2VDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgIHRoaXMuX2NoZWNrQ29udGVudChjb250ZW50KTtcblxuICAgICAgdGhpcy5fY29uZmlnLmNvbnRlbnQgPSB7IC4uLnRoaXMuX2NvbmZpZy5jb250ZW50LFxuICAgICAgICAuLi5jb250ZW50XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdG9IdG1sKCkge1xuICAgICAgY29uc3QgdGVtcGxhdGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0ZW1wbGF0ZVdyYXBwZXIuaW5uZXJIVE1MID0gdGhpcy5fbWF5YmVTYW5pdGl6ZSh0aGlzLl9jb25maWcudGVtcGxhdGUpO1xuXG4gICAgICBmb3IgKGNvbnN0IFtzZWxlY3RvciwgdGV4dF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5fY29uZmlnLmNvbnRlbnQpKSB7XG4gICAgICAgIHRoaXMuX3NldENvbnRlbnQodGVtcGxhdGVXcmFwcGVyLCB0ZXh0LCBzZWxlY3Rvcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVXcmFwcGVyLmNoaWxkcmVuWzBdO1xuXG4gICAgICBjb25zdCBleHRyYUNsYXNzID0gdGhpcy5fcmVzb2x2ZVBvc3NpYmxlRnVuY3Rpb24odGhpcy5fY29uZmlnLmV4dHJhQ2xhc3MpO1xuXG4gICAgICBpZiAoZXh0cmFDbGFzcykge1xuICAgICAgICB0ZW1wbGF0ZS5jbGFzc0xpc3QuYWRkKC4uLmV4dHJhQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9IC8vIFByaXZhdGVcblxuXG4gICAgX3R5cGVDaGVja0NvbmZpZyhjb25maWcpIHtcbiAgICAgIHN1cGVyLl90eXBlQ2hlY2tDb25maWcoY29uZmlnKTtcblxuICAgICAgdGhpcy5fY2hlY2tDb250ZW50KGNvbmZpZy5jb250ZW50KTtcbiAgICB9XG5cbiAgICBfY2hlY2tDb250ZW50KGFyZykge1xuICAgICAgZm9yIChjb25zdCBbc2VsZWN0b3IsIGNvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKGFyZykpIHtcbiAgICAgICAgc3VwZXIuX3R5cGVDaGVja0NvbmZpZyh7XG4gICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgZW50cnk6IGNvbnRlbnRcbiAgICAgICAgfSwgRGVmYXVsdENvbnRlbnRUeXBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfc2V0Q29udGVudCh0ZW1wbGF0ZSwgY29udGVudCwgc2VsZWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlRWxlbWVudCA9IFNlbGVjdG9yRW5naW5lLmZpbmRPbmUoc2VsZWN0b3IsIHRlbXBsYXRlKTtcblxuICAgICAgaWYgKCF0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb250ZW50ID0gdGhpcy5fcmVzb2x2ZVBvc3NpYmxlRnVuY3Rpb24oY29udGVudCk7XG5cbiAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICB0ZW1wbGF0ZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRWxlbWVudChjb250ZW50KSkge1xuICAgICAgICB0aGlzLl9wdXRFbGVtZW50SW5UZW1wbGF0ZShnZXRFbGVtZW50KGNvbnRlbnQpLCB0ZW1wbGF0ZUVsZW1lbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5odG1sKSB7XG4gICAgICAgIHRlbXBsYXRlRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLl9tYXliZVNhbml0aXplKGNvbnRlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRlbXBsYXRlRWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgX21heWJlU2FuaXRpemUoYXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLnNhbml0aXplID8gc2FuaXRpemVIdG1sKGFyZywgdGhpcy5fY29uZmlnLmFsbG93TGlzdCwgdGhpcy5fY29uZmlnLnNhbml0aXplRm4pIDogYXJnO1xuICAgIH1cblxuICAgIF9yZXNvbHZlUG9zc2libGVGdW5jdGlvbihhcmcpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nID8gYXJnKHRoaXMpIDogYXJnO1xuICAgIH1cblxuICAgIF9wdXRFbGVtZW50SW5UZW1wbGF0ZShlbGVtZW50LCB0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLl9jb25maWcuaHRtbCkge1xuICAgICAgICB0ZW1wbGF0ZUVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRlbXBsYXRlRWxlbWVudC5hcHBlbmQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGVtcGxhdGVFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IHRvb2x0aXAuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuXG4gIGNvbnN0IE5BTUUkNCA9ICd0b29sdGlwJztcbiAgY29uc3QgRElTQUxMT1dFRF9BVFRSSUJVVEVTID0gbmV3IFNldChbJ3Nhbml0aXplJywgJ2FsbG93TGlzdCcsICdzYW5pdGl6ZUZuJ10pO1xuICBjb25zdCBDTEFTU19OQU1FX0ZBREUkMiA9ICdmYWRlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9NT0RBTCA9ICdtb2RhbCc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQyID0gJ3Nob3cnO1xuICBjb25zdCBTRUxFQ1RPUl9UT09MVElQX0lOTkVSID0gJy50b29sdGlwLWlubmVyJztcbiAgY29uc3QgU0VMRUNUT1JfTU9EQUwgPSBgLiR7Q0xBU1NfTkFNRV9NT0RBTH1gO1xuICBjb25zdCBFVkVOVF9NT0RBTF9ISURFID0gJ2hpZGUuYnMubW9kYWwnO1xuICBjb25zdCBUUklHR0VSX0hPVkVSID0gJ2hvdmVyJztcbiAgY29uc3QgVFJJR0dFUl9GT0NVUyA9ICdmb2N1cyc7XG4gIGNvbnN0IFRSSUdHRVJfQ0xJQ0sgPSAnY2xpY2snO1xuICBjb25zdCBUUklHR0VSX01BTlVBTCA9ICdtYW51YWwnO1xuICBjb25zdCBFVkVOVF9ISURFJDIgPSAnaGlkZSc7XG4gIGNvbnN0IEVWRU5UX0hJRERFTiQyID0gJ2hpZGRlbic7XG4gIGNvbnN0IEVWRU5UX1NIT1ckMiA9ICdzaG93JztcbiAgY29uc3QgRVZFTlRfU0hPV04kMiA9ICdzaG93bic7XG4gIGNvbnN0IEVWRU5UX0lOU0VSVEVEID0gJ2luc2VydGVkJztcbiAgY29uc3QgRVZFTlRfQ0xJQ0skMSA9ICdjbGljayc7XG4gIGNvbnN0IEVWRU5UX0ZPQ1VTSU4kMSA9ICdmb2N1c2luJztcbiAgY29uc3QgRVZFTlRfRk9DVVNPVVQkMSA9ICdmb2N1c291dCc7XG4gIGNvbnN0IEVWRU5UX01PVVNFRU5URVIgPSAnbW91c2VlbnRlcic7XG4gIGNvbnN0IEVWRU5UX01PVVNFTEVBVkUgPSAnbW91c2VsZWF2ZSc7XG4gIGNvbnN0IEF0dGFjaG1lbnRNYXAgPSB7XG4gICAgQVVUTzogJ2F1dG8nLFxuICAgIFRPUDogJ3RvcCcsXG4gICAgUklHSFQ6IGlzUlRMKCkgPyAnbGVmdCcgOiAncmlnaHQnLFxuICAgIEJPVFRPTTogJ2JvdHRvbScsXG4gICAgTEVGVDogaXNSVEwoKSA/ICdyaWdodCcgOiAnbGVmdCdcbiAgfTtcbiAgY29uc3QgRGVmYXVsdCQzID0ge1xuICAgIGFsbG93TGlzdDogRGVmYXVsdEFsbG93bGlzdCxcbiAgICBhbmltYXRpb246IHRydWUsXG4gICAgYm91bmRhcnk6ICdjbGlwcGluZ1BhcmVudHMnLFxuICAgIGNvbnRhaW5lcjogZmFsc2UsXG4gICAgY3VzdG9tQ2xhc3M6ICcnLFxuICAgIGRlbGF5OiAwLFxuICAgIGZhbGxiYWNrUGxhY2VtZW50czogWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXSxcbiAgICBodG1sOiBmYWxzZSxcbiAgICBvZmZzZXQ6IFswLCAwXSxcbiAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgIHBvcHBlckNvbmZpZzogbnVsbCxcbiAgICBzYW5pdGl6ZTogdHJ1ZSxcbiAgICBzYW5pdGl6ZUZuOiBudWxsLFxuICAgIHNlbGVjdG9yOiBmYWxzZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj4nICsgJzxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+JyArICc8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PicgKyAnPC9kaXY+JyxcbiAgICB0aXRsZTogJycsXG4gICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJ1xuICB9O1xuICBjb25zdCBEZWZhdWx0VHlwZSQzID0ge1xuICAgIGFsbG93TGlzdDogJ29iamVjdCcsXG4gICAgYW5pbWF0aW9uOiAnYm9vbGVhbicsXG4gICAgYm91bmRhcnk6ICcoc3RyaW5nfGVsZW1lbnQpJyxcbiAgICBjb250YWluZXI6ICcoc3RyaW5nfGVsZW1lbnR8Ym9vbGVhbiknLFxuICAgIGN1c3RvbUNsYXNzOiAnKHN0cmluZ3xmdW5jdGlvbiknLFxuICAgIGRlbGF5OiAnKG51bWJlcnxvYmplY3QpJyxcbiAgICBmYWxsYmFja1BsYWNlbWVudHM6ICdhcnJheScsXG4gICAgaHRtbDogJ2Jvb2xlYW4nLFxuICAgIG9mZnNldDogJyhhcnJheXxzdHJpbmd8ZnVuY3Rpb24pJyxcbiAgICBwbGFjZW1lbnQ6ICcoc3RyaW5nfGZ1bmN0aW9uKScsXG4gICAgcG9wcGVyQ29uZmlnOiAnKG51bGx8b2JqZWN0fGZ1bmN0aW9uKScsXG4gICAgc2FuaXRpemU6ICdib29sZWFuJyxcbiAgICBzYW5pdGl6ZUZuOiAnKG51bGx8ZnVuY3Rpb24pJyxcbiAgICBzZWxlY3RvcjogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICAgIHRlbXBsYXRlOiAnc3RyaW5nJyxcbiAgICB0aXRsZTogJyhzdHJpbmd8ZWxlbWVudHxmdW5jdGlvbiknLFxuICAgIHRyaWdnZXI6ICdzdHJpbmcnXG4gIH07XG4gIC8qKlxuICAgKiBDbGFzcyBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIGlmICh0eXBlb2YgUG9wcGVyX19uYW1lc3BhY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgdG9vbHRpcHMgcmVxdWlyZSBQb3BwZXIgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZyknKTtcbiAgICAgIH1cblxuICAgICAgc3VwZXIoZWxlbWVudCwgY29uZmlnKTsgLy8gUHJpdmF0ZVxuXG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fdGltZW91dCA9IDA7XG4gICAgICB0aGlzLl9pc0hvdmVyZWQgPSBudWxsO1xuICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IHt9O1xuICAgICAgdGhpcy5fcG9wcGVyID0gbnVsbDtcbiAgICAgIHRoaXMuX3RlbXBsYXRlRmFjdG9yeSA9IG51bGw7XG4gICAgICB0aGlzLl9uZXdDb250ZW50ID0gbnVsbDsgLy8gUHJvdGVjdGVkXG5cbiAgICAgIHRoaXMudGlwID0gbnVsbDtcblxuICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG5cbiAgICAgIGlmICghdGhpcy5fY29uZmlnLnNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2ZpeFRpdGxlKCk7XG4gICAgICB9XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0JDM7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQzO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgTkFNRSgpIHtcbiAgICAgIHJldHVybiBOQU1FJDQ7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgZW5hYmxlKCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdG9nZ2xlRW5hYmxlZCgpIHtcbiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9ICF0aGlzLl9pc0VuYWJsZWQ7XG4gICAgfVxuXG4gICAgdG9nZ2xlKCkge1xuICAgICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyLmNsaWNrID0gIXRoaXMuX2FjdGl2ZVRyaWdnZXIuY2xpY2s7XG5cbiAgICAgIGlmICh0aGlzLl9pc1Nob3duKCkpIHtcbiAgICAgICAgdGhpcy5fbGVhdmUoKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VudGVyKCk7XG4gICAgfVxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgIEV2ZW50SGFuZGxlci5vZmYodGhpcy5fZWxlbWVudC5jbG9zZXN0KFNFTEVDVE9SX01PREFMKSwgRVZFTlRfTU9EQUxfSElERSwgdGhpcy5faGlkZU1vZGFsSGFuZGxlcik7XG5cbiAgICAgIGlmICh0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1icy1vcmlnaW5hbC10aXRsZScpKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsIHRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLW9yaWdpbmFsLXRpdGxlJykpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9kaXNwb3NlUG9wcGVyKCk7XG5cbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHVzZSBzaG93IG9uIHZpc2libGUgZWxlbWVudHMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEodGhpcy5faXNXaXRoQ29udGVudCgpICYmIHRoaXMuX2lzRW5hYmxlZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaG93RXZlbnQgPSBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLmV2ZW50TmFtZShFVkVOVF9TSE9XJDIpKTtcbiAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSBmaW5kU2hhZG93Um9vdCh0aGlzLl9lbGVtZW50KTtcblxuICAgICAgY29uc3QgaXNJblRoZURvbSA9IChzaGFkb3dSb290IHx8IHRoaXMuX2VsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmNvbnRhaW5zKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICBpZiAoc2hvd0V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIWlzSW5UaGVEb20pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyB0b2RvIHY2IHJlbW92ZSB0aGlzIE9SIG1ha2UgaXQgb3B0aW9uYWxcblxuXG4gICAgICB0aGlzLl9kaXNwb3NlUG9wcGVyKCk7XG5cbiAgICAgIGNvbnN0IHRpcCA9IHRoaXMuX2dldFRpcEVsZW1lbnQoKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCB0aXAuZ2V0QXR0cmlidXRlKCdpZCcpKTtcblxuICAgICAgY29uc3Qge1xuICAgICAgICBjb250YWluZXJcbiAgICAgIH0gPSB0aGlzLl9jb25maWc7XG5cbiAgICAgIGlmICghdGhpcy5fZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0aGlzLnRpcCkpIHtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCh0aXApO1xuICAgICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLmV2ZW50TmFtZShFVkVOVF9JTlNFUlRFRCkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wb3BwZXIgPSB0aGlzLl9jcmVhdGVQb3BwZXIodGlwKTtcbiAgICAgIHRpcC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfU0hPVyQyKTsgLy8gSWYgdGhpcyBpcyBhIHRvdWNoLWVuYWJsZWQgZGV2aWNlIHdlIGFkZCBleHRyYVxuICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjtcbiAgICAgIC8vIG9ubHkgbmVlZGVkIGJlY2F1c2Ugb2YgYnJva2VuIGV2ZW50IGRlbGVnYXRpb24gb24gaU9TXG4gICAgICAvLyBodHRwczovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTQvMDIvbW91c2VfZXZlbnRfYnViLmh0bWxcblxuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgW10uY29uY2F0KC4uLmRvY3VtZW50LmJvZHkuY2hpbGRyZW4pKSB7XG4gICAgICAgICAgRXZlbnRIYW5kbGVyLm9uKGVsZW1lbnQsICdtb3VzZW92ZXInLCBub29wKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5ldmVudE5hbWUoRVZFTlRfU0hPV04kMikpO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc0hvdmVyZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5fbGVhdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2lzSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZSwgdGhpcy50aXAsIHRoaXMuX2lzQW5pbWF0ZWQoKSk7XG4gICAgfVxuXG4gICAgaGlkZSgpIHtcbiAgICAgIGlmICghdGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGlkZUV2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5ldmVudE5hbWUoRVZFTlRfSElERSQyKSk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRpcCA9IHRoaXMuX2dldFRpcEVsZW1lbnQoKTtcblxuICAgICAgdGlwLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9TSE9XJDIpOyAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgcmVtb3ZlIHRoZSBleHRyYVxuICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB3ZSBhZGRlZCBmb3IgaU9TIHN1cHBvcnRcblxuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgW10uY29uY2F0KC4uLmRvY3VtZW50LmJvZHkuY2hpbGRyZW4pKSB7XG4gICAgICAgICAgRXZlbnRIYW5kbGVyLm9mZihlbGVtZW50LCAnbW91c2VvdmVyJywgbm9vcCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUUklHR0VSX0NMSUNLXSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUUklHR0VSX0ZPQ1VTXSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUUklHR0VSX0hPVkVSXSA9IGZhbHNlO1xuICAgICAgdGhpcy5faXNIb3ZlcmVkID0gbnVsbDsgLy8gaXQgaXMgYSB0cmljayB0byBzdXBwb3J0IG1hbnVhbCB0cmlnZ2VyaW5nXG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9pc0hvdmVyZWQpIHtcbiAgICAgICAgICB0aGlzLl9kaXNwb3NlUG9wcGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuXG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuZXZlbnROYW1lKEVWRU5UX0hJRERFTiQyKSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9xdWV1ZUNhbGxiYWNrKGNvbXBsZXRlLCB0aGlzLnRpcCwgdGhpcy5faXNBbmltYXRlZCgpKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICBpZiAodGhpcy5fcG9wcGVyKSB7XG4gICAgICAgIHRoaXMuX3BvcHBlci51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9IC8vIFByb3RlY3RlZFxuXG5cbiAgICBfaXNXaXRoQ29udGVudCgpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuX2dldFRpdGxlKCkpO1xuICAgIH1cblxuICAgIF9nZXRUaXBFbGVtZW50KCkge1xuICAgICAgaWYgKCF0aGlzLnRpcCkge1xuICAgICAgICB0aGlzLnRpcCA9IHRoaXMuX2NyZWF0ZVRpcEVsZW1lbnQodGhpcy5fbmV3Q29udGVudCB8fCB0aGlzLl9nZXRDb250ZW50Rm9yVGVtcGxhdGUoKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRpcDtcbiAgICB9XG5cbiAgICBfY3JlYXRlVGlwRWxlbWVudChjb250ZW50KSB7XG4gICAgICBjb25zdCB0aXAgPSB0aGlzLl9nZXRUZW1wbGF0ZUZhY3RvcnkoY29udGVudCkudG9IdG1sKCk7IC8vIHRvZG86IHJlbW92ZSB0aGlzIGNoZWNrIG9uIHY2XG5cblxuICAgICAgaWYgKCF0aXApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRpcC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfRkFERSQyLCBDTEFTU19OQU1FX1NIT1ckMik7IC8vIHRvZG86IG9uIHY2IHRoZSBmb2xsb3dpbmcgY2FuIGJlIGFjaGlldmVkIHdpdGggQ1NTIG9ubHlcblxuICAgICAgdGlwLmNsYXNzTGlzdC5hZGQoYGJzLSR7dGhpcy5jb25zdHJ1Y3Rvci5OQU1FfS1hdXRvYCk7XG4gICAgICBjb25zdCB0aXBJZCA9IGdldFVJRCh0aGlzLmNvbnN0cnVjdG9yLk5BTUUpLnRvU3RyaW5nKCk7XG4gICAgICB0aXAuc2V0QXR0cmlidXRlKCdpZCcsIHRpcElkKTtcblxuICAgICAgaWYgKHRoaXMuX2lzQW5pbWF0ZWQoKSkge1xuICAgICAgICB0aXAuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0ZBREUkMik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aXA7XG4gICAgfVxuXG4gICAgc2V0Q29udGVudChjb250ZW50KSB7XG4gICAgICB0aGlzLl9uZXdDb250ZW50ID0gY29udGVudDtcblxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24oKSkge1xuICAgICAgICB0aGlzLl9kaXNwb3NlUG9wcGVyKCk7XG5cbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlRmFjdG9yeShjb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5fdGVtcGxhdGVGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlRmFjdG9yeS5jaGFuZ2VDb250ZW50KGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVGYWN0b3J5ID0gbmV3IFRlbXBsYXRlRmFjdG9yeSh7IC4uLnRoaXMuX2NvbmZpZyxcbiAgICAgICAgICAvLyB0aGUgYGNvbnRlbnRgIHZhciBoYXMgdG8gYmUgYWZ0ZXIgYHRoaXMuX2NvbmZpZ2BcbiAgICAgICAgICAvLyB0byBvdmVycmlkZSBjb25maWcuY29udGVudCBpbiBjYXNlIG9mIHBvcG92ZXJcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgIGV4dHJhQ2xhc3M6IHRoaXMuX3Jlc29sdmVQb3NzaWJsZUZ1bmN0aW9uKHRoaXMuX2NvbmZpZy5jdXN0b21DbGFzcylcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl90ZW1wbGF0ZUZhY3Rvcnk7XG4gICAgfVxuXG4gICAgX2dldENvbnRlbnRGb3JUZW1wbGF0ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIFtTRUxFQ1RPUl9UT09MVElQX0lOTkVSXTogdGhpcy5fZ2V0VGl0bGUoKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBfZ2V0VGl0bGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb2x2ZVBvc3NpYmxlRnVuY3Rpb24odGhpcy5fY29uZmlnLnRpdGxlKSB8fCB0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1icy1vcmlnaW5hbC10aXRsZScpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfaW5pdGlhbGl6ZU9uRGVsZWdhdGVkVGFyZ2V0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5nZXRPckNyZWF0ZUluc3RhbmNlKGV2ZW50LmRlbGVnYXRlVGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICB9XG5cbiAgICBfaXNBbmltYXRlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb25maWcuYW5pbWF0aW9uIHx8IHRoaXMudGlwICYmIHRoaXMudGlwLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0ZBREUkMik7XG4gICAgfVxuXG4gICAgX2lzU2hvd24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50aXAgJiYgdGhpcy50aXAuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfU0hPVyQyKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlUG9wcGVyKHRpcCkge1xuICAgICAgY29uc3QgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMuX2NvbmZpZy5wbGFjZW1lbnQgPT09ICdmdW5jdGlvbicgPyB0aGlzLl9jb25maWcucGxhY2VtZW50LmNhbGwodGhpcywgdGlwLCB0aGlzLl9lbGVtZW50KSA6IHRoaXMuX2NvbmZpZy5wbGFjZW1lbnQ7XG4gICAgICBjb25zdCBhdHRhY2htZW50ID0gQXR0YWNobWVudE1hcFtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07XG4gICAgICByZXR1cm4gUG9wcGVyX19uYW1lc3BhY2UuY3JlYXRlUG9wcGVyKHRoaXMuX2VsZW1lbnQsIHRpcCwgdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKGF0dGFjaG1lbnQpKTtcbiAgICB9XG5cbiAgICBfZ2V0T2Zmc2V0KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBvZmZzZXRcbiAgICAgIH0gPSB0aGlzLl9jb25maWc7XG5cbiAgICAgIGlmICh0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gb2Zmc2V0LnNwbGl0KCcsJykubWFwKHZhbHVlID0+IE51bWJlci5wYXJzZUludCh2YWx1ZSwgMTApKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHBvcHBlckRhdGEgPT4gb2Zmc2V0KHBvcHBlckRhdGEsIHRoaXMuX2VsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIF9yZXNvbHZlUG9zc2libGVGdW5jdGlvbihhcmcpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nID8gYXJnLmNhbGwodGhpcy5fZWxlbWVudCkgOiBhcmc7XG4gICAgfVxuXG4gICAgX2dldFBvcHBlckNvbmZpZyhhdHRhY2htZW50KSB7XG4gICAgICBjb25zdCBkZWZhdWx0QnNQb3BwZXJDb25maWcgPSB7XG4gICAgICAgIHBsYWNlbWVudDogYXR0YWNobWVudCxcbiAgICAgICAgbW9kaWZpZXJzOiBbe1xuICAgICAgICAgIG5hbWU6ICdmbGlwJyxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBmYWxsYmFja1BsYWNlbWVudHM6IHRoaXMuX2NvbmZpZy5mYWxsYmFja1BsYWNlbWVudHNcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBuYW1lOiAnb2Zmc2V0JyxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMuX2dldE9mZnNldCgpXG4gICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgbmFtZTogJ3ByZXZlbnRPdmVyZmxvdycsXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYm91bmRhcnk6IHRoaXMuX2NvbmZpZy5ib3VuZGFyeVxuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIG5hbWU6ICdhcnJvdycsXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgZWxlbWVudDogYC4ke3RoaXMuY29uc3RydWN0b3IuTkFNRX0tYXJyb3dgXG4gICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgbmFtZTogJ3ByZVNldFBsYWNlbWVudCcsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBwaGFzZTogJ2JlZm9yZU1haW4nLFxuICAgICAgICAgIGZuOiBkYXRhID0+IHtcbiAgICAgICAgICAgIC8vIFByZS1zZXQgUG9wcGVyJ3MgcGxhY2VtZW50IGF0dHJpYnV0ZSBpbiBvcmRlciB0byByZWFkIHRoZSBhcnJvdyBzaXplcyBwcm9wZXJseS5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgUG9wcGVyIG1peGVzIHVwIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGRpbWVuc2lvbnMgc2luY2UgdGhlIGluaXRpYWwgYXJyb3cgc3R5bGUgaXMgZm9yIHRvcCBwbGFjZW1lbnRcbiAgICAgICAgICAgIHRoaXMuX2dldFRpcEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcG9wcGVyLXBsYWNlbWVudCcsIGRhdGEuc3RhdGUucGxhY2VtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHsgLi4uZGVmYXVsdEJzUG9wcGVyQ29uZmlnLFxuICAgICAgICAuLi4odHlwZW9mIHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcgPT09ICdmdW5jdGlvbicgPyB0aGlzLl9jb25maWcucG9wcGVyQ29uZmlnKGRlZmF1bHRCc1BvcHBlckNvbmZpZykgOiB0aGlzLl9jb25maWcucG9wcGVyQ29uZmlnKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBfc2V0TGlzdGVuZXJzKCkge1xuICAgICAgY29uc3QgdHJpZ2dlcnMgPSB0aGlzLl9jb25maWcudHJpZ2dlci5zcGxpdCgnICcpO1xuXG4gICAgICBmb3IgKGNvbnN0IHRyaWdnZXIgb2YgdHJpZ2dlcnMpIHtcbiAgICAgICAgaWYgKHRyaWdnZXIgPT09ICdjbGljaycpIHtcbiAgICAgICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5ldmVudE5hbWUoRVZFTlRfQ0xJQ0skMSksIHRoaXMuX2NvbmZpZy5zZWxlY3RvciwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuX2luaXRpYWxpemVPbkRlbGVnYXRlZFRhcmdldChldmVudCk7XG5cbiAgICAgICAgICAgIGNvbnRleHQudG9nZ2xlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAhPT0gVFJJR0dFUl9NQU5VQUwpIHtcbiAgICAgICAgICBjb25zdCBldmVudEluID0gdHJpZ2dlciA9PT0gVFJJR0dFUl9IT1ZFUiA/IHRoaXMuY29uc3RydWN0b3IuZXZlbnROYW1lKEVWRU5UX01PVVNFRU5URVIpIDogdGhpcy5jb25zdHJ1Y3Rvci5ldmVudE5hbWUoRVZFTlRfRk9DVVNJTiQxKTtcbiAgICAgICAgICBjb25zdCBldmVudE91dCA9IHRyaWdnZXIgPT09IFRSSUdHRVJfSE9WRVIgPyB0aGlzLmNvbnN0cnVjdG9yLmV2ZW50TmFtZShFVkVOVF9NT1VTRUxFQVZFKSA6IHRoaXMuY29uc3RydWN0b3IuZXZlbnROYW1lKEVWRU5UX0ZPQ1VTT1VUJDEpO1xuICAgICAgICAgIEV2ZW50SGFuZGxlci5vbih0aGlzLl9lbGVtZW50LCBldmVudEluLCB0aGlzLl9jb25maWcuc2VsZWN0b3IsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9pbml0aWFsaXplT25EZWxlZ2F0ZWRUYXJnZXQoZXZlbnQpO1xuXG4gICAgICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGUgPT09ICdmb2N1c2luJyA/IFRSSUdHRVJfRk9DVVMgOiBUUklHR0VSX0hPVkVSXSA9IHRydWU7XG5cbiAgICAgICAgICAgIGNvbnRleHQuX2VudGVyKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIGV2ZW50T3V0LCB0aGlzLl9jb25maWcuc2VsZWN0b3IsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9pbml0aWFsaXplT25EZWxlZ2F0ZWRUYXJnZXQoZXZlbnQpO1xuXG4gICAgICAgICAgICBjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyW2V2ZW50LnR5cGUgPT09ICdmb2N1c291dCcgPyBUUklHR0VSX0ZPQ1VTIDogVFJJR0dFUl9IT1ZFUl0gPSBjb250ZXh0Ll9lbGVtZW50LmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpO1xuXG4gICAgICAgICAgICBjb250ZXh0Ll9sZWF2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hpZGVNb2RhbEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9lbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIEV2ZW50SGFuZGxlci5vbih0aGlzLl9lbGVtZW50LmNsb3Nlc3QoU0VMRUNUT1JfTU9EQUwpLCBFVkVOVF9NT0RBTF9ISURFLCB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBfZml4VGl0bGUoKSB7XG4gICAgICBjb25zdCB0aXRsZSA9IHRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpO1xuXG4gICAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpICYmICF0aGlzLl9lbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRpdGxlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtb3JpZ2luYWwtdGl0bGUnLCB0aXRsZSk7IC8vIERPIE5PVCBVU0UgSVQuIElzIG9ubHkgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG5cblxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XG4gICAgfVxuXG4gICAgX2VudGVyKCkge1xuICAgICAgaWYgKHRoaXMuX2lzU2hvd24oKSB8fCB0aGlzLl9pc0hvdmVyZWQpIHtcbiAgICAgICAgdGhpcy5faXNIb3ZlcmVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc0hvdmVyZWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLl9zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2lzSG92ZXJlZCkge1xuICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLl9jb25maWcuZGVsYXkuc2hvdyk7XG4gICAgfVxuXG4gICAgX2xlYXZlKCkge1xuICAgICAgaWYgKHRoaXMuX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzSG92ZXJlZCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLl9zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0hvdmVyZWQpIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy5fY29uZmlnLmRlbGF5LmhpZGUpO1xuICAgIH1cblxuICAgIF9zZXRUaW1lb3V0KGhhbmRsZXIsIHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGhhbmRsZXIsIHRpbWVvdXQpO1xuICAgIH1cblxuICAgIF9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5fYWN0aXZlVHJpZ2dlcikuaW5jbHVkZXModHJ1ZSk7XG4gICAgfVxuXG4gICAgX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbnN0IGRhdGFBdHRyaWJ1dGVzID0gTWFuaXB1bGF0b3IuZ2V0RGF0YUF0dHJpYnV0ZXModGhpcy5fZWxlbWVudCk7XG5cbiAgICAgIGZvciAoY29uc3QgZGF0YUF0dHJpYnV0ZSBvZiBPYmplY3Qua2V5cyhkYXRhQXR0cmlidXRlcykpIHtcbiAgICAgICAgaWYgKERJU0FMTE9XRURfQVRUUklCVVRFUy5oYXMoZGF0YUF0dHJpYnV0ZSkpIHtcbiAgICAgICAgICBkZWxldGUgZGF0YUF0dHJpYnV0ZXNbZGF0YUF0dHJpYnV0ZV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uZmlnID0geyAuLi5kYXRhQXR0cmlidXRlcyxcbiAgICAgICAgLi4uKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyA/IGNvbmZpZyA6IHt9KVxuICAgICAgfTtcbiAgICAgIGNvbmZpZyA9IHRoaXMuX21lcmdlQ29uZmlnT2JqKGNvbmZpZyk7XG4gICAgICBjb25maWcgPSB0aGlzLl9jb25maWdBZnRlck1lcmdlKGNvbmZpZyk7XG5cbiAgICAgIHRoaXMuX3R5cGVDaGVja0NvbmZpZyhjb25maWcpO1xuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIF9jb25maWdBZnRlck1lcmdlKGNvbmZpZykge1xuICAgICAgY29uZmlnLmNvbnRhaW5lciA9IGNvbmZpZy5jb250YWluZXIgPT09IGZhbHNlID8gZG9jdW1lbnQuYm9keSA6IGdldEVsZW1lbnQoY29uZmlnLmNvbnRhaW5lcik7XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLmRlbGF5ID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25maWcuZGVsYXkgPSB7XG4gICAgICAgICAgc2hvdzogY29uZmlnLmRlbGF5LFxuICAgICAgICAgIGhpZGU6IGNvbmZpZy5kZWxheVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy50aXRsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uZmlnLnRpdGxlID0gY29uZmlnLnRpdGxlLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLmNvbnRlbnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmZpZy5jb250ZW50ID0gY29uZmlnLmNvbnRlbnQudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBfZ2V0RGVsZWdhdGVDb25maWcoKSB7XG4gICAgICBjb25zdCBjb25maWcgPSB7fTtcblxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fY29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRba2V5XSAhPT0gdGhpcy5fY29uZmlnW2tleV0pIHtcbiAgICAgICAgICBjb25maWdba2V5XSA9IHRoaXMuX2NvbmZpZ1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbmZpZy5zZWxlY3RvciA9IGZhbHNlO1xuICAgICAgY29uZmlnLnRyaWdnZXIgPSAnbWFudWFsJzsgLy8gSW4gdGhlIGZ1dHVyZSBjYW4gYmUgcmVwbGFjZWQgd2l0aDpcbiAgICAgIC8vIGNvbnN0IGtleXNXaXRoRGlmZmVyZW50VmFsdWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5fY29uZmlnKS5maWx0ZXIoZW50cnkgPT4gdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0W2VudHJ5WzBdXSAhPT0gdGhpcy5fY29uZmlnW2VudHJ5WzBdXSlcbiAgICAgIC8vIGBPYmplY3QuZnJvbUVudHJpZXMoa2V5c1dpdGhEaWZmZXJlbnRWYWx1ZXMpYFxuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIF9kaXNwb3NlUG9wcGVyKCkge1xuICAgICAgaWYgKHRoaXMuX3BvcHBlcikge1xuICAgICAgICB0aGlzLl9wb3BwZXIuZGVzdHJveSgpO1xuXG4gICAgICAgIHRoaXMuX3BvcHBlciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRpcCkge1xuICAgICAgICB0aGlzLnRpcC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy50aXAgPSBudWxsO1xuICAgICAgfVxuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IFRvb2x0aXAuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCBjb25maWcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cblxuICBkZWZpbmVKUXVlcnlQbHVnaW4oVG9vbHRpcCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogcG9wb3Zlci5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQzID0gJ3BvcG92ZXInO1xuICBjb25zdCBTRUxFQ1RPUl9USVRMRSA9ICcucG9wb3Zlci1oZWFkZXInO1xuICBjb25zdCBTRUxFQ1RPUl9DT05URU5UID0gJy5wb3BvdmVyLWJvZHknO1xuICBjb25zdCBEZWZhdWx0JDIgPSB7IC4uLlRvb2x0aXAuRGVmYXVsdCxcbiAgICBjb250ZW50OiAnJyxcbiAgICBvZmZzZXQ6IFswLCA4XSxcbiAgICBwbGFjZW1lbnQ6ICdyaWdodCcsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8ZGl2IGNsYXNzPVwicG9wb3Zlci1hcnJvd1wiPjwvZGl2PicgKyAnPGgzIGNsYXNzPVwicG9wb3Zlci1oZWFkZXJcIj48L2gzPicgKyAnPGRpdiBjbGFzcz1cInBvcG92ZXItYm9keVwiPjwvZGl2PicgKyAnPC9kaXY+JyxcbiAgICB0cmlnZ2VyOiAnY2xpY2snXG4gIH07XG4gIGNvbnN0IERlZmF1bHRUeXBlJDIgPSB7IC4uLlRvb2x0aXAuRGVmYXVsdFR5cGUsXG4gICAgY29udGVudDogJyhudWxsfHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcbiAgfTtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgUG9wb3ZlciBleHRlbmRzIFRvb2x0aXAge1xuICAgIC8vIEdldHRlcnNcbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdCQyO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGUkMjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRSQzO1xuICAgIH0gLy8gT3ZlcnJpZGVzXG5cblxuICAgIF9pc1dpdGhDb250ZW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFRpdGxlKCkgfHwgdGhpcy5fZ2V0Q29udGVudCgpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfZ2V0Q29udGVudEZvclRlbXBsYXRlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgW1NFTEVDVE9SX1RJVExFXTogdGhpcy5fZ2V0VGl0bGUoKSxcbiAgICAgICAgW1NFTEVDVE9SX0NPTlRFTlRdOiB0aGlzLl9nZXRDb250ZW50KClcbiAgICAgIH07XG4gICAgfVxuXG4gICAgX2dldENvbnRlbnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzb2x2ZVBvc3NpYmxlRnVuY3Rpb24odGhpcy5fY29uZmlnLmNvbnRlbnQpO1xuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IFBvcG92ZXIuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCBjb25maWcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cblxuICBkZWZpbmVKUXVlcnlQbHVnaW4oUG9wb3Zlcik7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogc2Nyb2xsc3B5LmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FJDIgPSAnc2Nyb2xsc3B5JztcbiAgY29uc3QgREFUQV9LRVkkMiA9ICdicy5zY3JvbGxzcHknO1xuICBjb25zdCBFVkVOVF9LRVkkMiA9IGAuJHtEQVRBX0tFWSQyfWA7XG4gIGNvbnN0IERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICBjb25zdCBFVkVOVF9BQ1RJVkFURSA9IGBhY3RpdmF0ZSR7RVZFTlRfS0VZJDJ9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0sgPSBgY2xpY2ske0VWRU5UX0tFWSQyfWA7XG4gIGNvbnN0IEVWRU5UX0xPQURfREFUQV9BUEkkMSA9IGBsb2FkJHtFVkVOVF9LRVkkMn0ke0RBVEFfQVBJX0tFWX1gO1xuICBjb25zdCBDTEFTU19OQU1FX0RST1BET1dOX0lURU0gPSAnZHJvcGRvd24taXRlbSc7XG4gIGNvbnN0IENMQVNTX05BTUVfQUNUSVZFJDEgPSAnYWN0aXZlJztcbiAgY29uc3QgU0VMRUNUT1JfREFUQV9TUFkgPSAnW2RhdGEtYnMtc3B5PVwic2Nyb2xsXCJdJztcbiAgY29uc3QgU0VMRUNUT1JfVEFSR0VUX0xJTktTID0gJ1tocmVmXSc7XG4gIGNvbnN0IFNFTEVDVE9SX05BVl9MSVNUX0dST1VQID0gJy5uYXYsIC5saXN0LWdyb3VwJztcbiAgY29uc3QgU0VMRUNUT1JfTkFWX0xJTktTID0gJy5uYXYtbGluayc7XG4gIGNvbnN0IFNFTEVDVE9SX05BVl9JVEVNUyA9ICcubmF2LWl0ZW0nO1xuICBjb25zdCBTRUxFQ1RPUl9MSVNUX0lURU1TID0gJy5saXN0LWdyb3VwLWl0ZW0nO1xuICBjb25zdCBTRUxFQ1RPUl9MSU5LX0lURU1TID0gYCR7U0VMRUNUT1JfTkFWX0xJTktTfSwgJHtTRUxFQ1RPUl9OQVZfSVRFTVN9ID4gJHtTRUxFQ1RPUl9OQVZfTElOS1N9LCAke1NFTEVDVE9SX0xJU1RfSVRFTVN9YDtcbiAgY29uc3QgU0VMRUNUT1JfRFJPUERPV04gPSAnLmRyb3Bkb3duJztcbiAgY29uc3QgU0VMRUNUT1JfRFJPUERPV05fVE9HR0xFJDEgPSAnLmRyb3Bkb3duLXRvZ2dsZSc7XG4gIGNvbnN0IERlZmF1bHQkMSA9IHtcbiAgICBvZmZzZXQ6IG51bGwsXG4gICAgLy8gVE9ETzogdjYgQGRlcHJlY2F0ZWQsIGtlZXAgaXQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnNcbiAgICByb290TWFyZ2luOiAnMHB4IDBweCAtMjUlJyxcbiAgICBzbW9vdGhTY3JvbGw6IGZhbHNlLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0aHJlc2hvbGQ6IFswLjEsIDAuNSwgMV1cbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUkMSA9IHtcbiAgICBvZmZzZXQ6ICcobnVtYmVyfG51bGwpJyxcbiAgICAvLyBUT0RPIHY2IEBkZXByZWNhdGVkLCBrZWVwIGl0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zXG4gICAgcm9vdE1hcmdpbjogJ3N0cmluZycsXG4gICAgc21vb3RoU2Nyb2xsOiAnYm9vbGVhbicsXG4gICAgdGFyZ2V0OiAnZWxlbWVudCcsXG4gICAgdGhyZXNob2xkOiAnYXJyYXknXG4gIH07XG4gIC8qKlxuICAgKiBDbGFzcyBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNsYXNzIFNjcm9sbFNweSBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgc3VwZXIoZWxlbWVudCwgY29uZmlnKTsgLy8gdGhpcy5fZWxlbWVudCBpcyB0aGUgb2JzZXJ2YWJsZXNDb250YWluZXIgYW5kIGNvbmZpZy50YXJnZXQgdGhlIG1lbnUgbGlua3Mgd3JhcHBlclxuXG4gICAgICB0aGlzLl90YXJnZXRMaW5rcyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX29ic2VydmFibGVTZWN0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX3Jvb3RFbGVtZW50ID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9lbGVtZW50KS5vdmVyZmxvd1kgPT09ICd2aXNpYmxlJyA/IG51bGwgOiB0aGlzLl9lbGVtZW50O1xuICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcbiAgICAgIHRoaXMuX3ByZXZpb3VzU2Nyb2xsRGF0YSA9IHtcbiAgICAgICAgdmlzaWJsZUVudHJ5VG9wOiAwLFxuICAgICAgICBwYXJlbnRTY3JvbGxUb3A6IDBcbiAgICAgIH07XG4gICAgICB0aGlzLnJlZnJlc2goKTsgLy8gaW5pdGlhbGl6ZVxuICAgIH0gLy8gR2V0dGVyc1xuXG5cbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdCQxO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGUkMTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRSQyO1xuICAgIH0gLy8gUHVibGljXG5cblxuICAgIHJlZnJlc2goKSB7XG4gICAgICB0aGlzLl9pbml0aWFsaXplVGFyZ2V0c0FuZE9ic2VydmFibGVzKCk7XG5cbiAgICAgIHRoaXMuX21heWJlRW5hYmxlU21vb3RoU2Nyb2xsKCk7XG5cbiAgICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuICAgICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vYnNlcnZlciA9IHRoaXMuX2dldE5ld09ic2VydmVyKCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiB0aGlzLl9vYnNlcnZhYmxlU2VjdGlvbnMudmFsdWVzKCkpIHtcbiAgICAgICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZShzZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9jb25maWdBZnRlck1lcmdlKGNvbmZpZykge1xuICAgICAgLy8gVE9ETzogb24gdjYgdGFyZ2V0IHNob3VsZCBiZSBnaXZlbiBleHBsaWNpdGx5ICYgcmVtb3ZlIHRoZSB7dGFyZ2V0OiAnc3MtdGFyZ2V0J30gY2FzZVxuICAgICAgY29uZmlnLnRhcmdldCA9IGdldEVsZW1lbnQoY29uZmlnLnRhcmdldCkgfHwgZG9jdW1lbnQuYm9keTsgLy8gVE9ETzogdjYgT25seSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucy4gVXNlIHJvb3RNYXJnaW4gb25seVxuXG4gICAgICBjb25maWcucm9vdE1hcmdpbiA9IGNvbmZpZy5vZmZzZXQgPyBgJHtjb25maWcub2Zmc2V0fXB4IDBweCAtMzAlYCA6IGNvbmZpZy5yb290TWFyZ2luO1xuXG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy50aHJlc2hvbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbmZpZy50aHJlc2hvbGQgPSBjb25maWcudGhyZXNob2xkLnNwbGl0KCcsJykubWFwKHZhbHVlID0+IE51bWJlci5wYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgX21heWJlRW5hYmxlU21vb3RoU2Nyb2xsKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25maWcuc21vb3RoU2Nyb2xsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gdW5yZWdpc3RlciBhbnkgcHJldmlvdXMgbGlzdGVuZXJzXG5cblxuICAgICAgRXZlbnRIYW5kbGVyLm9mZih0aGlzLl9jb25maWcudGFyZ2V0LCBFVkVOVF9DTElDSyk7XG4gICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fY29uZmlnLnRhcmdldCwgRVZFTlRfQ0xJQ0ssIFNFTEVDVE9SX1RBUkdFVF9MSU5LUywgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBvYnNlcnZhYmxlU2VjdGlvbiA9IHRoaXMuX29ic2VydmFibGVTZWN0aW9ucy5nZXQoZXZlbnQudGFyZ2V0Lmhhc2gpO1xuXG4gICAgICAgIGlmIChvYnNlcnZhYmxlU2VjdGlvbikge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuX3Jvb3RFbGVtZW50IHx8IHdpbmRvdztcbiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBvYnNlcnZhYmxlU2VjdGlvbi5vZmZzZXRUb3AgLSB0aGlzLl9lbGVtZW50Lm9mZnNldFRvcDtcblxuICAgICAgICAgIGlmIChyb290LnNjcm9sbFRvKSB7XG4gICAgICAgICAgICByb290LnNjcm9sbFRvKHtcbiAgICAgICAgICAgICAgdG9wOiBoZWlnaHQsXG4gICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBDaHJvbWUgNjAgZG9lc24ndCBzdXBwb3J0IGBzY3JvbGxUb2BcblxuXG4gICAgICAgICAgcm9vdC5zY3JvbGxUb3AgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZXROZXdPYnNlcnZlcigpIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHJvb3Q6IHRoaXMuX3Jvb3RFbGVtZW50LFxuICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuX2NvbmZpZy50aHJlc2hvbGQsXG4gICAgICAgIHJvb3RNYXJnaW46IHRoaXMuX2NvbmZpZy5yb290TWFyZ2luXG4gICAgICB9O1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHRoaXMuX29ic2VydmVyQ2FsbGJhY2soZW50cmllcyksIG9wdGlvbnMpO1xuICAgIH0gLy8gVGhlIGxvZ2ljIG9mIHNlbGVjdGlvblxuXG5cbiAgICBfb2JzZXJ2ZXJDYWxsYmFjayhlbnRyaWVzKSB7XG4gICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZW50cnkgPT4gdGhpcy5fdGFyZ2V0TGlua3MuZ2V0KGAjJHtlbnRyeS50YXJnZXQuaWR9YCk7XG5cbiAgICAgIGNvbnN0IGFjdGl2YXRlID0gZW50cnkgPT4ge1xuICAgICAgICB0aGlzLl9wcmV2aW91c1Njcm9sbERhdGEudmlzaWJsZUVudHJ5VG9wID0gZW50cnkudGFyZ2V0Lm9mZnNldFRvcDtcblxuICAgICAgICB0aGlzLl9wcm9jZXNzKHRhcmdldEVsZW1lbnQoZW50cnkpKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHBhcmVudFNjcm9sbFRvcCA9ICh0aGlzLl9yb290RWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IHVzZXJTY3JvbGxzRG93biA9IHBhcmVudFNjcm9sbFRvcCA+PSB0aGlzLl9wcmV2aW91c1Njcm9sbERhdGEucGFyZW50U2Nyb2xsVG9wO1xuICAgICAgdGhpcy5fcHJldmlvdXNTY3JvbGxEYXRhLnBhcmVudFNjcm9sbFRvcCA9IHBhcmVudFNjcm9sbFRvcDtcblxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuXG4gICAgICAgICAgdGhpcy5fY2xlYXJBY3RpdmVDbGFzcyh0YXJnZXRFbGVtZW50KGVudHJ5KSk7XG5cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVudHJ5SXNMb3dlclRoYW5QcmV2aW91cyA9IGVudHJ5LnRhcmdldC5vZmZzZXRUb3AgPj0gdGhpcy5fcHJldmlvdXNTY3JvbGxEYXRhLnZpc2libGVFbnRyeVRvcDsgLy8gaWYgd2UgYXJlIHNjcm9sbGluZyBkb3duLCBwaWNrIHRoZSBiaWdnZXIgb2Zmc2V0VG9wXG5cbiAgICAgICAgaWYgKHVzZXJTY3JvbGxzRG93biAmJiBlbnRyeUlzTG93ZXJUaGFuUHJldmlvdXMpIHtcbiAgICAgICAgICBhY3RpdmF0ZShlbnRyeSk7IC8vIGlmIHBhcmVudCBpc24ndCBzY3JvbGxlZCwgbGV0J3Mga2VlcCB0aGUgZmlyc3QgdmlzaWJsZSBpdGVtLCBicmVha2luZyB0aGUgaXRlcmF0aW9uXG5cbiAgICAgICAgICBpZiAoIXBhcmVudFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IC8vIGlmIHdlIGFyZSBzY3JvbGxpbmcgdXAsIHBpY2sgdGhlIHNtYWxsZXN0IG9mZnNldFRvcFxuXG5cbiAgICAgICAgaWYgKCF1c2VyU2Nyb2xsc0Rvd24gJiYgIWVudHJ5SXNMb3dlclRoYW5QcmV2aW91cykge1xuICAgICAgICAgIGFjdGl2YXRlKGVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF9pbml0aWFsaXplVGFyZ2V0c0FuZE9ic2VydmFibGVzKCkge1xuICAgICAgdGhpcy5fdGFyZ2V0TGlua3MgPSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLl9vYnNlcnZhYmxlU2VjdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICBjb25zdCB0YXJnZXRMaW5rcyA9IFNlbGVjdG9yRW5naW5lLmZpbmQoU0VMRUNUT1JfVEFSR0VUX0xJTktTLCB0aGlzLl9jb25maWcudGFyZ2V0KTtcblxuICAgICAgZm9yIChjb25zdCBhbmNob3Igb2YgdGFyZ2V0TGlua3MpIHtcbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIGFuY2hvciBoYXMgYW4gaWQgYW5kIGlzIG5vdCBkaXNhYmxlZFxuICAgICAgICBpZiAoIWFuY2hvci5oYXNoIHx8IGlzRGlzYWJsZWQoYW5jaG9yKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZVNlY3Rpb24gPSBTZWxlY3RvckVuZ2luZS5maW5kT25lKGFuY2hvci5oYXNoLCB0aGlzLl9lbGVtZW50KTsgLy8gZW5zdXJlIHRoYXQgdGhlIG9ic2VydmFibGVTZWN0aW9uIGV4aXN0cyAmIGlzIHZpc2libGVcblxuICAgICAgICBpZiAoaXNWaXNpYmxlKG9ic2VydmFibGVTZWN0aW9uKSkge1xuICAgICAgICAgIHRoaXMuX3RhcmdldExpbmtzLnNldChhbmNob3IuaGFzaCwgYW5jaG9yKTtcblxuICAgICAgICAgIHRoaXMuX29ic2VydmFibGVTZWN0aW9ucy5zZXQoYW5jaG9yLmhhc2gsIG9ic2VydmFibGVTZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF9wcm9jZXNzKHRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2xlYXJBY3RpdmVDbGFzcyh0aGlzLl9jb25maWcudGFyZ2V0KTtcblxuICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUkMSk7XG5cbiAgICAgIHRoaXMuX2FjdGl2YXRlUGFyZW50cyh0YXJnZXQpO1xuXG4gICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9BQ1RJVkFURSwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9hY3RpdmF0ZVBhcmVudHModGFyZ2V0KSB7XG4gICAgICAvLyBBY3RpdmF0ZSBkcm9wZG93biBwYXJlbnRzXG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0RST1BET1dOX0lURU0pKSB7XG4gICAgICAgIFNlbGVjdG9yRW5naW5lLmZpbmRPbmUoU0VMRUNUT1JfRFJPUERPV05fVE9HR0xFJDEsIHRhcmdldC5jbG9zZXN0KFNFTEVDVE9SX0RST1BET1dOKSkuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0FDVElWRSQxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGxpc3RHcm91cCBvZiBTZWxlY3RvckVuZ2luZS5wYXJlbnRzKHRhcmdldCwgU0VMRUNUT1JfTkFWX0xJU1RfR1JPVVApKSB7XG4gICAgICAgIC8vIFNldCB0cmlnZ2VyZWQgbGlua3MgcGFyZW50cyBhcyBhY3RpdmVcbiAgICAgICAgLy8gV2l0aCBib3RoIDx1bD4gYW5kIDxuYXY+IG1hcmt1cCBhIHBhcmVudCBpcyB0aGUgcHJldmlvdXMgc2libGluZyBvZiBhbnkgbmF2IGFuY2VzdG9yXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBTZWxlY3RvckVuZ2luZS5wcmV2KGxpc3RHcm91cCwgU0VMRUNUT1JfTElOS19JVEVNUykpIHtcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUkMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBfY2xlYXJBY3RpdmVDbGFzcyhwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQUNUSVZFJDEpO1xuICAgICAgY29uc3QgYWN0aXZlTm9kZXMgPSBTZWxlY3RvckVuZ2luZS5maW5kKGAke1NFTEVDVE9SX1RBUkdFVF9MSU5LU30uJHtDTEFTU19OQU1FX0FDVElWRSQxfWAsIHBhcmVudCk7XG5cbiAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBhY3RpdmVOb2Rlcykge1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9BQ1RJVkUkMSk7XG4gICAgICB9XG4gICAgfSAvLyBTdGF0aWNcblxuXG4gICAgc3RhdGljIGpRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gU2Nyb2xsU3B5LmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcywgY29uZmlnKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YVtjb25maWddID09PSB1bmRlZmluZWQgfHwgY29uZmlnLnN0YXJ0c1dpdGgoJ18nKSB8fCBjb25maWcgPT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBFdmVudEhhbmRsZXIub24od2luZG93LCBFVkVOVF9MT0FEX0RBVEFfQVBJJDEsICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IHNweSBvZiBTZWxlY3RvckVuZ2luZS5maW5kKFNFTEVDVE9SX0RBVEFfU1BZKSkge1xuICAgICAgU2Nyb2xsU3B5LmdldE9yQ3JlYXRlSW5zdGFuY2Uoc3B5KTtcbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogalF1ZXJ5XG4gICAqL1xuXG4gIGRlZmluZUpRdWVyeVBsdWdpbihTY3JvbGxTcHkpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IHRhYi5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSQxID0gJ3RhYic7XG4gIGNvbnN0IERBVEFfS0VZJDEgPSAnYnMudGFiJztcbiAgY29uc3QgRVZFTlRfS0VZJDEgPSBgLiR7REFUQV9LRVkkMX1gO1xuICBjb25zdCBFVkVOVF9ISURFJDEgPSBgaGlkZSR7RVZFTlRfS0VZJDF9YDtcbiAgY29uc3QgRVZFTlRfSElEREVOJDEgPSBgaGlkZGVuJHtFVkVOVF9LRVkkMX1gO1xuICBjb25zdCBFVkVOVF9TSE9XJDEgPSBgc2hvdyR7RVZFTlRfS0VZJDF9YDtcbiAgY29uc3QgRVZFTlRfU0hPV04kMSA9IGBzaG93biR7RVZFTlRfS0VZJDF9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0tfREFUQV9BUEkgPSBgY2xpY2ske0VWRU5UX0tFWSQxfWA7XG4gIGNvbnN0IEVWRU5UX0tFWURPV04gPSBga2V5ZG93biR7RVZFTlRfS0VZJDF9YDtcbiAgY29uc3QgRVZFTlRfTE9BRF9EQVRBX0FQSSA9IGBsb2FkJHtFVkVOVF9LRVkkMX1gO1xuICBjb25zdCBBUlJPV19MRUZUX0tFWSA9ICdBcnJvd0xlZnQnO1xuICBjb25zdCBBUlJPV19SSUdIVF9LRVkgPSAnQXJyb3dSaWdodCc7XG4gIGNvbnN0IEFSUk9XX1VQX0tFWSA9ICdBcnJvd1VwJztcbiAgY29uc3QgQVJST1dfRE9XTl9LRVkgPSAnQXJyb3dEb3duJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9BQ1RJVkUgPSAnYWN0aXZlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9GQURFJDEgPSAnZmFkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyQxID0gJ3Nob3cnO1xuICBjb25zdCBDTEFTU19EUk9QRE9XTiA9ICdkcm9wZG93bic7XG4gIGNvbnN0IFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSA9ICcuZHJvcGRvd24tdG9nZ2xlJztcbiAgY29uc3QgU0VMRUNUT1JfRFJPUERPV05fTUVOVSA9ICcuZHJvcGRvd24tbWVudSc7XG4gIGNvbnN0IE5PVF9TRUxFQ1RPUl9EUk9QRE9XTl9UT0dHTEUgPSAnOm5vdCguZHJvcGRvd24tdG9nZ2xlKSc7XG4gIGNvbnN0IFNFTEVDVE9SX1RBQl9QQU5FTCA9ICcubGlzdC1ncm91cCwgLm5hdiwgW3JvbGU9XCJ0YWJsaXN0XCJdJztcbiAgY29uc3QgU0VMRUNUT1JfT1VURVIgPSAnLm5hdi1pdGVtLCAubGlzdC1ncm91cC1pdGVtJztcbiAgY29uc3QgU0VMRUNUT1JfSU5ORVIgPSBgLm5hdi1saW5rJHtOT1RfU0VMRUNUT1JfRFJPUERPV05fVE9HR0xFfSwgLmxpc3QtZ3JvdXAtaXRlbSR7Tk9UX1NFTEVDVE9SX0RST1BET1dOX1RPR0dMRX0sIFtyb2xlPVwidGFiXCJdJHtOT1RfU0VMRUNUT1JfRFJPUERPV05fVE9HR0xFfWA7XG4gIGNvbnN0IFNFTEVDVE9SX0RBVEFfVE9HR0xFID0gJ1tkYXRhLWJzLXRvZ2dsZT1cInRhYlwiXSwgW2RhdGEtYnMtdG9nZ2xlPVwicGlsbFwiXSwgW2RhdGEtYnMtdG9nZ2xlPVwibGlzdFwiXSc7IC8vIHRvZG86djY6IGNvdWxkIGJlIG9ubHkgYHRhYmBcblxuICBjb25zdCBTRUxFQ1RPUl9JTk5FUl9FTEVNID0gYCR7U0VMRUNUT1JfSU5ORVJ9LCAke1NFTEVDVE9SX0RBVEFfVE9HR0xFfWA7XG4gIGNvbnN0IFNFTEVDVE9SX0RBVEFfVE9HR0xFX0FDVElWRSA9IGAuJHtDTEFTU19OQU1FX0FDVElWRX1bZGF0YS1icy10b2dnbGU9XCJ0YWJcIl0sIC4ke0NMQVNTX05BTUVfQUNUSVZFfVtkYXRhLWJzLXRvZ2dsZT1cInBpbGxcIl0sIC4ke0NMQVNTX05BTUVfQUNUSVZFfVtkYXRhLWJzLXRvZ2dsZT1cImxpc3RcIl1gO1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBUYWIgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgICBzdXBlcihlbGVtZW50KTtcbiAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2VsZW1lbnQuY2xvc2VzdChTRUxFQ1RPUl9UQUJfUEFORUwpO1xuXG4gICAgICBpZiAoIXRoaXMuX3BhcmVudCkge1xuICAgICAgICByZXR1cm47IC8vIHRvZG86IHNob3VsZCBUaHJvdyBleGNlcHRpb24gb24gdjZcbiAgICAgICAgLy8gdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtlbGVtZW50Lm91dGVySFRNTH0gaGFzIG5vdCBhIHZhbGlkIHBhcmVudCAke1NFTEVDVE9SX0lOTkVSX0VMRU19YClcbiAgICAgIH0gLy8gU2V0IHVwIGluaXRpYWwgYXJpYSBhdHRyaWJ1dGVzXG5cblxuICAgICAgdGhpcy5fc2V0SW5pdGlhbEF0dHJpYnV0ZXModGhpcy5fcGFyZW50LCB0aGlzLl9nZXRDaGlsZHJlbigpKTtcblxuICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0tFWURPV04sIGV2ZW50ID0+IHRoaXMuX2tleWRvd24oZXZlbnQpKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUUkMTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBzaG93KCkge1xuICAgICAgLy8gU2hvd3MgdGhpcyBlbGVtIGFuZCBkZWFjdGl2YXRlIHRoZSBhY3RpdmUgc2libGluZyBpZiBleGlzdHNcbiAgICAgIGNvbnN0IGlubmVyRWxlbSA9IHRoaXMuX2VsZW1lbnQ7XG5cbiAgICAgIGlmICh0aGlzLl9lbGVtSXNBY3RpdmUoaW5uZXJFbGVtKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFNlYXJjaCBmb3IgYWN0aXZlIHRhYiBvbiBzYW1lIHBhcmVudCB0byBkZWFjdGl2YXRlIGl0XG5cblxuICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlRWxlbSgpO1xuXG4gICAgICBjb25zdCBoaWRlRXZlbnQgPSBhY3RpdmUgPyBFdmVudEhhbmRsZXIudHJpZ2dlcihhY3RpdmUsIEVWRU5UX0hJREUkMSwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiBpbm5lckVsZW1cbiAgICAgIH0pIDogbnVsbDtcbiAgICAgIGNvbnN0IHNob3dFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKGlubmVyRWxlbSwgRVZFTlRfU0hPVyQxLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IGFjdGl2ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fCBoaWRlRXZlbnQgJiYgaGlkZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9kZWFjdGl2YXRlKGFjdGl2ZSwgaW5uZXJFbGVtKTtcblxuICAgICAgdGhpcy5fYWN0aXZhdGUoaW5uZXJFbGVtLCBhY3RpdmUpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfYWN0aXZhdGUoZWxlbWVudCwgcmVsYXRlZEVsZW0pIHtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0FDVElWRSk7XG5cbiAgICAgIHRoaXMuX2FjdGl2YXRlKGdldEVsZW1lbnRGcm9tU2VsZWN0b3IoZWxlbWVudCkpOyAvLyBTZWFyY2ggYW5kIGFjdGl2YXRlL3Nob3cgdGhlIHByb3BlciBzZWN0aW9uXG5cblxuICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgncm9sZScpICE9PSAndGFiJykge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX1NIT1ckMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlRHJvcERvd24oZWxlbWVudCwgdHJ1ZSk7XG5cbiAgICAgICAgRXZlbnRIYW5kbGVyLnRyaWdnZXIoZWxlbWVudCwgRVZFTlRfU0hPV04kMSwge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRFbGVtXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZSwgZWxlbWVudCwgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9GQURFJDEpKTtcbiAgICB9XG5cbiAgICBfZGVhY3RpdmF0ZShlbGVtZW50LCByZWxhdGVkRWxlbSkge1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQUNUSVZFKTtcbiAgICAgIGVsZW1lbnQuYmx1cigpO1xuXG4gICAgICB0aGlzLl9kZWFjdGl2YXRlKGdldEVsZW1lbnRGcm9tU2VsZWN0b3IoZWxlbWVudCkpOyAvLyBTZWFyY2ggYW5kIGRlYWN0aXZhdGUgdGhlIHNob3duIHNlY3Rpb24gdG9vXG5cblxuICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgncm9sZScpICE9PSAndGFiJykge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX1NIT1ckMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuXG4gICAgICAgIHRoaXMuX3RvZ2dsZURyb3BEb3duKGVsZW1lbnQsIGZhbHNlKTtcblxuICAgICAgICBFdmVudEhhbmRsZXIudHJpZ2dlcihlbGVtZW50LCBFVkVOVF9ISURERU4kMSwge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRFbGVtXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZSwgZWxlbWVudCwgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9GQURFJDEpKTtcbiAgICB9XG5cbiAgICBfa2V5ZG93bihldmVudCkge1xuICAgICAgaWYgKCFbQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19ET1dOX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBzdG9wUHJvcGFnYXRpb24vcHJldmVudERlZmF1bHQgYm90aCBhZGRlZCB0byBzdXBwb3J0IHVwL2Rvd24ga2V5cyB3aXRob3V0IHNjcm9sbGluZyB0aGUgcGFnZVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaXNOZXh0ID0gW0FSUk9XX1JJR0hUX0tFWSwgQVJST1dfRE9XTl9LRVldLmluY2x1ZGVzKGV2ZW50LmtleSk7XG4gICAgICBjb25zdCBuZXh0QWN0aXZlRWxlbWVudCA9IGdldE5leHRBY3RpdmVFbGVtZW50KHRoaXMuX2dldENoaWxkcmVuKCkuZmlsdGVyKGVsZW1lbnQgPT4gIWlzRGlzYWJsZWQoZWxlbWVudCkpLCBldmVudC50YXJnZXQsIGlzTmV4dCwgdHJ1ZSk7XG5cbiAgICAgIGlmIChuZXh0QWN0aXZlRWxlbWVudCkge1xuICAgICAgICBuZXh0QWN0aXZlRWxlbWVudC5mb2N1cyh7XG4gICAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgVGFiLmdldE9yQ3JlYXRlSW5zdGFuY2UobmV4dEFjdGl2ZUVsZW1lbnQpLnNob3coKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0Q2hpbGRyZW4oKSB7XG4gICAgICAvLyBjb2xsZWN0aW9uIG9mIGlubmVyIGVsZW1lbnRzXG4gICAgICByZXR1cm4gU2VsZWN0b3JFbmdpbmUuZmluZChTRUxFQ1RPUl9JTk5FUl9FTEVNLCB0aGlzLl9wYXJlbnQpO1xuICAgIH1cblxuICAgIF9nZXRBY3RpdmVFbGVtKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENoaWxkcmVuKCkuZmluZChjaGlsZCA9PiB0aGlzLl9lbGVtSXNBY3RpdmUoY2hpbGQpKSB8fCBudWxsO1xuICAgIH1cblxuICAgIF9zZXRJbml0aWFsQXR0cmlidXRlcyhwYXJlbnQsIGNoaWxkcmVuKSB7XG4gICAgICB0aGlzLl9zZXRBdHRyaWJ1dGVJZk5vdEV4aXN0cyhwYXJlbnQsICdyb2xlJywgJ3RhYmxpc3QnKTtcblxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xuICAgICAgICB0aGlzLl9zZXRJbml0aWFsQXR0cmlidXRlc09uQ2hpbGQoY2hpbGQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRJbml0aWFsQXR0cmlidXRlc09uQ2hpbGQoY2hpbGQpIHtcbiAgICAgIGNoaWxkID0gdGhpcy5fZ2V0SW5uZXJFbGVtZW50KGNoaWxkKTtcblxuICAgICAgY29uc3QgaXNBY3RpdmUgPSB0aGlzLl9lbGVtSXNBY3RpdmUoY2hpbGQpO1xuXG4gICAgICBjb25zdCBvdXRlckVsZW0gPSB0aGlzLl9nZXRPdXRlckVsZW1lbnQoY2hpbGQpO1xuXG4gICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCBpc0FjdGl2ZSk7XG5cbiAgICAgIGlmIChvdXRlckVsZW0gIT09IGNoaWxkKSB7XG4gICAgICAgIHRoaXMuX3NldEF0dHJpYnV0ZUlmTm90RXhpc3RzKG91dGVyRWxlbSwgJ3JvbGUnLCAncHJlc2VudGF0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNBY3RpdmUpIHtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zZXRBdHRyaWJ1dGVJZk5vdEV4aXN0cyhjaGlsZCwgJ3JvbGUnLCAndGFiJyk7IC8vIHNldCBhdHRyaWJ1dGVzIHRvIHRoZSByZWxhdGVkIHBhbmVsIHRvb1xuXG5cbiAgICAgIHRoaXMuX3NldEluaXRpYWxBdHRyaWJ1dGVzT25UYXJnZXRQYW5lbChjaGlsZCk7XG4gICAgfVxuXG4gICAgX3NldEluaXRpYWxBdHRyaWJ1dGVzT25UYXJnZXRQYW5lbChjaGlsZCkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0RWxlbWVudEZyb21TZWxlY3RvcihjaGlsZCk7XG5cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2V0QXR0cmlidXRlSWZOb3RFeGlzdHModGFyZ2V0LCAncm9sZScsICd0YWJwYW5lbCcpO1xuXG4gICAgICBpZiAoY2hpbGQuaWQpIHtcbiAgICAgICAgdGhpcy5fc2V0QXR0cmlidXRlSWZOb3RFeGlzdHModGFyZ2V0LCAnYXJpYS1sYWJlbGxlZGJ5JywgYCMke2NoaWxkLmlkfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIF90b2dnbGVEcm9wRG93bihlbGVtZW50LCBvcGVuKSB7XG4gICAgICBjb25zdCBvdXRlckVsZW0gPSB0aGlzLl9nZXRPdXRlckVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgIGlmICghb3V0ZXJFbGVtLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19EUk9QRE9XTikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2dnbGUgPSAoc2VsZWN0b3IsIGNsYXNzTmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gU2VsZWN0b3JFbmdpbmUuZmluZE9uZShzZWxlY3Rvciwgb3V0ZXJFbGVtKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIG9wZW4pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0b2dnbGUoU0VMRUNUT1JfRFJPUERPV05fVE9HR0xFLCBDTEFTU19OQU1FX0FDVElWRSk7XG4gICAgICB0b2dnbGUoU0VMRUNUT1JfRFJPUERPV05fTUVOVSwgQ0xBU1NfTkFNRV9TSE9XJDEpO1xuICAgICAgb3V0ZXJFbGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIG9wZW4pO1xuICAgIH1cblxuICAgIF9zZXRBdHRyaWJ1dGVJZk5vdEV4aXN0cyhlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2VsZW1Jc0FjdGl2ZShlbGVtKSB7XG4gICAgICByZXR1cm4gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgIH0gLy8gVHJ5IHRvIGdldCB0aGUgaW5uZXIgZWxlbWVudCAodXN1YWxseSB0aGUgLm5hdi1saW5rKVxuXG5cbiAgICBfZ2V0SW5uZXJFbGVtZW50KGVsZW0pIHtcbiAgICAgIHJldHVybiBlbGVtLm1hdGNoZXMoU0VMRUNUT1JfSU5ORVJfRUxFTSkgPyBlbGVtIDogU2VsZWN0b3JFbmdpbmUuZmluZE9uZShTRUxFQ1RPUl9JTk5FUl9FTEVNLCBlbGVtKTtcbiAgICB9IC8vIFRyeSB0byBnZXQgdGhlIG91dGVyIGVsZW1lbnQgKHVzdWFsbHkgdGhlIC5uYXYtaXRlbSlcblxuXG4gICAgX2dldE91dGVyRWxlbWVudChlbGVtKSB7XG4gICAgICByZXR1cm4gZWxlbS5jbG9zZXN0KFNFTEVDVE9SX09VVEVSKSB8fCBlbGVtO1xuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IFRhYi5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCB8fCBjb25maWcuc3RhcnRzV2l0aCgnXycpIHx8IGNvbmZpZyA9PT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG4gIC8qKlxuICAgKiBEYXRhIEFQSSBpbXBsZW1lbnRhdGlvblxuICAgKi9cblxuXG4gIEV2ZW50SGFuZGxlci5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEksIFNFTEVDVE9SX0RBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoWydBJywgJ0FSRUEnXS5pbmNsdWRlcyh0aGlzLnRhZ05hbWUpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc2FibGVkKHRoaXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgVGFiLmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcykuc2hvdygpO1xuICB9KTtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgb24gZm9jdXNcbiAgICovXG5cbiAgRXZlbnRIYW5kbGVyLm9uKHdpbmRvdywgRVZFTlRfTE9BRF9EQVRBX0FQSSwgKCkgPT4ge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBTZWxlY3RvckVuZ2luZS5maW5kKFNFTEVDVE9SX0RBVEFfVE9HR0xFX0FDVElWRSkpIHtcbiAgICAgIFRhYi5nZXRPckNyZWF0ZUluc3RhbmNlKGVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgZGVmaW5lSlF1ZXJ5UGx1Z2luKFRhYik7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdG9hc3QuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuXG4gIGNvbnN0IE5BTUUgPSAndG9hc3QnO1xuICBjb25zdCBEQVRBX0tFWSA9ICdicy50b2FzdCc7XG4gIGNvbnN0IEVWRU5UX0tFWSA9IGAuJHtEQVRBX0tFWX1gO1xuICBjb25zdCBFVkVOVF9NT1VTRU9WRVIgPSBgbW91c2VvdmVyJHtFVkVOVF9LRVl9YDtcbiAgY29uc3QgRVZFTlRfTU9VU0VPVVQgPSBgbW91c2VvdXQke0VWRU5UX0tFWX1gO1xuICBjb25zdCBFVkVOVF9GT0NVU0lOID0gYGZvY3VzaW4ke0VWRU5UX0tFWX1gO1xuICBjb25zdCBFVkVOVF9GT0NVU09VVCA9IGBmb2N1c291dCR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX0hJREUgPSBgaGlkZSR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX0hJRERFTiA9IGBoaWRkZW4ke0VWRU5UX0tFWX1gO1xuICBjb25zdCBFVkVOVF9TSE9XID0gYHNob3cke0VWRU5UX0tFWX1gO1xuICBjb25zdCBFVkVOVF9TSE9XTiA9IGBzaG93biR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IENMQVNTX05BTUVfRkFERSA9ICdmYWRlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9ISURFID0gJ2hpZGUnOyAvLyBAZGVwcmVjYXRlZCAtIGtlcHQgaGVyZSBvbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuXG4gIGNvbnN0IENMQVNTX05BTUVfU0hPVyA9ICdzaG93JztcbiAgY29uc3QgQ0xBU1NfTkFNRV9TSE9XSU5HID0gJ3Nob3dpbmcnO1xuICBjb25zdCBEZWZhdWx0VHlwZSA9IHtcbiAgICBhbmltYXRpb246ICdib29sZWFuJyxcbiAgICBhdXRvaGlkZTogJ2Jvb2xlYW4nLFxuICAgIGRlbGF5OiAnbnVtYmVyJ1xuICB9O1xuICBjb25zdCBEZWZhdWx0ID0ge1xuICAgIGFuaW1hdGlvbjogdHJ1ZSxcbiAgICBhdXRvaGlkZTogdHJ1ZSxcbiAgICBkZWxheTogNTAwMFxuICB9O1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBUb2FzdCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgc3VwZXIoZWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsO1xuICAgICAgdGhpcy5faGFzTW91c2VJbnRlcmFjdGlvbiA9IGZhbHNlO1xuICAgICAgdGhpcy5faGFzS2V5Ym9hcmRJbnRlcmFjdGlvbiA9IGZhbHNlO1xuXG4gICAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBzaG93KCkge1xuICAgICAgY29uc3Qgc2hvd0V2ZW50ID0gRXZlbnRIYW5kbGVyLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfU0hPVyk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLmFuaW1hdGlvbikge1xuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9GQURFKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX1NIT1dJTkcpO1xuXG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1NIT1dOKTtcblxuICAgICAgICB0aGlzLl9tYXliZVNjaGVkdWxlSGlkZSgpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfSElERSk7IC8vIEBkZXByZWNhdGVkXG5cblxuICAgICAgcmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TSE9XLCBDTEFTU19OQU1FX1NIT1dJTkcpO1xuXG4gICAgICB0aGlzLl9xdWV1ZUNhbGxiYWNrKGNvbXBsZXRlLCB0aGlzLl9lbGVtZW50LCB0aGlzLl9jb25maWcuYW5pbWF0aW9uKTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgaWYgKCF0aGlzLmlzU2hvd24oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhpZGVFdmVudCA9IEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJREUpO1xuXG4gICAgICBpZiAoaGlkZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfSElERSk7IC8vIEBkZXByZWNhdGVkXG5cblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9TSE9XSU5HLCBDTEFTU19OQU1FX1NIT1cpO1xuXG4gICAgICAgIEV2ZW50SGFuZGxlci50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0hJRERFTik7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TSE9XSU5HKTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZSwgdGhpcy5fZWxlbWVudCwgdGhpcy5fY29uZmlnLmFuaW1hdGlvbik7XG4gICAgfVxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXG4gICAgICBpZiAodGhpcy5pc1Nob3duKCkpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPVyk7XG4gICAgICB9XG5cbiAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB9XG5cbiAgICBpc1Nob3duKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfU0hPVyk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9tYXliZVNjaGVkdWxlSGlkZSgpIHtcbiAgICAgIGlmICghdGhpcy5fY29uZmlnLmF1dG9oaWRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2hhc01vdXNlSW50ZXJhY3Rpb24gfHwgdGhpcy5faGFzS2V5Ym9hcmRJbnRlcmFjdGlvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9LCB0aGlzLl9jb25maWcuZGVsYXkpO1xuICAgIH1cblxuICAgIF9vbkludGVyYWN0aW9uKGV2ZW50LCBpc0ludGVyYWN0aW5nKSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbW91c2VvdmVyJzpcbiAgICAgICAgY2FzZSAnbW91c2VvdXQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2hhc01vdXNlSW50ZXJhY3Rpb24gPSBpc0ludGVyYWN0aW5nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ2ZvY3VzaW4nOlxuICAgICAgICBjYXNlICdmb2N1c291dCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5faGFzS2V5Ym9hcmRJbnRlcmFjdGlvbiA9IGlzSW50ZXJhY3Rpbmc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0ludGVyYWN0aW5nKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyVGltZW91dCgpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dEVsZW1lbnQgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuXG4gICAgICBpZiAodGhpcy5fZWxlbWVudCA9PT0gbmV4dEVsZW1lbnQgfHwgdGhpcy5fZWxlbWVudC5jb250YWlucyhuZXh0RWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9tYXliZVNjaGVkdWxlSGlkZSgpO1xuICAgIH1cblxuICAgIF9zZXRMaXN0ZW5lcnMoKSB7XG4gICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfTU9VU0VPVkVSLCBldmVudCA9PiB0aGlzLl9vbkludGVyYWN0aW9uKGV2ZW50LCB0cnVlKSk7XG4gICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfTU9VU0VPVVQsIGV2ZW50ID0+IHRoaXMuX29uSW50ZXJhY3Rpb24oZXZlbnQsIGZhbHNlKSk7XG4gICAgICBFdmVudEhhbmRsZXIub24odGhpcy5fZWxlbWVudCwgRVZFTlRfRk9DVVNJTiwgZXZlbnQgPT4gdGhpcy5fb25JbnRlcmFjdGlvbihldmVudCwgdHJ1ZSkpO1xuICAgICAgRXZlbnRIYW5kbGVyLm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX0ZPQ1VTT1VULCBldmVudCA9PiB0aGlzLl9vbkludGVyYWN0aW9uKGV2ZW50LCBmYWxzZSkpO1xuICAgIH1cblxuICAgIF9jbGVhclRpbWVvdXQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gbnVsbDtcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBUb2FzdC5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMsIGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFbY29uZmlnXSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cbiAgLyoqXG4gICAqIERhdGEgQVBJIGltcGxlbWVudGF0aW9uXG4gICAqL1xuXG5cbiAgZW5hYmxlRGlzbWlzc1RyaWdnZXIoVG9hc3QpO1xuICAvKipcbiAgICogalF1ZXJ5XG4gICAqL1xuXG4gIGRlZmluZUpRdWVyeVBsdWdpbihUb2FzdCk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogaW5kZXgudW1kLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgY29uc3QgaW5kZXhfdW1kID0ge1xuICAgIEFsZXJ0LFxuICAgIEJ1dHRvbixcbiAgICBDYXJvdXNlbCxcbiAgICBDb2xsYXBzZSxcbiAgICBEcm9wZG93bixcbiAgICBNb2RhbCxcbiAgICBPZmZjYW52YXMsXG4gICAgUG9wb3ZlcixcbiAgICBTY3JvbGxTcHksXG4gICAgVGFiLFxuICAgIFRvYXN0LFxuICAgIFRvb2x0aXBcbiAgfTtcblxuICByZXR1cm4gaW5kZXhfdW1kO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib290c3RyYXAuanMubWFwXG4iLCJpbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICd2dWUnXHJcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAudnVlJ1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4vcm91dGVyJ1xyXG5jb25zdCBhcHAgPSBjcmVhdGVBcHAoQXBwKVxyXG5cclxuYXBwLnVzZShyb3V0ZXIpXHJcblxyXG5hcHAubW91bnQoJyNhcHAnKVxyXG5cclxuaW1wb3J0IFwiYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzXCJcclxuaW1wb3J0IFwiYm9vdHN0cmFwL2Rpc3QvanMvYm9vdHN0cmFwLmpzXCJcclxuaW1wb3J0IFwiYm9vdHN0cmFwLWljb25zL2ZvbnQvYm9vdHN0cmFwLWljb25zLmNzc1wiOyJdLCJuYW1lcyI6WyJtYWtlTWFwIiwic3RyIiwiZXhwZWN0c0xvd2VyQ2FzZSIsIm1hcCIsImxpc3QiLCJ2YWwiLCJub3JtYWxpemVTdHlsZSIsInZhbHVlIiwiaXNBcnJheSIsInJlcyIsImkiLCJpdGVtIiwibm9ybWFsaXplZCIsImlzU3RyaW5nIiwicGFyc2VTdHJpbmdTdHlsZSIsImtleSIsImlzT2JqZWN0IiwibGlzdERlbGltaXRlclJFIiwicHJvcGVydHlEZWxpbWl0ZXJSRSIsInN0eWxlQ29tbWVudFJFIiwiY3NzVGV4dCIsInJldCIsInRtcCIsIm5vcm1hbGl6ZUNsYXNzIiwibmFtZSIsInNwZWNpYWxCb29sZWFuQXR0cnMiLCJpc1NwZWNpYWxCb29sZWFuQXR0ciIsImluY2x1ZGVCb29sZWFuQXR0ciIsImxvb3NlQ29tcGFyZUFycmF5cyIsImEiLCJiIiwiZXF1YWwiLCJsb29zZUVxdWFsIiwiYVZhbGlkVHlwZSIsImlzRGF0ZSIsImJWYWxpZFR5cGUiLCJpc1N5bWJvbCIsImFLZXlzQ291bnQiLCJiS2V5c0NvdW50IiwiYUhhc0tleSIsImJIYXNLZXkiLCJsb29zZUluZGV4T2YiLCJhcnIiLCJ0b0Rpc3BsYXlTdHJpbmciLCJvYmplY3RUb1N0cmluZyIsImlzRnVuY3Rpb24iLCJyZXBsYWNlciIsIl9rZXkiLCJpc01hcCIsImVudHJpZXMiLCJpc1NldCIsImlzUGxhaW5PYmplY3QiLCJFTVBUWV9PQkoiLCJFTVBUWV9BUlIiLCJOT09QIiwiTk8iLCJvblJFIiwiaXNPbiIsImlzTW9kZWxMaXN0ZW5lciIsImV4dGVuZCIsInJlbW92ZSIsImVsIiwiaGFzT3duUHJvcGVydHkiLCJoYXNPd24iLCJ0b1R5cGVTdHJpbmciLCJpc1Byb21pc2UiLCJ0b1Jhd1R5cGUiLCJpc0ludGVnZXJLZXkiLCJpc1Jlc2VydmVkUHJvcCIsImNhY2hlU3RyaW5nRnVuY3Rpb24iLCJmbiIsImNhY2hlIiwiY2FtZWxpemVSRSIsImNhbWVsaXplIiwiXyIsImMiLCJoeXBoZW5hdGVSRSIsImh5cGhlbmF0ZSIsImNhcGl0YWxpemUiLCJ0b0hhbmRsZXJLZXkiLCJoYXNDaGFuZ2VkIiwib2xkVmFsdWUiLCJpbnZva2VBcnJheUZucyIsImZucyIsImFyZyIsImRlZiIsIm9iaiIsImxvb3NlVG9OdW1iZXIiLCJuIiwiX2dsb2JhbFRoaXMiLCJnZXRHbG9iYWxUaGlzIiwiYWN0aXZlRWZmZWN0U2NvcGUiLCJFZmZlY3RTY29wZSIsImRldGFjaGVkIiwiY3VycmVudEVmZmVjdFNjb3BlIiwiZnJvbVBhcmVudCIsImwiLCJsYXN0IiwicmVjb3JkRWZmZWN0U2NvcGUiLCJlZmZlY3QiLCJzY29wZSIsImdldEN1cnJlbnRTY29wZSIsImNyZWF0ZURlcCIsImVmZmVjdHMiLCJkZXAiLCJ3YXNUcmFja2VkIiwidHJhY2tPcEJpdCIsIm5ld1RyYWNrZWQiLCJpbml0RGVwTWFya2VycyIsImRlcHMiLCJmaW5hbGl6ZURlcE1hcmtlcnMiLCJwdHIiLCJ0YXJnZXRNYXAiLCJlZmZlY3RUcmFja0RlcHRoIiwibWF4TWFya2VyQml0cyIsImFjdGl2ZUVmZmVjdCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsIlJlYWN0aXZlRWZmZWN0Iiwic2NoZWR1bGVyIiwicGFyZW50IiwibGFzdFNob3VsZFRyYWNrIiwic2hvdWxkVHJhY2siLCJjbGVhbnVwRWZmZWN0IiwidHJhY2tTdGFjayIsInBhdXNlVHJhY2tpbmciLCJyZXNldFRyYWNraW5nIiwidHJhY2siLCJ0YXJnZXQiLCJ0eXBlIiwiZGVwc01hcCIsInRyYWNrRWZmZWN0cyIsImRlYnVnZ2VyRXZlbnRFeHRyYUluZm8iLCJ0cmlnZ2VyIiwibmV3VmFsdWUiLCJvbGRUYXJnZXQiLCJuZXdMZW5ndGgiLCJ0cmlnZ2VyRWZmZWN0cyIsInRyaWdnZXJFZmZlY3QiLCJpc05vblRyYWNrYWJsZUtleXMiLCJidWlsdEluU3ltYm9scyIsImdldCQxIiwiY3JlYXRlR2V0dGVyIiwic2hhbGxvd0dldCIsInJlYWRvbmx5R2V0IiwiYXJyYXlJbnN0cnVtZW50YXRpb25zIiwiY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zIiwiaW5zdHJ1bWVudGF0aW9ucyIsImFyZ3MiLCJ0b1JhdyIsImlzUmVhZG9ubHkiLCJzaGFsbG93IiwicmVjZWl2ZXIiLCJzaGFsbG93UmVhZG9ubHlNYXAiLCJyZWFkb25seU1hcCIsInNoYWxsb3dSZWFjdGl2ZU1hcCIsInJlYWN0aXZlTWFwIiwidGFyZ2V0SXNBcnJheSIsImlzUmVmIiwicmVhZG9ubHkiLCJyZWFjdGl2ZSIsInNldCQxIiwiY3JlYXRlU2V0dGVyIiwic2hhbGxvd1NldCIsImlzU2hhbGxvdyIsImhhZEtleSIsInJlc3VsdCIsImRlbGV0ZVByb3BlcnR5IiwiaGFzJDEiLCJvd25LZXlzIiwibXV0YWJsZUhhbmRsZXJzIiwicmVhZG9ubHlIYW5kbGVycyIsInNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzIiwidG9TaGFsbG93IiwiZ2V0UHJvdG8iLCJ2IiwiZ2V0IiwicmF3VGFyZ2V0IiwicmF3S2V5IiwiaGFzIiwid3JhcCIsInRvUmVhZG9ubHkiLCJ0b1JlYWN0aXZlIiwic2l6ZSIsImFkZCIsInNldCIsImRlbGV0ZUVudHJ5IiwiY2xlYXIiLCJoYWRJdGVtcyIsImNyZWF0ZUZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJvYnNlcnZlZCIsImNyZWF0ZUl0ZXJhYmxlTWV0aG9kIiwibWV0aG9kIiwidGFyZ2V0SXNNYXAiLCJpc1BhaXIiLCJpc0tleU9ubHkiLCJpbm5lckl0ZXJhdG9yIiwiZG9uZSIsImNyZWF0ZVJlYWRvbmx5TWV0aG9kIiwiY3JlYXRlSW5zdHJ1bWVudGF0aW9ucyIsIm11dGFibGVJbnN0cnVtZW50YXRpb25zIiwic2hhbGxvd0luc3RydW1lbnRhdGlvbnMiLCJyZWFkb25seUluc3RydW1lbnRhdGlvbnMiLCJzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zIiwiY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyIiwibXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyIsInNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMiLCJyZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyIsInRhcmdldFR5cGVNYXAiLCJyYXdUeXBlIiwiZ2V0VGFyZ2V0VHlwZSIsImNyZWF0ZVJlYWN0aXZlT2JqZWN0Iiwic2hhbGxvd1JlYWN0aXZlIiwiYmFzZUhhbmRsZXJzIiwiY29sbGVjdGlvbkhhbmRsZXJzIiwicHJveHlNYXAiLCJleGlzdGluZ1Byb3h5IiwidGFyZ2V0VHlwZSIsInByb3h5IiwiaXNSZWFjdGl2ZSIsImlzUHJveHkiLCJyYXciLCJtYXJrUmF3IiwidHJhY2tSZWZWYWx1ZSIsInJlZiIsInRyaWdnZXJSZWZWYWx1ZSIsIm5ld1ZhbCIsInIiLCJjcmVhdGVSZWYiLCJzaGFsbG93UmVmIiwicmF3VmFsdWUiLCJSZWZJbXBsIiwiX192X2lzU2hhbGxvdyIsInVzZURpcmVjdFZhbHVlIiwidW5yZWYiLCJzaGFsbG93VW53cmFwSGFuZGxlcnMiLCJwcm94eVJlZnMiLCJvYmplY3RXaXRoUmVmcyIsIl9hJDEiLCJDb21wdXRlZFJlZkltcGwiLCJnZXR0ZXIiLCJfc2V0dGVyIiwiaXNTU1IiLCJzZWxmIiwiY29tcHV0ZWQiLCJnZXR0ZXJPck9wdGlvbnMiLCJkZWJ1Z09wdGlvbnMiLCJzZXR0ZXIiLCJvbmx5R2V0dGVyIiwiY2FsbFdpdGhFcnJvckhhbmRsaW5nIiwiaW5zdGFuY2UiLCJlcnIiLCJoYW5kbGVFcnJvciIsImNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nIiwidmFsdWVzIiwidGhyb3dJbkRldiIsImNvbnRleHRWTm9kZSIsImN1ciIsImV4cG9zZWRJbnN0YW5jZSIsImVycm9ySW5mbyIsImVycm9yQ2FwdHVyZWRIb29rcyIsImFwcEVycm9ySGFuZGxlciIsImxvZ0Vycm9yIiwiaXNGbHVzaGluZyIsImlzRmx1c2hQZW5kaW5nIiwicXVldWUiLCJmbHVzaEluZGV4IiwicGVuZGluZ1Bvc3RGbHVzaENicyIsImFjdGl2ZVBvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwicmVzb2x2ZWRQcm9taXNlIiwiY3VycmVudEZsdXNoUHJvbWlzZSIsIm5leHRUaWNrIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsImlkIiwic3RhcnQiLCJlbmQiLCJtaWRkbGUiLCJnZXRJZCIsInF1ZXVlSm9iIiwiam9iIiwicXVldWVGbHVzaCIsImZsdXNoSm9icyIsImludmFsaWRhdGVKb2IiLCJxdWV1ZVBvc3RGbHVzaENiIiwiY2IiLCJmbHVzaFByZUZsdXNoQ2JzIiwic2VlbiIsImZsdXNoUG9zdEZsdXNoQ2JzIiwiZGVkdXBlZCIsImNvbXBhcmF0b3IiLCJkaWZmIiwiY2hlY2siLCJlbWl0IiwiZXZlbnQiLCJyYXdBcmdzIiwicHJvcHMiLCJtb2RlbEFyZyIsIm1vZGlmaWVyc0tleSIsIm51bWJlciIsInRyaW0iLCJoYW5kbGVyTmFtZSIsImhhbmRsZXIiLCJvbmNlSGFuZGxlciIsIm5vcm1hbGl6ZUVtaXRzT3B0aW9ucyIsImNvbXAiLCJhcHBDb250ZXh0IiwiYXNNaXhpbiIsImNhY2hlZCIsImhhc0V4dGVuZHMiLCJleHRlbmRFbWl0cyIsIm5vcm1hbGl6ZWRGcm9tRXh0ZW5kIiwiaXNFbWl0TGlzdGVuZXIiLCJvcHRpb25zIiwiY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwiY3VycmVudFNjb3BlSWQiLCJzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UiLCJwcmV2Iiwid2l0aEN0eCIsImN0eCIsImlzTm9uU2NvcGVkU2xvdCIsInJlbmRlckZuV2l0aENvbnRleHQiLCJzZXRCbG9ja1RyYWNraW5nIiwicHJldkluc3RhbmNlIiwicmVuZGVyQ29tcG9uZW50Um9vdCIsIkNvbXBvbmVudCIsInZub2RlIiwid2l0aFByb3h5IiwicHJvcHNPcHRpb25zIiwic2xvdHMiLCJhdHRycyIsInJlbmRlciIsInJlbmRlckNhY2hlIiwiZGF0YSIsInNldHVwU3RhdGUiLCJpbmhlcml0QXR0cnMiLCJmYWxsdGhyb3VnaEF0dHJzIiwicHJveHlUb1VzZSIsIm5vcm1hbGl6ZVZOb2RlIiwiZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoIiwiYmxvY2tTdGFjayIsImNyZWF0ZVZOb2RlIiwiQ29tbWVudCIsInJvb3QiLCJrZXlzIiwic2hhcGVGbGFnIiwiZmlsdGVyTW9kZWxMaXN0ZW5lcnMiLCJjbG9uZVZOb2RlIiwic2hvdWxkVXBkYXRlQ29tcG9uZW50IiwicHJldlZOb2RlIiwibmV4dFZOb2RlIiwib3B0aW1pemVkIiwicHJldlByb3BzIiwicHJldkNoaWxkcmVuIiwiY29tcG9uZW50IiwibmV4dFByb3BzIiwibmV4dENoaWxkcmVuIiwicGF0Y2hGbGFnIiwiZW1pdHMiLCJoYXNQcm9wc0NoYW5nZWQiLCJkeW5hbWljUHJvcHMiLCJlbWl0c09wdGlvbnMiLCJuZXh0S2V5cyIsInVwZGF0ZUhPQ0hvc3RFbCIsImlzU3VzcGVuc2UiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsInN1c3BlbnNlIiwicHJvdmlkZSIsImN1cnJlbnRJbnN0YW5jZSIsInByb3ZpZGVzIiwicGFyZW50UHJvdmlkZXMiLCJpbmplY3QiLCJkZWZhdWx0VmFsdWUiLCJ0cmVhdERlZmF1bHRBc0ZhY3RvcnkiLCJJTklUSUFMX1dBVENIRVJfVkFMVUUiLCJ3YXRjaCIsInNvdXJjZSIsImRvV2F0Y2giLCJpbW1lZGlhdGUiLCJkZWVwIiwiZmx1c2giLCJvblRyYWNrIiwib25UcmlnZ2VyIiwiZm9yY2VUcmlnZ2VyIiwiaXNNdWx0aVNvdXJjZSIsImlzU2hhbGxvdyQxIiwicyIsInRyYXZlcnNlIiwiY2xlYW51cCIsIm9uQ2xlYW51cCIsImJhc2VHZXR0ZXIiLCJzc3JDbGVhbnVwIiwiaXNJblNTUkNvbXBvbmVudFNldHVwIiwidXNlU1NSQ29udGV4dCIsInF1ZXVlUG9zdFJlbmRlckVmZmVjdCIsInVud2F0Y2giLCJpbnN0YW5jZVdhdGNoIiwicHVibGljVGhpcyIsImNyZWF0ZVBhdGhHZXR0ZXIiLCJzZXRDdXJyZW50SW5zdGFuY2UiLCJ1bnNldEN1cnJlbnRJbnN0YW5jZSIsInBhdGgiLCJzZWdtZW50cyIsInVzZVRyYW5zaXRpb25TdGF0ZSIsInN0YXRlIiwib25Nb3VudGVkIiwib25CZWZvcmVVbm1vdW50IiwiVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IiLCJCYXNlVHJhbnNpdGlvbkltcGwiLCJnZXRDdXJyZW50SW5zdGFuY2UiLCJwcmV2VHJhbnNpdGlvbktleSIsImNoaWxkcmVuIiwiZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuIiwiY2hpbGQiLCJyYXdQcm9wcyIsIm1vZGUiLCJlbXB0eVBsYWNlaG9sZGVyIiwiaW5uZXJDaGlsZCIsImdldEtlZXBBbGl2ZUNoaWxkIiwiZW50ZXJIb29rcyIsInJlc29sdmVUcmFuc2l0aW9uSG9va3MiLCJzZXRUcmFuc2l0aW9uSG9va3MiLCJvbGRDaGlsZCIsIm9sZElubmVyQ2hpbGQiLCJ0cmFuc2l0aW9uS2V5Q2hhbmdlZCIsImdldFRyYW5zaXRpb25LZXkiLCJpc1NhbWVWTm9kZVR5cGUiLCJsZWF2aW5nSG9va3MiLCJlYXJseVJlbW92ZSIsImRlbGF5ZWRMZWF2ZSIsImxlYXZpbmdWTm9kZXNDYWNoZSIsImdldExlYXZpbmdOb2Rlc0ZvclR5cGUiLCJCYXNlVHJhbnNpdGlvbiIsImxlYXZpbmdWTm9kZXMiLCJhcHBlYXIiLCJwZXJzaXN0ZWQiLCJvbkJlZm9yZUVudGVyIiwib25FbnRlciIsIm9uQWZ0ZXJFbnRlciIsIm9uRW50ZXJDYW5jZWxsZWQiLCJvbkJlZm9yZUxlYXZlIiwib25MZWF2ZSIsIm9uQWZ0ZXJMZWF2ZSIsIm9uTGVhdmVDYW5jZWxsZWQiLCJvbkJlZm9yZUFwcGVhciIsIm9uQXBwZWFyIiwib25BZnRlckFwcGVhciIsIm9uQXBwZWFyQ2FuY2VsbGVkIiwiY2FsbEhvb2siLCJob29rIiwiY2FsbEFzeW5jSG9vayIsImhvb2tzIiwibGVhdmluZ1ZOb2RlIiwiYWZ0ZXJIb29rIiwiY2FuY2VsSG9vayIsImNhbGxlZCIsImNhbmNlbGxlZCIsImlzS2VlcEFsaXZlIiwia2VlcENvbW1lbnQiLCJwYXJlbnRLZXkiLCJrZXllZEZyYWdtZW50Q291bnQiLCJGcmFnbWVudCIsImRlZmluZUNvbXBvbmVudCIsImlzQXN5bmNXcmFwcGVyIiwib25BY3RpdmF0ZWQiLCJyZWdpc3RlcktlZXBBbGl2ZUhvb2siLCJvbkRlYWN0aXZhdGVkIiwid3JhcHBlZEhvb2siLCJjdXJyZW50IiwiaW5qZWN0SG9vayIsImluamVjdFRvS2VlcEFsaXZlUm9vdCIsImtlZXBBbGl2ZVJvb3QiLCJpbmplY3RlZCIsIm9uVW5tb3VudGVkIiwicHJlcGVuZCIsImNyZWF0ZUhvb2siLCJsaWZlY3ljbGUiLCJvbkJlZm9yZU1vdW50Iiwib25CZWZvcmVVcGRhdGUiLCJvblVwZGF0ZWQiLCJvblNlcnZlclByZWZldGNoIiwib25SZW5kZXJUcmlnZ2VyZWQiLCJvblJlbmRlclRyYWNrZWQiLCJvbkVycm9yQ2FwdHVyZWQiLCJ3aXRoRGlyZWN0aXZlcyIsImRpcmVjdGl2ZXMiLCJpbnRlcm5hbEluc3RhbmNlIiwiZ2V0RXhwb3NlUHJveHkiLCJiaW5kaW5ncyIsImRpciIsIm1vZGlmaWVycyIsImludm9rZURpcmVjdGl2ZUhvb2siLCJvbGRCaW5kaW5ncyIsImJpbmRpbmciLCJDT01QT05FTlRTIiwicmVzb2x2ZUNvbXBvbmVudCIsIm1heWJlU2VsZlJlZmVyZW5jZSIsInJlc29sdmVBc3NldCIsIk5VTExfRFlOQU1JQ19DT01QT05FTlQiLCJ3YXJuTWlzc2luZyIsInNlbGZOYW1lIiwiZ2V0Q29tcG9uZW50TmFtZSIsInJlc29sdmUiLCJyZWdpc3RyeSIsInJlbmRlckxpc3QiLCJyZW5kZXJJdGVtIiwiaW5kZXgiLCJnZXRQdWJsaWNJbnN0YW5jZSIsImlzU3RhdGVmdWxDb21wb25lbnQiLCJwdWJsaWNQcm9wZXJ0aWVzTWFwIiwicmVzb2x2ZU1lcmdlZE9wdGlvbnMiLCJoYXNTZXR1cEJpbmRpbmciLCJQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMiLCJhY2Nlc3NDYWNoZSIsIm5vcm1hbGl6ZWRQcm9wcyIsInNob3VsZENhY2hlQWNjZXNzIiwicHVibGljR2V0dGVyIiwiY3NzTW9kdWxlIiwiZ2xvYmFsUHJvcGVydGllcyIsImRlc2NyaXB0b3IiLCJhcHBseU9wdGlvbnMiLCJkYXRhT3B0aW9ucyIsImNvbXB1dGVkT3B0aW9ucyIsIm1ldGhvZHMiLCJ3YXRjaE9wdGlvbnMiLCJwcm92aWRlT3B0aW9ucyIsImluamVjdE9wdGlvbnMiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImFjdGl2YXRlZCIsImRlYWN0aXZhdGVkIiwiYmVmb3JlRGVzdHJveSIsImJlZm9yZVVubW91bnQiLCJkZXN0cm95ZWQiLCJ1bm1vdW50ZWQiLCJyZW5kZXJUcmFja2VkIiwicmVuZGVyVHJpZ2dlcmVkIiwiZXJyb3JDYXB0dXJlZCIsInNlcnZlclByZWZldGNoIiwiZXhwb3NlIiwiY29tcG9uZW50cyIsImZpbHRlcnMiLCJyZXNvbHZlSW5qZWN0aW9ucyIsIm1ldGhvZEhhbmRsZXIiLCJvcHQiLCJjcmVhdGVXYXRjaGVyIiwicmVnaXN0ZXJMaWZlY3ljbGVIb29rIiwicmVnaXN0ZXIiLCJfaG9vayIsImV4cG9zZWQiLCJjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMiLCJ1bndyYXBSZWYiLCJub3JtYWxpemVJbmplY3QiLCJoIiwiYmFzZSIsIm1peGlucyIsImV4dGVuZHNPcHRpb25zIiwiZ2xvYmFsTWl4aW5zIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwicmVzb2x2ZWQiLCJtIiwibWVyZ2VPcHRpb25zIiwidG8iLCJmcm9tIiwic3RyYXRzIiwic3RyYXQiLCJpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzIiwibWVyZ2VEYXRhRm4iLCJtZXJnZU9iamVjdE9wdGlvbnMiLCJtZXJnZUFzQXJyYXkiLCJtZXJnZVdhdGNoT3B0aW9ucyIsIm1lcmdlSW5qZWN0IiwibWVyZ2VkIiwiaW5pdFByb3BzIiwiaXNTdGF0ZWZ1bCIsIkludGVybmFsT2JqZWN0S2V5Iiwic2V0RnVsbFByb3BzIiwidXBkYXRlUHJvcHMiLCJyYXdQcmV2UHJvcHMiLCJyYXdDdXJyZW50UHJvcHMiLCJoYXNBdHRyc0NoYW5nZWQiLCJwcm9wc1RvVXBkYXRlIiwiY2FtZWxpemVkS2V5IiwicmVzb2x2ZVByb3BWYWx1ZSIsImtlYmFiS2V5IiwibmVlZENhc3RLZXlzIiwicmF3Q2FzdFZhbHVlcyIsImNhbWVsS2V5IiwiY2FzdFZhbHVlcyIsImlzQWJzZW50IiwiaGFzRGVmYXVsdCIsInByb3BzRGVmYXVsdHMiLCJub3JtYWxpemVQcm9wc09wdGlvbnMiLCJleHRlbmRQcm9wcyIsIm5vcm1hbGl6ZWRLZXkiLCJ2YWxpZGF0ZVByb3BOYW1lIiwicHJvcCIsImJvb2xlYW5JbmRleCIsImdldFR5cGVJbmRleCIsInN0cmluZ0luZGV4IiwiZ2V0VHlwZSIsImN0b3IiLCJtYXRjaCIsImlzU2FtZVR5cGUiLCJleHBlY3RlZFR5cGVzIiwidCIsImlzSW50ZXJuYWxLZXkiLCJub3JtYWxpemVTbG90VmFsdWUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsIm5vcm1hbGl6ZU9iamVjdFNsb3RzIiwicmF3U2xvdHMiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiaW5pdFNsb3RzIiwidXBkYXRlU2xvdHMiLCJuZWVkRGVsZXRpb25DaGVjayIsImRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCIsImNyZWF0ZUFwcENvbnRleHQiLCJ1aWQkMSIsImNyZWF0ZUFwcEFQSSIsImh5ZHJhdGUiLCJyb290Q29tcG9uZW50Iiwicm9vdFByb3BzIiwiY29udGV4dCIsImluc3RhbGxlZFBsdWdpbnMiLCJpc01vdW50ZWQiLCJhcHAiLCJ2ZXJzaW9uIiwicGx1Z2luIiwibWl4aW4iLCJkaXJlY3RpdmUiLCJyb290Q29udGFpbmVyIiwiaXNIeWRyYXRlIiwiaXNTVkciLCJzZXRSZWYiLCJyYXdSZWYiLCJvbGRSYXdSZWYiLCJwYXJlbnRTdXNwZW5zZSIsImlzVW5tb3VudCIsInJlZlZhbHVlIiwib3duZXIiLCJvbGRSZWYiLCJyZWZzIiwiX2lzU3RyaW5nIiwiX2lzUmVmIiwiZG9TZXQiLCJleGlzdGluZyIsImNyZWF0ZVJlbmRlcmVyIiwiYmFzZUNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlSHlkcmF0aW9uRm5zIiwiaG9zdEluc2VydCIsImhvc3RSZW1vdmUiLCJob3N0UGF0Y2hQcm9wIiwiaG9zdENyZWF0ZUVsZW1lbnQiLCJob3N0Q3JlYXRlVGV4dCIsImhvc3RDcmVhdGVDb21tZW50IiwiaG9zdFNldFRleHQiLCJob3N0U2V0RWxlbWVudFRleHQiLCJob3N0UGFyZW50Tm9kZSIsImhvc3ROZXh0U2libGluZyIsImhvc3RTZXRTY29wZUlkIiwiaG9zdEluc2VydFN0YXRpY0NvbnRlbnQiLCJwYXRjaCIsIm4xIiwibjIiLCJjb250YWluZXIiLCJhbmNob3IiLCJwYXJlbnRDb21wb25lbnQiLCJzbG90U2NvcGVJZHMiLCJnZXROZXh0SG9zdE5vZGUiLCJ1bm1vdW50IiwiVGV4dCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwiU3RhdGljIiwibW91bnRTdGF0aWNOb2RlIiwicHJvY2Vzc0ZyYWdtZW50IiwicHJvY2Vzc0VsZW1lbnQiLCJwcm9jZXNzQ29tcG9uZW50IiwiaW50ZXJuYWxzIiwibW92ZVN0YXRpY05vZGUiLCJuZXh0U2libGluZyIsIm5leHQiLCJyZW1vdmVTdGF0aWNOb2RlIiwibW91bnRFbGVtZW50IiwicGF0Y2hFbGVtZW50Iiwidm5vZGVIb29rIiwidHJhbnNpdGlvbiIsImRpcnMiLCJtb3VudENoaWxkcmVuIiwic2V0U2NvcGVJZCIsInVubW91bnRDaGlsZHJlbiIsImludm9rZVZOb2RlSG9vayIsIm5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIiwic2NvcGVJZCIsInN1YlRyZWUiLCJwYXJlbnRWTm9kZSIsImNsb25lSWZNb3VudGVkIiwiZHluYW1pY0NoaWxkcmVuIiwib2xkUHJvcHMiLCJuZXdQcm9wcyIsInRvZ2dsZVJlY3Vyc2UiLCJhcmVDaGlsZHJlblNWRyIsInBhdGNoQmxvY2tDaGlsZHJlbiIsInBhdGNoQ2hpbGRyZW4iLCJwYXRjaFByb3BzIiwib2xkQ2hpbGRyZW4iLCJuZXdDaGlsZHJlbiIsImZhbGxiYWNrQ29udGFpbmVyIiwib2xkVk5vZGUiLCJuZXdWTm9kZSIsImZyYWdtZW50U3RhcnRBbmNob3IiLCJmcmFnbWVudEVuZEFuY2hvciIsImZyYWdtZW50U2xvdFNjb3BlSWRzIiwidHJhdmVyc2VTdGF0aWNDaGlsZHJlbiIsIm1vdW50Q29tcG9uZW50IiwidXBkYXRlQ29tcG9uZW50IiwiaW5pdGlhbFZOb2RlIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UiLCJzZXR1cENvbXBvbmVudCIsInNldHVwUmVuZGVyRWZmZWN0IiwicGxhY2Vob2xkZXIiLCJ1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIiLCJjb21wb25lbnRVcGRhdGVGbiIsImJ1IiwidSIsIm9yaWdpbk5leHQiLCJuZXh0VHJlZSIsInByZXZUcmVlIiwiYm0iLCJpc0FzeW5jV3JhcHBlclZOb2RlIiwiaHlkcmF0ZU5vZGUiLCJoeWRyYXRlU3ViVHJlZSIsInNjb3BlZEluaXRpYWxWTm9kZSIsInVwZGF0ZSIsImMxIiwicHJldlNoYXBlRmxhZyIsImMyIiwicGF0Y2hLZXllZENoaWxkcmVuIiwicGF0Y2hVbmtleWVkQ2hpbGRyZW4iLCJvbGRMZW5ndGgiLCJjb21tb25MZW5ndGgiLCJuZXh0Q2hpbGQiLCJwYXJlbnRBbmNob3IiLCJsMiIsImUxIiwiZTIiLCJuZXh0UG9zIiwiczEiLCJzMiIsImtleVRvTmV3SW5kZXhNYXAiLCJqIiwicGF0Y2hlZCIsInRvQmVQYXRjaGVkIiwibW92ZWQiLCJtYXhOZXdJbmRleFNvRmFyIiwibmV3SW5kZXhUb09sZEluZGV4TWFwIiwicHJldkNoaWxkIiwibmV3SW5kZXgiLCJpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZSIsImdldFNlcXVlbmNlIiwibmV4dEluZGV4IiwibW92ZSIsIm1vdmVUeXBlIiwibGVhdmUiLCJkZWxheUxlYXZlIiwiYWZ0ZXJMZWF2ZSIsInBlcmZvcm1MZWF2ZSIsImRvUmVtb3ZlIiwic2hvdWxkSW52b2tlRGlycyIsInNob3VsZEludm9rZVZub2RlSG9vayIsInVubW91bnRDb21wb25lbnQiLCJyZW1vdmVGcmFnbWVudCIsInBlcmZvcm1SZW1vdmUiLCJidW0iLCJ1bSIsImFsbG93ZWQiLCJjaDEiLCJjaDIiLCJsZW4iLCJhcnJJIiwiaXNUZWxlcG9ydCIsImN1cnJlbnRCbG9jayIsIm9wZW5CbG9jayIsImRpc2FibGVUcmFja2luZyIsImNsb3NlQmxvY2siLCJpc0Jsb2NrVHJlZUVuYWJsZWQiLCJzZXR1cEJsb2NrIiwiY3JlYXRlRWxlbWVudEJsb2NrIiwiY3JlYXRlQmFzZVZOb2RlIiwiY3JlYXRlQmxvY2siLCJpc1ZOb2RlIiwibm9ybWFsaXplS2V5Iiwibm9ybWFsaXplUmVmIiwicmVmX2tleSIsInJlZl9mb3IiLCJpc0Jsb2NrTm9kZSIsIm5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uIiwibm9ybWFsaXplQ2hpbGRyZW4iLCJfY3JlYXRlVk5vZGUiLCJjbG9uZWQiLCJpc0NsYXNzQ29tcG9uZW50IiwiZ3VhcmRSZWFjdGl2ZVByb3BzIiwia2xhc3MiLCJzdHlsZSIsImV4dHJhUHJvcHMiLCJtZXJnZVJlZiIsIm1lcmdlZFByb3BzIiwibWVyZ2VQcm9wcyIsImNyZWF0ZVRleHRWTm9kZSIsInRleHQiLCJmbGFnIiwiY3JlYXRlU3RhdGljVk5vZGUiLCJjb250ZW50IiwibnVtYmVyT2ZOb2RlcyIsImNyZWF0ZUNvbW1lbnRWTm9kZSIsImFzQmxvY2siLCJzbG90Iiwic2xvdEZsYWciLCJ0b01lcmdlIiwiaW5jb21pbmciLCJlbXB0eUFwcENvbnRleHQiLCJ1aWQiLCJzZXR1cFJlc3VsdCIsInNldHVwU3RhdGVmdWxDb21wb25lbnQiLCJzZXR1cCIsInNldHVwQ29udGV4dCIsImNyZWF0ZVNldHVwQ29udGV4dCIsInJlc29sdmVkUmVzdWx0IiwiaGFuZGxlU2V0dXBSZXN1bHQiLCJlIiwiZmluaXNoQ29tcG9uZW50U2V0dXAiLCJjb21waWxlIiwic2tpcE9wdGlvbnMiLCJ0ZW1wbGF0ZSIsImlzQ3VzdG9tRWxlbWVudCIsImNvbXBpbGVyT3B0aW9ucyIsImRlbGltaXRlcnMiLCJjb21wb25lbnRDb21waWxlck9wdGlvbnMiLCJmaW5hbENvbXBpbGVyT3B0aW9ucyIsImNyZWF0ZUF0dHJzUHJveHkiLCJpbmNsdWRlSW5mZXJyZWQiLCJjb21wdXRlZCQxIiwicHJvcHNPckNoaWxkcmVuIiwic3NyQ29udGV4dEtleSIsInN2Z05TIiwiZG9jIiwidGVtcGxhdGVDb250YWluZXIiLCJub2RlT3BzIiwidGFnIiwiaXMiLCJub2RlIiwic2VsZWN0b3IiLCJiZWZvcmUiLCJ3cmFwcGVyIiwicGF0Y2hDbGFzcyIsInRyYW5zaXRpb25DbGFzc2VzIiwicGF0Y2hTdHlsZSIsImlzQ3NzU3RyaW5nIiwic2V0U3R5bGUiLCJjdXJyZW50RGlzcGxheSIsImltcG9ydGFudFJFIiwicHJlZml4ZWQiLCJhdXRvUHJlZml4IiwicHJlZml4ZXMiLCJwcmVmaXhDYWNoZSIsInJhd05hbWUiLCJ4bGlua05TIiwicGF0Y2hBdHRyIiwiaXNCb29sZWFuIiwicGF0Y2hET01Qcm9wIiwibmVlZFJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGF0Y2hFdmVudCIsInByZXZWYWx1ZSIsIm5leHRWYWx1ZSIsImludm9rZXJzIiwiZXhpc3RpbmdJbnZva2VyIiwicGFyc2VOYW1lIiwiaW52b2tlciIsImNyZWF0ZUludm9rZXIiLCJvcHRpb25zTW9kaWZpZXJSRSIsImNhY2hlZE5vdyIsImdldE5vdyIsImluaXRpYWxWYWx1ZSIsInBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwib3JpZ2luYWxTdG9wIiwibmF0aXZlT25SRSIsInBhdGNoUHJvcCIsInNob3VsZFNldEFzUHJvcCIsIkRPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMiLCJnZXRNb2RlbEFzc2lnbmVyIiwib25Db21wb3NpdGlvblN0YXJ0Iiwib25Db21wb3NpdGlvbkVuZCIsInZNb2RlbFRleHQiLCJsYXp5IiwiY2FzdFRvTnVtYmVyIiwiZG9tVmFsdWUiLCJ2TW9kZWxDaGVja2JveCIsIm1vZGVsVmFsdWUiLCJlbGVtZW50VmFsdWUiLCJnZXRWYWx1ZSIsImNoZWNrZWQiLCJhc3NpZ24iLCJmb3VuZCIsImZpbHRlcmVkIiwiZ2V0Q2hlY2tib3hWYWx1ZSIsInNldENoZWNrZWQiLCJ2TW9kZWxTZWxlY3QiLCJpc1NldE1vZGVsIiwic2VsZWN0ZWRWYWwiLCJvIiwic2V0U2VsZWN0ZWQiLCJfYmluZGluZyIsImlzTXVsdGlwbGUiLCJvcHRpb24iLCJvcHRpb25WYWx1ZSIsImtleU5hbWVzIiwid2l0aEtleXMiLCJldmVudEtleSIsImsiLCJyZW5kZXJlck9wdGlvbnMiLCJyZW5kZXJlciIsImVuc3VyZVJlbmRlcmVyIiwiY3JlYXRlQXBwIiwibW91bnQiLCJjb250YWluZXJPclNlbGVjdG9yIiwibm9ybWFsaXplQ29udGFpbmVyIiwiVXNlciIsIm1lc3NhZ2VzIiwiZG9tYWluX29yaWdpbiIsImVtYWlsIiwicmVzcG9uc2UiLCJhcGlfcmVzdWx0IiwiZXJyb3IiLCJwYXlsb2FkIiwicmVxdWVzdE9wdGlvbnMiLCJ1cmwiLCJhcGlfb2JqZWN0IiwiaW5wdXQiLCJtZmFfand0IiwicG9zdCIsInVzZXIiLCJzZWNyZXRfYW5kX2ltYWdlIiwic2VjcmV0IiwiaW1hZ2UiLCJhcGlPYmplY3QiLCJhcGlfcGFja2FnZSIsIlVzZXJzIiwicm9sZXMiLCJjcmVhdGVfcGFja2FnZSIsInJvbGUiLCJyZXF1ZXN0X29wdGlvbnMiLCJjcmVhdGVkX3JlY29yZCIsInVzZXJfaWQiLCJkZWxldGVfcGFja2FnZSIsInVzZXJfaW5kZXgiLCJ0b2tlbl9sZW5ndGgiLCJ0b2tlbl9jaGFycyIsInRva2VuIiwidG9rZW5faW5kZXgiLCJjaGFyYWN0ZXJfaW5kZXgiLCJzZWxlY3RlZF91c2VyIiwidmFsaWQiLCJyZWdleCIsImZ1bGxuYW1lX3ZhbGlkIiwiZmlyc3RuYW1lX3ZhbGlkIiwicGFzc3dvcmQiLCJzdHJvbmdfZW5vdWdoIiwiY2hhcmFjdGVyX2RpY3Rpb25hcnkiLCJjaGFyYWN0ZXIiLCJsZXR0ZXJzIiwiaGFzX3VwcGVyX2Nhc2UiLCJoYXNfbG93ZXJfY2FzZSIsImhhc19pbnRlZ2VyIiwiTWVzc2FnZXMiLCJtZXNzYWdlIiwibWVzc2FnZV9kaWN0IiwiX3NmY19tYWluIiwiX2hvaXN0ZWRfMSIsIl9ob2lzdGVkXzIiLCJfb3BlbkJsb2NrIiwiX2NyZWF0ZUVsZW1lbnRCbG9jayIsIl9jcmVhdGVFbGVtZW50Vk5vZGUiLCJfRnJhZ21lbnQiLCJfbm9ybWFsaXplQ2xhc3MiLCJfdG9EaXNwbGF5U3RyaW5nIiwiJGV2ZW50IiwiX2hvaXN0ZWRfMyIsIl9pbXBvcnRzXzAiLCJfaG9pc3RlZF81IiwiX2hvaXN0ZWRfNiIsIl9ob2lzdGVkXzciLCJfaG9pc3RlZF84IiwiX2hvaXN0ZWRfOSIsIl9ob2lzdGVkXzEzIiwiX2NvbXBvbmVudF9yb3V0ZXJfbGluayIsIl9ob2lzdGVkXzQiLCJfY29tcG9uZW50X1JvdXRlckxpbmsiLCIkcHJvcHMiLCJfaG9pc3RlZF8xMCIsIl9ob2lzdGVkXzExIiwiX2hvaXN0ZWRfMTIiLCJfY2FjaGUiLCJSb2xlcyIsImZpbHRlcl9wYWNrYWdlIiwicmVzcG9uc2VfcGFja2FnZSIsInJvbGVfaW5kZXgiLCJ1c2VycyIsIk1lc3NhZ2VEaXNwbGF5IiwiTmF2YmFyIiwiX2NyZWF0ZUJsb2NrIiwiX2NvbXBvbmVudF9OYXZiYXIiLCIkZGF0YSIsIl9jb21wb25lbnRfUm91dGVyVmlldyIsIl9jb21wb25lbnRfTWVzc2FnZURpc3BsYXkiLCJpc0Jyb3dzZXIiLCJpc0VTTW9kdWxlIiwiYXBwbHlUb1BhcmFtcyIsInBhcmFtcyIsIm5ld1BhcmFtcyIsIm5vb3AiLCJUUkFJTElOR19TTEFTSF9SRSIsInJlbW92ZVRyYWlsaW5nU2xhc2giLCJwYXJzZVVSTCIsInBhcnNlUXVlcnkiLCJsb2NhdGlvbiIsImN1cnJlbnRMb2NhdGlvbiIsInF1ZXJ5Iiwic2VhcmNoU3RyaW5nIiwiaGFzaCIsImhhc2hQb3MiLCJzZWFyY2hQb3MiLCJyZXNvbHZlUmVsYXRpdmVQYXRoIiwic3RyaW5naWZ5VVJMIiwic3RyaW5naWZ5UXVlcnkiLCJzdHJpcEJhc2UiLCJwYXRobmFtZSIsImlzU2FtZVJvdXRlTG9jYXRpb24iLCJhTGFzdEluZGV4IiwiYkxhc3RJbmRleCIsImlzU2FtZVJvdXRlUmVjb3JkIiwiaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyIsImlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZSIsImlzRXF1aXZhbGVudEFycmF5IiwiZnJvbVNlZ21lbnRzIiwidG9TZWdtZW50cyIsInBvc2l0aW9uIiwidG9Qb3NpdGlvbiIsInNlZ21lbnQiLCJOYXZpZ2F0aW9uVHlwZSIsIk5hdmlnYXRpb25EaXJlY3Rpb24iLCJub3JtYWxpemVCYXNlIiwiYmFzZUVsIiwiQkVGT1JFX0hBU0hfUkUiLCJjcmVhdGVIcmVmIiwiZ2V0RWxlbWVudFBvc2l0aW9uIiwib2Zmc2V0IiwiZG9jUmVjdCIsImVsUmVjdCIsImNvbXB1dGVTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvUG9zaXRpb24iLCJzY3JvbGxUb09wdGlvbnMiLCJwb3NpdGlvbkVsIiwiaXNJZFNlbGVjdG9yIiwiZ2V0U2Nyb2xsS2V5IiwiZGVsdGEiLCJzY3JvbGxQb3NpdGlvbnMiLCJzYXZlU2Nyb2xsUG9zaXRpb24iLCJzY3JvbGxQb3NpdGlvbiIsImdldFNhdmVkU2Nyb2xsUG9zaXRpb24iLCJzY3JvbGwiLCJjcmVhdGVCYXNlTG9jYXRpb24iLCJjcmVhdGVDdXJyZW50TG9jYXRpb24iLCJzZWFyY2giLCJzbGljZVBvcyIsInBhdGhGcm9tSGFzaCIsInVzZUhpc3RvcnlMaXN0ZW5lcnMiLCJoaXN0b3J5U3RhdGUiLCJyZXBsYWNlIiwibGlzdGVuZXJzIiwidGVhcmRvd25zIiwicGF1c2VTdGF0ZSIsInBvcFN0YXRlSGFuZGxlciIsImZyb21TdGF0ZSIsImxpc3RlbmVyIiwicGF1c2VMaXN0ZW5lcnMiLCJsaXN0ZW4iLCJ0ZWFyZG93biIsImJlZm9yZVVubG9hZExpc3RlbmVyIiwiaGlzdG9yeSIsImRlc3Ryb3kiLCJidWlsZFN0YXRlIiwiYmFjayIsImZvcndhcmQiLCJyZXBsYWNlZCIsImNvbXB1dGVTY3JvbGwiLCJ1c2VIaXN0b3J5U3RhdGVOYXZpZ2F0aW9uIiwiY2hhbmdlTG9jYXRpb24iLCJoYXNoSW5kZXgiLCJwdXNoIiwiY3VycmVudFN0YXRlIiwiY3JlYXRlV2ViSGlzdG9yeSIsImhpc3RvcnlOYXZpZ2F0aW9uIiwiaGlzdG9yeUxpc3RlbmVycyIsImdvIiwidHJpZ2dlckxpc3RlbmVycyIsInJvdXRlckhpc3RvcnkiLCJpc1JvdXRlTG9jYXRpb24iLCJyb3V0ZSIsImlzUm91dGVOYW1lIiwiU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCIsIk5hdmlnYXRpb25GYWlsdXJlU3ltYm9sIiwiTmF2aWdhdGlvbkZhaWx1cmVUeXBlIiwiY3JlYXRlUm91dGVyRXJyb3IiLCJpc05hdmlnYXRpb25GYWlsdXJlIiwiQkFTRV9QQVJBTV9QQVRURVJOIiwiQkFTRV9QQVRIX1BBUlNFUl9PUFRJT05TIiwiUkVHRVhfQ0hBUlNfUkUiLCJ0b2tlbnNUb1BhcnNlciIsImV4dHJhT3B0aW9ucyIsInNjb3JlIiwicGF0dGVybiIsInNlZ21lbnRTY29yZXMiLCJ0b2tlbkluZGV4Iiwic3ViU2VnbWVudFNjb3JlIiwicmVwZWF0YWJsZSIsIm9wdGlvbmFsIiwicmVnZXhwIiwicmUiLCJzdWJQYXR0ZXJuIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJhdm9pZER1cGxpY2F0ZWRTbGFzaCIsInBhcmFtIiwiY29tcGFyZVNjb3JlQXJyYXkiLCJjb21wYXJlUGF0aFBhcnNlclNjb3JlIiwiYVNjb3JlIiwiYlNjb3JlIiwiaXNMYXN0U2NvcmVOZWdhdGl2ZSIsIlJPT1RfVE9LRU4iLCJWQUxJRF9QQVJBTV9SRSIsInRva2VuaXplUGF0aCIsImNyYXNoIiwiYnVmZmVyIiwicHJldmlvdXNTdGF0ZSIsInRva2VucyIsImZpbmFsaXplU2VnbWVudCIsImNoYXIiLCJjdXN0b21SZSIsImNvbnN1bWVCdWZmZXIiLCJhZGRDaGFyVG9CdWZmZXIiLCJjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIiLCJyZWNvcmQiLCJwYXJzZXIiLCJtYXRjaGVyIiwiY3JlYXRlUm91dGVyTWF0Y2hlciIsInJvdXRlcyIsImdsb2JhbE9wdGlvbnMiLCJtYXRjaGVycyIsIm1hdGNoZXJNYXAiLCJnZXRSZWNvcmRNYXRjaGVyIiwiYWRkUm91dGUiLCJvcmlnaW5hbFJlY29yZCIsImlzUm9vdEFkZCIsIm1haW5Ob3JtYWxpemVkUmVjb3JkIiwibm9ybWFsaXplUm91dGVSZWNvcmQiLCJub3JtYWxpemVkUmVjb3JkcyIsImFsaWFzZXMiLCJhbGlhcyIsIm9yaWdpbmFsTWF0Y2hlciIsIm5vcm1hbGl6ZWRSZWNvcmQiLCJwYXJlbnRQYXRoIiwiY29ubmVjdGluZ1NsYXNoIiwiaXNBbGlhc1JlY29yZCIsInJlbW92ZVJvdXRlIiwiaW5zZXJ0TWF0Y2hlciIsIm1hdGNoZXJSZWYiLCJnZXRSb3V0ZXMiLCJpc1JlY29yZENoaWxkT2YiLCJwYXJhbXNGcm9tTG9jYXRpb24iLCJtYXRjaGVkIiwicGFyZW50TWF0Y2hlciIsIm1lcmdlTWV0YUZpZWxkcyIsIm5vcm1hbGl6ZVJlY29yZFByb3BzIiwicHJvcHNPYmplY3QiLCJtZXRhIiwiZGVmYXVsdHMiLCJwYXJ0aWFsT3B0aW9ucyIsIkhBU0hfUkUiLCJBTVBFUlNBTkRfUkUiLCJTTEFTSF9SRSIsIkVRVUFMX1JFIiwiSU1fUkUiLCJQTFVTX1JFIiwiRU5DX0JSQUNLRVRfT1BFTl9SRSIsIkVOQ19CUkFDS0VUX0NMT1NFX1JFIiwiRU5DX0NBUkVUX1JFIiwiRU5DX0JBQ0tUSUNLX1JFIiwiRU5DX0NVUkxZX09QRU5fUkUiLCJFTkNfUElQRV9SRSIsIkVOQ19DVVJMWV9DTE9TRV9SRSIsIkVOQ19TUEFDRV9SRSIsImNvbW1vbkVuY29kZSIsImVuY29kZUhhc2giLCJlbmNvZGVRdWVyeVZhbHVlIiwiZW5jb2RlUXVlcnlLZXkiLCJlbmNvZGVQYXRoIiwiZW5jb2RlUGFyYW0iLCJkZWNvZGUiLCJzZWFyY2hQYXJhbXMiLCJzZWFyY2hQYXJhbSIsImVxUG9zIiwiY3VycmVudFZhbHVlIiwibm9ybWFsaXplUXVlcnkiLCJub3JtYWxpemVkUXVlcnkiLCJtYXRjaGVkUm91dGVLZXkiLCJ2aWV3RGVwdGhLZXkiLCJyb3V0ZXJLZXkiLCJyb3V0ZUxvY2F0aW9uS2V5Iiwicm91dGVyVmlld0xvY2F0aW9uS2V5IiwidXNlQ2FsbGJhY2tzIiwiaGFuZGxlcnMiLCJyZXNldCIsImd1YXJkVG9Qcm9taXNlRm4iLCJndWFyZCIsImVudGVyQ2FsbGJhY2tBcnJheSIsInJlamVjdCIsImd1YXJkUmV0dXJuIiwiZ3VhcmRDYWxsIiwiZXh0cmFjdENvbXBvbmVudHNHdWFyZHMiLCJndWFyZFR5cGUiLCJndWFyZHMiLCJyYXdDb21wb25lbnQiLCJpc1JvdXRlQ29tcG9uZW50IiwiY29tcG9uZW50UHJvbWlzZSIsInJlc29sdmVkQ29tcG9uZW50IiwidXNlTGluayIsInJvdXRlciIsImN1cnJlbnRSb3V0ZSIsImFjdGl2ZVJlY29yZEluZGV4IiwibGVuZ3RoIiwicm91dGVNYXRjaGVkIiwiY3VycmVudE1hdGNoZWQiLCJwYXJlbnRSZWNvcmRQYXRoIiwiZ2V0T3JpZ2luYWxQYXRoIiwiaXNBY3RpdmUiLCJpbmNsdWRlc1BhcmFtcyIsImlzRXhhY3RBY3RpdmUiLCJuYXZpZ2F0ZSIsImd1YXJkRXZlbnQiLCJSb3V0ZXJMaW5rSW1wbCIsImxpbmsiLCJlbENsYXNzIiwiZ2V0TGlua0NsYXNzIiwiUm91dGVyTGluayIsIm91dGVyIiwiaW5uZXIiLCJpbm5lclZhbHVlIiwib3V0ZXJWYWx1ZSIsInByb3BDbGFzcyIsImdsb2JhbENsYXNzIiwiZGVmYXVsdENsYXNzIiwiUm91dGVyVmlld0ltcGwiLCJpbmplY3RlZFJvdXRlIiwicm91dGVUb0Rpc3BsYXkiLCJpbmplY3RlZERlcHRoIiwiZGVwdGgiLCJpbml0aWFsRGVwdGgiLCJtYXRjaGVkUm91dGUiLCJtYXRjaGVkUm91dGVSZWYiLCJ2aWV3UmVmIiwib2xkSW5zdGFuY2UiLCJvbGROYW1lIiwiY3VycmVudE5hbWUiLCJWaWV3Q29tcG9uZW50Iiwicm91dGVQcm9wc09wdGlvbiIsInJvdXRlUHJvcHMiLCJzbG90Q29udGVudCIsIlJvdXRlclZpZXciLCJjcmVhdGVSb3V0ZXIiLCJwYXJzZVF1ZXJ5JDEiLCJzdHJpbmdpZnlRdWVyeSQxIiwiYmVmb3JlR3VhcmRzIiwiYmVmb3JlUmVzb2x2ZUd1YXJkcyIsImFmdGVyR3VhcmRzIiwicGVuZGluZ0xvY2F0aW9uIiwibm9ybWFsaXplUGFyYW1zIiwicGFyYW1WYWx1ZSIsImVuY29kZVBhcmFtcyIsImRlY29kZVBhcmFtcyIsInBhcmVudE9yUm91dGUiLCJyZWNvcmRNYXRjaGVyIiwicm91dGVNYXRjaGVyIiwiaGFzUm91dGUiLCJyYXdMb2NhdGlvbiIsImxvY2F0aW9uTm9ybWFsaXplZCIsImhyZWYiLCJtYXRjaGVyTG9jYXRpb24iLCJ0YXJnZXRQYXJhbXMiLCJmdWxsUGF0aCIsImxvY2F0aW9uQXNPYmplY3QiLCJjaGVja0NhbmNlbGVkTmF2aWdhdGlvbiIsInB1c2hXaXRoUmVkaXJlY3QiLCJoYW5kbGVSZWRpcmVjdFJlY29yZCIsImxhc3RNYXRjaGVkIiwicmVkaXJlY3QiLCJuZXdUYXJnZXRMb2NhdGlvbiIsInJlZGlyZWN0ZWRGcm9tIiwidGFyZ2V0TG9jYXRpb24iLCJmb3JjZSIsInNob3VsZFJlZGlyZWN0IiwidG9Mb2NhdGlvbiIsImZhaWx1cmUiLCJoYW5kbGVTY3JvbGwiLCJtYXJrQXNSZWFkeSIsInRyaWdnZXJFcnJvciIsImZpbmFsaXplTmF2aWdhdGlvbiIsInRyaWdnZXJBZnRlckVhY2giLCJjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdCIsImxlYXZpbmdSZWNvcmRzIiwidXBkYXRpbmdSZWNvcmRzIiwiZW50ZXJpbmdSZWNvcmRzIiwiZXh0cmFjdENoYW5naW5nUmVjb3JkcyIsImNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrIiwicnVuR3VhcmRRdWV1ZSIsImJlZm9yZUVudGVyIiwiaXNQdXNoIiwiaXNGaXJzdE5hdmlnYXRpb24iLCJyZW1vdmVIaXN0b3J5TGlzdGVuZXIiLCJzZXR1cExpc3RlbmVycyIsIl9mcm9tIiwiaW5mbyIsInJlYWR5SGFuZGxlcnMiLCJlcnJvckhhbmRsZXJzIiwicmVhZHkiLCJpc1JlYWR5Iiwic2Nyb2xsQmVoYXZpb3IiLCJzdGFydGVkIiwiaW5zdGFsbGVkQXBwcyIsInJlYWN0aXZlUm91dGUiLCJ1bm1vdW50QXBwIiwicHJvbWlzZSIsInJlY29yZEZyb20iLCJyZWNvcmRUbyIsIl9ob2lzdGVkXzE1IiwiX2hvaXN0ZWRfMTYiLCJfaG9pc3RlZF8xNyIsIl9ob2lzdGVkXzE4IiwiX2hvaXN0ZWRfMTkiLCJfaG9pc3RlZF8yMSIsIl9ob2lzdGVkXzE0IiwiX2hvaXN0ZWRfMjAiLCJfcmVuZGVyTGlzdCIsIl9ob2lzdGVkXzIyIiwiX2hvaXN0ZWRfMjQiLCJfaG9pc3RlZF8yNSIsIl9ob2lzdGVkXzI2IiwiaGVpZ2h0Iiwid2lkdGgiLCJjYW52YXMiLCJteV9pbWFnZV9kYXRhIiwicm93X2luZGV4IiwiY29sX2luZGV4IiwiZGF0YV9pbmRleCIsIl9ob2lzdGVkXzIzIiwiX2hvaXN0ZWRfMjciLCJfaG9pc3RlZF8yOCIsIl9ob2lzdGVkXzMwIiwiX2hvaXN0ZWRfMzEiLCJfaG9pc3RlZF8zMiIsIl9ob2lzdGVkXzM1IiwiX2hvaXN0ZWRfMzQiLCJfaG9pc3RlZF8zNiIsIl9ob2lzdGVkXzM3IiwiX2hvaXN0ZWRfNDAiLCJfaG9pc3RlZF80MSIsIl9ob2lzdGVkXzQzIiwiX3ZNb2RlbFRleHQiLCJfd2l0aEtleXMiLCJfaG9pc3RlZF8zMyIsIl9ob2lzdGVkXzM4IiwiX2hvaXN0ZWRfMzkiLCJfaG9pc3RlZF80MiIsIl9ob2lzdGVkXzQ4IiwiSG9tZVZpZXciLCJDcnVkVmlldyIsIkxvZ2luVmlldyIsIlBhc3N3b3JkUmVzZXRWaWV3IiwidG9wIiwiYm90dG9tIiwicmlnaHQiLCJsZWZ0IiwiYXV0byIsImJhc2VQbGFjZW1lbnRzIiwiY2xpcHBpbmdQYXJlbnRzIiwidmlld3BvcnQiLCJwb3BwZXIiLCJyZWZlcmVuY2UiLCJ2YXJpYXRpb25QbGFjZW1lbnRzIiwiYWNjIiwicGxhY2VtZW50IiwicGxhY2VtZW50cyIsImJlZm9yZVJlYWQiLCJyZWFkIiwiYWZ0ZXJSZWFkIiwiYmVmb3JlTWFpbiIsIm1haW4iLCJhZnRlck1haW4iLCJiZWZvcmVXcml0ZSIsIndyaXRlIiwiYWZ0ZXJXcml0ZSIsIm1vZGlmaWVyUGhhc2VzIiwiZ2V0Tm9kZU5hbWUiLCJlbGVtZW50IiwiZ2V0V2luZG93Iiwib3duZXJEb2N1bWVudCIsImlzRWxlbWVudCIsIk93bkVsZW1lbnQiLCJpc0hUTUxFbGVtZW50IiwiaXNTaGFkb3dSb290IiwiYXBwbHlTdHlsZXMiLCJfcmVmIiwiYXR0cmlidXRlcyIsIl9yZWYyIiwiaW5pdGlhbFN0eWxlcyIsInN0eWxlUHJvcGVydGllcyIsInByb3BlcnR5IiwiYXR0cmlidXRlIiwiYXBwbHlTdHlsZXMkMSIsImdldEJhc2VQbGFjZW1lbnQiLCJtYXgiLCJtaW4iLCJyb3VuZCIsImdldFVBU3RyaW5nIiwidWFEYXRhIiwiaXNMYXlvdXRWaWV3cG9ydCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImluY2x1ZGVTY2FsZSIsImlzRml4ZWRTdHJhdGVneSIsImNsaWVudFJlY3QiLCJzY2FsZVgiLCJzY2FsZVkiLCJ2aXN1YWxWaWV3cG9ydCIsImFkZFZpc3VhbE9mZnNldHMiLCJ4IiwieSIsImdldExheW91dFJlY3QiLCJjb250YWlucyIsInJvb3ROb2RlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImlzVGFibGVFbGVtZW50IiwiZ2V0RG9jdW1lbnRFbGVtZW50IiwiZ2V0UGFyZW50Tm9kZSIsImdldFRydWVPZmZzZXRQYXJlbnQiLCJnZXRDb250YWluaW5nQmxvY2siLCJpc0ZpcmVmb3giLCJpc0lFIiwiZWxlbWVudENzcyIsImN1cnJlbnROb2RlIiwiY3NzIiwiZ2V0T2Zmc2V0UGFyZW50Iiwid2luZG93Iiwib2Zmc2V0UGFyZW50IiwiZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50Iiwid2l0aGluIiwibWF0aE1heCIsIm1hdGhNaW4iLCJ3aXRoaW5NYXhDbGFtcCIsImdldEZyZXNoU2lkZU9iamVjdCIsIm1lcmdlUGFkZGluZ09iamVjdCIsInBhZGRpbmdPYmplY3QiLCJleHBhbmRUb0hhc2hNYXAiLCJoYXNoTWFwIiwidG9QYWRkaW5nT2JqZWN0IiwicGFkZGluZyIsImFycm93IiwiX3N0YXRlJG1vZGlmaWVyc0RhdGEkIiwiYXJyb3dFbGVtZW50IiwicG9wcGVyT2Zmc2V0cyIsImJhc2VQbGFjZW1lbnQiLCJheGlzIiwiaXNWZXJ0aWNhbCIsImFycm93UmVjdCIsIm1pblByb3AiLCJtYXhQcm9wIiwiZW5kRGlmZiIsInN0YXJ0RGlmZiIsImFycm93T2Zmc2V0UGFyZW50IiwiY2xpZW50U2l6ZSIsImNlbnRlclRvUmVmZXJlbmNlIiwiY2VudGVyIiwiYXhpc1Byb3AiLCJfb3B0aW9ucyRlbGVtZW50IiwiYXJyb3ckMSIsImdldFZhcmlhdGlvbiIsInVuc2V0U2lkZXMiLCJyb3VuZE9mZnNldHNCeURQUiIsIndpbiIsImRwciIsIm1hcFRvU3R5bGVzIiwiX09iamVjdCRhc3NpZ24yIiwicG9wcGVyUmVjdCIsInZhcmlhdGlvbiIsIm9mZnNldHMiLCJncHVBY2NlbGVyYXRpb24iLCJhZGFwdGl2ZSIsInJvdW5kT2Zmc2V0cyIsImlzRml4ZWQiLCJfb2Zmc2V0cyR4IiwiX29mZnNldHMkeSIsIl9yZWYzIiwiaGFzWCIsImhhc1kiLCJzaWRlWCIsInNpZGVZIiwiaGVpZ2h0UHJvcCIsIndpZHRoUHJvcCIsIm9mZnNldFkiLCJvZmZzZXRYIiwiY29tbW9uU3R5bGVzIiwiX3JlZjQiLCJfT2JqZWN0JGFzc2lnbiIsImNvbXB1dGVTdHlsZXMiLCJfcmVmNSIsIl9vcHRpb25zJGdwdUFjY2VsZXJhdCIsIl9vcHRpb25zJGFkYXB0aXZlIiwiX29wdGlvbnMkcm91bmRPZmZzZXRzIiwiY29tcHV0ZVN0eWxlcyQxIiwicGFzc2l2ZSIsIl9vcHRpb25zJHNjcm9sbCIsIl9vcHRpb25zJHJlc2l6ZSIsInJlc2l6ZSIsInNjcm9sbFBhcmVudHMiLCJzY3JvbGxQYXJlbnQiLCJldmVudExpc3RlbmVycyIsImdldE9wcG9zaXRlUGxhY2VtZW50IiwiZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQiLCJnZXRXaW5kb3dTY3JvbGwiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiZ2V0V2luZG93U2Nyb2xsQmFyWCIsImdldFZpZXdwb3J0UmVjdCIsInN0cmF0ZWd5IiwiaHRtbCIsImxheW91dFZpZXdwb3J0IiwiZ2V0RG9jdW1lbnRSZWN0IiwiX2VsZW1lbnQkb3duZXJEb2N1bWVuIiwid2luU2Nyb2xsIiwiYm9keSIsImlzU2Nyb2xsUGFyZW50IiwiX2dldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsIm92ZXJmbG93WSIsImdldFNjcm9sbFBhcmVudCIsImxpc3RTY3JvbGxQYXJlbnRzIiwiaXNCb2R5IiwidXBkYXRlZExpc3QiLCJyZWN0VG9DbGllbnRSZWN0IiwicmVjdCIsImdldElubmVyQm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUiLCJjbGlwcGluZ1BhcmVudCIsImdldENsaXBwaW5nUGFyZW50cyIsImNhbkVzY2FwZUNsaXBwaW5nIiwiY2xpcHBlckVsZW1lbnQiLCJnZXRDbGlwcGluZ1JlY3QiLCJib3VuZGFyeSIsInJvb3RCb3VuZGFyeSIsIm1haW5DbGlwcGluZ1BhcmVudHMiLCJmaXJzdENsaXBwaW5nUGFyZW50IiwiY2xpcHBpbmdSZWN0IiwiYWNjUmVjdCIsImNvbXB1dGVPZmZzZXRzIiwiY29tbW9uWCIsImNvbW1vblkiLCJtYWluQXhpcyIsImRldGVjdE92ZXJmbG93IiwiX29wdGlvbnMiLCJfb3B0aW9ucyRwbGFjZW1lbnQiLCJfb3B0aW9ucyRzdHJhdGVneSIsIl9vcHRpb25zJGJvdW5kYXJ5IiwiX29wdGlvbnMkcm9vdEJvdW5kYXJ5IiwiX29wdGlvbnMkZWxlbWVudENvbnRlIiwiZWxlbWVudENvbnRleHQiLCJfb3B0aW9ucyRhbHRCb3VuZGFyeSIsImFsdEJvdW5kYXJ5IiwiX29wdGlvbnMkcGFkZGluZyIsImFsdENvbnRleHQiLCJjbGlwcGluZ0NsaWVudFJlY3QiLCJyZWZlcmVuY2VDbGllbnRSZWN0IiwicG9wcGVyQ2xpZW50UmVjdCIsImVsZW1lbnRDbGllbnRSZWN0Iiwib3ZlcmZsb3dPZmZzZXRzIiwib2Zmc2V0RGF0YSIsIm11bHRpcGx5IiwiY29tcHV0ZUF1dG9QbGFjZW1lbnQiLCJmbGlwVmFyaWF0aW9ucyIsIl9vcHRpb25zJGFsbG93ZWRBdXRvUCIsImFsbG93ZWRBdXRvUGxhY2VtZW50cyIsImFsbFBsYWNlbWVudHMiLCJhbGxvd2VkUGxhY2VtZW50cyIsIm92ZXJmbG93cyIsImdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzIiwib3Bwb3NpdGVQbGFjZW1lbnQiLCJmbGlwIiwiX29wdGlvbnMkbWFpbkF4aXMiLCJjaGVja01haW5BeGlzIiwiX29wdGlvbnMkYWx0QXhpcyIsImNoZWNrQWx0QXhpcyIsInNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyIsIl9vcHRpb25zJGZsaXBWYXJpYXRpbyIsInByZWZlcnJlZFBsYWNlbWVudCIsImlzQmFzZVBsYWNlbWVudCIsImZhbGxiYWNrUGxhY2VtZW50cyIsInJlZmVyZW5jZVJlY3QiLCJjaGVja3NNYXAiLCJtYWtlRmFsbGJhY2tDaGVja3MiLCJmaXJzdEZpdHRpbmdQbGFjZW1lbnQiLCJfYmFzZVBsYWNlbWVudCIsImlzU3RhcnRWYXJpYXRpb24iLCJtYWluVmFyaWF0aW9uU2lkZSIsImFsdFZhcmlhdGlvblNpZGUiLCJjaGVja3MiLCJudW1iZXJPZkNoZWNrcyIsIl9sb29wIiwiX2kiLCJmaXR0aW5nUGxhY2VtZW50IiwiX3JldCIsImZsaXAkMSIsImdldFNpZGVPZmZzZXRzIiwicHJldmVudGVkT2Zmc2V0cyIsImlzQW55U2lkZUZ1bGx5Q2xpcHBlZCIsInNpZGUiLCJoaWRlIiwicmVmZXJlbmNlT3ZlcmZsb3ciLCJwb3BwZXJBbHRPdmVyZmxvdyIsInJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyIsInBvcHBlckVzY2FwZU9mZnNldHMiLCJpc1JlZmVyZW5jZUhpZGRlbiIsImhhc1BvcHBlckVzY2FwZWQiLCJoaWRlJDEiLCJkaXN0YW5jZUFuZFNraWRkaW5nVG9YWSIsInJlY3RzIiwiaW52ZXJ0RGlzdGFuY2UiLCJza2lkZGluZyIsImRpc3RhbmNlIiwiX29wdGlvbnMkb2Zmc2V0IiwiX2RhdGEkc3RhdGUkcGxhY2VtZW50Iiwib2Zmc2V0JDEiLCJwb3BwZXJPZmZzZXRzJDEiLCJnZXRBbHRBeGlzIiwicHJldmVudE92ZXJmbG93IiwiX29wdGlvbnMkdGV0aGVyIiwidGV0aGVyIiwiX29wdGlvbnMkdGV0aGVyT2Zmc2V0IiwidGV0aGVyT2Zmc2V0IiwiYWx0QXhpcyIsInRldGhlck9mZnNldFZhbHVlIiwibm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlIiwib2Zmc2V0TW9kaWZpZXJTdGF0ZSIsIl9vZmZzZXRNb2RpZmllclN0YXRlJCIsIm1haW5TaWRlIiwiYWx0U2lkZSIsImFkZGl0aXZlIiwibWluTGVuIiwibWF4TGVuIiwiYXJyb3dQYWRkaW5nT2JqZWN0IiwiYXJyb3dQYWRkaW5nTWluIiwiYXJyb3dQYWRkaW5nTWF4IiwiYXJyb3dMZW4iLCJtaW5PZmZzZXQiLCJtYXhPZmZzZXQiLCJjbGllbnRPZmZzZXQiLCJvZmZzZXRNb2RpZmllclZhbHVlIiwidGV0aGVyTWluIiwidGV0aGVyTWF4IiwicHJldmVudGVkT2Zmc2V0IiwiX29mZnNldE1vZGlmaWVyU3RhdGUkMiIsIl9tYWluU2lkZSIsIl9hbHRTaWRlIiwiX29mZnNldCIsIl9sZW4iLCJfbWluIiwiX21heCIsImlzT3JpZ2luU2lkZSIsIl9vZmZzZXRNb2RpZmllclZhbHVlIiwiX3RldGhlck1pbiIsIl90ZXRoZXJNYXgiLCJfcHJldmVudGVkT2Zmc2V0IiwicHJldmVudE92ZXJmbG93JDEiLCJnZXRIVE1MRWxlbWVudFNjcm9sbCIsImdldE5vZGVTY3JvbGwiLCJpc0VsZW1lbnRTY2FsZWQiLCJnZXRDb21wb3NpdGVSZWN0IiwiZWxlbWVudE9yVmlydHVhbEVsZW1lbnQiLCJpc09mZnNldFBhcmVudEFuRWxlbWVudCIsIm9mZnNldFBhcmVudElzU2NhbGVkIiwiZG9jdW1lbnRFbGVtZW50Iiwib3JkZXIiLCJ2aXNpdGVkIiwibW9kaWZpZXIiLCJzb3J0IiwicmVxdWlyZXMiLCJkZXBNb2RpZmllciIsIm9yZGVyTW9kaWZpZXJzIiwib3JkZXJlZE1vZGlmaWVycyIsInBoYXNlIiwiZGVib3VuY2UiLCJwZW5kaW5nIiwibWVyZ2VCeU5hbWUiLCJERUZBVUxUX09QVElPTlMiLCJhcmVWYWxpZEVsZW1lbnRzIiwicG9wcGVyR2VuZXJhdG9yIiwiZ2VuZXJhdG9yT3B0aW9ucyIsIl9nZW5lcmF0b3JPcHRpb25zIiwiX2dlbmVyYXRvck9wdGlvbnMkZGVmIiwiZGVmYXVsdE1vZGlmaWVycyIsIl9nZW5lcmF0b3JPcHRpb25zJGRlZjIiLCJkZWZhdWx0T3B0aW9ucyIsImVmZmVjdENsZWFudXBGbnMiLCJpc0Rlc3Ryb3llZCIsInNldE9wdGlvbnNBY3Rpb24iLCJjbGVhbnVwTW9kaWZpZXJFZmZlY3RzIiwicnVuTW9kaWZpZXJFZmZlY3RzIiwiX3N0YXRlJGVsZW1lbnRzIiwiX3N0YXRlJG9yZGVyZWRNb2RpZmllIiwiX3N0YXRlJG9yZGVyZWRNb2RpZmllMiIsIl9yZWYzJG9wdGlvbnMiLCJjbGVhbnVwRm4iLCJub29wRm4iLCJjcmVhdGVQb3BwZXIiLCJnbG9iYWwiLCJmYWN0b3J5IiwibW9kdWxlIiwicmVxdWlyZSQkMCIsInRoaXMiLCJQb3BwZXIiLCJfaW50ZXJvcE5hbWVzcGFjZSIsImQiLCJQb3BwZXJfX25hbWVzcGFjZSIsIk1BWF9VSUQiLCJNSUxMSVNFQ09ORFNfTVVMVElQTElFUiIsIlRSQU5TSVRJT05fRU5EIiwidG9UeXBlIiwib2JqZWN0IiwiZ2V0VUlEIiwicHJlZml4IiwiZ2V0U2VsZWN0b3IiLCJocmVmQXR0cmlidXRlIiwiZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCIsImdldEVsZW1lbnRGcm9tU2VsZWN0b3IiLCJnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCIsInRyYW5zaXRpb25EdXJhdGlvbiIsInRyYW5zaXRpb25EZWxheSIsImZsb2F0VHJhbnNpdGlvbkR1cmF0aW9uIiwiZmxvYXRUcmFuc2l0aW9uRGVsYXkiLCJ0cmlnZ2VyVHJhbnNpdGlvbkVuZCIsImdldEVsZW1lbnQiLCJpc1Zpc2libGUiLCJlbGVtZW50SXNWaXNpYmxlIiwiY2xvc2VkRGV0YWlscyIsInN1bW1hcnkiLCJpc0Rpc2FibGVkIiwiZmluZFNoYWRvd1Jvb3QiLCJyZWZsb3ciLCJnZXRqUXVlcnkiLCJET01Db250ZW50TG9hZGVkQ2FsbGJhY2tzIiwib25ET01Db250ZW50TG9hZGVkIiwiaXNSVEwiLCJkZWZpbmVKUXVlcnlQbHVnaW4iLCIkIiwiSlFVRVJZX05PX0NPTkZMSUNUIiwiZXhlY3V0ZSIsImV4ZWN1dGVBZnRlclRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uRWxlbWVudCIsIndhaXRGb3JUcmFuc2l0aW9uIiwiZHVyYXRpb25QYWRkaW5nIiwiZW11bGF0ZWREdXJhdGlvbiIsImdldE5leHRBY3RpdmVFbGVtZW50IiwiYWN0aXZlRWxlbWVudCIsInNob3VsZEdldE5leHQiLCJpc0N5Y2xlQWxsb3dlZCIsImxpc3RMZW5ndGgiLCJuYW1lc3BhY2VSZWdleCIsInN0cmlwTmFtZVJlZ2V4Iiwic3RyaXBVaWRSZWdleCIsImV2ZW50UmVnaXN0cnkiLCJ1aWRFdmVudCIsImN1c3RvbUV2ZW50cyIsIm5hdGl2ZUV2ZW50cyIsIm1ha2VFdmVudFVpZCIsImdldEVsZW1lbnRFdmVudHMiLCJib290c3RyYXBIYW5kbGVyIiwiaHlkcmF0ZU9iaiIsIkV2ZW50SGFuZGxlciIsImJvb3RzdHJhcERlbGVnYXRpb25IYW5kbGVyIiwiZG9tRWxlbWVudHMiLCJkb21FbGVtZW50IiwiZmluZEhhbmRsZXIiLCJldmVudHMiLCJjYWxsYWJsZSIsImRlbGVnYXRpb25TZWxlY3RvciIsIm5vcm1hbGl6ZVBhcmFtZXRlcnMiLCJvcmlnaW5hbFR5cGVFdmVudCIsImRlbGVnYXRpb25GdW5jdGlvbiIsImlzRGVsZWdhdGVkIiwidHlwZUV2ZW50IiwiZ2V0VHlwZUV2ZW50IiwiYWRkSGFuZGxlciIsIm9uZU9mZiIsInByZXZpb3VzRnVuY3Rpb24iLCJyZW1vdmVIYW5kbGVyIiwicmVtb3ZlTmFtZXNwYWNlZEhhbmRsZXJzIiwibmFtZXNwYWNlIiwic3RvcmVFbGVtZW50RXZlbnQiLCJoYW5kbGVyS2V5IiwiaW5OYW1lc3BhY2UiLCJpc05hbWVzcGFjZSIsImVsZW1lbnRFdmVudCIsImtleUhhbmRsZXJzIiwialF1ZXJ5RXZlbnQiLCJidWJibGVzIiwibmF0aXZlRGlzcGF0Y2giLCJkZWZhdWx0UHJldmVudGVkIiwiZXZ0IiwiZWxlbWVudE1hcCIsIkRhdGEiLCJpbnN0YW5jZU1hcCIsIm5vcm1hbGl6ZURhdGEiLCJub3JtYWxpemVEYXRhS2V5IiwiY2hyIiwiTWFuaXB1bGF0b3IiLCJic0tleXMiLCJwdXJlS2V5IiwiQ29uZmlnIiwiY29uZmlnIiwianNvbkNvbmZpZyIsImNvbmZpZ1R5cGVzIiwidmFsdWVUeXBlIiwiVkVSU0lPTiIsIkJhc2VDb21wb25lbnQiLCJwcm9wZXJ0eU5hbWUiLCJpc0FuaW1hdGVkIiwiZW5hYmxlRGlzbWlzc1RyaWdnZXIiLCJjbGlja0V2ZW50IiwiTkFNRSRmIiwiRVZFTlRfS0VZJGIiLCJFVkVOVF9DTE9TRSIsIkVWRU5UX0NMT1NFRCIsIkNMQVNTX05BTUVfRkFERSQ1IiwiQ0xBU1NfTkFNRV9TSE9XJDgiLCJBbGVydCIsIk5BTUUkZSIsIkVWRU5UX0tFWSRhIiwiREFUQV9BUElfS0VZJDYiLCJDTEFTU19OQU1FX0FDVElWRSQzIiwiU0VMRUNUT1JfREFUQV9UT0dHTEUkNSIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJJDYiLCJCdXR0b24iLCJidXR0b24iLCJTZWxlY3RvckVuZ2luZSIsInBhcmVudHMiLCJhbmNlc3RvciIsInByZXZpb3VzIiwiZm9jdXNhYmxlcyIsIk5BTUUkZCIsIkVWRU5UX0tFWSQ5IiwiRVZFTlRfVE9VQ0hTVEFSVCIsIkVWRU5UX1RPVUNITU9WRSIsIkVWRU5UX1RPVUNIRU5EIiwiRVZFTlRfUE9JTlRFUkRPV04iLCJFVkVOVF9QT0lOVEVSVVAiLCJQT0lOVEVSX1RZUEVfVE9VQ0giLCJQT0lOVEVSX1RZUEVfUEVOIiwiQ0xBU1NfTkFNRV9QT0lOVEVSX0VWRU5UIiwiU1dJUEVfVEhSRVNIT0xEIiwiRGVmYXVsdCRjIiwiRGVmYXVsdFR5cGUkYyIsIlN3aXBlIiwiYWJzRGVsdGFYIiwiZGlyZWN0aW9uIiwiTkFNRSRjIiwiRVZFTlRfS0VZJDgiLCJEQVRBX0FQSV9LRVkkNSIsIkFSUk9XX0xFRlRfS0VZJDEiLCJBUlJPV19SSUdIVF9LRVkkMSIsIlRPVUNIRVZFTlRfQ09NUEFUX1dBSVQiLCJPUkRFUl9ORVhUIiwiT1JERVJfUFJFViIsIkRJUkVDVElPTl9MRUZUIiwiRElSRUNUSU9OX1JJR0hUIiwiRVZFTlRfU0xJREUiLCJFVkVOVF9TTElEIiwiRVZFTlRfS0VZRE9XTiQxIiwiRVZFTlRfTU9VU0VFTlRFUiQxIiwiRVZFTlRfTU9VU0VMRUFWRSQxIiwiRVZFTlRfRFJBR19TVEFSVCIsIkVWRU5UX0xPQURfREFUQV9BUEkkMyIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJJDUiLCJDTEFTU19OQU1FX0NBUk9VU0VMIiwiQ0xBU1NfTkFNRV9BQ1RJVkUkMiIsIkNMQVNTX05BTUVfU0xJREUiLCJDTEFTU19OQU1FX0VORCIsIkNMQVNTX05BTUVfU1RBUlQiLCJDTEFTU19OQU1FX05FWFQiLCJDTEFTU19OQU1FX1BSRVYiLCJTRUxFQ1RPUl9BQ1RJVkUiLCJTRUxFQ1RPUl9JVEVNIiwiU0VMRUNUT1JfQUNUSVZFX0lURU0iLCJTRUxFQ1RPUl9JVEVNX0lNRyIsIlNFTEVDVE9SX0lORElDQVRPUlMiLCJTRUxFQ1RPUl9EQVRBX1NMSURFIiwiU0VMRUNUT1JfREFUQV9SSURFIiwiS0VZX1RPX0RJUkVDVElPTiIsIkRlZmF1bHQkYiIsIkRlZmF1bHRUeXBlJGIiLCJDYXJvdXNlbCIsIml0ZW1zIiwiYWN0aXZlSW5kZXgiLCJpbWciLCJzd2lwZUNvbmZpZyIsImFjdGl2ZUluZGljYXRvciIsIm5ld0FjdGl2ZUluZGljYXRvciIsImVsZW1lbnRJbnRlcnZhbCIsImlzTmV4dCIsIm5leHRFbGVtZW50IiwibmV4dEVsZW1lbnRJbmRleCIsInRyaWdnZXJFdmVudCIsImV2ZW50TmFtZSIsImlzQ3ljbGluZyIsImRpcmVjdGlvbmFsQ2xhc3NOYW1lIiwib3JkZXJDbGFzc05hbWUiLCJjb21wbGV0ZUNhbGxCYWNrIiwiY2Fyb3VzZWwiLCJzbGlkZUluZGV4IiwiY2Fyb3VzZWxzIiwiTkFNRSRiIiwiRVZFTlRfS0VZJDciLCJEQVRBX0FQSV9LRVkkNCIsIkVWRU5UX1NIT1ckNiIsIkVWRU5UX1NIT1dOJDYiLCJFVkVOVF9ISURFJDYiLCJFVkVOVF9ISURERU4kNiIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJJDQiLCJDTEFTU19OQU1FX1NIT1ckNyIsIkNMQVNTX05BTUVfQ09MTEFQU0UiLCJDTEFTU19OQU1FX0NPTExBUFNJTkciLCJDTEFTU19OQU1FX0NPTExBUFNFRCIsIkNMQVNTX05BTUVfREVFUEVSX0NISUxEUkVOIiwiQ0xBU1NfTkFNRV9IT1JJWk9OVEFMIiwiV0lEVEgiLCJIRUlHSFQiLCJTRUxFQ1RPUl9BQ1RJVkVTIiwiU0VMRUNUT1JfREFUQV9UT0dHTEUkNCIsIkRlZmF1bHQkYSIsIkRlZmF1bHRUeXBlJGEiLCJDb2xsYXBzZSIsInRvZ2dsZUxpc3QiLCJlbGVtIiwiZmlsdGVyRWxlbWVudCIsImZvdW5kRWxlbWVudCIsImFjdGl2ZUNoaWxkcmVuIiwiYWN0aXZlSW5zdGFuY2UiLCJkaW1lbnNpb24iLCJjb21wbGV0ZSIsInNjcm9sbFNpemUiLCJzZWxlY3RlZCIsInRyaWdnZXJBcnJheSIsImlzT3BlbiIsIl9jb25maWciLCJzZWxlY3RvckVsZW1lbnRzIiwiTkFNRSRhIiwiRVZFTlRfS0VZJDYiLCJEQVRBX0FQSV9LRVkkMyIsIkVTQ0FQRV9LRVkkMiIsIlRBQl9LRVkkMSIsIkFSUk9XX1VQX0tFWSQxIiwiQVJST1dfRE9XTl9LRVkkMSIsIlJJR0hUX01PVVNFX0JVVFRPTiIsIkVWRU5UX0hJREUkNSIsIkVWRU5UX0hJRERFTiQ1IiwiRVZFTlRfU0hPVyQ1IiwiRVZFTlRfU0hPV04kNSIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJJDMiLCJFVkVOVF9LRVlET1dOX0RBVEFfQVBJIiwiRVZFTlRfS0VZVVBfREFUQV9BUEkiLCJDTEFTU19OQU1FX1NIT1ckNiIsIkNMQVNTX05BTUVfRFJPUFVQIiwiQ0xBU1NfTkFNRV9EUk9QRU5EIiwiQ0xBU1NfTkFNRV9EUk9QU1RBUlQiLCJDTEFTU19OQU1FX0RST1BVUF9DRU5URVIiLCJDTEFTU19OQU1FX0RST1BET1dOX0NFTlRFUiIsIlNFTEVDVE9SX0RBVEFfVE9HR0xFJDMiLCJTRUxFQ1RPUl9EQVRBX1RPR0dMRV9TSE9XTiIsIlNFTEVDVE9SX01FTlUiLCJTRUxFQ1RPUl9OQVZCQVIiLCJTRUxFQ1RPUl9OQVZCQVJfTkFWIiwiU0VMRUNUT1JfVklTSUJMRV9JVEVNUyIsIlBMQUNFTUVOVF9UT1AiLCJQTEFDRU1FTlRfVE9QRU5EIiwiUExBQ0VNRU5UX0JPVFRPTSIsIlBMQUNFTUVOVF9CT1RUT01FTkQiLCJQTEFDRU1FTlRfUklHSFQiLCJQTEFDRU1FTlRfTEVGVCIsIlBMQUNFTUVOVF9UT1BDRU5URVIiLCJQTEFDRU1FTlRfQk9UVE9NQ0VOVEVSIiwiRGVmYXVsdCQ5IiwiRGVmYXVsdFR5cGUkOSIsIkRyb3Bkb3duIiwicmVsYXRlZFRhcmdldCIsInJlZmVyZW5jZUVsZW1lbnQiLCJwb3BwZXJDb25maWciLCJwYXJlbnREcm9wZG93biIsImlzRW5kIiwicG9wcGVyRGF0YSIsImRlZmF1bHRCc1BvcHBlckNvbmZpZyIsIm9wZW5Ub2dnbGVzIiwidG9nZ2xlIiwiY29tcG9zZWRQYXRoIiwiaXNNZW51VGFyZ2V0IiwiaXNJbnB1dCIsImlzRXNjYXBlRXZlbnQiLCJpc1VwT3JEb3duRXZlbnQiLCJnZXRUb2dnbGVCdXR0b24iLCJTRUxFQ1RPUl9GSVhFRF9DT05URU5UIiwiU0VMRUNUT1JfU1RJQ0tZX0NPTlRFTlQiLCJQUk9QRVJUWV9QQURESU5HIiwiUFJPUEVSVFlfTUFSR0lOIiwiU2Nyb2xsQmFySGVscGVyIiwiZG9jdW1lbnRXaWR0aCIsImNhbGN1bGF0ZWRWYWx1ZSIsInN0eWxlUHJvcGVydHkiLCJzY3JvbGxiYXJXaWR0aCIsIm1hbmlwdWxhdGlvbkNhbGxCYWNrIiwiYWN0dWFsVmFsdWUiLCJjYWxsQmFjayIsInNlbCIsIk5BTUUkOSIsIkNMQVNTX05BTUVfRkFERSQ0IiwiQ0xBU1NfTkFNRV9TSE9XJDUiLCJFVkVOVF9NT1VTRURPV04iLCJEZWZhdWx0JDgiLCJEZWZhdWx0VHlwZSQ4IiwiQmFja2Ryb3AiLCJiYWNrZHJvcCIsIk5BTUUkOCIsIkVWRU5UX0tFWSQ1IiwiRVZFTlRfRk9DVVNJTiQyIiwiRVZFTlRfS0VZRE9XTl9UQUIiLCJUQUJfS0VZIiwiVEFCX05BVl9GT1JXQVJEIiwiVEFCX05BVl9CQUNLV0FSRCIsIkRlZmF1bHQkNyIsIkRlZmF1bHRUeXBlJDciLCJGb2N1c1RyYXAiLCJ0cmFwRWxlbWVudCIsImVsZW1lbnRzIiwiTkFNRSQ3IiwiRVZFTlRfS0VZJDQiLCJEQVRBX0FQSV9LRVkkMiIsIkVTQ0FQRV9LRVkkMSIsIkVWRU5UX0hJREUkNCIsIkVWRU5UX0hJREVfUFJFVkVOVEVEJDEiLCJFVkVOVF9ISURERU4kNCIsIkVWRU5UX1NIT1ckNCIsIkVWRU5UX1NIT1dOJDQiLCJFVkVOVF9SRVNJWkUkMSIsIkVWRU5UX0NMSUNLX0RJU01JU1MiLCJFVkVOVF9NT1VTRURPV05fRElTTUlTUyIsIkVWRU5UX0tFWURPV05fRElTTUlTUyQxIiwiRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMiIsIkNMQVNTX05BTUVfT1BFTiIsIkNMQVNTX05BTUVfRkFERSQzIiwiQ0xBU1NfTkFNRV9TSE9XJDQiLCJDTEFTU19OQU1FX1NUQVRJQyIsIk9QRU5fU0VMRUNUT1IkMSIsIlNFTEVDVE9SX0RJQUxPRyIsIlNFTEVDVE9SX01PREFMX0JPRFkiLCJTRUxFQ1RPUl9EQVRBX1RPR0dMRSQyIiwiRGVmYXVsdCQ2IiwiRGVmYXVsdFR5cGUkNiIsIk1vZGFsIiwiaHRtbEVsZW1lbnQiLCJtb2RhbEJvZHkiLCJ0cmFuc2l0aW9uQ29tcGxldGUiLCJldmVudDIiLCJpc01vZGFsT3ZlcmZsb3dpbmciLCJpbml0aWFsT3ZlcmZsb3dZIiwiaXNCb2R5T3ZlcmZsb3dpbmciLCJzaG93RXZlbnQiLCJhbHJlYWR5T3BlbiIsIk5BTUUkNiIsIkVWRU5UX0tFWSQzIiwiREFUQV9BUElfS0VZJDEiLCJFVkVOVF9MT0FEX0RBVEFfQVBJJDIiLCJFU0NBUEVfS0VZIiwiQ0xBU1NfTkFNRV9TSE9XJDMiLCJDTEFTU19OQU1FX1NIT1dJTkckMSIsIkNMQVNTX05BTUVfSElESU5HIiwiQ0xBU1NfTkFNRV9CQUNLRFJPUCIsIk9QRU5fU0VMRUNUT1IiLCJFVkVOVF9TSE9XJDMiLCJFVkVOVF9TSE9XTiQzIiwiRVZFTlRfSElERSQzIiwiRVZFTlRfSElERV9QUkVWRU5URUQiLCJFVkVOVF9ISURERU4kMyIsIkVWRU5UX1JFU0laRSIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJJDEiLCJFVkVOVF9LRVlET1dOX0RJU01JU1MiLCJTRUxFQ1RPUl9EQVRBX1RPR0dMRSQxIiwiRGVmYXVsdCQ1IiwiRGVmYXVsdFR5cGUkNSIsIk9mZmNhbnZhcyIsImNvbXBsZXRlQ2FsbGJhY2siLCJjbGlja0NhbGxiYWNrIiwidXJpQXR0cmlidXRlcyIsIkFSSUFfQVRUUklCVVRFX1BBVFRFUk4iLCJTQUZFX1VSTF9QQVRURVJOIiwiREFUQV9VUkxfUEFUVEVSTiIsImFsbG93ZWRBdHRyaWJ1dGUiLCJhbGxvd2VkQXR0cmlidXRlTGlzdCIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVSZWdleCIsIkRlZmF1bHRBbGxvd2xpc3QiLCJzYW5pdGl6ZUh0bWwiLCJ1bnNhZmVIdG1sIiwiYWxsb3dMaXN0Iiwic2FuaXRpemVGdW5jdGlvbiIsImNyZWF0ZWREb2N1bWVudCIsImVsZW1lbnROYW1lIiwiYXR0cmlidXRlTGlzdCIsImFsbG93ZWRBdHRyaWJ1dGVzIiwiTkFNRSQ1IiwiRGVmYXVsdCQ0IiwiRGVmYXVsdFR5cGUkNCIsIkRlZmF1bHRDb250ZW50VHlwZSIsIlRlbXBsYXRlRmFjdG9yeSIsInRlbXBsYXRlV3JhcHBlciIsImV4dHJhQ2xhc3MiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJOQU1FJDQiLCJESVNBTExPV0VEX0FUVFJJQlVURVMiLCJDTEFTU19OQU1FX0ZBREUkMiIsIkNMQVNTX05BTUVfTU9EQUwiLCJDTEFTU19OQU1FX1NIT1ckMiIsIlNFTEVDVE9SX1RPT0xUSVBfSU5ORVIiLCJTRUxFQ1RPUl9NT0RBTCIsIkVWRU5UX01PREFMX0hJREUiLCJUUklHR0VSX0hPVkVSIiwiVFJJR0dFUl9GT0NVUyIsIlRSSUdHRVJfQ0xJQ0siLCJUUklHR0VSX01BTlVBTCIsIkVWRU5UX0hJREUkMiIsIkVWRU5UX0hJRERFTiQyIiwiRVZFTlRfU0hPVyQyIiwiRVZFTlRfU0hPV04kMiIsIkVWRU5UX0lOU0VSVEVEIiwiRVZFTlRfQ0xJQ0skMSIsIkVWRU5UX0ZPQ1VTSU4kMSIsIkVWRU5UX0ZPQ1VTT1VUJDEiLCJFVkVOVF9NT1VTRUVOVEVSIiwiRVZFTlRfTU9VU0VMRUFWRSIsIkF0dGFjaG1lbnRNYXAiLCJEZWZhdWx0JDMiLCJEZWZhdWx0VHlwZSQzIiwiVG9vbHRpcCIsImlzSW5UaGVEb20iLCJ0aXAiLCJ0aXBJZCIsImF0dGFjaG1lbnQiLCJ0cmlnZ2VycyIsImV2ZW50SW4iLCJldmVudE91dCIsInRpdGxlIiwidGltZW91dCIsImRhdGFBdHRyaWJ1dGVzIiwiZGF0YUF0dHJpYnV0ZSIsIk5BTUUkMyIsIlNFTEVDVE9SX1RJVExFIiwiU0VMRUNUT1JfQ09OVEVOVCIsIkRlZmF1bHQkMiIsIkRlZmF1bHRUeXBlJDIiLCJQb3BvdmVyIiwiTkFNRSQyIiwiRVZFTlRfS0VZJDIiLCJEQVRBX0FQSV9LRVkiLCJFVkVOVF9BQ1RJVkFURSIsIkVWRU5UX0NMSUNLIiwiRVZFTlRfTE9BRF9EQVRBX0FQSSQxIiwiQ0xBU1NfTkFNRV9EUk9QRE9XTl9JVEVNIiwiQ0xBU1NfTkFNRV9BQ1RJVkUkMSIsIlNFTEVDVE9SX0RBVEFfU1BZIiwiU0VMRUNUT1JfVEFSR0VUX0xJTktTIiwiU0VMRUNUT1JfTkFWX0xJU1RfR1JPVVAiLCJTRUxFQ1RPUl9OQVZfTElOS1MiLCJTRUxFQ1RPUl9MSU5LX0lURU1TIiwiU0VMRUNUT1JfRFJPUERPV04iLCJTRUxFQ1RPUl9EUk9QRE9XTl9UT0dHTEUkMSIsIkRlZmF1bHQkMSIsIkRlZmF1bHRUeXBlJDEiLCJTY3JvbGxTcHkiLCJzZWN0aW9uIiwib2JzZXJ2YWJsZVNlY3Rpb24iLCJ0YXJnZXRFbGVtZW50IiwiZW50cnkiLCJhY3RpdmF0ZSIsInBhcmVudFNjcm9sbFRvcCIsInVzZXJTY3JvbGxzRG93biIsImVudHJ5SXNMb3dlclRoYW5QcmV2aW91cyIsInRhcmdldExpbmtzIiwibGlzdEdyb3VwIiwiYWN0aXZlTm9kZXMiLCJzcHkiLCJOQU1FJDEiLCJFVkVOVF9LRVkkMSIsIkVWRU5UX0hJREUkMSIsIkVWRU5UX0hJRERFTiQxIiwiRVZFTlRfU0hPVyQxIiwiRVZFTlRfU0hPV04kMSIsIkVWRU5UX0NMSUNLX0RBVEFfQVBJIiwiRVZFTlRfS0VZRE9XTiIsIkVWRU5UX0xPQURfREFUQV9BUEkiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsIkFSUk9XX1VQX0tFWSIsIkFSUk9XX0RPV05fS0VZIiwiQ0xBU1NfTkFNRV9BQ1RJVkUiLCJDTEFTU19OQU1FX0ZBREUkMSIsIkNMQVNTX05BTUVfU0hPVyQxIiwiQ0xBU1NfRFJPUERPV04iLCJTRUxFQ1RPUl9EUk9QRE9XTl9UT0dHTEUiLCJTRUxFQ1RPUl9EUk9QRE9XTl9NRU5VIiwiTk9UX1NFTEVDVE9SX0RST1BET1dOX1RPR0dMRSIsIlNFTEVDVE9SX1RBQl9QQU5FTCIsIlNFTEVDVE9SX09VVEVSIiwiU0VMRUNUT1JfSU5ORVIiLCJTRUxFQ1RPUl9EQVRBX1RPR0dMRSIsIlNFTEVDVE9SX0lOTkVSX0VMRU0iLCJTRUxFQ1RPUl9EQVRBX1RPR0dMRV9BQ1RJVkUiLCJUYWIiLCJpbm5lckVsZW0iLCJhY3RpdmUiLCJoaWRlRXZlbnQiLCJyZWxhdGVkRWxlbSIsIm5leHRBY3RpdmVFbGVtZW50Iiwib3V0ZXJFbGVtIiwib3BlbiIsImNsYXNzTmFtZSIsIk5BTUUiLCJFVkVOVF9LRVkiLCJFVkVOVF9NT1VTRU9WRVIiLCJFVkVOVF9NT1VTRU9VVCIsIkVWRU5UX0ZPQ1VTSU4iLCJFVkVOVF9GT0NVU09VVCIsIkVWRU5UX0hJREUiLCJFVkVOVF9ISURERU4iLCJFVkVOVF9TSE9XIiwiRVZFTlRfU0hPV04iLCJDTEFTU19OQU1FX0ZBREUiLCJDTEFTU19OQU1FX0hJREUiLCJDTEFTU19OQU1FX1NIT1ciLCJDTEFTU19OQU1FX1NIT1dJTkciLCJEZWZhdWx0VHlwZSIsIkRlZmF1bHQiLCJUb2FzdCIsImlzSW50ZXJhY3RpbmciLCJBcHAiXSwibWFwcGluZ3MiOiJzc0JBT0EsU0FBU0EsR0FBUUMsRUFBS0MsRUFBa0IsQ0FDcEMsTUFBTUMsRUFBTSxPQUFPLE9BQU8sSUFBSSxFQUN4QkMsRUFBT0gsRUFBSSxNQUFNLEdBQUcsRUFDMUIsUUFBUyxFQUFJLEVBQUcsRUFBSUcsRUFBSyxPQUFRLElBQzdCRCxFQUFJQyxFQUFLLENBQUMsQ0FBQyxFQUFJLEdBRW5CLE9BQU9GLEVBQW1CRyxHQUFP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QUN4QixDQUVELGVBQWdCLENBQ2RuSSxFQUFhLEdBQUcsS0FBSyxTQUFVd2MsR0FBaUIxNkQsR0FBUyxLQUFLLGVBQWVBLEVBQU8sRUFBSSxDQUFDLEVBQ3pGaytDLEVBQWEsR0FBRyxLQUFLLFNBQVV5YyxHQUFnQjM2RCxHQUFTLEtBQUssZUFBZUEsRUFBTyxFQUFLLENBQUMsRUFDekZrK0MsRUFBYSxHQUFHLEtBQUssU0FBVTBjLEdBQWU1NkQsR0FBUyxLQUFLLGVBQWVBLEVBQU8sRUFBSSxDQUFDLEVBQ3ZGaytDLEVBQWEsR0FBRyxLQUFLLFNBQVUyYyxHQUFnQjc2RCxHQUFTLEtBQUssZUFBZUEsRUFBTyxFQUFLLENBQUMsQ0FDMUYsQ0FFRCxlQUFnQixDQUNkLGFBQWEsS0FBSyxRQUFRLEVBQzFCLEtBQUssU0FBVyxJQUNqQixDQUdELE9BQU8sZ0JBQWdCMmdELEVBQVEsQ0FDN0IsT0FBTyxLQUFLLEtBQUssVUFBWSxDQUMzQixNQUFNcCtDLEVBQU9pNUQsR0FBTSxvQkFBb0IsS0FBTTdhLENBQU0sRUFFbkQsR0FBSSxPQUFPQSxHQUFXLFNBQVUsQ0FDOUIsR0FBSSxPQUFPcCtDLEVBQUtvK0MsQ0FBTSxFQUFNLElBQzFCLE1BQU0sSUFBSSxVQUFVLG9CQUFvQkEsSUFBUyxFQUduRHArQyxFQUFLbytDLENBQU0sRUFBRSxJQUFJLENBQ2xCLENBQ1QsQ0FBTyxDQUNGLENBRUYsQ0FNRCxPQUFBUSxFQUFxQnFhLEVBQUssRUFLMUIvZSxFQUFtQitlLEVBQUssRUFRTixDQUNoQixNQUFBN1osR0FDQSxPQUFBTyxHQUNBLFNBQUEwRCxHQUNBLFNBQUF3QyxHQUNBLFNBQUFvRCxHQUNBLE1BQUF5RSxHQUNBLFVBQUErQixHQUNBLFFBQUFzRSxHQUNBLFVBQUFrQixHQUNBLElBQUF1QyxHQUNBLE1BQUF5QixHQUNBLFFBQUFuRyxFQUNKLENBSUEsU0M1bktBLE1BQU10Z0QsR0FBTTJTLEdBQVVnMEMsRUFBRyxFQUV6QjNtRCxHQUFJLElBQUlxbUIsRUFBTSxFQUVkcm1CLEdBQUksTUFBTSxNQUFNIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzAsMSwyLDMsMTIsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsNjIsNjMsNjQsNjUsNjYsNjcsNjgsNjksNzAsNzEsNzIsNzNdfQ==
